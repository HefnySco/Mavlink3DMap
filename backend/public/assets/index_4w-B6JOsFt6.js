import{H as ig}from"./help_text-DRJrZ7Ao.js";function ng(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xo={exports:{}};var rg=Xo.exports,Wh;function ag(){return Wh||(Wh=1,(function(r){(function(t,e){r.exports=t.document?e(t,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return e(i)}})(typeof window<"u"?window:rg,function(t,e){var i=[],n=Object.getPrototypeOf,a=i.slice,o=i.flat?function(h){return i.flat.call(h)}:function(h){return i.concat.apply([],h)},c=i.push,_=i.indexOf,l={},u=l.toString,p=l.hasOwnProperty,f=p.toString,d=f.call(Object),A={},E=function(g){return typeof g=="function"&&typeof g.nodeType!="number"&&typeof g.item!="function"},S=function(g){return g!=null&&g===g.window},y=t.document,M={type:!0,src:!0,nonce:!0,noModule:!0};function x(h,g,T){T=T||y;var v,R,O=T.createElement("script");if(O.text=h,g)for(v in M)R=g[v]||g.getAttribute&&g.getAttribute(v),R&&O.setAttribute(v,R);T.head.appendChild(O).parentNode.removeChild(O)}function I(h){return h==null?h+"":typeof h=="object"||typeof h=="function"?l[u.call(h)]||"object":typeof h}var w="3.7.1",D=/HTML$/i,m=function(h,g){return new m.fn.init(h,g)};m.fn=m.prototype={jquery:w,constructor:m,length:0,toArray:function(){return a.call(this)},get:function(h){return h==null?a.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var g=m.merge(this.constructor(),h);return g.prevObject=this,g},each:function(h){return m.each(this,h)},map:function(h){return this.pushStack(m.map(this,function(g,T){return h.call(g,T,g)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(m.grep(this,function(h,g){return(g+1)%2}))},odd:function(){return this.pushStack(m.grep(this,function(h,g){return g%2}))},eq:function(h){var g=this.length,T=+h+(h<0?g:0);return this.pushStack(T>=0&&T<g?[this[T]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:i.sort,splice:i.splice},m.extend=m.fn.extend=function(){var h,g,T,v,R,O,L=arguments[0]||{},W=1,H=arguments.length,Z=!1;for(typeof L=="boolean"&&(Z=L,L=arguments[W]||{},W++),typeof L!="object"&&!E(L)&&(L={}),W===H&&(L=this,W--);W<H;W++)if((h=arguments[W])!=null)for(g in h)v=h[g],!(g==="__proto__"||L===v)&&(Z&&v&&(m.isPlainObject(v)||(R=Array.isArray(v)))?(T=L[g],R&&!Array.isArray(T)?O=[]:!R&&!m.isPlainObject(T)?O={}:O=T,R=!1,L[g]=m.extend(Z,O,v)):v!==void 0&&(L[g]=v));return L},m.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var g,T;return!h||u.call(h)!=="[object Object]"?!1:(g=n(h),g?(T=p.call(g,"constructor")&&g.constructor,typeof T=="function"&&f.call(T)===d):!0)},isEmptyObject:function(h){var g;for(g in h)return!1;return!0},globalEval:function(h,g,T){x(h,{nonce:g&&g.nonce},T)},each:function(h,g){var T,v=0;if(U(h))for(T=h.length;v<T&&g.call(h[v],v,h[v])!==!1;v++);else for(v in h)if(g.call(h[v],v,h[v])===!1)break;return h},text:function(h){var g,T="",v=0,R=h.nodeType;if(!R)for(;g=h[v++];)T+=m.text(g);return R===1||R===11?h.textContent:R===9?h.documentElement.textContent:R===3||R===4?h.nodeValue:T},makeArray:function(h,g){var T=g||[];return h!=null&&(U(Object(h))?m.merge(T,typeof h=="string"?[h]:h):c.call(T,h)),T},inArray:function(h,g,T){return g==null?-1:_.call(g,h,T)},isXMLDoc:function(h){var g=h&&h.namespaceURI,T=h&&(h.ownerDocument||h).documentElement;return!D.test(g||T&&T.nodeName||"HTML")},merge:function(h,g){for(var T=+g.length,v=0,R=h.length;v<T;v++)h[R++]=g[v];return h.length=R,h},grep:function(h,g,T){for(var v,R=[],O=0,L=h.length,W=!T;O<L;O++)v=!g(h[O],O),v!==W&&R.push(h[O]);return R},map:function(h,g,T){var v,R,O=0,L=[];if(U(h))for(v=h.length;O<v;O++)R=g(h[O],O,T),R!=null&&L.push(R);else for(O in h)R=g(h[O],O,T),R!=null&&L.push(R);return o(L)},guid:1,support:A}),typeof Symbol=="function"&&(m.fn[Symbol.iterator]=i[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(h,g){l["[object "+g+"]"]=g.toLowerCase()});function U(h){var g=!!h&&"length"in h&&h.length,T=I(h);return E(h)||S(h)?!1:T==="array"||g===0||typeof g=="number"&&g>0&&g-1 in h}function q(h,g){return h.nodeName&&h.nodeName.toLowerCase()===g.toLowerCase()}var Y=i.pop,F=i.sort,it=i.splice,G="[\\x20\\t\\r\\n\\f]",K=new RegExp("^"+G+"+|((?:^|[^\\\\])(?:\\\\.)*)"+G+"+$","g");m.contains=function(h,g){var T=g&&g.parentNode;return h===T||!!(T&&T.nodeType===1&&(h.contains?h.contains(T):h.compareDocumentPosition&&h.compareDocumentPosition(T)&16))};var X=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function z(h,g){return g?h==="\0"?"ï¿½":h.slice(0,-1)+"\\"+h.charCodeAt(h.length-1).toString(16)+" ":"\\"+h}m.escapeSelector=function(h){return(h+"").replace(X,z)};var J=y,_t=c;(function(){var h,g,T,v,R,O=_t,L,W,H,Z,ct,ft=m.expando,et=0,Tt=0,re=eo(),Ee=eo(),_e=eo(),rs=eo(),Ze=function(V,Q){return V===Q&&(R=!0),0},_i="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",li="(?:\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ae="\\["+G+"*("+li+")(?:"+G+"*([*^$|!~]?=)"+G+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+li+"))|)"+G+"*\\]",In=":("+li+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ae+")*)|.*)\\)|)",Me=new RegExp(G+"+","g"),Fe=new RegExp("^"+G+"*,"+G+"*"),$r=new RegExp("^"+G+"*([>+~]|"+G+")"+G+"*"),n_=new RegExp(G+"|>"),hi=new RegExp(In),Jr=new RegExp("^"+li+"$"),ui={ID:new RegExp("^#("+li+")"),CLASS:new RegExp("^\\.("+li+")"),TAG:new RegExp("^("+li+"|[*])"),ATTR:new RegExp("^"+Ae),PSEUDO:new RegExp("^"+In),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+G+"*(even|odd|(([+-]|)(\\d*)n|)"+G+"*(?:([+-]|)"+G+"*(\\d+)|))"+G+"*\\)|)","i"),bool:new RegExp("^(?:"+_i+")$","i"),needsContext:new RegExp("^"+G+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+G+"*((?:-\\d)?\\d*)"+G+"*\\)|)(?=[^-]|$)","i")},Yi=/^(?:input|select|textarea|button)$/i,Ki=/^h\d$/i,ks=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,r_=/[+~]/,Ii=new RegExp("\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\([^\\r\\n\\f])","g"),xi=function(V,Q){var tt="0x"+V.slice(1)-65536;return Q||(tt<0?String.fromCharCode(tt+65536):String.fromCharCode(tt>>10|55296,tt&1023|56320))},Qm=function(){qi()},Zm=io(function(V){return V.disabled===!0&&q(V,"fieldset")},{dir:"parentNode",next:"legend"});function $m(){try{return L.activeElement}catch{}}try{O.apply(i=a.call(J.childNodes),J.childNodes),i[J.childNodes.length].nodeType}catch{O={apply:function(Q,tt){_t.apply(Q,a.call(tt))},call:function(Q){_t.apply(Q,a.call(arguments,1))}}}function Oe(V,Q,tt,at){var ut,wt,Vt,qt,Gt,ue,ee,oe=Q&&Q.ownerDocument,fe=Q?Q.nodeType:9;if(tt=tt||[],typeof V!="string"||!V||fe!==1&&fe!==9&&fe!==11)return tt;if(!at&&(qi(Q),Q=Q||L,H)){if(fe!==11&&(Gt=ks.exec(V)))if(ut=Gt[1]){if(fe===9)if(Vt=Q.getElementById(ut)){if(Vt.id===ut)return O.call(tt,Vt),tt}else return tt;else if(oe&&(Vt=oe.getElementById(ut))&&Oe.contains(Q,Vt)&&Vt.id===ut)return O.call(tt,Vt),tt}else{if(Gt[2])return O.apply(tt,Q.getElementsByTagName(V)),tt;if((ut=Gt[3])&&Q.getElementsByClassName)return O.apply(tt,Q.getElementsByClassName(ut)),tt}if(!rs[V+" "]&&(!Z||!Z.test(V))){if(ee=V,oe=Q,fe===1&&(n_.test(V)||$r.test(V))){for(oe=r_.test(V)&&a_(Q.parentNode)||Q,(oe!=Q||!A.scope)&&((qt=Q.getAttribute("id"))?qt=m.escapeSelector(qt):Q.setAttribute("id",qt=ft)),ue=ta(V),wt=ue.length;wt--;)ue[wt]=(qt?"#"+qt:":scope")+" "+so(ue[wt]);ee=ue.join(",")}try{return O.apply(tt,oe.querySelectorAll(ee)),tt}catch{rs(V,!0)}finally{qt===ft&&Q.removeAttribute("id")}}}return zh(V.replace(K,"$1"),Q,tt,at)}function eo(){var V=[];function Q(tt,at){return V.push(tt+" ")>g.cacheLength&&delete Q[V.shift()],Q[tt+" "]=at}return Q}function qs(V){return V[ft]=!0,V}function qn(V){var Q=L.createElement("fieldset");try{return!!V(Q)}catch{return!1}finally{Q.parentNode&&Q.parentNode.removeChild(Q),Q=null}}function Jm(V){return function(Q){return q(Q,"input")&&Q.type===V}}function tg(V){return function(Q){return(q(Q,"input")||q(Q,"button"))&&Q.type===V}}function Fh(V){return function(Q){return"form"in Q?Q.parentNode&&Q.disabled===!1?"label"in Q?"label"in Q.parentNode?Q.parentNode.disabled===V:Q.disabled===V:Q.isDisabled===V||Q.isDisabled!==!V&&Zm(Q)===V:Q.disabled===V:"label"in Q?Q.disabled===V:!1}}function xn(V){return qs(function(Q){return Q=+Q,qs(function(tt,at){for(var ut,wt=V([],tt.length,Q),Vt=wt.length;Vt--;)tt[ut=wt[Vt]]&&(tt[ut]=!(at[ut]=tt[ut]))})})}function a_(V){return V&&typeof V.getElementsByTagName<"u"&&V}function qi(V){var Q,tt=V?V.ownerDocument||V:J;return tt==L||tt.nodeType!==9||!tt.documentElement||(L=tt,W=L.documentElement,H=!m.isXMLDoc(L),ct=W.matches||W.webkitMatchesSelector||W.msMatchesSelector,W.msMatchesSelector&&J!=L&&(Q=L.defaultView)&&Q.top!==Q&&Q.addEventListener("unload",Qm),A.getById=qn(function(at){return W.appendChild(at).id=m.expando,!L.getElementsByName||!L.getElementsByName(m.expando).length}),A.disconnectedMatch=qn(function(at){return ct.call(at,"*")}),A.scope=qn(function(){return L.querySelectorAll(":scope")}),A.cssHas=qn(function(){try{return L.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),A.getById?(g.filter.ID=function(at){var ut=at.replace(Ii,xi);return function(wt){return wt.getAttribute("id")===ut}},g.find.ID=function(at,ut){if(typeof ut.getElementById<"u"&&H){var wt=ut.getElementById(at);return wt?[wt]:[]}}):(g.filter.ID=function(at){var ut=at.replace(Ii,xi);return function(wt){var Vt=typeof wt.getAttributeNode<"u"&&wt.getAttributeNode("id");return Vt&&Vt.value===ut}},g.find.ID=function(at,ut){if(typeof ut.getElementById<"u"&&H){var wt,Vt,qt,Gt=ut.getElementById(at);if(Gt){if(wt=Gt.getAttributeNode("id"),wt&&wt.value===at)return[Gt];for(qt=ut.getElementsByName(at),Vt=0;Gt=qt[Vt++];)if(wt=Gt.getAttributeNode("id"),wt&&wt.value===at)return[Gt]}return[]}}),g.find.TAG=function(at,ut){return typeof ut.getElementsByTagName<"u"?ut.getElementsByTagName(at):ut.querySelectorAll(at)},g.find.CLASS=function(at,ut){if(typeof ut.getElementsByClassName<"u"&&H)return ut.getElementsByClassName(at)},Z=[],qn(function(at){var ut;W.appendChild(at).innerHTML="<a id='"+ft+"' href='' disabled='disabled'></a><select id='"+ft+"-\r\\' disabled='disabled'><option selected=''></option></select>",at.querySelectorAll("[selected]").length||Z.push("\\["+G+"*(?:value|"+_i+")"),at.querySelectorAll("[id~="+ft+"-]").length||Z.push("~="),at.querySelectorAll("a#"+ft+"+*").length||Z.push(".#.+[+~]"),at.querySelectorAll(":checked").length||Z.push(":checked"),ut=L.createElement("input"),ut.setAttribute("type","hidden"),at.appendChild(ut).setAttribute("name","D"),W.appendChild(at).disabled=!0,at.querySelectorAll(":disabled").length!==2&&Z.push(":enabled",":disabled"),ut=L.createElement("input"),ut.setAttribute("name",""),at.appendChild(ut),at.querySelectorAll("[name='']").length||Z.push("\\["+G+"*name"+G+"*="+G+`*(?:''|"")`)}),A.cssHas||Z.push(":has"),Z=Z.length&&new RegExp(Z.join("|")),Ze=function(at,ut){if(at===ut)return R=!0,0;var wt=!at.compareDocumentPosition-!ut.compareDocumentPosition;return wt||(wt=(at.ownerDocument||at)==(ut.ownerDocument||ut)?at.compareDocumentPosition(ut):1,wt&1||!A.sortDetached&&ut.compareDocumentPosition(at)===wt?at===L||at.ownerDocument==J&&Oe.contains(J,at)?-1:ut===L||ut.ownerDocument==J&&Oe.contains(J,ut)?1:v?_.call(v,at)-_.call(v,ut):0:wt&4?-1:1)}),L}Oe.matches=function(V,Q){return Oe(V,null,null,Q)},Oe.matchesSelector=function(V,Q){if(qi(V),H&&!rs[Q+" "]&&(!Z||!Z.test(Q)))try{var tt=ct.call(V,Q);if(tt||A.disconnectedMatch||V.document&&V.document.nodeType!==11)return tt}catch{rs(Q,!0)}return Oe(Q,L,null,[V]).length>0},Oe.contains=function(V,Q){return(V.ownerDocument||V)!=L&&qi(V),m.contains(V,Q)},Oe.attr=function(V,Q){(V.ownerDocument||V)!=L&&qi(V);var tt=g.attrHandle[Q.toLowerCase()],at=tt&&p.call(g.attrHandle,Q.toLowerCase())?tt(V,Q,!H):void 0;return at!==void 0?at:V.getAttribute(Q)},Oe.error=function(V){throw new Error("Syntax error, unrecognized expression: "+V)},m.uniqueSort=function(V){var Q,tt=[],at=0,ut=0;if(R=!A.sortStable,v=!A.sortStable&&a.call(V,0),F.call(V,Ze),R){for(;Q=V[ut++];)Q===V[ut]&&(at=tt.push(ut));for(;at--;)it.call(V,tt[at],1)}return v=null,V},m.fn.uniqueSort=function(){return this.pushStack(m.uniqueSort(a.apply(this)))},g=m.expr={cacheLength:50,createPseudo:qs,match:ui,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(V){return V[1]=V[1].replace(Ii,xi),V[3]=(V[3]||V[4]||V[5]||"").replace(Ii,xi),V[2]==="~="&&(V[3]=" "+V[3]+" "),V.slice(0,4)},CHILD:function(V){return V[1]=V[1].toLowerCase(),V[1].slice(0,3)==="nth"?(V[3]||Oe.error(V[0]),V[4]=+(V[4]?V[5]+(V[6]||1):2*(V[3]==="even"||V[3]==="odd")),V[5]=+(V[7]+V[8]||V[3]==="odd")):V[3]&&Oe.error(V[0]),V},PSEUDO:function(V){var Q,tt=!V[6]&&V[2];return ui.CHILD.test(V[0])?null:(V[3]?V[2]=V[4]||V[5]||"":tt&&hi.test(tt)&&(Q=ta(tt,!0))&&(Q=tt.indexOf(")",tt.length-Q)-tt.length)&&(V[0]=V[0].slice(0,Q),V[2]=tt.slice(0,Q)),V.slice(0,3))}},filter:{TAG:function(V){var Q=V.replace(Ii,xi).toLowerCase();return V==="*"?function(){return!0}:function(tt){return q(tt,Q)}},CLASS:function(V){var Q=re[V+" "];return Q||(Q=new RegExp("(^|"+G+")"+V+"("+G+"|$)"))&&re(V,function(tt){return Q.test(typeof tt.className=="string"&&tt.className||typeof tt.getAttribute<"u"&&tt.getAttribute("class")||"")})},ATTR:function(V,Q,tt){return function(at){var ut=Oe.attr(at,V);return ut==null?Q==="!=":Q?(ut+="",Q==="="?ut===tt:Q==="!="?ut!==tt:Q==="^="?tt&&ut.indexOf(tt)===0:Q==="*="?tt&&ut.indexOf(tt)>-1:Q==="$="?tt&&ut.slice(-tt.length)===tt:Q==="~="?(" "+ut.replace(Me," ")+" ").indexOf(tt)>-1:Q==="|="?ut===tt||ut.slice(0,tt.length+1)===tt+"-":!1):!0}},CHILD:function(V,Q,tt,at,ut){var wt=V.slice(0,3)!=="nth",Vt=V.slice(-4)!=="last",qt=Q==="of-type";return at===1&&ut===0?function(Gt){return!!Gt.parentNode}:function(Gt,ue,ee){var oe,fe,$t,Ce,Is,hs=wt!==Vt?"nextSibling":"previousSibling",Fs=Gt.parentNode,fi=qt&&Gt.nodeName.toLowerCase(),Xn=!ee&&!qt,Es=!1;if(Fs){if(wt){for(;hs;){for($t=Gt;$t=$t[hs];)if(qt?q($t,fi):$t.nodeType===1)return!1;Is=hs=V==="only"&&!Is&&"nextSibling"}return!0}if(Is=[Vt?Fs.firstChild:Fs.lastChild],Vt&&Xn){for(fe=Fs[ft]||(Fs[ft]={}),oe=fe[V]||[],Ce=oe[0]===et&&oe[1],Es=Ce&&oe[2],$t=Ce&&Fs.childNodes[Ce];$t=++Ce&&$t&&$t[hs]||(Es=Ce=0)||Is.pop();)if($t.nodeType===1&&++Es&&$t===Gt){fe[V]=[et,Ce,Es];break}}else if(Xn&&(fe=Gt[ft]||(Gt[ft]={}),oe=fe[V]||[],Ce=oe[0]===et&&oe[1],Es=Ce),Es===!1)for(;($t=++Ce&&$t&&$t[hs]||(Es=Ce=0)||Is.pop())&&!((qt?q($t,fi):$t.nodeType===1)&&++Es&&(Xn&&(fe=$t[ft]||($t[ft]={}),fe[V]=[et,Es]),$t===Gt)););return Es-=ut,Es===at||Es%at===0&&Es/at>=0}}},PSEUDO:function(V,Q){var tt,at=g.pseudos[V]||g.setFilters[V.toLowerCase()]||Oe.error("unsupported pseudo: "+V);return at[ft]?at(Q):at.length>1?(tt=[V,V,"",Q],g.setFilters.hasOwnProperty(V.toLowerCase())?qs(function(ut,wt){for(var Vt,qt=at(ut,Q),Gt=qt.length;Gt--;)Vt=_.call(ut,qt[Gt]),ut[Vt]=!(wt[Vt]=qt[Gt])}):function(ut){return at(ut,0,tt)}):at}},pseudos:{not:qs(function(V){var Q=[],tt=[],at=l_(V.replace(K,"$1"));return at[ft]?qs(function(ut,wt,Vt,qt){for(var Gt,ue=at(ut,null,qt,[]),ee=ut.length;ee--;)(Gt=ue[ee])&&(ut[ee]=!(wt[ee]=Gt))}):function(ut,wt,Vt){return Q[0]=ut,at(Q,null,Vt,tt),Q[0]=null,!tt.pop()}}),has:qs(function(V){return function(Q){return Oe(V,Q).length>0}}),contains:qs(function(V){return V=V.replace(Ii,xi),function(Q){return(Q.textContent||m.text(Q)).indexOf(V)>-1}}),lang:qs(function(V){return Jr.test(V||"")||Oe.error("unsupported lang: "+V),V=V.replace(Ii,xi).toLowerCase(),function(Q){var tt;do if(tt=H?Q.lang:Q.getAttribute("xml:lang")||Q.getAttribute("lang"))return tt=tt.toLowerCase(),tt===V||tt.indexOf(V+"-")===0;while((Q=Q.parentNode)&&Q.nodeType===1);return!1}}),target:function(V){var Q=t.location&&t.location.hash;return Q&&Q.slice(1)===V.id},root:function(V){return V===W},focus:function(V){return V===$m()&&L.hasFocus()&&!!(V.type||V.href||~V.tabIndex)},enabled:Fh(!1),disabled:Fh(!0),checked:function(V){return q(V,"input")&&!!V.checked||q(V,"option")&&!!V.selected},selected:function(V){return V.parentNode&&V.parentNode.selectedIndex,V.selected===!0},empty:function(V){for(V=V.firstChild;V;V=V.nextSibling)if(V.nodeType<6)return!1;return!0},parent:function(V){return!g.pseudos.empty(V)},header:function(V){return Ki.test(V.nodeName)},input:function(V){return Yi.test(V.nodeName)},button:function(V){return q(V,"input")&&V.type==="button"||q(V,"button")},text:function(V){var Q;return q(V,"input")&&V.type==="text"&&((Q=V.getAttribute("type"))==null||Q.toLowerCase()==="text")},first:xn(function(){return[0]}),last:xn(function(V,Q){return[Q-1]}),eq:xn(function(V,Q,tt){return[tt<0?tt+Q:tt]}),even:xn(function(V,Q){for(var tt=0;tt<Q;tt+=2)V.push(tt);return V}),odd:xn(function(V,Q){for(var tt=1;tt<Q;tt+=2)V.push(tt);return V}),lt:xn(function(V,Q,tt){var at;for(tt<0?at=tt+Q:tt>Q?at=Q:at=tt;--at>=0;)V.push(at);return V}),gt:xn(function(V,Q,tt){for(var at=tt<0?tt+Q:tt;++at<Q;)V.push(at);return V})}},g.pseudos.nth=g.pseudos.eq;for(h in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.pseudos[h]=Jm(h);for(h in{submit:!0,reset:!0})g.pseudos[h]=tg(h);function Hh(){}Hh.prototype=g.filters=g.pseudos,g.setFilters=new Hh;function ta(V,Q){var tt,at,ut,wt,Vt,qt,Gt,ue=Ee[V+" "];if(ue)return Q?0:ue.slice(0);for(Vt=V,qt=[],Gt=g.preFilter;Vt;){(!tt||(at=Fe.exec(Vt)))&&(at&&(Vt=Vt.slice(at[0].length)||Vt),qt.push(ut=[])),tt=!1,(at=$r.exec(Vt))&&(tt=at.shift(),ut.push({value:tt,type:at[0].replace(K," ")}),Vt=Vt.slice(tt.length));for(wt in g.filter)(at=ui[wt].exec(Vt))&&(!Gt[wt]||(at=Gt[wt](at)))&&(tt=at.shift(),ut.push({value:tt,type:wt,matches:at}),Vt=Vt.slice(tt.length));if(!tt)break}return Q?Vt.length:Vt?Oe.error(V):Ee(V,qt).slice(0)}function so(V){for(var Q=0,tt=V.length,at="";Q<tt;Q++)at+=V[Q].value;return at}function io(V,Q,tt){var at=Q.dir,ut=Q.next,wt=ut||at,Vt=tt&&wt==="parentNode",qt=Tt++;return Q.first?function(Gt,ue,ee){for(;Gt=Gt[at];)if(Gt.nodeType===1||Vt)return V(Gt,ue,ee);return!1}:function(Gt,ue,ee){var oe,fe,$t=[et,qt];if(ee){for(;Gt=Gt[at];)if((Gt.nodeType===1||Vt)&&V(Gt,ue,ee))return!0}else for(;Gt=Gt[at];)if(Gt.nodeType===1||Vt)if(fe=Gt[ft]||(Gt[ft]={}),ut&&q(Gt,ut))Gt=Gt[at]||Gt;else{if((oe=fe[wt])&&oe[0]===et&&oe[1]===qt)return $t[2]=oe[2];if(fe[wt]=$t,$t[2]=V(Gt,ue,ee))return!0}return!1}}function o_(V){return V.length>1?function(Q,tt,at){for(var ut=V.length;ut--;)if(!V[ut](Q,tt,at))return!1;return!0}:V[0]}function eg(V,Q,tt){for(var at=0,ut=Q.length;at<ut;at++)Oe(V,Q[at],tt);return tt}function no(V,Q,tt,at,ut){for(var wt,Vt=[],qt=0,Gt=V.length,ue=Q!=null;qt<Gt;qt++)(wt=V[qt])&&(!tt||tt(wt,at,ut))&&(Vt.push(wt),ue&&Q.push(qt));return Vt}function c_(V,Q,tt,at,ut,wt){return at&&!at[ft]&&(at=c_(at)),ut&&!ut[ft]&&(ut=c_(ut,wt)),qs(function(Vt,qt,Gt,ue){var ee,oe,fe,$t,Ce=[],Is=[],hs=qt.length,Fs=Vt||eg(Q||"*",Gt.nodeType?[Gt]:Gt,[]),fi=V&&(Vt||!Q)?no(Fs,Ce,V,Gt,ue):Fs;if(tt?($t=ut||(Vt?V:hs||at)?[]:qt,tt(fi,$t,Gt,ue)):$t=fi,at)for(ee=no($t,Is),at(ee,[],Gt,ue),oe=ee.length;oe--;)(fe=ee[oe])&&($t[Is[oe]]=!(fi[Is[oe]]=fe));if(Vt){if(ut||V){if(ut){for(ee=[],oe=$t.length;oe--;)(fe=$t[oe])&&ee.push(fi[oe]=fe);ut(null,$t=[],ee,ue)}for(oe=$t.length;oe--;)(fe=$t[oe])&&(ee=ut?_.call(Vt,fe):Ce[oe])>-1&&(Vt[ee]=!(qt[ee]=fe))}}else $t=no($t===qt?$t.splice(hs,$t.length):$t),ut?ut(null,qt,$t,ue):O.apply(qt,$t)})}function __(V){for(var Q,tt,at,ut=V.length,wt=g.relative[V[0].type],Vt=wt||g.relative[" "],qt=wt?1:0,Gt=io(function(oe){return oe===Q},Vt,!0),ue=io(function(oe){return _.call(Q,oe)>-1},Vt,!0),ee=[function(oe,fe,$t){var Ce=!wt&&($t||fe!=T)||((Q=fe).nodeType?Gt(oe,fe,$t):ue(oe,fe,$t));return Q=null,Ce}];qt<ut;qt++)if(tt=g.relative[V[qt].type])ee=[io(o_(ee),tt)];else{if(tt=g.filter[V[qt].type].apply(null,V[qt].matches),tt[ft]){for(at=++qt;at<ut&&!g.relative[V[at].type];at++);return c_(qt>1&&o_(ee),qt>1&&so(V.slice(0,qt-1).concat({value:V[qt-2].type===" "?"*":""})).replace(K,"$1"),tt,qt<at&&__(V.slice(qt,at)),at<ut&&__(V=V.slice(at)),at<ut&&so(V))}ee.push(tt)}return o_(ee)}function sg(V,Q){var tt=Q.length>0,at=V.length>0,ut=function(wt,Vt,qt,Gt,ue){var ee,oe,fe,$t=0,Ce="0",Is=wt&&[],hs=[],Fs=T,fi=wt||at&&g.find.TAG("*",ue),Xn=et+=Fs==null?1:Math.random()||.1,Es=fi.length;for(ue&&(T=Vt==L||Vt||ue);Ce!==Es&&(ee=fi[Ce])!=null;Ce++){if(at&&ee){for(oe=0,!Vt&&ee.ownerDocument!=L&&(qi(ee),qt=!H);fe=V[oe++];)if(fe(ee,Vt||L,qt)){O.call(Gt,ee);break}ue&&(et=Xn)}tt&&((ee=!fe&&ee)&&$t--,wt&&Is.push(ee))}if($t+=Ce,tt&&Ce!==$t){for(oe=0;fe=Q[oe++];)fe(Is,hs,Vt,qt);if(wt){if($t>0)for(;Ce--;)Is[Ce]||hs[Ce]||(hs[Ce]=Y.call(Gt));hs=no(hs)}O.apply(Gt,hs),ue&&!wt&&hs.length>0&&$t+Q.length>1&&m.uniqueSort(Gt)}return ue&&(et=Xn,T=Fs),Is};return tt?qs(ut):ut}function l_(V,Q){var tt,at=[],ut=[],wt=_e[V+" "];if(!wt){for(Q||(Q=ta(V)),tt=Q.length;tt--;)wt=__(Q[tt]),wt[ft]?at.push(wt):ut.push(wt);wt=_e(V,sg(ut,at)),wt.selector=V}return wt}function zh(V,Q,tt,at){var ut,wt,Vt,qt,Gt,ue=typeof V=="function"&&V,ee=!at&&ta(V=ue.selector||V);if(tt=tt||[],ee.length===1){if(wt=ee[0]=ee[0].slice(0),wt.length>2&&(Vt=wt[0]).type==="ID"&&Q.nodeType===9&&H&&g.relative[wt[1].type]){if(Q=(g.find.ID(Vt.matches[0].replace(Ii,xi),Q)||[])[0],Q)ue&&(Q=Q.parentNode);else return tt;V=V.slice(wt.shift().value.length)}for(ut=ui.needsContext.test(V)?0:wt.length;ut--&&(Vt=wt[ut],!g.relative[qt=Vt.type]);)if((Gt=g.find[qt])&&(at=Gt(Vt.matches[0].replace(Ii,xi),r_.test(wt[0].type)&&a_(Q.parentNode)||Q))){if(wt.splice(ut,1),V=at.length&&so(wt),!V)return O.apply(tt,at),tt;break}}return(ue||l_(V,ee))(at,Q,!H,tt,!Q||r_.test(V)&&a_(Q.parentNode)||Q),tt}A.sortStable=ft.split("").sort(Ze).join("")===ft,qi(),A.sortDetached=qn(function(V){return V.compareDocumentPosition(L.createElement("fieldset"))&1}),m.find=Oe,m.expr[":"]=m.expr.pseudos,m.unique=m.uniqueSort,Oe.compile=l_,Oe.select=zh,Oe.setDocument=qi,Oe.tokenize=ta,Oe.escape=m.escapeSelector,Oe.getText=m.text,Oe.isXML=m.isXMLDoc,Oe.selectors=m.expr,Oe.support=m.support,Oe.uniqueSort=m.uniqueSort})();var gt=function(h,g,T){for(var v=[],R=T!==void 0;(h=h[g])&&h.nodeType!==9;)if(h.nodeType===1){if(R&&m(h).is(T))break;v.push(h)}return v},bt=function(h,g){for(var T=[];h;h=h.nextSibling)h.nodeType===1&&h!==g&&T.push(h);return T},vt=m.expr.match.needsContext,Et=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function pt(h,g,T){return E(g)?m.grep(h,function(v,R){return!!g.call(v,R,v)!==T}):g.nodeType?m.grep(h,function(v){return v===g!==T}):typeof g!="string"?m.grep(h,function(v){return _.call(g,v)>-1!==T}):m.filter(g,h,T)}m.filter=function(h,g,T){var v=g[0];return T&&(h=":not("+h+")"),g.length===1&&v.nodeType===1?m.find.matchesSelector(v,h)?[v]:[]:m.find.matches(h,m.grep(g,function(R){return R.nodeType===1}))},m.fn.extend({find:function(h){var g,T,v=this.length,R=this;if(typeof h!="string")return this.pushStack(m(h).filter(function(){for(g=0;g<v;g++)if(m.contains(R[g],this))return!0}));for(T=this.pushStack([]),g=0;g<v;g++)m.find(h,R[g],T);return v>1?m.uniqueSort(T):T},filter:function(h){return this.pushStack(pt(this,h||[],!1))},not:function(h){return this.pushStack(pt(this,h||[],!0))},is:function(h){return!!pt(this,typeof h=="string"&&vt.test(h)?m(h):h||[],!1).length}});var St,Ft=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ot=m.fn.init=function(h,g,T){var v,R;if(!h)return this;if(T=T||St,typeof h=="string")if(h[0]==="<"&&h[h.length-1]===">"&&h.length>=3?v=[null,h,null]:v=Ft.exec(h),v&&(v[1]||!g))if(v[1]){if(g=g instanceof m?g[0]:g,m.merge(this,m.parseHTML(v[1],g&&g.nodeType?g.ownerDocument||g:y,!0)),Et.test(v[1])&&m.isPlainObject(g))for(v in g)E(this[v])?this[v](g[v]):this.attr(v,g[v]);return this}else return R=y.getElementById(v[2]),R&&(this[0]=R,this.length=1),this;else return!g||g.jquery?(g||T).find(h):this.constructor(g).find(h);else{if(h.nodeType)return this[0]=h,this.length=1,this;if(E(h))return T.ready!==void 0?T.ready(h):h(m)}return m.makeArray(h,this)};ot.prototype=m.fn,St=m(y);var Xt=/^(?:parents|prev(?:Until|All))/,te={children:!0,contents:!0,next:!0,prev:!0};m.fn.extend({has:function(h){var g=m(h,this),T=g.length;return this.filter(function(){for(var v=0;v<T;v++)if(m.contains(this,g[v]))return!0})},closest:function(h,g){var T,v=0,R=this.length,O=[],L=typeof h!="string"&&m(h);if(!vt.test(h)){for(;v<R;v++)for(T=this[v];T&&T!==g;T=T.parentNode)if(T.nodeType<11&&(L?L.index(T)>-1:T.nodeType===1&&m.find.matchesSelector(T,h))){O.push(T);break}}return this.pushStack(O.length>1?m.uniqueSort(O):O)},index:function(h){return h?typeof h=="string"?_.call(m(h),this[0]):_.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,g){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(h,g))))},addBack:function(h){return this.add(h==null?this.prevObject:this.prevObject.filter(h))}});function kt(h,g){for(;(h=h[g])&&h.nodeType!==1;);return h}m.each({parent:function(h){var g=h.parentNode;return g&&g.nodeType!==11?g:null},parents:function(h){return gt(h,"parentNode")},parentsUntil:function(h,g,T){return gt(h,"parentNode",T)},next:function(h){return kt(h,"nextSibling")},prev:function(h){return kt(h,"previousSibling")},nextAll:function(h){return gt(h,"nextSibling")},prevAll:function(h){return gt(h,"previousSibling")},nextUntil:function(h,g,T){return gt(h,"nextSibling",T)},prevUntil:function(h,g,T){return gt(h,"previousSibling",T)},siblings:function(h){return bt((h.parentNode||{}).firstChild,h)},children:function(h){return bt(h.firstChild)},contents:function(h){return h.contentDocument!=null&&n(h.contentDocument)?h.contentDocument:(q(h,"template")&&(h=h.content||h),m.merge([],h.childNodes))}},function(h,g){m.fn[h]=function(T,v){var R=m.map(this,g,T);return h.slice(-5)!=="Until"&&(v=T),v&&typeof v=="string"&&(R=m.filter(v,R)),this.length>1&&(te[h]||m.uniqueSort(R),Xt.test(h)&&R.reverse()),this.pushStack(R)}});var Bt=/[^\x20\t\r\n\f]+/g;function ie(h){var g={};return m.each(h.match(Bt)||[],function(T,v){g[v]=!0}),g}m.Callbacks=function(h){h=typeof h=="string"?ie(h):m.extend({},h);var g,T,v,R,O=[],L=[],W=-1,H=function(){for(R=R||h.once,v=g=!0;L.length;W=-1)for(T=L.shift();++W<O.length;)O[W].apply(T[0],T[1])===!1&&h.stopOnFalse&&(W=O.length,T=!1);h.memory||(T=!1),g=!1,R&&(T?O=[]:O="")},Z={add:function(){return O&&(T&&!g&&(W=O.length-1,L.push(T)),(function ct(ft){m.each(ft,function(et,Tt){E(Tt)?(!h.unique||!Z.has(Tt))&&O.push(Tt):Tt&&Tt.length&&I(Tt)!=="string"&&ct(Tt)})})(arguments),T&&!g&&H()),this},remove:function(){return m.each(arguments,function(ct,ft){for(var et;(et=m.inArray(ft,O,et))>-1;)O.splice(et,1),et<=W&&W--}),this},has:function(ct){return ct?m.inArray(ct,O)>-1:O.length>0},empty:function(){return O&&(O=[]),this},disable:function(){return R=L=[],O=T="",this},disabled:function(){return!O},lock:function(){return R=L=[],!T&&!g&&(O=T=""),this},locked:function(){return!!R},fireWith:function(ct,ft){return R||(ft=ft||[],ft=[ct,ft.slice?ft.slice():ft],L.push(ft),g||H()),this},fire:function(){return Z.fireWith(this,arguments),this},fired:function(){return!!v}};return Z};function lt(h){return h}function Mt(h){throw h}function Ot(h,g,T,v){var R;try{h&&E(R=h.promise)?R.call(h).done(g).fail(T):h&&E(R=h.then)?R.call(h,g,T):g.apply(void 0,[h].slice(v))}catch(O){T.apply(void 0,[O])}}m.extend({Deferred:function(h){var g=[["notify","progress",m.Callbacks("memory"),m.Callbacks("memory"),2],["resolve","done",m.Callbacks("once memory"),m.Callbacks("once memory"),0,"resolved"],["reject","fail",m.Callbacks("once memory"),m.Callbacks("once memory"),1,"rejected"]],T="pending",v={state:function(){return T},always:function(){return R.done(arguments).fail(arguments),this},catch:function(O){return v.then(null,O)},pipe:function(){var O=arguments;return m.Deferred(function(L){m.each(g,function(W,H){var Z=E(O[H[4]])&&O[H[4]];R[H[1]](function(){var ct=Z&&Z.apply(this,arguments);ct&&E(ct.promise)?ct.promise().progress(L.notify).done(L.resolve).fail(L.reject):L[H[0]+"With"](this,Z?[ct]:arguments)})}),O=null}).promise()},then:function(O,L,W){var H=0;function Z(ct,ft,et,Tt){return function(){var re=this,Ee=arguments,_e=function(){var Ze,_i;if(!(ct<H)){if(Ze=et.apply(re,Ee),Ze===ft.promise())throw new TypeError("Thenable self-resolution");_i=Ze&&(typeof Ze=="object"||typeof Ze=="function")&&Ze.then,E(_i)?Tt?_i.call(Ze,Z(H,ft,lt,Tt),Z(H,ft,Mt,Tt)):(H++,_i.call(Ze,Z(H,ft,lt,Tt),Z(H,ft,Mt,Tt),Z(H,ft,lt,ft.notifyWith))):(et!==lt&&(re=void 0,Ee=[Ze]),(Tt||ft.resolveWith)(re,Ee))}},rs=Tt?_e:function(){try{_e()}catch(Ze){m.Deferred.exceptionHook&&m.Deferred.exceptionHook(Ze,rs.error),ct+1>=H&&(et!==Mt&&(re=void 0,Ee=[Ze]),ft.rejectWith(re,Ee))}};ct?rs():(m.Deferred.getErrorHook?rs.error=m.Deferred.getErrorHook():m.Deferred.getStackHook&&(rs.error=m.Deferred.getStackHook()),t.setTimeout(rs))}}return m.Deferred(function(ct){g[0][3].add(Z(0,ct,E(W)?W:lt,ct.notifyWith)),g[1][3].add(Z(0,ct,E(O)?O:lt)),g[2][3].add(Z(0,ct,E(L)?L:Mt))}).promise()},promise:function(O){return O!=null?m.extend(O,v):v}},R={};return m.each(g,function(O,L){var W=L[2],H=L[5];v[L[1]]=W.add,H&&W.add(function(){T=H},g[3-O][2].disable,g[3-O][3].disable,g[0][2].lock,g[0][3].lock),W.add(L[3].fire),R[L[0]]=function(){return R[L[0]+"With"](this===R?void 0:this,arguments),this},R[L[0]+"With"]=W.fireWith}),v.promise(R),h&&h.call(R,R),R},when:function(h){var g=arguments.length,T=g,v=Array(T),R=a.call(arguments),O=m.Deferred(),L=function(W){return function(H){v[W]=this,R[W]=arguments.length>1?a.call(arguments):H,--g||O.resolveWith(v,R)}};if(g<=1&&(Ot(h,O.done(L(T)).resolve,O.reject,!g),O.state()==="pending"||E(R[T]&&R[T].then)))return O.then();for(;T--;)Ot(R[T],L(T),O.reject);return O.promise()}});var Yt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;m.Deferred.exceptionHook=function(h,g){t.console&&t.console.warn&&h&&Yt.test(h.name)&&t.console.warn("jQuery.Deferred exception: "+h.message,h.stack,g)},m.readyException=function(h){t.setTimeout(function(){throw h})};var Lt=m.Deferred();m.fn.ready=function(h){return Lt.then(h).catch(function(g){m.readyException(g)}),this},m.extend({isReady:!1,readyWait:1,ready:function(h){(h===!0?--m.readyWait:m.isReady)||(m.isReady=!0,!(h!==!0&&--m.readyWait>0)&&Lt.resolveWith(y,[m]))}}),m.ready.then=Lt.then;function k(){y.removeEventListener("DOMContentLoaded",k),t.removeEventListener("load",k),m.ready()}y.readyState==="complete"||y.readyState!=="loading"&&!y.documentElement.doScroll?t.setTimeout(m.ready):(y.addEventListener("DOMContentLoaded",k),t.addEventListener("load",k));var P=function(h,g,T,v,R,O,L){var W=0,H=h.length,Z=T==null;if(I(T)==="object"){R=!0;for(W in T)P(h,g,W,T[W],!0,O,L)}else if(v!==void 0&&(R=!0,E(v)||(L=!0),Z&&(L?(g.call(h,v),g=null):(Z=g,g=function(ct,ft,et){return Z.call(m(ct),et)})),g))for(;W<H;W++)g(h[W],T,L?v:v.call(h[W],W,g(h[W],T)));return R?h:Z?g.call(h):H?g(h[0],T):O},ht=/^-ms-/,xt=/-([a-z])/g;function It(h,g){return g.toUpperCase()}function Nt(h){return h.replace(ht,"ms-").replace(xt,It)}var Qt=function(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType};function Kt(){this.expando=m.expando+Kt.uid++}Kt.uid=1,Kt.prototype={cache:function(h){var g=h[this.expando];return g||(g={},Qt(h)&&(h.nodeType?h[this.expando]=g:Object.defineProperty(h,this.expando,{value:g,configurable:!0}))),g},set:function(h,g,T){var v,R=this.cache(h);if(typeof g=="string")R[Nt(g)]=T;else for(v in g)R[Nt(v)]=g[v];return R},get:function(h,g){return g===void 0?this.cache(h):h[this.expando]&&h[this.expando][Nt(g)]},access:function(h,g,T){return g===void 0||g&&typeof g=="string"&&T===void 0?this.get(h,g):(this.set(h,g,T),T!==void 0?T:g)},remove:function(h,g){var T,v=h[this.expando];if(v!==void 0){if(g!==void 0)for(Array.isArray(g)?g=g.map(Nt):(g=Nt(g),g=g in v?[g]:g.match(Bt)||[]),T=g.length;T--;)delete v[g[T]];(g===void 0||m.isEmptyObject(v))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var g=h[this.expando];return g!==void 0&&!m.isEmptyObject(g)}};var yt=new Kt,Pt=new Kt,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Dt=/[A-Z]/g;function At(h){return h==="true"?!0:h==="false"?!1:h==="null"?null:h===+h+""?+h:$.test(h)?JSON.parse(h):h}function Ut(h,g,T){var v;if(T===void 0&&h.nodeType===1)if(v="data-"+g.replace(Dt,"-$&").toLowerCase(),T=h.getAttribute(v),typeof T=="string"){try{T=At(T)}catch{}Pt.set(h,g,T)}else T=void 0;return T}m.extend({hasData:function(h){return Pt.hasData(h)||yt.hasData(h)},data:function(h,g,T){return Pt.access(h,g,T)},removeData:function(h,g){Pt.remove(h,g)},_data:function(h,g,T){return yt.access(h,g,T)},_removeData:function(h,g){yt.remove(h,g)}}),m.fn.extend({data:function(h,g){var T,v,R,O=this[0],L=O&&O.attributes;if(h===void 0){if(this.length&&(R=Pt.get(O),O.nodeType===1&&!yt.get(O,"hasDataAttrs"))){for(T=L.length;T--;)L[T]&&(v=L[T].name,v.indexOf("data-")===0&&(v=Nt(v.slice(5)),Ut(O,v,R[v])));yt.set(O,"hasDataAttrs",!0)}return R}return typeof h=="object"?this.each(function(){Pt.set(this,h)}):P(this,function(W){var H;if(O&&W===void 0)return H=Pt.get(O,h),H!==void 0||(H=Ut(O,h),H!==void 0)?H:void 0;this.each(function(){Pt.set(this,h,W)})},null,g,arguments.length>1,null,!0)},removeData:function(h){return this.each(function(){Pt.remove(this,h)})}}),m.extend({queue:function(h,g,T){var v;if(h)return g=(g||"fx")+"queue",v=yt.get(h,g),T&&(!v||Array.isArray(T)?v=yt.access(h,g,m.makeArray(T)):v.push(T)),v||[]},dequeue:function(h,g){g=g||"fx";var T=m.queue(h,g),v=T.length,R=T.shift(),O=m._queueHooks(h,g),L=function(){m.dequeue(h,g)};R==="inprogress"&&(R=T.shift(),v--),R&&(g==="fx"&&T.unshift("inprogress"),delete O.stop,R.call(h,L,O)),!v&&O&&O.empty.fire()},_queueHooks:function(h,g){var T=g+"queueHooks";return yt.get(h,T)||yt.access(h,T,{empty:m.Callbacks("once memory").add(function(){yt.remove(h,[g+"queue",T])})})}}),m.fn.extend({queue:function(h,g){var T=2;return typeof h!="string"&&(g=h,h="fx",T--),arguments.length<T?m.queue(this[0],h):g===void 0?this:this.each(function(){var v=m.queue(this,h,g);m._queueHooks(this,h),h==="fx"&&v[0]!=="inprogress"&&m.dequeue(this,h)})},dequeue:function(h){return this.each(function(){m.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,g){var T,v=1,R=m.Deferred(),O=this,L=this.length,W=function(){--v||R.resolveWith(O,[O])};for(typeof h!="string"&&(g=h,h=void 0),h=h||"fx";L--;)T=yt.get(O[L],h+"queueHooks"),T&&T.empty&&(v++,T.empty.add(W));return W(),R.promise(g)}});var j=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Rt=new RegExp("^(?:([+-])=|)("+j+")([a-z%]*)$","i"),ae=["Top","Right","Bottom","Left"],ce=y.documentElement,be=function(h){return m.contains(h.ownerDocument,h)},xe={composed:!0};ce.getRootNode&&(be=function(h){return m.contains(h.ownerDocument,h)||h.getRootNode(xe)===h.ownerDocument});var Qe=function(h,g){return h=g||h,h.style.display==="none"||h.style.display===""&&be(h)&&m.css(h,"display")==="none"};function As(h,g,T,v){var R,O,L=20,W=v?function(){return v.cur()}:function(){return m.css(h,g,"")},H=W(),Z=T&&T[3]||(m.cssNumber[g]?"":"px"),ct=h.nodeType&&(m.cssNumber[g]||Z!=="px"&&+H)&&Rt.exec(m.css(h,g));if(ct&&ct[3]!==Z){for(H=H/2,Z=Z||ct[3],ct=+H||1;L--;)m.style(h,g,ct+Z),(1-O)*(1-(O=W()/H||.5))<=0&&(L=0),ct=ct/O;ct=ct*2,m.style(h,g,ct+Z),T=T||[]}return T&&(ct=+ct||+H||0,R=T[1]?ct+(T[1]+1)*T[2]:+T[2],v&&(v.unit=Z,v.start=ct,v.end=R)),R}var _s={};function Ns(h){var g,T=h.ownerDocument,v=h.nodeName,R=_s[v];return R||(g=T.body.appendChild(T.createElement(v)),R=m.css(g,"display"),g.parentNode.removeChild(g),R==="none"&&(R="block"),_s[v]=R,R)}function Ti(h,g){for(var T,v,R=[],O=0,L=h.length;O<L;O++)v=h[O],v.style&&(T=v.style.display,g?(T==="none"&&(R[O]=yt.get(v,"display")||null,R[O]||(v.style.display="")),v.style.display===""&&Qe(v)&&(R[O]=Ns(v))):T!=="none"&&(R[O]="none",yt.set(v,"display",T)));for(O=0;O<L;O++)R[O]!=null&&(h[O].style.display=R[O]);return h}m.fn.extend({show:function(){return Ti(this,!0)},hide:function(){return Ti(this)},toggle:function(h){return typeof h=="boolean"?h?this.show():this.hide():this.each(function(){Qe(this)?m(this).show():m(this).hide()})}});var Hi=/^(?:checkbox|radio)$/i,ri=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Kr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var h=y.createDocumentFragment(),g=h.appendChild(y.createElement("div")),T=y.createElement("input");T.setAttribute("type","radio"),T.setAttribute("checked","checked"),T.setAttribute("name","t"),g.appendChild(T),A.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,g.innerHTML="<textarea>x</textarea>",A.noCloneChecked=!!g.cloneNode(!0).lastChild.defaultValue,g.innerHTML="<option></option>",A.option=!!g.lastChild})();var ys={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ys.tbody=ys.tfoot=ys.colgroup=ys.caption=ys.thead,ys.th=ys.td,A.option||(ys.optgroup=ys.option=[1,"<select multiple='multiple'>","</select>"]);function ls(h,g){var T;return typeof h.getElementsByTagName<"u"?T=h.getElementsByTagName(g||"*"):typeof h.querySelectorAll<"u"?T=h.querySelectorAll(g||"*"):T=[],g===void 0||g&&q(h,g)?m.merge([h],T):T}function zi(h,g){for(var T=0,v=h.length;T<v;T++)yt.set(h[T],"globalEval",!g||yt.get(g[T],"globalEval"))}var Xc=/<|&#?\w+;/;function Yn(h,g,T,v,R){for(var O,L,W,H,Z,ct,ft=g.createDocumentFragment(),et=[],Tt=0,re=h.length;Tt<re;Tt++)if(O=h[Tt],O||O===0)if(I(O)==="object")m.merge(et,O.nodeType?[O]:O);else if(!Xc.test(O))et.push(g.createTextNode(O));else{for(L=L||ft.appendChild(g.createElement("div")),W=(ri.exec(O)||["",""])[1].toLowerCase(),H=ys[W]||ys._default,L.innerHTML=H[1]+m.htmlPrefilter(O)+H[2],ct=H[0];ct--;)L=L.lastChild;m.merge(et,L.childNodes),L=ft.firstChild,L.textContent=""}for(ft.textContent="",Tt=0;O=et[Tt++];){if(v&&m.inArray(O,v)>-1){R&&R.push(O);continue}if(Z=be(O),L=ls(ft.appendChild(O),"script"),Z&&zi(L),T)for(ct=0;O=L[ct++];)Kr.test(O.type||"")&&T.push(O)}return ft}var qr=/^([^.]*)(?:\.(.+)|)/;function Si(){return!0}function Wi(){return!1}function Xr(h,g,T,v,R,O){var L,W;if(typeof g=="object"){typeof T!="string"&&(v=v||T,T=void 0);for(W in g)Xr(h,W,T,v,g[W],O);return h}if(v==null&&R==null?(R=T,v=T=void 0):R==null&&(typeof T=="string"?(R=v,v=void 0):(R=v,v=T,T=void 0)),R===!1)R=Wi;else if(!R)return h;return O===1&&(L=R,R=function(H){return m().off(H),L.apply(this,arguments)},R.guid=L.guid||(L.guid=m.guid++)),h.each(function(){m.event.add(this,g,R,v,T)})}m.event={global:{},add:function(h,g,T,v,R){var O,L,W,H,Z,ct,ft,et,Tt,re,Ee,_e=yt.get(h);if(Qt(h))for(T.handler&&(O=T,T=O.handler,R=O.selector),R&&m.find.matchesSelector(ce,R),T.guid||(T.guid=m.guid++),(H=_e.events)||(H=_e.events=Object.create(null)),(L=_e.handle)||(L=_e.handle=function(rs){return typeof m<"u"&&m.event.triggered!==rs.type?m.event.dispatch.apply(h,arguments):void 0}),g=(g||"").match(Bt)||[""],Z=g.length;Z--;)W=qr.exec(g[Z])||[],Tt=Ee=W[1],re=(W[2]||"").split(".").sort(),Tt&&(ft=m.event.special[Tt]||{},Tt=(R?ft.delegateType:ft.bindType)||Tt,ft=m.event.special[Tt]||{},ct=m.extend({type:Tt,origType:Ee,data:v,handler:T,guid:T.guid,selector:R,needsContext:R&&m.expr.match.needsContext.test(R),namespace:re.join(".")},O),(et=H[Tt])||(et=H[Tt]=[],et.delegateCount=0,(!ft.setup||ft.setup.call(h,v,re,L)===!1)&&h.addEventListener&&h.addEventListener(Tt,L)),ft.add&&(ft.add.call(h,ct),ct.handler.guid||(ct.handler.guid=T.guid)),R?et.splice(et.delegateCount++,0,ct):et.push(ct),m.event.global[Tt]=!0)},remove:function(h,g,T,v,R){var O,L,W,H,Z,ct,ft,et,Tt,re,Ee,_e=yt.hasData(h)&&yt.get(h);if(!(!_e||!(H=_e.events))){for(g=(g||"").match(Bt)||[""],Z=g.length;Z--;){if(W=qr.exec(g[Z])||[],Tt=Ee=W[1],re=(W[2]||"").split(".").sort(),!Tt){for(Tt in H)m.event.remove(h,Tt+g[Z],T,v,!0);continue}for(ft=m.event.special[Tt]||{},Tt=(v?ft.delegateType:ft.bindType)||Tt,et=H[Tt]||[],W=W[2]&&new RegExp("(^|\\.)"+re.join("\\.(?:.*\\.|)")+"(\\.|$)"),L=O=et.length;O--;)ct=et[O],(R||Ee===ct.origType)&&(!T||T.guid===ct.guid)&&(!W||W.test(ct.namespace))&&(!v||v===ct.selector||v==="**"&&ct.selector)&&(et.splice(O,1),ct.selector&&et.delegateCount--,ft.remove&&ft.remove.call(h,ct));L&&!et.length&&((!ft.teardown||ft.teardown.call(h,re,_e.handle)===!1)&&m.removeEvent(h,Tt,_e.handle),delete H[Tt])}m.isEmptyObject(H)&&yt.remove(h,"handle events")}},dispatch:function(h){var g,T,v,R,O,L,W=new Array(arguments.length),H=m.event.fix(h),Z=(yt.get(this,"events")||Object.create(null))[H.type]||[],ct=m.event.special[H.type]||{};for(W[0]=H,g=1;g<arguments.length;g++)W[g]=arguments[g];if(H.delegateTarget=this,!(ct.preDispatch&&ct.preDispatch.call(this,H)===!1)){for(L=m.event.handlers.call(this,H,Z),g=0;(R=L[g++])&&!H.isPropagationStopped();)for(H.currentTarget=R.elem,T=0;(O=R.handlers[T++])&&!H.isImmediatePropagationStopped();)(!H.rnamespace||O.namespace===!1||H.rnamespace.test(O.namespace))&&(H.handleObj=O,H.data=O.data,v=((m.event.special[O.origType]||{}).handle||O.handler).apply(R.elem,W),v!==void 0&&(H.result=v)===!1&&(H.preventDefault(),H.stopPropagation()));return ct.postDispatch&&ct.postDispatch.call(this,H),H.result}},handlers:function(h,g){var T,v,R,O,L,W=[],H=g.delegateCount,Z=h.target;if(H&&Z.nodeType&&!(h.type==="click"&&h.button>=1)){for(;Z!==this;Z=Z.parentNode||this)if(Z.nodeType===1&&!(h.type==="click"&&Z.disabled===!0)){for(O=[],L={},T=0;T<H;T++)v=g[T],R=v.selector+" ",L[R]===void 0&&(L[R]=v.needsContext?m(R,this).index(Z)>-1:m.find(R,this,null,[Z]).length),L[R]&&O.push(v);O.length&&W.push({elem:Z,handlers:O})}}return Z=this,H<g.length&&W.push({elem:Z,handlers:g.slice(H)}),W},addProp:function(h,g){Object.defineProperty(m.Event.prototype,h,{enumerable:!0,configurable:!0,get:E(g)?function(){if(this.originalEvent)return g(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(T){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:T})}})},fix:function(h){return h[m.expando]?h:new m.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var g=this||h;return Hi.test(g.type)&&g.click&&q(g,"input")&&B(g,"click",!0),!1},trigger:function(h){var g=this||h;return Hi.test(g.type)&&g.click&&q(g,"input")&&B(g,"click"),!0},_default:function(h){var g=h.target;return Hi.test(g.type)&&g.click&&q(g,"input")&&yt.get(g,"click")||q(g,"a")}},beforeunload:{postDispatch:function(h){h.result!==void 0&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}};function B(h,g,T){if(!T){yt.get(h,g)===void 0&&m.event.add(h,g,Si);return}yt.set(h,g,!1),m.event.add(h,g,{namespace:!1,handler:function(v){var R,O=yt.get(this,g);if(v.isTrigger&1&&this[g]){if(O)(m.event.special[g]||{}).delegateType&&v.stopPropagation();else if(O=a.call(arguments),yt.set(this,g,O),this[g](),R=yt.get(this,g),yt.set(this,g,!1),O!==R)return v.stopImmediatePropagation(),v.preventDefault(),R}else O&&(yt.set(this,g,m.event.trigger(O[0],O.slice(1),this)),v.stopPropagation(),v.isImmediatePropagationStopped=Si)}})}m.removeEvent=function(h,g,T){h.removeEventListener&&h.removeEventListener(g,T)},m.Event=function(h,g){if(!(this instanceof m.Event))return new m.Event(h,g);h&&h.type?(this.originalEvent=h,this.type=h.type,this.isDefaultPrevented=h.defaultPrevented||h.defaultPrevented===void 0&&h.returnValue===!1?Si:Wi,this.target=h.target&&h.target.nodeType===3?h.target.parentNode:h.target,this.currentTarget=h.currentTarget,this.relatedTarget=h.relatedTarget):this.type=h,g&&m.extend(this,g),this.timeStamp=h&&h.timeStamp||Date.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:Wi,isPropagationStopped:Wi,isImmediatePropagationStopped:Wi,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=Si,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=Si,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=Si,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},m.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},m.event.addProp),m.each({focus:"focusin",blur:"focusout"},function(h,g){function T(v){if(y.documentMode){var R=yt.get(this,"handle"),O=m.event.fix(v);O.type=v.type==="focusin"?"focus":"blur",O.isSimulated=!0,R(v),O.target===O.currentTarget&&R(O)}else m.event.simulate(g,v.target,m.event.fix(v))}m.event.special[h]={setup:function(){var v;if(B(this,h,!0),y.documentMode)v=yt.get(this,g),v||this.addEventListener(g,T),yt.set(this,g,(v||0)+1);else return!1},trigger:function(){return B(this,h),!0},teardown:function(){var v;if(y.documentMode)v=yt.get(this,g)-1,v?yt.set(this,g,v):(this.removeEventListener(g,T),yt.remove(this,g));else return!1},_default:function(v){return yt.get(v.target,h)},delegateType:g},m.event.special[g]={setup:function(){var v=this.ownerDocument||this.document||this,R=y.documentMode?this:v,O=yt.get(R,g);O||(y.documentMode?this.addEventListener(g,T):v.addEventListener(h,T,!0)),yt.set(R,g,(O||0)+1)},teardown:function(){var v=this.ownerDocument||this.document||this,R=y.documentMode?this:v,O=yt.get(R,g)-1;O?yt.set(R,g,O):(y.documentMode?this.removeEventListener(g,T):v.removeEventListener(h,T,!0),yt.remove(R,g))}}}),m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(h,g){m.event.special[h]={delegateType:g,bindType:g,handle:function(T){var v,R=this,O=T.relatedTarget,L=T.handleObj;return(!O||O!==R&&!m.contains(R,O))&&(T.type=L.origType,v=L.handler.apply(this,arguments),T.type=g),v}}}),m.fn.extend({on:function(h,g,T,v){return Xr(this,h,g,T,v)},one:function(h,g,T,v){return Xr(this,h,g,T,v,1)},off:function(h,g,T){var v,R;if(h&&h.preventDefault&&h.handleObj)return v=h.handleObj,m(h.delegateTarget).off(v.namespace?v.origType+"."+v.namespace:v.origType,v.selector,v.handler),this;if(typeof h=="object"){for(R in h)this.off(R,g,h[R]);return this}return(g===!1||typeof g=="function")&&(T=g,g=void 0),T===!1&&(T=Wi),this.each(function(){m.event.remove(this,h,T,g)})}});var st=/<script|<style|<link/i,rt=/checked\s*(?:[^=]|=\s*.checked.)/i,nt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function mt(h,g){return q(h,"table")&&q(g.nodeType!==11?g:g.firstChild,"tr")&&m(h).children("tbody")[0]||h}function ne(h){return h.type=(h.getAttribute("type")!==null)+"/"+h.type,h}function Jt(h){return(h.type||"").slice(0,5)==="true/"?h.type=h.type.slice(5):h.removeAttribute("type"),h}function Zt(h,g){var T,v,R,O,L,W,H;if(g.nodeType===1){if(yt.hasData(h)&&(O=yt.get(h),H=O.events,H)){yt.remove(g,"handle events");for(R in H)for(T=0,v=H[R].length;T<v;T++)m.event.add(g,R,H[R][T])}Pt.hasData(h)&&(L=Pt.access(h),W=m.extend({},L),Pt.set(g,W))}}function le(h,g){var T=g.nodeName.toLowerCase();T==="input"&&Hi.test(h.type)?g.checked=h.checked:(T==="input"||T==="textarea")&&(g.defaultValue=h.defaultValue)}function me(h,g,T,v){g=o(g);var R,O,L,W,H,Z,ct=0,ft=h.length,et=ft-1,Tt=g[0],re=E(Tt);if(re||ft>1&&typeof Tt=="string"&&!A.checkClone&&rt.test(Tt))return h.each(function(Ee){var _e=h.eq(Ee);re&&(g[0]=Tt.call(this,Ee,_e.html())),me(_e,g,T,v)});if(ft&&(R=Yn(g,h[0].ownerDocument,!1,h,v),O=R.firstChild,R.childNodes.length===1&&(R=O),O||v)){for(L=m.map(ls(R,"script"),ne),W=L.length;ct<ft;ct++)H=R,ct!==et&&(H=m.clone(H,!0,!0),W&&m.merge(L,ls(H,"script"))),T.call(h[ct],H,ct);if(W)for(Z=L[L.length-1].ownerDocument,m.map(L,Jt),ct=0;ct<W;ct++)H=L[ct],Kr.test(H.type||"")&&!yt.access(H,"globalEval")&&m.contains(Z,H)&&(H.src&&(H.type||"").toLowerCase()!=="module"?m._evalUrl&&!H.noModule&&m._evalUrl(H.src,{nonce:H.nonce||H.getAttribute("nonce")},Z):x(H.textContent.replace(nt,""),H,Z))}return h}function he(h,g,T){for(var v,R=g?m.filter(g,h):h,O=0;(v=R[O])!=null;O++)!T&&v.nodeType===1&&m.cleanData(ls(v)),v.parentNode&&(T&&be(v)&&zi(ls(v,"script")),v.parentNode.removeChild(v));return h}m.extend({htmlPrefilter:function(h){return h},clone:function(h,g,T){var v,R,O,L,W=h.cloneNode(!0),H=be(h);if(!A.noCloneChecked&&(h.nodeType===1||h.nodeType===11)&&!m.isXMLDoc(h))for(L=ls(W),O=ls(h),v=0,R=O.length;v<R;v++)le(O[v],L[v]);if(g)if(T)for(O=O||ls(h),L=L||ls(W),v=0,R=O.length;v<R;v++)Zt(O[v],L[v]);else Zt(h,W);return L=ls(W,"script"),L.length>0&&zi(L,!H&&ls(h,"script")),W},cleanData:function(h){for(var g,T,v,R=m.event.special,O=0;(T=h[O])!==void 0;O++)if(Qt(T)){if(g=T[yt.expando]){if(g.events)for(v in g.events)R[v]?m.event.remove(T,v):m.removeEvent(T,v,g.handle);T[yt.expando]=void 0}T[Pt.expando]&&(T[Pt.expando]=void 0)}}}),m.fn.extend({detach:function(h){return he(this,h,!0)},remove:function(h){return he(this,h)},text:function(h){return P(this,function(g){return g===void 0?m.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=g)})},null,h,arguments.length)},append:function(){return me(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=mt(this,h);g.appendChild(h)}})},prepend:function(){return me(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=mt(this,h);g.insertBefore(h,g.firstChild)}})},before:function(){return me(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return me(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,g=0;(h=this[g])!=null;g++)h.nodeType===1&&(m.cleanData(ls(h,!1)),h.textContent="");return this},clone:function(h,g){return h=h??!1,g=g??h,this.map(function(){return m.clone(this,h,g)})},html:function(h){return P(this,function(g){var T=this[0]||{},v=0,R=this.length;if(g===void 0&&T.nodeType===1)return T.innerHTML;if(typeof g=="string"&&!st.test(g)&&!ys[(ri.exec(g)||["",""])[1].toLowerCase()]){g=m.htmlPrefilter(g);try{for(;v<R;v++)T=this[v]||{},T.nodeType===1&&(m.cleanData(ls(T,!1)),T.innerHTML=g);T=0}catch{}}T&&this.empty().append(g)},null,h,arguments.length)},replaceWith:function(){var h=[];return me(this,arguments,function(g){var T=this.parentNode;m.inArray(this,h)<0&&(m.cleanData(ls(this)),T&&T.replaceChild(g,this))},h)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,g){m.fn[h]=function(T){for(var v,R=[],O=m(T),L=O.length-1,W=0;W<=L;W++)v=W===L?this:this.clone(!0),m(O[W])[g](v),c.apply(R,v.get());return this.pushStack(R)}});var ge=new RegExp("^("+j+")(?!px)[a-z%]+$","i"),De=/^--/,Us=function(h){var g=h.ownerDocument.defaultView;return(!g||!g.opener)&&(g=t),g.getComputedStyle(h)},ye=function(h,g,T){var v,R,O={};for(R in g)O[R]=h.style[R],h.style[R]=g[R];v=T.call(h);for(R in g)h.style[R]=O[R];return v},Tn=new RegExp(ae.join("|"),"i");(function(){function h(){if(Z){H.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Z.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ce.appendChild(H).appendChild(Z);var ct=t.getComputedStyle(Z);T=ct.top!=="1%",W=g(ct.marginLeft)===12,Z.style.right="60%",O=g(ct.right)===36,v=g(ct.width)===36,Z.style.position="absolute",R=g(Z.offsetWidth/3)===12,ce.removeChild(H),Z=null}}function g(ct){return Math.round(parseFloat(ct))}var T,v,R,O,L,W,H=y.createElement("div"),Z=y.createElement("div");Z.style&&(Z.style.backgroundClip="content-box",Z.cloneNode(!0).style.backgroundClip="",A.clearCloneStyle=Z.style.backgroundClip==="content-box",m.extend(A,{boxSizingReliable:function(){return h(),v},pixelBoxStyles:function(){return h(),O},pixelPosition:function(){return h(),T},reliableMarginLeft:function(){return h(),W},scrollboxSize:function(){return h(),R},reliableTrDimensions:function(){var ct,ft,et,Tt;return L==null&&(ct=y.createElement("table"),ft=y.createElement("tr"),et=y.createElement("div"),ct.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ft.style.cssText="box-sizing:content-box;border:1px solid",ft.style.height="1px",et.style.height="9px",et.style.display="block",ce.appendChild(ct).appendChild(ft).appendChild(et),Tt=t.getComputedStyle(ft),L=parseInt(Tt.height,10)+parseInt(Tt.borderTopWidth,10)+parseInt(Tt.borderBottomWidth,10)===ft.offsetHeight,ce.removeChild(ct)),L}}))})();function ve(h,g,T){var v,R,O,L,W=De.test(g),H=h.style;return T=T||Us(h),T&&(L=T.getPropertyValue(g)||T[g],W&&L&&(L=L.replace(K,"$1")||void 0),L===""&&!be(h)&&(L=m.style(h,g)),!A.pixelBoxStyles()&&ge.test(L)&&Tn.test(g)&&(v=H.width,R=H.minWidth,O=H.maxWidth,H.minWidth=H.maxWidth=H.width=L,L=T.width,H.width=v,H.minWidth=R,H.maxWidth=O)),L!==void 0?L+"":L}function ai(h,g){return{get:function(){if(h()){delete this.get;return}return(this.get=g).apply(this,arguments)}}}var oi=["Webkit","Moz","ms"],ci=y.createElement("div").style,Ys={};function Ve(h){for(var g=h[0].toUpperCase()+h.slice(1),T=oi.length;T--;)if(h=oi[T]+g,h in ci)return h}function vi(h){var g=m.cssProps[h]||Ys[h];return g||(h in ci?h:Ys[h]=Ve(h)||h)}var bs=/^(none|table(?!-c[ea]).+)/,xm={position:"absolute",visibility:"hidden",display:"block"},xh={letterSpacing:"0",fontWeight:"400"};function Rh(h,g,T){var v=Rt.exec(g);return v?Math.max(0,v[2]-(T||0))+(v[3]||"px"):g}function jc(h,g,T,v,R,O){var L=g==="width"?1:0,W=0,H=0,Z=0;if(T===(v?"border":"content"))return 0;for(;L<4;L+=2)T==="margin"&&(Z+=m.css(h,T+ae[L],!0,R)),v?(T==="content"&&(H-=m.css(h,"padding"+ae[L],!0,R)),T!=="margin"&&(H-=m.css(h,"border"+ae[L]+"Width",!0,R))):(H+=m.css(h,"padding"+ae[L],!0,R),T!=="padding"?H+=m.css(h,"border"+ae[L]+"Width",!0,R):W+=m.css(h,"border"+ae[L]+"Width",!0,R));return!v&&O>=0&&(H+=Math.max(0,Math.ceil(h["offset"+g[0].toUpperCase()+g.slice(1)]-O-H-W-.5))||0),H+Z}function Oh(h,g,T){var v=Us(h),R=!A.boxSizingReliable()||T,O=R&&m.css(h,"boxSizing",!1,v)==="border-box",L=O,W=ve(h,g,v),H="offset"+g[0].toUpperCase()+g.slice(1);if(ge.test(W)){if(!T)return W;W="auto"}return(!A.boxSizingReliable()&&O||!A.reliableTrDimensions()&&q(h,"tr")||W==="auto"||!parseFloat(W)&&m.css(h,"display",!1,v)==="inline")&&h.getClientRects().length&&(O=m.css(h,"boxSizing",!1,v)==="border-box",L=H in h,L&&(W=h[H])),W=parseFloat(W)||0,W+jc(h,g,T||(O?"border":"content"),L,v,W)+"px"}m.extend({cssHooks:{opacity:{get:function(h,g){if(g){var T=ve(h,"opacity");return T===""?"1":T}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,g,T,v){if(!(!h||h.nodeType===3||h.nodeType===8||!h.style)){var R,O,L,W=Nt(g),H=De.test(g),Z=h.style;if(H||(g=vi(W)),L=m.cssHooks[g]||m.cssHooks[W],T!==void 0){if(O=typeof T,O==="string"&&(R=Rt.exec(T))&&R[1]&&(T=As(h,g,R),O="number"),T==null||T!==T)return;O==="number"&&!H&&(T+=R&&R[3]||(m.cssNumber[W]?"":"px")),!A.clearCloneStyle&&T===""&&g.indexOf("background")===0&&(Z[g]="inherit"),(!L||!("set"in L)||(T=L.set(h,T,v))!==void 0)&&(H?Z.setProperty(g,T):Z[g]=T)}else return L&&"get"in L&&(R=L.get(h,!1,v))!==void 0?R:Z[g]}},css:function(h,g,T,v){var R,O,L,W=Nt(g),H=De.test(g);return H||(g=vi(W)),L=m.cssHooks[g]||m.cssHooks[W],L&&"get"in L&&(R=L.get(h,!0,T)),R===void 0&&(R=ve(h,g,v)),R==="normal"&&g in xh&&(R=xh[g]),T===""||T?(O=parseFloat(R),T===!0||isFinite(O)?O||0:R):R}}),m.each(["height","width"],function(h,g){m.cssHooks[g]={get:function(T,v,R){if(v)return bs.test(m.css(T,"display"))&&(!T.getClientRects().length||!T.getBoundingClientRect().width)?ye(T,xm,function(){return Oh(T,g,R)}):Oh(T,g,R)},set:function(T,v,R){var O,L=Us(T),W=!A.scrollboxSize()&&L.position==="absolute",H=W||R,Z=H&&m.css(T,"boxSizing",!1,L)==="border-box",ct=R?jc(T,g,R,Z,L):0;return Z&&W&&(ct-=Math.ceil(T["offset"+g[0].toUpperCase()+g.slice(1)]-parseFloat(L[g])-jc(T,g,"border",!1,L)-.5)),ct&&(O=Rt.exec(v))&&(O[3]||"px")!=="px"&&(T.style[g]=v,v=m.css(T,g)),Rh(T,v,ct)}}}),m.cssHooks.marginLeft=ai(A.reliableMarginLeft,function(h,g){if(g)return(parseFloat(ve(h,"marginLeft"))||h.getBoundingClientRect().left-ye(h,{marginLeft:0},function(){return h.getBoundingClientRect().left}))+"px"}),m.each({margin:"",padding:"",border:"Width"},function(h,g){m.cssHooks[h+g]={expand:function(T){for(var v=0,R={},O=typeof T=="string"?T.split(" "):[T];v<4;v++)R[h+ae[v]+g]=O[v]||O[v-2]||O[0];return R}},h!=="margin"&&(m.cssHooks[h+g].set=Rh)}),m.fn.extend({css:function(h,g){return P(this,function(T,v,R){var O,L,W={},H=0;if(Array.isArray(v)){for(O=Us(T),L=v.length;H<L;H++)W[v[H]]=m.css(T,v[H],!1,O);return W}return R!==void 0?m.style(T,v,R):m.css(T,v)},h,g,arguments.length>1)}});function vs(h,g,T,v,R){return new vs.prototype.init(h,g,T,v,R)}m.Tween=vs,vs.prototype={constructor:vs,init:function(h,g,T,v,R,O){this.elem=h,this.prop=T,this.easing=R||m.easing._default,this.options=g,this.start=this.now=this.cur(),this.end=v,this.unit=O||(m.cssNumber[T]?"":"px")},cur:function(){var h=vs.propHooks[this.prop];return h&&h.get?h.get(this):vs.propHooks._default.get(this)},run:function(h){var g,T=vs.propHooks[this.prop];return this.options.duration?this.pos=g=m.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):this.pos=g=h,this.now=(this.end-this.start)*g+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),T&&T.set?T.set(this):vs.propHooks._default.set(this),this}},vs.prototype.init.prototype=vs.prototype,vs.propHooks={_default:{get:function(h){var g;return h.elem.nodeType!==1||h.elem[h.prop]!=null&&h.elem.style[h.prop]==null?h.elem[h.prop]:(g=m.css(h.elem,h.prop,""),!g||g==="auto"?0:g)},set:function(h){m.fx.step[h.prop]?m.fx.step[h.prop](h):h.elem.nodeType===1&&(m.cssHooks[h.prop]||h.elem.style[vi(h.prop)]!=null)?m.style(h.elem,h.prop,h.now+h.unit):h.elem[h.prop]=h.now}}},vs.propHooks.scrollTop=vs.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},m.easing={linear:function(h){return h},swing:function(h){return .5-Math.cos(h*Math.PI)/2},_default:"swing"},m.fx=vs.prototype.init,m.fx.step={};var Kn,Ja,Rm=/^(?:toggle|show|hide)$/,Om=/queueHooks$/;function Qc(){Ja&&(y.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Qc):t.setTimeout(Qc,m.fx.interval),m.fx.tick())}function wh(){return t.setTimeout(function(){Kn=void 0}),Kn=Date.now()}function to(h,g){var T,v=0,R={height:h};for(g=g?1:0;v<4;v+=2-g)T=ae[v],R["margin"+T]=R["padding"+T]=h;return g&&(R.opacity=R.width=h),R}function Lh(h,g,T){for(var v,R=(Ks.tweeners[g]||[]).concat(Ks.tweeners["*"]),O=0,L=R.length;O<L;O++)if(v=R[O].call(T,g,h))return v}function wm(h,g,T){var v,R,O,L,W,H,Z,ct,ft="width"in g||"height"in g,et=this,Tt={},re=h.style,Ee=h.nodeType&&Qe(h),_e=yt.get(h,"fxshow");T.queue||(L=m._queueHooks(h,"fx"),L.unqueued==null&&(L.unqueued=0,W=L.empty.fire,L.empty.fire=function(){L.unqueued||W()}),L.unqueued++,et.always(function(){et.always(function(){L.unqueued--,m.queue(h,"fx").length||L.empty.fire()})}));for(v in g)if(R=g[v],Rm.test(R)){if(delete g[v],O=O||R==="toggle",R===(Ee?"hide":"show"))if(R==="show"&&_e&&_e[v]!==void 0)Ee=!0;else continue;Tt[v]=_e&&_e[v]||m.style(h,v)}if(H=!m.isEmptyObject(g),!(!H&&m.isEmptyObject(Tt))){ft&&h.nodeType===1&&(T.overflow=[re.overflow,re.overflowX,re.overflowY],Z=_e&&_e.display,Z==null&&(Z=yt.get(h,"display")),ct=m.css(h,"display"),ct==="none"&&(Z?ct=Z:(Ti([h],!0),Z=h.style.display||Z,ct=m.css(h,"display"),Ti([h]))),(ct==="inline"||ct==="inline-block"&&Z!=null)&&m.css(h,"float")==="none"&&(H||(et.done(function(){re.display=Z}),Z==null&&(ct=re.display,Z=ct==="none"?"":ct)),re.display="inline-block")),T.overflow&&(re.overflow="hidden",et.always(function(){re.overflow=T.overflow[0],re.overflowX=T.overflow[1],re.overflowY=T.overflow[2]})),H=!1;for(v in Tt)H||(_e?"hidden"in _e&&(Ee=_e.hidden):_e=yt.access(h,"fxshow",{display:Z}),O&&(_e.hidden=!Ee),Ee&&Ti([h],!0),et.done(function(){Ee||Ti([h]),yt.remove(h,"fxshow");for(v in Tt)m.style(h,v,Tt[v])})),H=Lh(Ee?_e[v]:0,v,et),v in _e||(_e[v]=H.start,Ee&&(H.end=H.start,H.start=0))}}function Lm(h,g){var T,v,R,O,L;for(T in h)if(v=Nt(T),R=g[v],O=h[T],Array.isArray(O)&&(R=O[1],O=h[T]=O[0]),T!==v&&(h[v]=O,delete h[T]),L=m.cssHooks[v],L&&"expand"in L){O=L.expand(O),delete h[v];for(T in O)T in h||(h[T]=O[T],g[T]=R)}else g[v]=R}function Ks(h,g,T){var v,R,O=0,L=Ks.prefilters.length,W=m.Deferred().always(function(){delete H.elem}),H=function(){if(R)return!1;for(var ft=Kn||wh(),et=Math.max(0,Z.startTime+Z.duration-ft),Tt=et/Z.duration||0,re=1-Tt,Ee=0,_e=Z.tweens.length;Ee<_e;Ee++)Z.tweens[Ee].run(re);return W.notifyWith(h,[Z,re,et]),re<1&&_e?et:(_e||W.notifyWith(h,[Z,1,0]),W.resolveWith(h,[Z]),!1)},Z=W.promise({elem:h,props:m.extend({},g),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},T),originalProperties:g,originalOptions:T,startTime:Kn||wh(),duration:T.duration,tweens:[],createTween:function(ft,et){var Tt=m.Tween(h,Z.opts,ft,et,Z.opts.specialEasing[ft]||Z.opts.easing);return Z.tweens.push(Tt),Tt},stop:function(ft){var et=0,Tt=ft?Z.tweens.length:0;if(R)return this;for(R=!0;et<Tt;et++)Z.tweens[et].run(1);return ft?(W.notifyWith(h,[Z,1,0]),W.resolveWith(h,[Z,ft])):W.rejectWith(h,[Z,ft]),this}}),ct=Z.props;for(Lm(ct,Z.opts.specialEasing);O<L;O++)if(v=Ks.prefilters[O].call(Z,h,ct,Z.opts),v)return E(v.stop)&&(m._queueHooks(Z.elem,Z.opts.queue).stop=v.stop.bind(v)),v;return m.map(ct,Lh,Z),E(Z.opts.start)&&Z.opts.start.call(h,Z),Z.progress(Z.opts.progress).done(Z.opts.done,Z.opts.complete).fail(Z.opts.fail).always(Z.opts.always),m.fx.timer(m.extend(H,{elem:h,anim:Z,queue:Z.opts.queue})),Z}m.Animation=m.extend(Ks,{tweeners:{"*":[function(h,g){var T=this.createTween(h,g);return As(T.elem,h,Rt.exec(g),T),T}]},tweener:function(h,g){E(h)?(g=h,h=["*"]):h=h.match(Bt);for(var T,v=0,R=h.length;v<R;v++)T=h[v],Ks.tweeners[T]=Ks.tweeners[T]||[],Ks.tweeners[T].unshift(g)},prefilters:[wm],prefilter:function(h,g){g?Ks.prefilters.unshift(h):Ks.prefilters.push(h)}}),m.speed=function(h,g,T){var v=h&&typeof h=="object"?m.extend({},h):{complete:T||!T&&g||E(h)&&h,duration:h,easing:T&&g||g&&!E(g)&&g};return m.fx.off?v.duration=0:typeof v.duration!="number"&&(v.duration in m.fx.speeds?v.duration=m.fx.speeds[v.duration]:v.duration=m.fx.speeds._default),(v.queue==null||v.queue===!0)&&(v.queue="fx"),v.old=v.complete,v.complete=function(){E(v.old)&&v.old.call(this),v.queue&&m.dequeue(this,v.queue)},v},m.fn.extend({fadeTo:function(h,g,T,v){return this.filter(Qe).css("opacity",0).show().end().animate({opacity:g},h,T,v)},animate:function(h,g,T,v){var R=m.isEmptyObject(h),O=m.speed(g,T,v),L=function(){var W=Ks(this,m.extend({},h),O);(R||yt.get(this,"finish"))&&W.stop(!0)};return L.finish=L,R||O.queue===!1?this.each(L):this.queue(O.queue,L)},stop:function(h,g,T){var v=function(R){var O=R.stop;delete R.stop,O(T)};return typeof h!="string"&&(T=g,g=h,h=void 0),g&&this.queue(h||"fx",[]),this.each(function(){var R=!0,O=h!=null&&h+"queueHooks",L=m.timers,W=yt.get(this);if(O)W[O]&&W[O].stop&&v(W[O]);else for(O in W)W[O]&&W[O].stop&&Om.test(O)&&v(W[O]);for(O=L.length;O--;)L[O].elem===this&&(h==null||L[O].queue===h)&&(L[O].anim.stop(T),R=!1,L.splice(O,1));(R||!T)&&m.dequeue(this,h)})},finish:function(h){return h!==!1&&(h=h||"fx"),this.each(function(){var g,T=yt.get(this),v=T[h+"queue"],R=T[h+"queueHooks"],O=m.timers,L=v?v.length:0;for(T.finish=!0,m.queue(this,h,[]),R&&R.stop&&R.stop.call(this,!0),g=O.length;g--;)O[g].elem===this&&O[g].queue===h&&(O[g].anim.stop(!0),O.splice(g,1));for(g=0;g<L;g++)v[g]&&v[g].finish&&v[g].finish.call(this);delete T.finish})}}),m.each(["toggle","show","hide"],function(h,g){var T=m.fn[g];m.fn[g]=function(v,R,O){return v==null||typeof v=="boolean"?T.apply(this,arguments):this.animate(to(g,!0),v,R,O)}}),m.each({slideDown:to("show"),slideUp:to("hide"),slideToggle:to("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(h,g){m.fn[h]=function(T,v,R){return this.animate(g,T,v,R)}}),m.timers=[],m.fx.tick=function(){var h,g=0,T=m.timers;for(Kn=Date.now();g<T.length;g++)h=T[g],!h()&&T[g]===h&&T.splice(g--,1);T.length||m.fx.stop(),Kn=void 0},m.fx.timer=function(h){m.timers.push(h),m.fx.start()},m.fx.interval=13,m.fx.start=function(){Ja||(Ja=!0,Qc())},m.fx.stop=function(){Ja=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(h,g){return h=m.fx&&m.fx.speeds[h]||h,g=g||"fx",this.queue(g,function(T,v){var R=t.setTimeout(T,h);v.stop=function(){t.clearTimeout(R)}})},(function(){var h=y.createElement("input"),g=y.createElement("select"),T=g.appendChild(y.createElement("option"));h.type="checkbox",A.checkOn=h.value!=="",A.optSelected=T.selected,h=y.createElement("input"),h.value="t",h.type="radio",A.radioValue=h.value==="t"})();var Nh,jr=m.expr.attrHandle;m.fn.extend({attr:function(h,g){return P(this,m.attr,h,g,arguments.length>1)},removeAttr:function(h){return this.each(function(){m.removeAttr(this,h)})}}),m.extend({attr:function(h,g,T){var v,R,O=h.nodeType;if(!(O===3||O===8||O===2)){if(typeof h.getAttribute>"u")return m.prop(h,g,T);if((O!==1||!m.isXMLDoc(h))&&(R=m.attrHooks[g.toLowerCase()]||(m.expr.match.bool.test(g)?Nh:void 0)),T!==void 0){if(T===null){m.removeAttr(h,g);return}return R&&"set"in R&&(v=R.set(h,T,g))!==void 0?v:(h.setAttribute(g,T+""),T)}return R&&"get"in R&&(v=R.get(h,g))!==null?v:(v=m.find.attr(h,g),v??void 0)}},attrHooks:{type:{set:function(h,g){if(!A.radioValue&&g==="radio"&&q(h,"input")){var T=h.value;return h.setAttribute("type",g),T&&(h.value=T),g}}}},removeAttr:function(h,g){var T,v=0,R=g&&g.match(Bt);if(R&&h.nodeType===1)for(;T=R[v++];)h.removeAttribute(T)}}),Nh={set:function(h,g,T){return g===!1?m.removeAttr(h,T):h.setAttribute(T,T),T}},m.each(m.expr.match.bool.source.match(/\w+/g),function(h,g){var T=jr[g]||m.find.attr;jr[g]=function(v,R,O){var L,W,H=R.toLowerCase();return O||(W=jr[H],jr[H]=L,L=T(v,R,O)!=null?H:null,jr[H]=W),L}});var Nm=/^(?:input|select|textarea|button)$/i,bm=/^(?:a|area)$/i;m.fn.extend({prop:function(h,g){return P(this,m.prop,h,g,arguments.length>1)},removeProp:function(h){return this.each(function(){delete this[m.propFix[h]||h]})}}),m.extend({prop:function(h,g,T){var v,R,O=h.nodeType;if(!(O===3||O===8||O===2))return(O!==1||!m.isXMLDoc(h))&&(g=m.propFix[g]||g,R=m.propHooks[g]),T!==void 0?R&&"set"in R&&(v=R.set(h,T,g))!==void 0?v:h[g]=T:R&&"get"in R&&(v=R.get(h,g))!==null?v:h[g]},propHooks:{tabIndex:{get:function(h){var g=m.find.attr(h,"tabindex");return g?parseInt(g,10):Nm.test(h.nodeName)||bm.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),A.optSelected||(m.propHooks.selected={get:function(h){var g=h.parentNode;return g&&g.parentNode&&g.parentNode.selectedIndex,null},set:function(h){var g=h.parentNode;g&&(g.selectedIndex,g.parentNode&&g.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});function Sn(h){var g=h.match(Bt)||[];return g.join(" ")}function vn(h){return h.getAttribute&&h.getAttribute("class")||""}function Zc(h){return Array.isArray(h)?h:typeof h=="string"?h.match(Bt)||[]:[]}m.fn.extend({addClass:function(h){var g,T,v,R,O,L;return E(h)?this.each(function(W){m(this).addClass(h.call(this,W,vn(this)))}):(g=Zc(h),g.length?this.each(function(){if(v=vn(this),T=this.nodeType===1&&" "+Sn(v)+" ",T){for(O=0;O<g.length;O++)R=g[O],T.indexOf(" "+R+" ")<0&&(T+=R+" ");L=Sn(T),v!==L&&this.setAttribute("class",L)}}):this)},removeClass:function(h){var g,T,v,R,O,L;return E(h)?this.each(function(W){m(this).removeClass(h.call(this,W,vn(this)))}):arguments.length?(g=Zc(h),g.length?this.each(function(){if(v=vn(this),T=this.nodeType===1&&" "+Sn(v)+" ",T){for(O=0;O<g.length;O++)for(R=g[O];T.indexOf(" "+R+" ")>-1;)T=T.replace(" "+R+" "," ");L=Sn(T),v!==L&&this.setAttribute("class",L)}}):this):this.attr("class","")},toggleClass:function(h,g){var T,v,R,O,L=typeof h,W=L==="string"||Array.isArray(h);return E(h)?this.each(function(H){m(this).toggleClass(h.call(this,H,vn(this),g),g)}):typeof g=="boolean"&&W?g?this.addClass(h):this.removeClass(h):(T=Zc(h),this.each(function(){if(W)for(O=m(this),R=0;R<T.length;R++)v=T[R],O.hasClass(v)?O.removeClass(v):O.addClass(v);else(h===void 0||L==="boolean")&&(v=vn(this),v&&yt.set(this,"__className__",v),this.setAttribute&&this.setAttribute("class",v||h===!1?"":yt.get(this,"__className__")||""))}))},hasClass:function(h){var g,T,v=0;for(g=" "+h+" ";T=this[v++];)if(T.nodeType===1&&(" "+Sn(vn(T))+" ").indexOf(g)>-1)return!0;return!1}});var Dm=/\r/g;m.fn.extend({val:function(h){var g,T,v,R=this[0];return arguments.length?(v=E(h),this.each(function(O){var L;this.nodeType===1&&(v?L=h.call(this,O,m(this).val()):L=h,L==null?L="":typeof L=="number"?L+="":Array.isArray(L)&&(L=m.map(L,function(W){return W==null?"":W+""})),g=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],(!g||!("set"in g)||g.set(this,L,"value")===void 0)&&(this.value=L))})):R?(g=m.valHooks[R.type]||m.valHooks[R.nodeName.toLowerCase()],g&&"get"in g&&(T=g.get(R,"value"))!==void 0?T:(T=R.value,typeof T=="string"?T.replace(Dm,""):T??"")):void 0}}),m.extend({valHooks:{option:{get:function(h){var g=m.find.attr(h,"value");return g??Sn(m.text(h))}},select:{get:function(h){var g,T,v,R=h.options,O=h.selectedIndex,L=h.type==="select-one",W=L?null:[],H=L?O+1:R.length;for(O<0?v=H:v=L?O:0;v<H;v++)if(T=R[v],(T.selected||v===O)&&!T.disabled&&(!T.parentNode.disabled||!q(T.parentNode,"optgroup"))){if(g=m(T).val(),L)return g;W.push(g)}return W},set:function(h,g){for(var T,v,R=h.options,O=m.makeArray(g),L=R.length;L--;)v=R[L],(v.selected=m.inArray(m.valHooks.option.get(v),O)>-1)&&(T=!0);return T||(h.selectedIndex=-1),O}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(h,g){if(Array.isArray(g))return h.checked=m.inArray(m(h).val(),g)>-1}},A.checkOn||(m.valHooks[this].get=function(h){return h.getAttribute("value")===null?"on":h.value})});var Qr=t.location,bh={guid:Date.now()},$c=/\?/;m.parseXML=function(h){var g,T;if(!h||typeof h!="string")return null;try{g=new t.DOMParser().parseFromString(h,"text/xml")}catch{}return T=g&&g.getElementsByTagName("parsererror")[0],(!g||T)&&m.error("Invalid XML: "+(T?m.map(T.childNodes,function(v){return v.textContent}).join(`
`):h)),g};var Dh=/^(?:focusinfocus|focusoutblur)$/,Ch=function(h){h.stopPropagation()};m.extend(m.event,{trigger:function(h,g,T,v){var R,O,L,W,H,Z,ct,ft,et=[T||y],Tt=p.call(h,"type")?h.type:h,re=p.call(h,"namespace")?h.namespace.split("."):[];if(O=ft=L=T=T||y,!(T.nodeType===3||T.nodeType===8)&&!Dh.test(Tt+m.event.triggered)&&(Tt.indexOf(".")>-1&&(re=Tt.split("."),Tt=re.shift(),re.sort()),H=Tt.indexOf(":")<0&&"on"+Tt,h=h[m.expando]?h:new m.Event(Tt,typeof h=="object"&&h),h.isTrigger=v?2:3,h.namespace=re.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+re.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=T),g=g==null?[h]:m.makeArray(g,[h]),ct=m.event.special[Tt]||{},!(!v&&ct.trigger&&ct.trigger.apply(T,g)===!1))){if(!v&&!ct.noBubble&&!S(T)){for(W=ct.delegateType||Tt,Dh.test(W+Tt)||(O=O.parentNode);O;O=O.parentNode)et.push(O),L=O;L===(T.ownerDocument||y)&&et.push(L.defaultView||L.parentWindow||t)}for(R=0;(O=et[R++])&&!h.isPropagationStopped();)ft=O,h.type=R>1?W:ct.bindType||Tt,Z=(yt.get(O,"events")||Object.create(null))[h.type]&&yt.get(O,"handle"),Z&&Z.apply(O,g),Z=H&&O[H],Z&&Z.apply&&Qt(O)&&(h.result=Z.apply(O,g),h.result===!1&&h.preventDefault());return h.type=Tt,!v&&!h.isDefaultPrevented()&&(!ct._default||ct._default.apply(et.pop(),g)===!1)&&Qt(T)&&H&&E(T[Tt])&&!S(T)&&(L=T[H],L&&(T[H]=null),m.event.triggered=Tt,h.isPropagationStopped()&&ft.addEventListener(Tt,Ch),T[Tt](),h.isPropagationStopped()&&ft.removeEventListener(Tt,Ch),m.event.triggered=void 0,L&&(T[H]=L)),h.result}},simulate:function(h,g,T){var v=m.extend(new m.Event,T,{type:h,isSimulated:!0});m.event.trigger(v,null,g)}}),m.fn.extend({trigger:function(h,g){return this.each(function(){m.event.trigger(h,g,this)})},triggerHandler:function(h,g){var T=this[0];if(T)return m.event.trigger(h,g,T,!0)}});var Cm=/\[\]$/,Ph=/\r?\n/g,Pm=/^(?:submit|button|image|reset|file)$/i,Bm=/^(?:input|select|textarea|keygen)/i;function Jc(h,g,T,v){var R;if(Array.isArray(g))m.each(g,function(O,L){T||Cm.test(h)?v(h,L):Jc(h+"["+(typeof L=="object"&&L!=null?O:"")+"]",L,T,v)});else if(!T&&I(g)==="object")for(R in g)Jc(h+"["+R+"]",g[R],T,v);else v(h,g)}m.param=function(h,g){var T,v=[],R=function(O,L){var W=E(L)?L():L;v[v.length]=encodeURIComponent(O)+"="+encodeURIComponent(W??"")};if(h==null)return"";if(Array.isArray(h)||h.jquery&&!m.isPlainObject(h))m.each(h,function(){R(this.name,this.value)});else for(T in h)Jc(T,h[T],g,R);return v.join("&")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=m.prop(this,"elements");return h?m.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!m(this).is(":disabled")&&Bm.test(this.nodeName)&&!Pm.test(h)&&(this.checked||!Hi.test(h))}).map(function(h,g){var T=m(this).val();return T==null?null:Array.isArray(T)?m.map(T,function(v){return{name:g.name,value:v.replace(Ph,`\r
`)}}):{name:g.name,value:T.replace(Ph,`\r
`)}}).get()}});var Vm=/%20/g,Gm=/#.*$/,Um=/([?&])_=[^&]*/,km=/^(.*?):[ \t]*([^\r\n]*)$/mg,Fm=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hm=/^(?:GET|HEAD)$/,zm=/^\/\//,Bh={},t_={},Vh="*/".concat("*"),e_=y.createElement("a");e_.href=Qr.href;function Gh(h){return function(g,T){typeof g!="string"&&(T=g,g="*");var v,R=0,O=g.toLowerCase().match(Bt)||[];if(E(T))for(;v=O[R++];)v[0]==="+"?(v=v.slice(1)||"*",(h[v]=h[v]||[]).unshift(T)):(h[v]=h[v]||[]).push(T)}}function Uh(h,g,T,v){var R={},O=h===t_;function L(W){var H;return R[W]=!0,m.each(h[W]||[],function(Z,ct){var ft=ct(g,T,v);if(typeof ft=="string"&&!O&&!R[ft])return g.dataTypes.unshift(ft),L(ft),!1;if(O)return!(H=ft)}),H}return L(g.dataTypes[0])||!R["*"]&&L("*")}function s_(h,g){var T,v,R=m.ajaxSettings.flatOptions||{};for(T in g)g[T]!==void 0&&((R[T]?h:v||(v={}))[T]=g[T]);return v&&m.extend(!0,h,v),h}function Wm(h,g,T){for(var v,R,O,L,W=h.contents,H=h.dataTypes;H[0]==="*";)H.shift(),v===void 0&&(v=h.mimeType||g.getResponseHeader("Content-Type"));if(v){for(R in W)if(W[R]&&W[R].test(v)){H.unshift(R);break}}if(H[0]in T)O=H[0];else{for(R in T){if(!H[0]||h.converters[R+" "+H[0]]){O=R;break}L||(L=R)}O=O||L}if(O)return O!==H[0]&&H.unshift(O),T[O]}function Ym(h,g,T,v){var R,O,L,W,H,Z={},ct=h.dataTypes.slice();if(ct[1])for(L in h.converters)Z[L.toLowerCase()]=h.converters[L];for(O=ct.shift();O;)if(h.responseFields[O]&&(T[h.responseFields[O]]=g),!H&&v&&h.dataFilter&&(g=h.dataFilter(g,h.dataType)),H=O,O=ct.shift(),O){if(O==="*")O=H;else if(H!=="*"&&H!==O){if(L=Z[H+" "+O]||Z["* "+O],!L){for(R in Z)if(W=R.split(" "),W[1]===O&&(L=Z[H+" "+W[0]]||Z["* "+W[0]],L)){L===!0?L=Z[R]:Z[R]!==!0&&(O=W[0],ct.unshift(W[1]));break}}if(L!==!0)if(L&&h.throws)g=L(g);else try{g=L(g)}catch(ft){return{state:"parsererror",error:L?ft:"No conversion from "+H+" to "+O}}}}return{state:"success",data:g}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Qr.href,type:"GET",isLocal:Fm.test(Qr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vh,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,g){return g?s_(s_(h,m.ajaxSettings),g):s_(m.ajaxSettings,h)},ajaxPrefilter:Gh(Bh),ajaxTransport:Gh(t_),ajax:function(h,g){typeof h=="object"&&(g=h,h=void 0),g=g||{};var T,v,R,O,L,W,H,Z,ct,ft,et=m.ajaxSetup({},g),Tt=et.context||et,re=et.context&&(Tt.nodeType||Tt.jquery)?m(Tt):m.event,Ee=m.Deferred(),_e=m.Callbacks("once memory"),rs=et.statusCode||{},Ze={},_i={},li="canceled",Ae={readyState:0,getResponseHeader:function(Me){var Fe;if(H){if(!O)for(O={};Fe=km.exec(R);)O[Fe[1].toLowerCase()+" "]=(O[Fe[1].toLowerCase()+" "]||[]).concat(Fe[2]);Fe=O[Me.toLowerCase()+" "]}return Fe==null?null:Fe.join(", ")},getAllResponseHeaders:function(){return H?R:null},setRequestHeader:function(Me,Fe){return H==null&&(Me=_i[Me.toLowerCase()]=_i[Me.toLowerCase()]||Me,Ze[Me]=Fe),this},overrideMimeType:function(Me){return H==null&&(et.mimeType=Me),this},statusCode:function(Me){var Fe;if(Me)if(H)Ae.always(Me[Ae.status]);else for(Fe in Me)rs[Fe]=[rs[Fe],Me[Fe]];return this},abort:function(Me){var Fe=Me||li;return T&&T.abort(Fe),In(0,Fe),this}};if(Ee.promise(Ae),et.url=((h||et.url||Qr.href)+"").replace(zm,Qr.protocol+"//"),et.type=g.method||g.type||et.method||et.type,et.dataTypes=(et.dataType||"*").toLowerCase().match(Bt)||[""],et.crossDomain==null){W=y.createElement("a");try{W.href=et.url,W.href=W.href,et.crossDomain=e_.protocol+"//"+e_.host!=W.protocol+"//"+W.host}catch{et.crossDomain=!0}}if(et.data&&et.processData&&typeof et.data!="string"&&(et.data=m.param(et.data,et.traditional)),Uh(Bh,et,g,Ae),H)return Ae;Z=m.event&&et.global,Z&&m.active++===0&&m.event.trigger("ajaxStart"),et.type=et.type.toUpperCase(),et.hasContent=!Hm.test(et.type),v=et.url.replace(Gm,""),et.hasContent?et.data&&et.processData&&(et.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(et.data=et.data.replace(Vm,"+")):(ft=et.url.slice(v.length),et.data&&(et.processData||typeof et.data=="string")&&(v+=($c.test(v)?"&":"?")+et.data,delete et.data),et.cache===!1&&(v=v.replace(Um,"$1"),ft=($c.test(v)?"&":"?")+"_="+bh.guid+++ft),et.url=v+ft),et.ifModified&&(m.lastModified[v]&&Ae.setRequestHeader("If-Modified-Since",m.lastModified[v]),m.etag[v]&&Ae.setRequestHeader("If-None-Match",m.etag[v])),(et.data&&et.hasContent&&et.contentType!==!1||g.contentType)&&Ae.setRequestHeader("Content-Type",et.contentType),Ae.setRequestHeader("Accept",et.dataTypes[0]&&et.accepts[et.dataTypes[0]]?et.accepts[et.dataTypes[0]]+(et.dataTypes[0]!=="*"?", "+Vh+"; q=0.01":""):et.accepts["*"]);for(ct in et.headers)Ae.setRequestHeader(ct,et.headers[ct]);if(et.beforeSend&&(et.beforeSend.call(Tt,Ae,et)===!1||H))return Ae.abort();if(li="abort",_e.add(et.complete),Ae.done(et.success),Ae.fail(et.error),T=Uh(t_,et,g,Ae),!T)In(-1,"No Transport");else{if(Ae.readyState=1,Z&&re.trigger("ajaxSend",[Ae,et]),H)return Ae;et.async&&et.timeout>0&&(L=t.setTimeout(function(){Ae.abort("timeout")},et.timeout));try{H=!1,T.send(Ze,In)}catch(Me){if(H)throw Me;In(-1,Me)}}function In(Me,Fe,$r,n_){var hi,Jr,ui,Yi,Ki,ks=Fe;H||(H=!0,L&&t.clearTimeout(L),T=void 0,R=n_||"",Ae.readyState=Me>0?4:0,hi=Me>=200&&Me<300||Me===304,$r&&(Yi=Wm(et,Ae,$r)),!hi&&m.inArray("script",et.dataTypes)>-1&&m.inArray("json",et.dataTypes)<0&&(et.converters["text script"]=function(){}),Yi=Ym(et,Yi,Ae,hi),hi?(et.ifModified&&(Ki=Ae.getResponseHeader("Last-Modified"),Ki&&(m.lastModified[v]=Ki),Ki=Ae.getResponseHeader("etag"),Ki&&(m.etag[v]=Ki)),Me===204||et.type==="HEAD"?ks="nocontent":Me===304?ks="notmodified":(ks=Yi.state,Jr=Yi.data,ui=Yi.error,hi=!ui)):(ui=ks,(Me||!ks)&&(ks="error",Me<0&&(Me=0))),Ae.status=Me,Ae.statusText=(Fe||ks)+"",hi?Ee.resolveWith(Tt,[Jr,ks,Ae]):Ee.rejectWith(Tt,[Ae,ks,ui]),Ae.statusCode(rs),rs=void 0,Z&&re.trigger(hi?"ajaxSuccess":"ajaxError",[Ae,et,hi?Jr:ui]),_e.fireWith(Tt,[Ae,ks]),Z&&(re.trigger("ajaxComplete",[Ae,et]),--m.active||m.event.trigger("ajaxStop")))}return Ae},getJSON:function(h,g,T){return m.get(h,g,T,"json")},getScript:function(h,g){return m.get(h,void 0,g,"script")}}),m.each(["get","post"],function(h,g){m[g]=function(T,v,R,O){return E(v)&&(O=O||R,R=v,v=void 0),m.ajax(m.extend({url:T,type:g,dataType:O,data:v,success:R},m.isPlainObject(T)&&T))}}),m.ajaxPrefilter(function(h){var g;for(g in h.headers)g.toLowerCase()==="content-type"&&(h.contentType=h.headers[g]||"")}),m._evalUrl=function(h,g,T){return m.ajax({url:h,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(v){m.globalEval(v,g,T)}})},m.fn.extend({wrapAll:function(h){var g;return this[0]&&(E(h)&&(h=h.call(this[0])),g=m(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&g.insertBefore(this[0]),g.map(function(){for(var T=this;T.firstElementChild;)T=T.firstElementChild;return T}).append(this)),this},wrapInner:function(h){return E(h)?this.each(function(g){m(this).wrapInner(h.call(this,g))}):this.each(function(){var g=m(this),T=g.contents();T.length?T.wrapAll(h):g.append(h)})},wrap:function(h){var g=E(h);return this.each(function(T){m(this).wrapAll(g?h.call(this,T):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){m(this).replaceWith(this.childNodes)}),this}}),m.expr.pseudos.hidden=function(h){return!m.expr.pseudos.visible(h)},m.expr.pseudos.visible=function(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)},m.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var Km={0:200,1223:204},Zr=m.ajaxSettings.xhr();A.cors=!!Zr&&"withCredentials"in Zr,A.ajax=Zr=!!Zr,m.ajaxTransport(function(h){var g,T;if(A.cors||Zr&&!h.crossDomain)return{send:function(v,R){var O,L=h.xhr();if(L.open(h.type,h.url,h.async,h.username,h.password),h.xhrFields)for(O in h.xhrFields)L[O]=h.xhrFields[O];h.mimeType&&L.overrideMimeType&&L.overrideMimeType(h.mimeType),!h.crossDomain&&!v["X-Requested-With"]&&(v["X-Requested-With"]="XMLHttpRequest");for(O in v)L.setRequestHeader(O,v[O]);g=function(W){return function(){g&&(g=T=L.onload=L.onerror=L.onabort=L.ontimeout=L.onreadystatechange=null,W==="abort"?L.abort():W==="error"?typeof L.status!="number"?R(0,"error"):R(L.status,L.statusText):R(Km[L.status]||L.status,L.statusText,(L.responseType||"text")!=="text"||typeof L.responseText!="string"?{binary:L.response}:{text:L.responseText},L.getAllResponseHeaders()))}},L.onload=g(),T=L.onerror=L.ontimeout=g("error"),L.onabort!==void 0?L.onabort=T:L.onreadystatechange=function(){L.readyState===4&&t.setTimeout(function(){g&&T()})},g=g("abort");try{L.send(h.hasContent&&h.data||null)}catch(W){if(g)throw W}},abort:function(){g&&g()}}}),m.ajaxPrefilter(function(h){h.crossDomain&&(h.contents.script=!1)}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return m.globalEval(h),h}}}),m.ajaxPrefilter("script",function(h){h.cache===void 0&&(h.cache=!1),h.crossDomain&&(h.type="GET")}),m.ajaxTransport("script",function(h){if(h.crossDomain||h.scriptAttrs){var g,T;return{send:function(v,R){g=m("<script>").attr(h.scriptAttrs||{}).prop({charset:h.scriptCharset,src:h.url}).on("load error",T=function(O){g.remove(),T=null,O&&R(O.type==="error"?404:200,O.type)}),y.head.appendChild(g[0])},abort:function(){T&&T()}}}});var kh=[],i_=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=kh.pop()||m.expando+"_"+bh.guid++;return this[h]=!0,h}}),m.ajaxPrefilter("json jsonp",function(h,g,T){var v,R,O,L=h.jsonp!==!1&&(i_.test(h.url)?"url":typeof h.data=="string"&&(h.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&i_.test(h.data)&&"data");if(L||h.dataTypes[0]==="jsonp")return v=h.jsonpCallback=E(h.jsonpCallback)?h.jsonpCallback():h.jsonpCallback,L?h[L]=h[L].replace(i_,"$1"+v):h.jsonp!==!1&&(h.url+=($c.test(h.url)?"&":"?")+h.jsonp+"="+v),h.converters["script json"]=function(){return O||m.error(v+" was not called"),O[0]},h.dataTypes[0]="json",R=t[v],t[v]=function(){O=arguments},T.always(function(){R===void 0?m(t).removeProp(v):t[v]=R,h[v]&&(h.jsonpCallback=g.jsonpCallback,kh.push(v)),O&&E(R)&&R(O[0]),O=R=void 0}),"script"}),A.createHTMLDocument=(function(){var h=y.implementation.createHTMLDocument("").body;return h.innerHTML="<form></form><form></form>",h.childNodes.length===2})(),m.parseHTML=function(h,g,T){if(typeof h!="string")return[];typeof g=="boolean"&&(T=g,g=!1);var v,R,O;return g||(A.createHTMLDocument?(g=y.implementation.createHTMLDocument(""),v=g.createElement("base"),v.href=y.location.href,g.head.appendChild(v)):g=y),R=Et.exec(h),O=!T&&[],R?[g.createElement(R[1])]:(R=Yn([h],g,O),O&&O.length&&m(O).remove(),m.merge([],R.childNodes))},m.fn.load=function(h,g,T){var v,R,O,L=this,W=h.indexOf(" ");return W>-1&&(v=Sn(h.slice(W)),h=h.slice(0,W)),E(g)?(T=g,g=void 0):g&&typeof g=="object"&&(R="POST"),L.length>0&&m.ajax({url:h,type:R||"GET",dataType:"html",data:g}).done(function(H){O=arguments,L.html(v?m("<div>").append(m.parseHTML(H)).find(v):H)}).always(T&&function(H,Z){L.each(function(){T.apply(this,O||[H.responseText,Z,H])})}),this},m.expr.pseudos.animated=function(h){return m.grep(m.timers,function(g){return h===g.elem}).length},m.offset={setOffset:function(h,g,T){var v,R,O,L,W,H,Z,ct=m.css(h,"position"),ft=m(h),et={};ct==="static"&&(h.style.position="relative"),W=ft.offset(),O=m.css(h,"top"),H=m.css(h,"left"),Z=(ct==="absolute"||ct==="fixed")&&(O+H).indexOf("auto")>-1,Z?(v=ft.position(),L=v.top,R=v.left):(L=parseFloat(O)||0,R=parseFloat(H)||0),E(g)&&(g=g.call(h,T,m.extend({},W))),g.top!=null&&(et.top=g.top-W.top+L),g.left!=null&&(et.left=g.left-W.left+R),"using"in g?g.using.call(h,et):ft.css(et)}},m.fn.extend({offset:function(h){if(arguments.length)return h===void 0?this:this.each(function(R){m.offset.setOffset(this,h,R)});var g,T,v=this[0];if(v)return v.getClientRects().length?(g=v.getBoundingClientRect(),T=v.ownerDocument.defaultView,{top:g.top+T.pageYOffset,left:g.left+T.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var h,g,T,v=this[0],R={top:0,left:0};if(m.css(v,"position")==="fixed")g=v.getBoundingClientRect();else{for(g=this.offset(),T=v.ownerDocument,h=v.offsetParent||T.documentElement;h&&(h===T.body||h===T.documentElement)&&m.css(h,"position")==="static";)h=h.parentNode;h&&h!==v&&h.nodeType===1&&(R=m(h).offset(),R.top+=m.css(h,"borderTopWidth",!0),R.left+=m.css(h,"borderLeftWidth",!0))}return{top:g.top-R.top-m.css(v,"marginTop",!0),left:g.left-R.left-m.css(v,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&m.css(h,"position")==="static";)h=h.offsetParent;return h||ce})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(h,g){var T=g==="pageYOffset";m.fn[h]=function(v){return P(this,function(R,O,L){var W;if(S(R)?W=R:R.nodeType===9&&(W=R.defaultView),L===void 0)return W?W[g]:R[O];W?W.scrollTo(T?W.pageXOffset:L,T?L:W.pageYOffset):R[O]=L},h,v,arguments.length)}}),m.each(["top","left"],function(h,g){m.cssHooks[g]=ai(A.pixelPosition,function(T,v){if(v)return v=ve(T,g),ge.test(v)?m(T).position()[g]+"px":v})}),m.each({Height:"height",Width:"width"},function(h,g){m.each({padding:"inner"+h,content:g,"":"outer"+h},function(T,v){m.fn[v]=function(R,O){var L=arguments.length&&(T||typeof R!="boolean"),W=T||(R===!0||O===!0?"margin":"border");return P(this,function(H,Z,ct){var ft;return S(H)?v.indexOf("outer")===0?H["inner"+h]:H.document.documentElement["client"+h]:H.nodeType===9?(ft=H.documentElement,Math.max(H.body["scroll"+h],ft["scroll"+h],H.body["offset"+h],ft["offset"+h],ft["client"+h])):ct===void 0?m.css(H,Z,W):m.style(H,Z,ct,W)},g,L?R:void 0,L)}})}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(h,g){m.fn[g]=function(T){return this.on(g,T)}}),m.fn.extend({bind:function(h,g,T){return this.on(h,null,g,T)},unbind:function(h,g){return this.off(h,null,g)},delegate:function(h,g,T,v){return this.on(g,h,T,v)},undelegate:function(h,g,T){return arguments.length===1?this.off(h,"**"):this.off(g,h||"**",T)},hover:function(h,g){return this.on("mouseenter",h).on("mouseleave",g||h)}}),m.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(h,g){m.fn[g]=function(T,v){return arguments.length>0?this.on(g,null,T,v):this.trigger(g)}});var qm=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;m.proxy=function(h,g){var T,v,R;if(typeof g=="string"&&(T=h[g],g=h,h=T),!!E(h))return v=a.call(arguments,2),R=function(){return h.apply(g||this,v.concat(a.call(arguments)))},R.guid=h.guid=h.guid||m.guid++,R},m.holdReady=function(h){h?m.readyWait++:m.ready(!0)},m.isArray=Array.isArray,m.parseJSON=JSON.parse,m.nodeName=q,m.isFunction=E,m.isWindow=S,m.camelCase=Nt,m.type=I,m.now=Date.now,m.isNumeric=function(h){var g=m.type(h);return(g==="number"||g==="string")&&!isNaN(h-parseFloat(h))},m.trim=function(h){return h==null?"":(h+"").replace(qm,"$1")};var Xm=t.jQuery,jm=t.$;return m.noConflict=function(h){return t.$===m&&(t.$=jm),h&&t.jQuery===m&&(t.jQuery=Xm),m},typeof e>"u"&&(t.jQuery=t.$=m),m})})(Xo)),Xo.exports}var og=ag();const cg=ng(og);const lp="133",jn={ROTATE:0,DOLLY:1,PAN:2},rn={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},_g=0,Yh=1,lg=2,hp=1,hg=2,da=3,va=0,Je=1,ln=2,up=1,an=0,ga=1,Kh=2,qh=3,Xh=4,ug=5,Ar=100,fg=101,pg=102,jh=103,Qh=104,dg=200,mg=201,gg=202,Ag=203,fp=204,pp=205,yg=206,Eg=207,Mg=208,Tg=209,Sg=210,vg=0,Ig=1,xg=2,ll=3,Rg=4,Og=5,wg=6,Lg=7,wc=0,Ng=1,bg=2,Dn=0,Dg=1,Cg=2,Pg=3,Bg=4,Vg=5,Ll=300,Ga=301,Ua=302,$o=303,Jo=304,ka=306,Lc=307,tc=1e3,fs=1001,ec=1002,ts=1003,hl=1004,ul=1005,Rs=1006,dp=1007,Pr=1008,hn=1009,Gg=1010,Ug=1011,sc=1012,kg=1013,jo=1014,Gi=1015,Rr=1016,Fg=1017,Hg=1018,zg=1019,Aa=1020,Wg=1021,Or=1022,ps=1023,Yg=1024,Kg=1025,qg=ps,wr=1026,Ia=1027,Xg=1028,jg=1029,Qg=1030,Zg=1031,$g=1032,Jg=1033,Zh=33776,$h=33777,Jh=33778,tu=33779,eu=35840,su=35841,iu=35842,nu=35843,tA=36196,ru=37492,au=37496,eA=37808,sA=37809,iA=37810,nA=37811,rA=37812,aA=37813,oA=37814,cA=37815,_A=37816,lA=37817,hA=37818,uA=37819,fA=37820,pA=37821,dA=36492,mA=37840,gA=37841,AA=37842,yA=37843,EA=37844,MA=37845,TA=37846,SA=37847,vA=37848,IA=37849,xA=37850,RA=37851,OA=37852,wA=37853,LA=2200,NA=2201,bA=2202,ic=2300,nc=2301,h_=2302,yr=2400,Er=2401,rc=2402,Nl=2500,mp=2501,DA=0,ds=3e3,yn=3001,bl=3007,Dl=3002,CA=3003,gp=3004,Ap=3005,yp=3006,PA=3200,BA=3201,Br=0,VA=1,u_=7680,GA=519,xa=35044,ac=35048,ou="300 es";class En{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const n=this._listeners[t];if(n!==void 0){const a=n.indexOf(e);a!==-1&&n.splice(a,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const n=i.slice(0);for(let a=0,o=n.length;a<o;a++)n[a].call(this,t);t.target=null}}}const Qo=Math.PI/180,fl=180/Math.PI,as=[];for(let r=0;r<256;r++)as[r]=(r<16?"0":"")+r.toString(16);const UA=typeof crypto<"u"&&"randomUUID"in crypto;function ii(){if(UA)return crypto.randomUUID().toUpperCase();const r=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(as[r&255]+as[r>>8&255]+as[r>>16&255]+as[r>>24&255]+"-"+as[t&255]+as[t>>8&255]+"-"+as[t>>16&15|64]+as[t>>24&255]+"-"+as[e&63|128]+as[e>>8&255]+"-"+as[e>>16&255]+as[e>>24&255]+as[i&255]+as[i>>8&255]+as[i>>16&255]+as[i>>24&255]).toUpperCase()}function Ms(r,t,e){return Math.max(t,Math.min(e,r))}function kA(r,t){return(r%t+t)%t}function f_(r,t,e){return(1-e)*r+e*t}function cu(r){return(r&r-1)===0&&r!==0}function FA(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function HA(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}class dt{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),a=this.x-t.x,o=this.y-t.y;return this.x=a*i-o*n+t.x,this.y=a*n+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}dt.prototype.isVector2=!0;class ss{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,n,a,o,c,_,l){const u=this.elements;return u[0]=t,u[1]=n,u[2]=c,u[3]=e,u[4]=a,u[5]=_,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,a=this.elements,o=i[0],c=i[3],_=i[6],l=i[1],u=i[4],p=i[7],f=i[2],d=i[5],A=i[8],E=n[0],S=n[3],y=n[6],M=n[1],x=n[4],I=n[7],w=n[2],D=n[5],m=n[8];return a[0]=o*E+c*M+_*w,a[3]=o*S+c*x+_*D,a[6]=o*y+c*I+_*m,a[1]=l*E+u*M+p*w,a[4]=l*S+u*x+p*D,a[7]=l*y+u*I+p*m,a[2]=f*E+d*M+A*w,a[5]=f*S+d*x+A*D,a[8]=f*y+d*I+A*m,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],n=t[2],a=t[3],o=t[4],c=t[5],_=t[6],l=t[7],u=t[8];return e*o*u-e*c*l-i*a*u+i*c*_+n*a*l-n*o*_}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],a=t[3],o=t[4],c=t[5],_=t[6],l=t[7],u=t[8],p=u*o-c*l,f=c*_-u*a,d=l*a-o*_,A=e*p+i*f+n*d;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/A;return t[0]=p*E,t[1]=(n*l-u*i)*E,t[2]=(c*i-n*o)*E,t[3]=f*E,t[4]=(u*e-n*_)*E,t[5]=(n*a-c*e)*E,t[6]=d*E,t[7]=(i*_-l*e)*E,t[8]=(o*e-i*a)*E,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,a,o,c){const _=Math.cos(a),l=Math.sin(a);return this.set(i*_,i*l,-i*(_*o+l*c)+o+t,-n*l,n*_,-n*(-l*o+_*c)+c+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.elements,a=n[0],o=n[3],c=n[6],_=n[1],l=n[4],u=n[7];return n[0]=e*a+i*_,n[3]=e*o+i*l,n[6]=e*c+i*u,n[1]=-i*a+e*_,n[4]=-i*o+e*l,n[7]=-i*c+e*u,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}ss.prototype.isMatrix3=!0;function Ep(r){if(r.length===0)return-1/0;let t=r[0];for(let e=1,i=r.length;e<i;++e)r[e]>t&&(t=r[e]);return t}const zA={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Mr(r,t){return new zA[r](t)}function Nc(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}let Qn;class Vr{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Qn===void 0&&(Qn=Nc("canvas")),Qn.width=t.width,Qn.height=t.height;const i=Qn.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Qn}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}let WA=0;class is extends En{constructor(t=is.DEFAULT_IMAGE,e=is.DEFAULT_MAPPING,i=fs,n=fs,a=Rs,o=Pr,c=ps,_=hn,l=1,u=ds){super(),Object.defineProperty(this,"id",{value:WA++}),this.uuid=ii(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=n,this.magFilter=a,this.minFilter=o,this.anisotropy=l,this.format=c,this.internalFormat=null,this.type=_,this.offset=new dt(0,0),this.repeat=new dt(1,1),this.center=new dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ss,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const n=this.image;if(n.uuid===void 0&&(n.uuid=ii()),!e&&t.images[n.uuid]===void 0){let a;if(Array.isArray(n)){a=[];for(let o=0,c=n.length;o<c;o++)n[o].isDataTexture?a.push(p_(n[o].image)):a.push(p_(n[o]))}else a=p_(n);t.images[n.uuid]={uuid:n.uuid,url:a}}i.image=n.uuid}return e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Ll)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case tc:t.x=t.x-Math.floor(t.x);break;case fs:t.x=t.x<0?0:1;break;case ec:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case tc:t.y=t.y-Math.floor(t.y);break;case fs:t.y=t.y<0?0:1;break;case ec:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&this.version++}}is.DEFAULT_IMAGE=void 0;is.DEFAULT_MAPPING=Ll;is.prototype.isTexture=!0;function p_(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?Vr.getDataURL(r):r.data?{data:Array.prototype.slice.call(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Le{constructor(t=0,e=0,i=0,n=1){this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,a=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*a,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*a,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*a,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*a,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,a;const _=t.elements,l=_[0],u=_[4],p=_[8],f=_[1],d=_[5],A=_[9],E=_[2],S=_[6],y=_[10];if(Math.abs(u-f)<.01&&Math.abs(p-E)<.01&&Math.abs(A-S)<.01){if(Math.abs(u+f)<.1&&Math.abs(p+E)<.1&&Math.abs(A+S)<.1&&Math.abs(l+d+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const x=(l+1)/2,I=(d+1)/2,w=(y+1)/2,D=(u+f)/4,m=(p+E)/4,U=(A+S)/4;return x>I&&x>w?x<.01?(i=0,n=.707106781,a=.707106781):(i=Math.sqrt(x),n=D/i,a=m/i):I>w?I<.01?(i=.707106781,n=0,a=.707106781):(n=Math.sqrt(I),i=D/n,a=U/n):w<.01?(i=.707106781,n=.707106781,a=0):(a=Math.sqrt(w),i=m/a,n=U/a),this.set(i,n,a,e),this}let M=Math.sqrt((S-A)*(S-A)+(p-E)*(p-E)+(f-u)*(f-u));return Math.abs(M)<.001&&(M=1),this.x=(S-A)/M,this.y=(p-E)/M,this.z=(f-u)/M,this.w=Math.acos((l+d+y-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Le.prototype.isVector4=!0;class yi extends En{constructor(t,e,i={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Le(0,0,t,e),this.scissorTest=!1,this.viewport=new Le(0,0,t,e),this.texture=new is(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:e,depth:1},this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Rs,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e,i=1){(this.width!==t||this.height!==e||this.depth!==i)&&(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}yi.prototype.isWebGLRenderTarget=!0;class YA extends yi{constructor(t,e,i){super(t,e);const n=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=n.clone()}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let n=0,a=this.texture.length;n<a;n++)this.texture[n].image.width=t,this.texture[n].image.height=e,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,i=t.texture.length;e<i;e++)this.texture[e]=t.texture[e].clone();return this}}YA.prototype.isWebGLMultipleRenderTargets=!0;class Mp extends yi{constructor(t,e,i){super(t,e,i),this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}Mp.prototype.isWebGLMultisampleRenderTarget=!0;let Se=class{constructor(t=0,e=0,i=0,n=1){this._x=t,this._y=e,this._z=i,this._w=n}static slerp(t,e,i,n){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(t,e,n)}static slerpFlat(t,e,i,n,a,o,c){let _=i[n+0],l=i[n+1],u=i[n+2],p=i[n+3];const f=a[o+0],d=a[o+1],A=a[o+2],E=a[o+3];if(c===0){t[e+0]=_,t[e+1]=l,t[e+2]=u,t[e+3]=p;return}if(c===1){t[e+0]=f,t[e+1]=d,t[e+2]=A,t[e+3]=E;return}if(p!==E||_!==f||l!==d||u!==A){let S=1-c;const y=_*f+l*d+u*A+p*E,M=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const w=Math.sqrt(x),D=Math.atan2(w,y*M);S=Math.sin(S*D)/w,c=Math.sin(c*D)/w}const I=c*M;if(_=_*S+f*I,l=l*S+d*I,u=u*S+A*I,p=p*S+E*I,S===1-c){const w=1/Math.sqrt(_*_+l*l+u*u+p*p);_*=w,l*=w,u*=w,p*=w}}t[e]=_,t[e+1]=l,t[e+2]=u,t[e+3]=p}static multiplyQuaternionsFlat(t,e,i,n,a,o){const c=i[n],_=i[n+1],l=i[n+2],u=i[n+3],p=a[o],f=a[o+1],d=a[o+2],A=a[o+3];return t[e]=c*A+u*p+_*d-l*f,t[e+1]=_*A+u*f+l*p-c*d,t[e+2]=l*A+u*d+c*f-_*p,t[e+3]=u*A-c*p-_*f-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,n=t._y,a=t._z,o=t._order,c=Math.cos,_=Math.sin,l=c(i/2),u=c(n/2),p=c(a/2),f=_(i/2),d=_(n/2),A=_(a/2);switch(o){case"XYZ":this._x=f*u*p+l*d*A,this._y=l*d*p-f*u*A,this._z=l*u*A+f*d*p,this._w=l*u*p-f*d*A;break;case"YXZ":this._x=f*u*p+l*d*A,this._y=l*d*p-f*u*A,this._z=l*u*A-f*d*p,this._w=l*u*p+f*d*A;break;case"ZXY":this._x=f*u*p-l*d*A,this._y=l*d*p+f*u*A,this._z=l*u*A+f*d*p,this._w=l*u*p-f*d*A;break;case"ZYX":this._x=f*u*p-l*d*A,this._y=l*d*p+f*u*A,this._z=l*u*A-f*d*p,this._w=l*u*p+f*d*A;break;case"YZX":this._x=f*u*p+l*d*A,this._y=l*d*p+f*u*A,this._z=l*u*A-f*d*p,this._w=l*u*p-f*d*A;break;case"XZY":this._x=f*u*p-l*d*A,this._y=l*d*p-f*u*A,this._z=l*u*A+f*d*p,this._w=l*u*p+f*d*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],a=e[8],o=e[1],c=e[5],_=e[9],l=e[2],u=e[6],p=e[10],f=i+c+p;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-_)*d,this._y=(a-l)*d,this._z=(o-n)*d}else if(i>c&&i>p){const d=2*Math.sqrt(1+i-c-p);this._w=(u-_)/d,this._x=.25*d,this._y=(n+o)/d,this._z=(a+l)/d}else if(c>p){const d=2*Math.sqrt(1+c-i-p);this._w=(a-l)/d,this._x=(n+o)/d,this._y=.25*d,this._z=(_+u)/d}else{const d=2*Math.sqrt(1+p-i-c);this._w=(o-n)/d,this._x=(a+l)/d,this._y=(_+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ms(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return e!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,a=t._z,o=t._w,c=e._x,_=e._y,l=e._z,u=e._w;return this._x=i*u+o*c+n*l-a*_,this._y=n*u+o*_+a*c-i*l,this._z=a*u+o*l+i*_-n*c,this._w=o*u-i*c-n*_-a*l,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,n=this._y,a=this._z,o=this._w;let c=o*t._w+i*t._x+n*t._y+a*t._z;if(c<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,c=-c):this.copy(t),c>=1)return this._w=o,this._x=i,this._y=n,this._z=a,this;const _=1-c*c;if(_<=Number.EPSILON){const d=1-e;return this._w=d*o+e*this._w,this._x=d*i+e*this._x,this._y=d*n+e*this._y,this._z=d*a+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(_),u=Math.atan2(l,c),p=Math.sin((1-e)*u)/l,f=Math.sin(e*u)/l;return this._w=o*p+this._w*f,this._x=i*p+this._x*f,this._y=n*p+this._y*f,this._z=a*p+this._z*f,this._onChangeCallback(),this}slerpQuaternions(t,e,i){this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(a),i*Math.cos(a),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}};Se.prototype.isQuaternion=!0;class C{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return e!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_u.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(_u.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,a=t.elements;return this.x=a[0]*e+a[3]*i+a[6]*n,this.y=a[1]*e+a[4]*i+a[7]*n,this.z=a[2]*e+a[5]*i+a[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,a=t.elements,o=1/(a[3]*e+a[7]*i+a[11]*n+a[15]);return this.x=(a[0]*e+a[4]*i+a[8]*n+a[12])*o,this.y=(a[1]*e+a[5]*i+a[9]*n+a[13])*o,this.z=(a[2]*e+a[6]*i+a[10]*n+a[14])*o,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,a=t.x,o=t.y,c=t.z,_=t.w,l=_*e+o*n-c*i,u=_*i+c*e-a*n,p=_*n+a*i-o*e,f=-a*e-o*i-c*n;return this.x=l*_+f*-a+u*-c-p*-o,this.y=u*_+f*-o+p*-a-l*-c,this.z=p*_+f*-c+l*-o-u*-a,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,a=t.elements;return this.x=a[0]*e+a[4]*i+a[8]*n,this.y=a[1]*e+a[5]*i+a[9]*n,this.z=a[2]*e+a[6]*i+a[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return e!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,a=t.z,o=e.x,c=e.y,_=e.z;return this.x=n*_-a*c,this.y=a*o-i*_,this.z=i*c-n*o,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return d_.copy(this).projectOnVector(t),this.sub(d_)}reflect(t){return this.sub(d_.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Ms(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}C.prototype.isVector3=!0;const d_=new C,_u=new Se;class Bs{constructor(t=new C(1/0,1/0,1/0),e=new C(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,n=1/0,a=-1/0,o=-1/0,c=-1/0;for(let _=0,l=t.length;_<l;_+=3){const u=t[_],p=t[_+1],f=t[_+2];u<e&&(e=u),p<i&&(i=p),f<n&&(n=f),u>a&&(a=u),p>o&&(o=p),f>c&&(c=f)}return this.min.set(e,i,n),this.max.set(a,o,c),this}setFromBufferAttribute(t){let e=1/0,i=1/0,n=1/0,a=-1/0,o=-1/0,c=-1/0;for(let _=0,l=t.count;_<l;_++){const u=t.getX(_),p=t.getY(_),f=t.getZ(_);u<e&&(e=u),p<i&&(i=p),f<n&&(n=f),u>a&&(a=u),p>o&&(o=p),f>c&&(c=f)}return this.min.set(e,i,n),this.max.set(a,o,c),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=ea.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;e!==void 0&&(e.boundingBox===null&&e.computeBoundingBox(),m_.copy(e.boundingBox),m_.applyMatrix4(t.matrixWorld),this.union(m_));const i=t.children;for(let n=0,a=i.length;n<a;n++)this.expandByObject(i[n]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,ea),ea.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(sa),ro.subVectors(this.max,sa),Zn.subVectors(t.a,sa),$n.subVectors(t.b,sa),Jn.subVectors(t.c,sa),Xi.subVectors($n,Zn),ji.subVectors(Jn,$n),Rn.subVectors(Zn,Jn);let e=[0,-Xi.z,Xi.y,0,-ji.z,ji.y,0,-Rn.z,Rn.y,Xi.z,0,-Xi.x,ji.z,0,-ji.x,Rn.z,0,-Rn.x,-Xi.y,Xi.x,0,-ji.y,ji.x,0,-Rn.y,Rn.x,0];return!g_(e,Zn,$n,Jn,ro)||(e=[1,0,0,0,1,0,0,0,1],!g_(e,Zn,$n,Jn,ro))?!1:(ao.crossVectors(Xi,ji),e=[ao.x,ao.y,ao.z],g_(e,Zn,$n,Jn,ro))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return ea.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(ea).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Ri[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ri[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ri[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ri[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ri[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ri[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ri[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ri[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ri),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Bs.prototype.isBox3=!0;const Ri=[new C,new C,new C,new C,new C,new C,new C,new C],ea=new C,m_=new Bs,Zn=new C,$n=new C,Jn=new C,Xi=new C,ji=new C,Rn=new C,sa=new C,ro=new C,ao=new C,On=new C;function g_(r,t,e,i,n){for(let a=0,o=r.length-3;a<=o;a+=3){On.fromArray(r,a);const c=n.x*Math.abs(On.x)+n.y*Math.abs(On.y)+n.z*Math.abs(On.z),_=t.dot(On),l=e.dot(On),u=i.dot(On);if(Math.max(-Math.max(_,l,u),Math.min(_,l,u))>c)return!1}return!0}const KA=new Bs,lu=new C,A_=new C,y_=new C;let Gn=class{constructor(t=new C,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):KA.setFromPoints(t).getCenter(i);let n=0;for(let a=0,o=t.length;a<o;a++)n=Math.max(n,i.distanceToSquared(t[a]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){y_.subVectors(t,this.center);const e=y_.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),n=(i-this.radius)*.5;this.center.add(y_.multiplyScalar(n/i)),this.radius+=n}return this}union(t){return A_.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(lu.copy(t.center).add(A_)),this.expandByPoint(lu.copy(t.center).sub(A_)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Oi=new C,E_=new C,oo=new C,Qi=new C,M_=new C,co=new C,T_=new C;let Un=class{constructor(t=new C,e=new C(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Oi)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Oi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Oi.copy(this.direction).multiplyScalar(e).add(this.origin),Oi.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){E_.copy(t).add(e).multiplyScalar(.5),oo.copy(e).sub(t).normalize(),Qi.copy(this.origin).sub(E_);const a=t.distanceTo(e)*.5,o=-this.direction.dot(oo),c=Qi.dot(this.direction),_=-Qi.dot(oo),l=Qi.lengthSq(),u=Math.abs(1-o*o);let p,f,d,A;if(u>0)if(p=o*_-c,f=o*c-_,A=a*u,p>=0)if(f>=-A)if(f<=A){const E=1/u;p*=E,f*=E,d=p*(p+o*f+2*c)+f*(o*p+f+2*_)+l}else f=a,p=Math.max(0,-(o*f+c)),d=-p*p+f*(f+2*_)+l;else f=-a,p=Math.max(0,-(o*f+c)),d=-p*p+f*(f+2*_)+l;else f<=-A?(p=Math.max(0,-(-o*a+c)),f=p>0?-a:Math.min(Math.max(-a,-_),a),d=-p*p+f*(f+2*_)+l):f<=A?(p=0,f=Math.min(Math.max(-a,-_),a),d=f*(f+2*_)+l):(p=Math.max(0,-(o*a+c)),f=p>0?a:Math.min(Math.max(-a,-_),a),d=-p*p+f*(f+2*_)+l);else f=o>0?-a:a,p=Math.max(0,-(o*f+c)),d=-p*p+f*(f+2*_)+l;return i&&i.copy(this.direction).multiplyScalar(p).add(this.origin),n&&n.copy(oo).multiplyScalar(f).add(E_),d}intersectSphere(t,e){Oi.subVectors(t.center,this.origin);const i=Oi.dot(this.direction),n=Oi.dot(Oi)-i*i,a=t.radius*t.radius;if(n>a)return null;const o=Math.sqrt(a-n),c=i-o,_=i+o;return c<0&&_<0?null:c<0?this.at(_,e):this.at(c,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,a,o,c,_;const l=1/this.direction.x,u=1/this.direction.y,p=1/this.direction.z,f=this.origin;return l>=0?(i=(t.min.x-f.x)*l,n=(t.max.x-f.x)*l):(i=(t.max.x-f.x)*l,n=(t.min.x-f.x)*l),u>=0?(a=(t.min.y-f.y)*u,o=(t.max.y-f.y)*u):(a=(t.max.y-f.y)*u,o=(t.min.y-f.y)*u),i>o||a>n||((a>i||i!==i)&&(i=a),(o<n||n!==n)&&(n=o),p>=0?(c=(t.min.z-f.z)*p,_=(t.max.z-f.z)*p):(c=(t.max.z-f.z)*p,_=(t.min.z-f.z)*p),i>_||c>n)||((c>i||i!==i)&&(i=c),(_<n||n!==n)&&(n=_),n<0)?null:this.at(i>=0?i:n,e)}intersectsBox(t){return this.intersectBox(t,Oi)!==null}intersectTriangle(t,e,i,n,a){M_.subVectors(e,t),co.subVectors(i,t),T_.crossVectors(M_,co);let o=this.direction.dot(T_),c;if(o>0){if(n)return null;c=1}else if(o<0)c=-1,o=-o;else return null;Qi.subVectors(this.origin,t);const _=c*this.direction.dot(co.crossVectors(Qi,co));if(_<0)return null;const l=c*this.direction.dot(M_.cross(Qi));if(l<0||_+l>o)return null;const u=-c*Qi.dot(T_);return u<0?null:this.at(u/o,a)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class jt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S){const y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=n,y[1]=a,y[5]=o,y[9]=c,y[13]=_,y[2]=l,y[6]=u,y[10]=p,y[14]=f,y[3]=d,y[7]=A,y[11]=E,y[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new jt().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/tr.setFromMatrixColumn(t,0).length(),a=1/tr.setFromMatrixColumn(t,1).length(),o=1/tr.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*a,e[5]=i[5]*a,e[6]=i[6]*a,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,i=t.x,n=t.y,a=t.z,o=Math.cos(i),c=Math.sin(i),_=Math.cos(n),l=Math.sin(n),u=Math.cos(a),p=Math.sin(a);if(t.order==="XYZ"){const f=o*u,d=o*p,A=c*u,E=c*p;e[0]=_*u,e[4]=-_*p,e[8]=l,e[1]=d+A*l,e[5]=f-E*l,e[9]=-c*_,e[2]=E-f*l,e[6]=A+d*l,e[10]=o*_}else if(t.order==="YXZ"){const f=_*u,d=_*p,A=l*u,E=l*p;e[0]=f+E*c,e[4]=A*c-d,e[8]=o*l,e[1]=o*p,e[5]=o*u,e[9]=-c,e[2]=d*c-A,e[6]=E+f*c,e[10]=o*_}else if(t.order==="ZXY"){const f=_*u,d=_*p,A=l*u,E=l*p;e[0]=f-E*c,e[4]=-o*p,e[8]=A+d*c,e[1]=d+A*c,e[5]=o*u,e[9]=E-f*c,e[2]=-o*l,e[6]=c,e[10]=o*_}else if(t.order==="ZYX"){const f=o*u,d=o*p,A=c*u,E=c*p;e[0]=_*u,e[4]=A*l-d,e[8]=f*l+E,e[1]=_*p,e[5]=E*l+f,e[9]=d*l-A,e[2]=-l,e[6]=c*_,e[10]=o*_}else if(t.order==="YZX"){const f=o*_,d=o*l,A=c*_,E=c*l;e[0]=_*u,e[4]=E-f*p,e[8]=A*p+d,e[1]=p,e[5]=o*u,e[9]=-c*u,e[2]=-l*u,e[6]=d*p+A,e[10]=f-E*p}else if(t.order==="XZY"){const f=o*_,d=o*l,A=c*_,E=c*l;e[0]=_*u,e[4]=-p,e[8]=l*u,e[1]=f*p+E,e[5]=o*u,e[9]=d*p-A,e[2]=A*p-d,e[6]=c*u,e[10]=E*p+f}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(qA,t,XA)}lookAt(t,e,i){const n=this.elements;return Ds.subVectors(t,e),Ds.lengthSq()===0&&(Ds.z=1),Ds.normalize(),Zi.crossVectors(i,Ds),Zi.lengthSq()===0&&(Math.abs(i.z)===1?Ds.x+=1e-4:Ds.z+=1e-4,Ds.normalize(),Zi.crossVectors(i,Ds)),Zi.normalize(),_o.crossVectors(Ds,Zi),n[0]=Zi.x,n[4]=_o.x,n[8]=Ds.x,n[1]=Zi.y,n[5]=_o.y,n[9]=Ds.y,n[2]=Zi.z,n[6]=_o.z,n[10]=Ds.z,this}multiply(t,e){return e!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,a=this.elements,o=i[0],c=i[4],_=i[8],l=i[12],u=i[1],p=i[5],f=i[9],d=i[13],A=i[2],E=i[6],S=i[10],y=i[14],M=i[3],x=i[7],I=i[11],w=i[15],D=n[0],m=n[4],U=n[8],q=n[12],Y=n[1],F=n[5],it=n[9],G=n[13],K=n[2],X=n[6],z=n[10],J=n[14],_t=n[3],gt=n[7],bt=n[11],vt=n[15];return a[0]=o*D+c*Y+_*K+l*_t,a[4]=o*m+c*F+_*X+l*gt,a[8]=o*U+c*it+_*z+l*bt,a[12]=o*q+c*G+_*J+l*vt,a[1]=u*D+p*Y+f*K+d*_t,a[5]=u*m+p*F+f*X+d*gt,a[9]=u*U+p*it+f*z+d*bt,a[13]=u*q+p*G+f*J+d*vt,a[2]=A*D+E*Y+S*K+y*_t,a[6]=A*m+E*F+S*X+y*gt,a[10]=A*U+E*it+S*z+y*bt,a[14]=A*q+E*G+S*J+y*vt,a[3]=M*D+x*Y+I*K+w*_t,a[7]=M*m+x*F+I*X+w*gt,a[11]=M*U+x*it+I*z+w*bt,a[15]=M*q+x*G+I*J+w*vt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],a=t[12],o=t[1],c=t[5],_=t[9],l=t[13],u=t[2],p=t[6],f=t[10],d=t[14],A=t[3],E=t[7],S=t[11],y=t[15];return A*(+a*_*p-n*l*p-a*c*f+i*l*f+n*c*d-i*_*d)+E*(+e*_*d-e*l*f+a*o*f-n*o*d+n*l*u-a*_*u)+S*(+e*l*p-e*c*d-a*o*p+i*o*d+a*c*u-i*l*u)+y*(-n*c*u-e*_*p+e*c*f+n*o*p-i*o*f+i*_*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],a=t[3],o=t[4],c=t[5],_=t[6],l=t[7],u=t[8],p=t[9],f=t[10],d=t[11],A=t[12],E=t[13],S=t[14],y=t[15],M=p*S*l-E*f*l+E*_*d-c*S*d-p*_*y+c*f*y,x=A*f*l-u*S*l-A*_*d+o*S*d+u*_*y-o*f*y,I=u*E*l-A*p*l+A*c*d-o*E*d-u*c*y+o*p*y,w=A*p*_-u*E*_-A*c*f+o*E*f+u*c*S-o*p*S,D=e*M+i*x+n*I+a*w;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const m=1/D;return t[0]=M*m,t[1]=(E*f*a-p*S*a-E*n*d+i*S*d+p*n*y-i*f*y)*m,t[2]=(c*S*a-E*_*a+E*n*l-i*S*l-c*n*y+i*_*y)*m,t[3]=(p*_*a-c*f*a-p*n*l+i*f*l+c*n*d-i*_*d)*m,t[4]=x*m,t[5]=(u*S*a-A*f*a+A*n*d-e*S*d-u*n*y+e*f*y)*m,t[6]=(A*_*a-o*S*a-A*n*l+e*S*l+o*n*y-e*_*y)*m,t[7]=(o*f*a-u*_*a+u*n*l-e*f*l-o*n*d+e*_*d)*m,t[8]=I*m,t[9]=(A*p*a-u*E*a-A*i*d+e*E*d+u*i*y-e*p*y)*m,t[10]=(o*E*a-A*c*a+A*i*l-e*E*l-o*i*y+e*c*y)*m,t[11]=(u*c*a-o*p*a-u*i*l+e*p*l+o*i*d-e*c*d)*m,t[12]=w*m,t[13]=(u*E*n-A*p*n+A*i*f-e*E*f-u*i*S+e*p*S)*m,t[14]=(A*c*n-o*E*n-A*i*_+e*E*_+o*i*S-e*c*S)*m,t[15]=(o*p*n-u*c*n+u*i*_-e*p*_-o*i*f+e*c*f)*m,this}scale(t){const e=this.elements,i=t.x,n=t.y,a=t.z;return e[0]*=i,e[4]*=n,e[8]*=a,e[1]*=i,e[5]*=n,e[9]*=a,e[2]*=i,e[6]*=n,e[10]*=a,e[3]*=i,e[7]*=n,e[11]*=a,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),a=1-i,o=t.x,c=t.y,_=t.z,l=a*o,u=a*c;return this.set(l*o+i,l*c-n*_,l*_+n*c,0,l*c+n*_,u*c+i,u*_-n*o,0,l*_-n*c,u*_+n*o,a*_*_+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,a,o){return this.set(1,i,a,0,t,1,o,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,a=e._x,o=e._y,c=e._z,_=e._w,l=a+a,u=o+o,p=c+c,f=a*l,d=a*u,A=a*p,E=o*u,S=o*p,y=c*p,M=_*l,x=_*u,I=_*p,w=i.x,D=i.y,m=i.z;return n[0]=(1-(E+y))*w,n[1]=(d+I)*w,n[2]=(A-x)*w,n[3]=0,n[4]=(d-I)*D,n[5]=(1-(f+y))*D,n[6]=(S+M)*D,n[7]=0,n[8]=(A+x)*m,n[9]=(S-M)*m,n[10]=(1-(f+E))*m,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let a=tr.set(n[0],n[1],n[2]).length();const o=tr.set(n[4],n[5],n[6]).length(),c=tr.set(n[8],n[9],n[10]).length();this.determinant()<0&&(a=-a),t.x=n[12],t.y=n[13],t.z=n[14],Xs.copy(this);const l=1/a,u=1/o,p=1/c;return Xs.elements[0]*=l,Xs.elements[1]*=l,Xs.elements[2]*=l,Xs.elements[4]*=u,Xs.elements[5]*=u,Xs.elements[6]*=u,Xs.elements[8]*=p,Xs.elements[9]*=p,Xs.elements[10]*=p,e.setFromRotationMatrix(Xs),i.x=a,i.y=o,i.z=c,this}makePerspective(t,e,i,n,a,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const c=this.elements,_=2*a/(e-t),l=2*a/(i-n),u=(e+t)/(e-t),p=(i+n)/(i-n),f=-(o+a)/(o-a),d=-2*o*a/(o-a);return c[0]=_,c[4]=0,c[8]=u,c[12]=0,c[1]=0,c[5]=l,c[9]=p,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=d,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(t,e,i,n,a,o){const c=this.elements,_=1/(e-t),l=1/(i-n),u=1/(o-a),p=(e+t)*_,f=(i+n)*l,d=(o+a)*u;return c[0]=2*_,c[4]=0,c[8]=0,c[12]=-p,c[1]=0,c[5]=2*l,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=-2*u,c[14]=-d,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}jt.prototype.isMatrix4=!0;const tr=new C,Xs=new jt,qA=new C(0,0,0),XA=new C(1,1,1),Zi=new C,_o=new C,Ds=new C,hu=new jt,uu=new Se;class kn{constructor(t=0,e=0,i=0,n=kn.DefaultOrder){this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const n=t.elements,a=n[0],o=n[4],c=n[8],_=n[1],l=n[5],u=n[9],p=n[2],f=n[6],d=n[10];switch(e){case"XYZ":this._y=Math.asin(Ms(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ms(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(c,d),this._z=Math.atan2(_,l)):(this._y=Math.atan2(-p,a),this._z=0);break;case"ZXY":this._x=Math.asin(Ms(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-p,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(_,a));break;case"ZYX":this._y=Math.asin(-Ms(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(_,a)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Ms(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(c,d));break;case"XZY":this._z=Math.asin(-Ms(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return hu.makeRotationFromQuaternion(t),this.setFromRotationMatrix(hu,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return uu.setFromEuler(this),this.setFromQuaternion(uu,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new C(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}kn.prototype.isEuler=!0;kn.DefaultOrder="XYZ";kn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Tp{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}}let jA=0;const fu=new C,er=new Se,wi=new jt,lo=new C,ia=new C,QA=new C,ZA=new Se,pu=new C(1,0,0),du=new C(0,1,0),mu=new C(0,0,1),$A={type:"added"},gu={type:"removed"};class Te extends En{constructor(){super(),Object.defineProperty(this,"id",{value:jA++}),this.uuid=ii(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Te.DefaultUp.clone();const t=new C,e=new kn,i=new Se,n=new C(1,1,1);function a(){i.setFromEuler(e,!1)}function o(){e.setFromQuaternion(i,void 0,!1)}e._onChange(a),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new jt},normalMatrix:{value:new ss}}),this.matrix=new jt,this.matrixWorld=new jt,this.matrixAutoUpdate=Te.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Tp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return er.setFromAxisAngle(t,e),this.quaternion.multiply(er),this}rotateOnWorldAxis(t,e){return er.setFromAxisAngle(t,e),this.quaternion.premultiply(er),this}rotateX(t){return this.rotateOnAxis(pu,t)}rotateY(t){return this.rotateOnAxis(du,t)}rotateZ(t){return this.rotateOnAxis(mu,t)}translateOnAxis(t,e){return fu.copy(t).applyQuaternion(this.quaternion),this.position.add(fu.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(pu,t)}translateY(t){return this.translateOnAxis(du,t)}translateZ(t){return this.translateOnAxis(mu,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(wi.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?lo.copy(t):lo.set(t,e,i);const n=this.parent;this.updateWorldMatrix(!0,!1),ia.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wi.lookAt(ia,lo,this.up):wi.lookAt(lo,ia,this.up),this.quaternion.setFromRotationMatrix(wi),n&&(wi.extractRotation(n.matrixWorld),er.setFromRotationMatrix(wi),this.quaternion.premultiply(er.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent($A)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(gu)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(gu)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),wi.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),wi.multiply(t.parent.matrixWorld)),t.applyMatrix4(wi),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const o=this.children[i].getObjectByProperty(t,e);if(o!==void 0)return o}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ia,t,QA),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ia,ZA,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const n=this.children;for(let a=0,o=n.length;a<o;a++)n[a].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function a(c,_){return c[_.uuid]===void 0&&(c[_.uuid]=_.toJSON(t)),_.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=a(t.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const _=c.shapes;if(Array.isArray(_))for(let l=0,u=_.length;l<u;l++){const p=_[l];a(t.shapes,p)}else a(t.shapes,_)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let _=0,l=this.material.length;_<l;_++)c.push(a(t.materials,this.material[_]));n.material=c}else n.material=a(t.materials,this.material);if(this.children.length>0){n.children=[];for(let c=0;c<this.children.length;c++)n.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let c=0;c<this.animations.length;c++){const _=this.animations[c];n.animations.push(a(t.animations,_))}}if(e){const c=o(t.geometries),_=o(t.materials),l=o(t.textures),u=o(t.images),p=o(t.shapes),f=o(t.skeletons),d=o(t.animations);c.length>0&&(i.geometries=c),_.length>0&&(i.materials=_),l.length>0&&(i.textures=l),u.length>0&&(i.images=u),p.length>0&&(i.shapes=p),f.length>0&&(i.skeletons=f),d.length>0&&(i.animations=d)}return i.object=n,i;function o(c){const _=[];for(const l in c){const u=c[l];delete u.metadata,_.push(u)}return _}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const n=t.children[i];this.add(n.clone())}return this}}Te.DefaultUp=new C(0,1,0);Te.DefaultMatrixAutoUpdate=!0;Te.prototype.isObject3D=!0;const js=new C,Li=new C,S_=new C,Ni=new C,sr=new C,ir=new C,Au=new C,v_=new C,I_=new C,x_=new C;class je{constructor(t=new C,e=new C,i=new C){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),js.subVectors(t,e),n.cross(js);const a=n.lengthSq();return a>0?n.multiplyScalar(1/Math.sqrt(a)):n.set(0,0,0)}static getBarycoord(t,e,i,n,a){js.subVectors(n,e),Li.subVectors(i,e),S_.subVectors(t,e);const o=js.dot(js),c=js.dot(Li),_=js.dot(S_),l=Li.dot(Li),u=Li.dot(S_),p=o*l-c*c;if(p===0)return a.set(-2,-1,-1);const f=1/p,d=(l*_-c*u)*f,A=(o*u-c*_)*f;return a.set(1-d-A,A,d)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,Ni),Ni.x>=0&&Ni.y>=0&&Ni.x+Ni.y<=1}static getUV(t,e,i,n,a,o,c,_){return this.getBarycoord(t,e,i,n,Ni),_.set(0,0),_.addScaledVector(a,Ni.x),_.addScaledVector(o,Ni.y),_.addScaledVector(c,Ni.z),_}static isFrontFacing(t,e,i,n){return js.subVectors(i,e),Li.subVectors(t,e),js.cross(Li).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return js.subVectors(this.c,this.b),Li.subVectors(this.a,this.b),js.cross(Li).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return je.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return je.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,a){return je.getUV(t,this.a,this.b,this.c,e,i,n,a)}containsPoint(t){return je.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return je.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,n=this.b,a=this.c;let o,c;sr.subVectors(n,i),ir.subVectors(a,i),v_.subVectors(t,i);const _=sr.dot(v_),l=ir.dot(v_);if(_<=0&&l<=0)return e.copy(i);I_.subVectors(t,n);const u=sr.dot(I_),p=ir.dot(I_);if(u>=0&&p<=u)return e.copy(n);const f=_*p-u*l;if(f<=0&&_>=0&&u<=0)return o=_/(_-u),e.copy(i).addScaledVector(sr,o);x_.subVectors(t,a);const d=sr.dot(x_),A=ir.dot(x_);if(A>=0&&d<=A)return e.copy(a);const E=d*l-_*A;if(E<=0&&l>=0&&A<=0)return c=l/(l-A),e.copy(i).addScaledVector(ir,c);const S=u*A-d*p;if(S<=0&&p-u>=0&&d-A>=0)return Au.subVectors(a,n),c=(p-u)/(p-u+(d-A)),e.copy(n).addScaledVector(Au,c);const y=1/(S+E+f);return o=E*y,c=f*y,e.copy(i).addScaledVector(sr,o).addScaledVector(ir,c)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let JA=0,cs=class extends En{constructor(){super(),Object.defineProperty(this,"id",{value:JA++}),this.uuid=ii(),this.name="",this.type="Material",this.fog=!0,this.blending=ga,this.side=va,this.vertexColors=!1,this.opacity=1,this.format=ps,this.transparent=!1,this.blendSrc=fp,this.blendDst=pp,this.blendEquation=Ar,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ll,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=GA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=u_,this.stencilZFail=u_,this.stencilZPass=u_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===up;continue}const n=this[e];if(n===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(i.sheenTint=this.sheenTint.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(i.specularTint=this.specularTint.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(i.specularTintMap=this.specularTintMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationTint!==void 0&&(i.attenuationTint=this.attenuationTint.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ga&&(i.blending=this.blending),this.side!==va&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==ps&&(i.format=this.format),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function n(a){const o=[];for(const c in a){const _=a[c];delete _.metadata,o.push(_)}return o}if(e){const a=n(t.textures),o=n(t.images);a.length>0&&(i.textures=a),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const n=e.length;i=new Array(n);for(let a=0;a!==n;++a)i[a]=e[a].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}};cs.prototype.isMaterial=!0;const Sp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qs={h:0,s:0,l:0},ho={h:0,s:0,l:0};function R_(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*6*(2/3-e):r}function O_(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function w_(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}class zt{constructor(t,e,i){return e===void 0&&i===void 0?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this}setRGB(t,e,i){return this.r=t,this.g=e,this.b=i,this}setHSL(t,e,i){if(t=kA(t,1),e=Ms(e,0,1),i=Ms(i,0,1),e===0)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+e):i+e-i*e,a=2*i-n;this.r=R_(a,n,t+1/3),this.g=R_(a,n,t),this.b=R_(a,n,t-1/3)}return this}setStyle(t){function e(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let n;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const c=parseFloat(n[1])/360,_=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return e(n[4]),this.setHSL(c,_,l)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=i[1],a=n.length;if(a===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(a===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=Sp[t.toLowerCase()];return e!==void 0?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=O_(t.r),this.g=O_(t.g),this.b=O_(t.b),this}copyLinearToSRGB(t){return this.r=w_(t.r),this.g=w_(t.g),this.b=w_(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,i=this.g,n=this.b,a=Math.max(e,i,n),o=Math.min(e,i,n);let c,_;const l=(o+a)/2;if(o===a)c=0,_=0;else{const u=a-o;switch(_=l<=.5?u/(a+o):u/(2-a-o),a){case e:c=(i-n)/u+(i<n?6:0);break;case i:c=(n-e)/u+2;break;case n:c=(e-i)/u+4;break}c/=6}return t.h=c,t.s=_,t.l=l,t}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(t,e,i){return this.getHSL(Qs),Qs.h+=t,Qs.s+=e,Qs.l+=i,this.setHSL(Qs.h,Qs.s,Qs.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Qs),t.getHSL(ho);const i=f_(Qs.h,ho.h,e),n=f_(Qs.s,ho.s,e),a=f_(Qs.l,ho.l,e);return this.setHSL(i,n,a),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}zt.NAMES=Sp;zt.prototype.isColor=!0;zt.prototype.r=1;zt.prototype.g=1;zt.prototype.b=1;class Gr extends cs{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}Gr.prototype.isMeshBasicMaterial=!0;const Pe=new C,uo=new dt;class ze{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i===!0,this.usage=xa,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,a=this.itemSize;n<a;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let i=0;for(let n=0,a=t.length;n<a;n++){let o=t[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new zt),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this}copyVector2sArray(t){const e=this.array;let i=0;for(let n=0,a=t.length;n<a;n++){let o=t[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new dt),e[i++]=o.x,e[i++]=o.y}return this}copyVector3sArray(t){const e=this.array;let i=0;for(let n=0,a=t.length;n<a;n++){let o=t[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new C),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this}copyVector4sArray(t){const e=this.array;let i=0;for(let n=0,a=t.length;n<a;n++){let o=t[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new Le),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)uo.fromBufferAttribute(this,e),uo.applyMatrix3(t),this.setXY(e,uo.x,uo.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Pe.fromBufferAttribute(this,e),Pe.applyMatrix3(t),this.setXYZ(e,Pe.x,Pe.y,Pe.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Pe.x=this.getX(e),Pe.y=this.getY(e),Pe.z=this.getZ(e),Pe.applyMatrix4(t),this.setXYZ(e,Pe.x,Pe.y,Pe.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Pe.x=this.getX(e),Pe.y=this.getY(e),Pe.z=this.getZ(e),Pe.applyNormalMatrix(t),this.setXYZ(e,Pe.x,Pe.y,Pe.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Pe.x=this.getX(e),Pe.y=this.getY(e),Pe.z=this.getZ(e),Pe.transformDirection(t),this.setXYZ(e,Pe.x,Pe.y,Pe.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,a){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=a,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==xa&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}}ze.prototype.isBufferAttribute=!0;class vp extends ze{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class Ip extends ze{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class ty extends ze{constructor(t,e,i){super(new Uint16Array(t),e,i)}}ty.prototype.isFloat16BufferAttribute=!0;class se extends ze{constructor(t,e,i){super(new Float32Array(t),e,i)}}let ey=0;const Hs=new jt,L_=new Te,nr=new C,Cs=new Bs,na=new Bs,es=new C;class de extends En{constructor(){super(),Object.defineProperty(this,"id",{value:ey++}),this.uuid=ii(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ep(t)>65535?Ip:vp)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new ss().getNormalMatrix(t);i.applyNormalMatrix(a),i.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(t),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Hs.makeRotationFromQuaternion(t),this.applyMatrix4(Hs),this}rotateX(t){return Hs.makeRotationX(t),this.applyMatrix4(Hs),this}rotateY(t){return Hs.makeRotationY(t),this.applyMatrix4(Hs),this}rotateZ(t){return Hs.makeRotationZ(t),this.applyMatrix4(Hs),this}translate(t,e,i){return Hs.makeTranslation(t,e,i),this.applyMatrix4(Hs),this}scale(t,e,i){return Hs.makeScale(t,e,i),this.applyMatrix4(Hs),this}lookAt(t){return L_.lookAt(t),L_.updateMatrix(),this.applyMatrix4(L_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(nr).negate(),this.translate(nr.x,nr.y,nr.z),this}setFromPoints(t){const e=[];for(let i=0,n=t.length;i<n;i++){const a=t[i];e.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new se(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new C(-1/0,-1/0,-1/0),new C(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,n=e.length;i<n;i++){const a=e[i];Cs.setFromBufferAttribute(a),this.morphTargetsRelative?(es.addVectors(this.boundingBox.min,Cs.min),this.boundingBox.expandByPoint(es),es.addVectors(this.boundingBox.max,Cs.max),this.boundingBox.expandByPoint(es)):(this.boundingBox.expandByPoint(Cs.min),this.boundingBox.expandByPoint(Cs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new C,1/0);return}if(t){const i=this.boundingSphere.center;if(Cs.setFromBufferAttribute(t),e)for(let a=0,o=e.length;a<o;a++){const c=e[a];na.setFromBufferAttribute(c),this.morphTargetsRelative?(es.addVectors(Cs.min,na.min),Cs.expandByPoint(es),es.addVectors(Cs.max,na.max),Cs.expandByPoint(es)):(Cs.expandByPoint(na.min),Cs.expandByPoint(na.max))}Cs.getCenter(i);let n=0;for(let a=0,o=t.count;a<o;a++)es.fromBufferAttribute(t,a),n=Math.max(n,i.distanceToSquared(es));if(e)for(let a=0,o=e.length;a<o;a++){const c=e[a],_=this.morphTargetsRelative;for(let l=0,u=c.count;l<u;l++)es.fromBufferAttribute(c,l),_&&(nr.fromBufferAttribute(t,l),es.add(nr)),n=Math.max(n,i.distanceToSquared(es))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.array,n=e.position.array,a=e.normal.array,o=e.uv.array,c=n.length/3;e.tangent===void 0&&this.setAttribute("tangent",new ze(new Float32Array(4*c),4));const _=e.tangent.array,l=[],u=[];for(let Y=0;Y<c;Y++)l[Y]=new C,u[Y]=new C;const p=new C,f=new C,d=new C,A=new dt,E=new dt,S=new dt,y=new C,M=new C;function x(Y,F,it){p.fromArray(n,Y*3),f.fromArray(n,F*3),d.fromArray(n,it*3),A.fromArray(o,Y*2),E.fromArray(o,F*2),S.fromArray(o,it*2),f.sub(p),d.sub(p),E.sub(A),S.sub(A);const G=1/(E.x*S.y-S.x*E.y);isFinite(G)&&(y.copy(f).multiplyScalar(S.y).addScaledVector(d,-E.y).multiplyScalar(G),M.copy(d).multiplyScalar(E.x).addScaledVector(f,-S.x).multiplyScalar(G),l[Y].add(y),l[F].add(y),l[it].add(y),u[Y].add(M),u[F].add(M),u[it].add(M))}let I=this.groups;I.length===0&&(I=[{start:0,count:i.length}]);for(let Y=0,F=I.length;Y<F;++Y){const it=I[Y],G=it.start,K=it.count;for(let X=G,z=G+K;X<z;X+=3)x(i[X+0],i[X+1],i[X+2])}const w=new C,D=new C,m=new C,U=new C;function q(Y){m.fromArray(a,Y*3),U.copy(m);const F=l[Y];w.copy(F),w.sub(m.multiplyScalar(m.dot(F))).normalize(),D.crossVectors(U,F);const G=D.dot(u[Y])<0?-1:1;_[Y*4]=w.x,_[Y*4+1]=w.y,_[Y*4+2]=w.z,_[Y*4+3]=G}for(let Y=0,F=I.length;Y<F;++Y){const it=I[Y],G=it.start,K=it.count;for(let X=G,z=G+K;X<z;X+=3)q(i[X+0]),q(i[X+1]),q(i[X+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ze(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let f=0,d=i.count;f<d;f++)i.setXYZ(f,0,0,0);const n=new C,a=new C,o=new C,c=new C,_=new C,l=new C,u=new C,p=new C;if(t)for(let f=0,d=t.count;f<d;f+=3){const A=t.getX(f+0),E=t.getX(f+1),S=t.getX(f+2);n.fromBufferAttribute(e,A),a.fromBufferAttribute(e,E),o.fromBufferAttribute(e,S),u.subVectors(o,a),p.subVectors(n,a),u.cross(p),c.fromBufferAttribute(i,A),_.fromBufferAttribute(i,E),l.fromBufferAttribute(i,S),c.add(u),_.add(u),l.add(u),i.setXYZ(A,c.x,c.y,c.z),i.setXYZ(E,_.x,_.y,_.z),i.setXYZ(S,l.x,l.y,l.z)}else for(let f=0,d=e.count;f<d;f+=3)n.fromBufferAttribute(e,f+0),a.fromBufferAttribute(e,f+1),o.fromBufferAttribute(e,f+2),u.subVectors(o,a),p.subVectors(n,a),u.cross(p),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const n in i){if(t.attributes[n]===void 0)continue;const o=i[n].array,c=t.attributes[n],_=c.array,l=c.itemSize*e,u=Math.min(_.length,o.length-l);for(let p=0,f=l;p<u;p++,f++)o[f]=_[p]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)es.fromBufferAttribute(t,e),es.normalize(),t.setXYZ(e,es.x,es.y,es.z)}toNonIndexed(){function t(c,_){const l=c.array,u=c.itemSize,p=c.normalized,f=new l.constructor(_.length*u);let d=0,A=0;for(let E=0,S=_.length;E<S;E++){c.isInterleavedBufferAttribute?d=_[E]*c.data.stride+c.offset:d=_[E]*u;for(let y=0;y<u;y++)f[A++]=l[d++]}return new ze(f,u,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new de,i=this.index.array,n=this.attributes;for(const c in n){const _=n[c],l=t(_,i);e.setAttribute(c,l)}const a=this.morphAttributes;for(const c in a){const _=[],l=a[c];for(let u=0,p=l.length;u<p;u++){const f=l[u],d=t(f,i);_.push(d)}e.morphAttributes[c]=_}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let c=0,_=o.length;c<_;c++){const l=o[c];e.addGroup(l.start,l.count,l.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const _=this.parameters;for(const l in _)_[l]!==void 0&&(t[l]=_[l]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const _ in i){const l=i[_];t.data.attributes[_]=l.toJSON(t.data)}const n={};let a=!1;for(const _ in this.morphAttributes){const l=this.morphAttributes[_],u=[];for(let p=0,f=l.length;p<f;p++){const d=l[p];u.push(d.toJSON(t.data))}u.length>0&&(n[_]=u,a=!0)}a&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return c!==null&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(e));const n=t.attributes;for(const l in n){const u=n[l];this.setAttribute(l,u.clone(e))}const a=t.morphAttributes;for(const l in a){const u=[],p=a[l];for(let f=0,d=p.length;f<d;f++)u.push(p[f].clone(e));this.morphAttributes[l]=u}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,u=o.length;l<u;l++){const p=o[l];this.addGroup(p.start,p.count,p.materialIndex)}const c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());const _=t.boundingSphere;return _!==null&&(this.boundingSphere=_.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}de.prototype.isBufferGeometry=!0;const yu=new jt,rr=new Un,N_=new Gn,$i=new C,Ji=new C,tn=new C,b_=new C,D_=new C,C_=new C,fo=new C,po=new C,mo=new C,go=new dt,Ao=new dt,yo=new dt,P_=new C,Eo=new C;class ke extends Te{constructor(t=new de,e=new Gr){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const n=e[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=n.length;a<o;a++){const c=n[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const i=this.geometry,n=this.material,a=this.matrixWorld;if(n===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),N_.copy(i.boundingSphere),N_.applyMatrix4(a),t.ray.intersectsSphere(N_)===!1)||(yu.copy(a).invert(),rr.copy(t.ray).applyMatrix4(yu),i.boundingBox!==null&&rr.intersectsBox(i.boundingBox)===!1))return;let o;if(i.isBufferGeometry){const c=i.index,_=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,p=i.attributes.uv,f=i.attributes.uv2,d=i.groups,A=i.drawRange;if(c!==null)if(Array.isArray(n))for(let E=0,S=d.length;E<S;E++){const y=d[E],M=n[y.materialIndex],x=Math.max(y.start,A.start),I=Math.min(c.count,Math.min(y.start+y.count,A.start+A.count));for(let w=x,D=I;w<D;w+=3){const m=c.getX(w),U=c.getX(w+1),q=c.getX(w+2);o=Mo(this,M,t,rr,_,l,u,p,f,m,U,q),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=y.materialIndex,e.push(o))}}else{const E=Math.max(0,A.start),S=Math.min(c.count,A.start+A.count);for(let y=E,M=S;y<M;y+=3){const x=c.getX(y),I=c.getX(y+1),w=c.getX(y+2);o=Mo(this,n,t,rr,_,l,u,p,f,x,I,w),o&&(o.faceIndex=Math.floor(y/3),e.push(o))}}else if(_!==void 0)if(Array.isArray(n))for(let E=0,S=d.length;E<S;E++){const y=d[E],M=n[y.materialIndex],x=Math.max(y.start,A.start),I=Math.min(_.count,Math.min(y.start+y.count,A.start+A.count));for(let w=x,D=I;w<D;w+=3){const m=w,U=w+1,q=w+2;o=Mo(this,M,t,rr,_,l,u,p,f,m,U,q),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=y.materialIndex,e.push(o))}}else{const E=Math.max(0,A.start),S=Math.min(_.count,A.start+A.count);for(let y=E,M=S;y<M;y+=3){const x=y,I=y+1,w=y+2;o=Mo(this,n,t,rr,_,l,u,p,f,x,I,w),o&&(o.faceIndex=Math.floor(y/3),e.push(o))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}ke.prototype.isMesh=!0;function sy(r,t,e,i,n,a,o,c){let _;if(t.side===Je?_=i.intersectTriangle(o,a,n,!0,c):_=i.intersectTriangle(n,a,o,t.side!==ln,c),_===null)return null;Eo.copy(c),Eo.applyMatrix4(r.matrixWorld);const l=e.ray.origin.distanceTo(Eo);return l<e.near||l>e.far?null:{distance:l,point:Eo.clone(),object:r}}function Mo(r,t,e,i,n,a,o,c,_,l,u,p){$i.fromBufferAttribute(n,l),Ji.fromBufferAttribute(n,u),tn.fromBufferAttribute(n,p);const f=r.morphTargetInfluences;if(a&&f){fo.set(0,0,0),po.set(0,0,0),mo.set(0,0,0);for(let A=0,E=a.length;A<E;A++){const S=f[A],y=a[A];S!==0&&(b_.fromBufferAttribute(y,l),D_.fromBufferAttribute(y,u),C_.fromBufferAttribute(y,p),o?(fo.addScaledVector(b_,S),po.addScaledVector(D_,S),mo.addScaledVector(C_,S)):(fo.addScaledVector(b_.sub($i),S),po.addScaledVector(D_.sub(Ji),S),mo.addScaledVector(C_.sub(tn),S)))}$i.add(fo),Ji.add(po),tn.add(mo)}r.isSkinnedMesh&&(r.boneTransform(l,$i),r.boneTransform(u,Ji),r.boneTransform(p,tn));const d=sy(r,t,e,i,$i,Ji,tn,P_);if(d){c&&(go.fromBufferAttribute(c,l),Ao.fromBufferAttribute(c,u),yo.fromBufferAttribute(c,p),d.uv=je.getUV(P_,$i,Ji,tn,go,Ao,yo,new dt)),_&&(go.fromBufferAttribute(_,l),Ao.fromBufferAttribute(_,u),yo.fromBufferAttribute(_,p),d.uv2=je.getUV(P_,$i,Ji,tn,go,Ao,yo,new dt));const A={a:l,b:u,c:p,normal:new C,materialIndex:0};je.getNormal($i,Ji,tn,A.normal),d.face=A}return d}class Pn extends de{constructor(t=1,e=1,i=1,n=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:a,depthSegments:o};const c=this;n=Math.floor(n),a=Math.floor(a),o=Math.floor(o);const _=[],l=[],u=[],p=[];let f=0,d=0;A("z","y","x",-1,-1,i,e,t,o,a,0),A("z","y","x",1,-1,i,e,-t,o,a,1),A("x","z","y",1,1,t,i,e,n,o,2),A("x","z","y",1,-1,t,i,-e,n,o,3),A("x","y","z",1,-1,t,e,i,n,a,4),A("x","y","z",-1,-1,t,e,-i,n,a,5),this.setIndex(_),this.setAttribute("position",new se(l,3)),this.setAttribute("normal",new se(u,3)),this.setAttribute("uv",new se(p,2));function A(E,S,y,M,x,I,w,D,m,U,q){const Y=I/m,F=w/U,it=I/2,G=w/2,K=D/2,X=m+1,z=U+1;let J=0,_t=0;const gt=new C;for(let bt=0;bt<z;bt++){const vt=bt*F-G;for(let Et=0;Et<X;Et++){const pt=Et*Y-it;gt[E]=pt*M,gt[S]=vt*x,gt[y]=K,l.push(gt.x,gt.y,gt.z),gt[E]=0,gt[S]=0,gt[y]=D>0?1:-1,u.push(gt.x,gt.y,gt.z),p.push(Et/m),p.push(1-bt/U),J+=1}}for(let bt=0;bt<U;bt++)for(let vt=0;vt<m;vt++){const Et=f+vt+X*bt,pt=f+vt+X*(bt+1),St=f+(vt+1)+X*(bt+1),Ft=f+(vt+1)+X*bt;_.push(Et,pt,Ft),_.push(pt,St,Ft),_t+=6}c.addGroup(d,_t,q),d+=_t,f+=J}}static fromJSON(t){return new Pn(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Nr(r){const t={};for(const e in r){t[e]={};for(const i in r[e]){const n=r[e][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[e][i]=n.clone():Array.isArray(n)?t[e][i]=n.slice():t[e][i]=n}}return t}function us(r){const t={};for(let e=0;e<r.length;e++){const i=Nr(r[e]);for(const n in i)t[n]=i[n]}return t}const iy={clone:Nr,merge:us};var ny=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ry=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class un extends cs{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=ny,this.fragmentShader=ry,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Nr(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const o=this.uniforms[n].value;o&&o.isTexture?e.uniforms[n]={type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?e.uniforms[n]={type:"c",value:o.getHex()}:o&&o.isVector2?e.uniforms[n]={type:"v2",value:o.toArray()}:o&&o.isVector3?e.uniforms[n]={type:"v3",value:o.toArray()}:o&&o.isVector4?e.uniforms[n]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?e.uniforms[n]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?e.uniforms[n]={type:"m4",value:o.toArray()}:e.uniforms[n]={value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const n in this.extensions)this.extensions[n]===!0&&(i[n]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}un.prototype.isShaderMaterial=!0;class bc extends Te{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new jt,this.projectionMatrix=new jt,this.projectionMatrixInverse=new jt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}bc.prototype.isCamera=!0;class Ke extends bc{constructor(t=50,e=1,i=.1,n=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=fl*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Qo*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return fl*2*Math.atan(Math.tan(Qo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,a,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Qo*.5*this.fov)/this.zoom,i=2*e,n=this.aspect*i,a=-.5*n;const o=this.view;if(this.view!==null&&this.view.enabled){const _=o.fullWidth,l=o.fullHeight;a+=o.offsetX*n/_,e-=o.offsetY*i/l,n*=o.width/_,i*=o.height/l}const c=this.filmOffset;c!==0&&(a+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Ke.prototype.isPerspectiveCamera=!0;const ar=90,or=1;class Cl extends Te{constructor(t,e,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const n=new Ke(ar,or,t,e);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new C(1,0,0)),this.add(n);const a=new Ke(ar,or,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new C(-1,0,0)),this.add(a);const o=new Ke(ar,or,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new C(0,1,0)),this.add(o);const c=new Ke(ar,or,t,e);c.layers=this.layers,c.up.set(0,0,-1),c.lookAt(new C(0,-1,0)),this.add(c);const _=new Ke(ar,or,t,e);_.layers=this.layers,_.up.set(0,-1,0),_.lookAt(new C(0,0,1)),this.add(_);const l=new Ke(ar,or,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new C(0,0,-1)),this.add(l)}update(t,e){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[n,a,o,c,_,l]=this.children,u=t.xr.enabled,p=t.getRenderTarget();t.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,a),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,c),t.setRenderTarget(i,4),t.render(e,_),i.texture.generateMipmaps=f,t.setRenderTarget(i,5),t.render(e,l),t.setRenderTarget(p),t.xr.enabled=u}}class Fa extends is{constructor(t,e,i,n,a,o,c,_,l,u){t=t!==void 0?t:[],e=e!==void 0?e:Ga,super(t,e,i,n,a,o,c,_,l,u),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Fa.prototype.isCubeTexture=!0;class xp extends yi{constructor(t,e,i){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=i),super(t,t,e),e=e||{},this.texture=new Fa(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Rs,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=ps,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new Pn(5,5,5),a=new un({name:"CubemapFromEquirect",uniforms:Nr(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Je,blending:an});a.uniforms.tEquirect.value=e;const o=new ke(n,a),c=e.minFilter;return e.minFilter===Pr&&(e.minFilter=Rs),new Cl(1,10,this).update(t,o),e.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,i,n){const a=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,i,n);t.setRenderTarget(a)}}xp.prototype.isWebGLCubeRenderTarget=!0;const B_=new C,ay=new C,oy=new ss;let Vi=class{constructor(t=new C(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const n=B_.subVectors(i,e).cross(ay.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const i=t.delta(B_),n=this.normal.dot(i);if(n===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const a=-(t.start.dot(this.normal)+this.constant)/n;return a<0||a>1?null:e.copy(i).multiplyScalar(a).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||oy.getNormalMatrix(t),n=this.coplanarPoint(B_).applyMatrix4(t),a=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(a),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}};Vi.prototype.isPlane=!0;const cr=new Gn,To=new C;class Dc{constructor(t=new Vi,e=new Vi,i=new Vi,n=new Vi,a=new Vi,o=new Vi){this.planes=[t,e,i,n,a,o]}set(t,e,i,n,a,o){const c=this.planes;return c[0].copy(t),c[1].copy(e),c[2].copy(i),c[3].copy(n),c[4].copy(a),c[5].copy(o),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,n=i[0],a=i[1],o=i[2],c=i[3],_=i[4],l=i[5],u=i[6],p=i[7],f=i[8],d=i[9],A=i[10],E=i[11],S=i[12],y=i[13],M=i[14],x=i[15];return e[0].setComponents(c-n,p-_,E-f,x-S).normalize(),e[1].setComponents(c+n,p+_,E+f,x+S).normalize(),e[2].setComponents(c+a,p+l,E+d,x+y).normalize(),e[3].setComponents(c-a,p-l,E-d,x-y).normalize(),e[4].setComponents(c-o,p-u,E-A,x-M).normalize(),e[5].setComponents(c+o,p+u,E+A,x+M).normalize(),this}intersectsObject(t){const e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),cr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(cr)}intersectsSprite(t){return cr.center.set(0,0,0),cr.radius=.7071067811865476,cr.applyMatrix4(t.matrixWorld),this.intersectsSphere(cr)}intersectsSphere(t){const e=this.planes,i=t.center,n=-t.radius;for(let a=0;a<6;a++)if(e[a].distanceToPoint(i)<n)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(To.x=n.normal.x>0?t.max.x:t.min.x,To.y=n.normal.y>0?t.max.y:t.min.y,To.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(To)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Rp(){let r=null,t=!1,e=null,i=null;function n(a,o){e(a,o),i=r.requestAnimationFrame(n)}return{start:function(){t!==!0&&e!==null&&(i=r.requestAnimationFrame(n),t=!0)},stop:function(){r.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(a){e=a},setContext:function(a){r=a}}}function cy(r,t){const e=t.isWebGL2,i=new WeakMap;function n(l,u){const p=l.array,f=l.usage,d=r.createBuffer();r.bindBuffer(u,d),r.bufferData(u,p,f),l.onUploadCallback();let A=5126;return p instanceof Float32Array?A=5126:p instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):p instanceof Uint16Array?l.isFloat16BufferAttribute?e?A=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):A=5123:p instanceof Int16Array?A=5122:p instanceof Uint32Array?A=5125:p instanceof Int32Array?A=5124:p instanceof Int8Array?A=5120:(p instanceof Uint8Array||p instanceof Uint8ClampedArray)&&(A=5121),{buffer:d,type:A,bytesPerElement:p.BYTES_PER_ELEMENT,version:l.version}}function a(l,u,p){const f=u.array,d=u.updateRange;r.bindBuffer(p,l),d.count===-1?r.bufferSubData(p,0,f):(e?r.bufferSubData(p,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):r.bufferSubData(p,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)}function c(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(r.deleteBuffer(u.buffer),i.delete(l))}function _(l,u){if(l.isGLBufferAttribute){const f=i.get(l);(!f||f.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const p=i.get(l);p===void 0?i.set(l,n(l,u)):p.version<l.version&&(a(p.buffer,l,u),p.version=l.version)}return{get:o,remove:c,update:_}}class fn extends de{constructor(t=1,e=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};const a=t/2,o=e/2,c=Math.floor(i),_=Math.floor(n),l=c+1,u=_+1,p=t/c,f=e/_,d=[],A=[],E=[],S=[];for(let y=0;y<u;y++){const M=y*f-o;for(let x=0;x<l;x++){const I=x*p-a;A.push(I,-M,0),E.push(0,0,1),S.push(x/c),S.push(1-y/_)}}for(let y=0;y<_;y++)for(let M=0;M<c;M++){const x=M+l*y,I=M+l*(y+1),w=M+1+l*(y+1),D=M+1+l*y;d.push(x,I,D),d.push(I,w,D)}this.setIndex(d),this.setAttribute("position",new se(A,3)),this.setAttribute("normal",new se(E,3)),this.setAttribute("uv",new se(S,2))}static fromJSON(t){return new fn(t.width,t.height,t.widthSegments,t.heightSegments)}}var _y=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,ly=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hy=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,uy=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,fy=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,py=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,dy="vec3 transformed = vec3( position );",my=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,gy=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenTint * ( D * V );
}
#endif`,Ay=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,yy=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Ey=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,My=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Ty=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Sy=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vy=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Iy=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,xy=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Ry=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Oy=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wy=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Ly=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ny=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,by=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Dy=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Cy="gl_FragColor = linearToOutputTexel( gl_FragColor );",Py=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,By=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Vy=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Gy=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Uy=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ky=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Fy=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Hy=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,zy=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Wy=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Yy=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Ky=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,qy=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Xy=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,jy=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Qy=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Zy=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,$y=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Jy=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,tE=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,eE=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularTintFactor = specularTint;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARTINTMAP
			specularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularTintFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenTint = sheenTint;
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
#endif`,sE=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenTint;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,iE=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,nE=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,rE=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,aE=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,oE=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,cE=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,_E=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,lE=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,hE=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,uE=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,fE=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pE=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,dE=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,mE=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,gE=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,AE=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,yE=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,EE=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ME=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,TE=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,SE=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,vE=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,IE=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,xE=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,RE=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,OE=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,wE=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,LE=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,NE=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,bE=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,DE=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,CE=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,PE=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,BE=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,VE=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,GE=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,UE=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,kE=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,FE=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,HE=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,zE=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,WE=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,YE=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,KE=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,qE=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,XE=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationTint, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,jE=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationTint;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,QE=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,ZE=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,$E=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,JE=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,tM=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,eM=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,sM=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const iM=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,nM=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,rM=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,aM=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,oM=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,cM=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,_M=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,lM=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,hM=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,uM=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,fM=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pM=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dM=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,mM=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gM=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AM=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yM=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,EM=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MM=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,TM=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,SM=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vM=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IM=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,xM=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularTint;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARTINTMAP
		uniform sampler2D specularTintMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenTint;
	uniform float sheenRoughness;
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RM=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OM=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wM=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,LM=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NM=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bM=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,DM=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,CM=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,pe={alphamap_fragment:_y,alphamap_pars_fragment:ly,alphatest_fragment:hy,alphatest_pars_fragment:uy,aomap_fragment:fy,aomap_pars_fragment:py,begin_vertex:dy,beginnormal_vertex:my,bsdfs:gy,bumpmap_pars_fragment:Ay,clipping_planes_fragment:yy,clipping_planes_pars_fragment:Ey,clipping_planes_pars_vertex:My,clipping_planes_vertex:Ty,color_fragment:Sy,color_pars_fragment:vy,color_pars_vertex:Iy,color_vertex:xy,common:Ry,cube_uv_reflection_fragment:Oy,defaultnormal_vertex:wy,displacementmap_pars_vertex:Ly,displacementmap_vertex:Ny,emissivemap_fragment:by,emissivemap_pars_fragment:Dy,encodings_fragment:Cy,encodings_pars_fragment:Py,envmap_fragment:By,envmap_common_pars_fragment:Vy,envmap_pars_fragment:Gy,envmap_pars_vertex:Uy,envmap_physical_pars_fragment:Qy,envmap_vertex:ky,fog_vertex:Fy,fog_pars_vertex:Hy,fog_fragment:zy,fog_pars_fragment:Wy,gradientmap_pars_fragment:Yy,lightmap_fragment:Ky,lightmap_pars_fragment:qy,lights_lambert_vertex:Xy,lights_pars_begin:jy,lights_toon_fragment:Zy,lights_toon_pars_fragment:$y,lights_phong_fragment:Jy,lights_phong_pars_fragment:tE,lights_physical_fragment:eE,lights_physical_pars_fragment:sE,lights_fragment_begin:iE,lights_fragment_maps:nE,lights_fragment_end:rE,logdepthbuf_fragment:aE,logdepthbuf_pars_fragment:oE,logdepthbuf_pars_vertex:cE,logdepthbuf_vertex:_E,map_fragment:lE,map_pars_fragment:hE,map_particle_fragment:uE,map_particle_pars_fragment:fE,metalnessmap_fragment:pE,metalnessmap_pars_fragment:dE,morphnormal_vertex:mE,morphtarget_pars_vertex:gE,morphtarget_vertex:AE,normal_fragment_begin:yE,normal_fragment_maps:EE,normal_pars_fragment:ME,normal_pars_vertex:TE,normal_vertex:SE,normalmap_pars_fragment:vE,clearcoat_normal_fragment_begin:IE,clearcoat_normal_fragment_maps:xE,clearcoat_pars_fragment:RE,output_fragment:OE,packing:wE,premultiplied_alpha_fragment:LE,project_vertex:NE,dithering_fragment:bE,dithering_pars_fragment:DE,roughnessmap_fragment:CE,roughnessmap_pars_fragment:PE,shadowmap_pars_fragment:BE,shadowmap_pars_vertex:VE,shadowmap_vertex:GE,shadowmask_pars_fragment:UE,skinbase_vertex:kE,skinning_pars_vertex:FE,skinning_vertex:HE,skinnormal_vertex:zE,specularmap_fragment:WE,specularmap_pars_fragment:YE,tonemapping_fragment:KE,tonemapping_pars_fragment:qE,transmission_fragment:XE,transmission_pars_fragment:jE,uv_pars_fragment:QE,uv_pars_vertex:ZE,uv_vertex:$E,uv2_pars_fragment:JE,uv2_pars_vertex:tM,uv2_vertex:eM,worldpos_vertex:sM,background_vert:iM,background_frag:nM,cube_vert:rM,cube_frag:aM,depth_vert:oM,depth_frag:cM,distanceRGBA_vert:_M,distanceRGBA_frag:lM,equirect_vert:hM,equirect_frag:uM,linedashed_vert:fM,linedashed_frag:pM,meshbasic_vert:dM,meshbasic_frag:mM,meshlambert_vert:gM,meshlambert_frag:AM,meshmatcap_vert:yM,meshmatcap_frag:EM,meshnormal_vert:MM,meshnormal_frag:TM,meshphong_vert:SM,meshphong_frag:vM,meshphysical_vert:IM,meshphysical_frag:xM,meshtoon_vert:RM,meshtoon_frag:OM,points_vert:wM,points_frag:LM,shadow_vert:NM,shadow_frag:bM,sprite_vert:DM,sprite_frag:CM},Ct={common:{diffuse:{value:new zt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ss},uv2Transform:{value:new ss},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ss}},sprite:{diffuse:{value:new zt(16777215)},opacity:{value:1},center:{value:new dt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ss}}},Ai={basic:{uniforms:us([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:pe.meshbasic_vert,fragmentShader:pe.meshbasic_frag},lambert:{uniforms:us([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.fog,Ct.lights,{emissive:{value:new zt(0)}}]),vertexShader:pe.meshlambert_vert,fragmentShader:pe.meshlambert_frag},phong:{uniforms:us([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new zt(0)},specular:{value:new zt(1118481)},shininess:{value:30}}]),vertexShader:pe.meshphong_vert,fragmentShader:pe.meshphong_frag},standard:{uniforms:us([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pe.meshphysical_vert,fragmentShader:pe.meshphysical_frag},toon:{uniforms:us([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new zt(0)}}]),vertexShader:pe.meshtoon_vert,fragmentShader:pe.meshtoon_frag},matcap:{uniforms:us([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:pe.meshmatcap_vert,fragmentShader:pe.meshmatcap_frag},points:{uniforms:us([Ct.points,Ct.fog]),vertexShader:pe.points_vert,fragmentShader:pe.points_frag},dashed:{uniforms:us([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pe.linedashed_vert,fragmentShader:pe.linedashed_frag},depth:{uniforms:us([Ct.common,Ct.displacementmap]),vertexShader:pe.depth_vert,fragmentShader:pe.depth_frag},normal:{uniforms:us([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:pe.meshnormal_vert,fragmentShader:pe.meshnormal_frag},sprite:{uniforms:us([Ct.sprite,Ct.fog]),vertexShader:pe.sprite_vert,fragmentShader:pe.sprite_frag},background:{uniforms:{uvTransform:{value:new ss},t2D:{value:null}},vertexShader:pe.background_vert,fragmentShader:pe.background_frag},cube:{uniforms:us([Ct.envmap,{opacity:{value:1}}]),vertexShader:pe.cube_vert,fragmentShader:pe.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pe.equirect_vert,fragmentShader:pe.equirect_frag},distanceRGBA:{uniforms:us([Ct.common,Ct.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pe.distanceRGBA_vert,fragmentShader:pe.distanceRGBA_frag},shadow:{uniforms:us([Ct.lights,Ct.fog,{color:{value:new zt(0)},opacity:{value:1}}]),vertexShader:pe.shadow_vert,fragmentShader:pe.shadow_frag}};Ai.physical={uniforms:us([Ai.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new dt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new zt(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new dt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new zt(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new zt(1,1,1)},specularTintMap:{value:null}}]),vertexShader:pe.meshphysical_vert,fragmentShader:pe.meshphysical_frag};function PM(r,t,e,i,n){const a=new zt(0);let o=0,c,_,l=null,u=0,p=null;function f(A,E){let S=!1,y=E.isScene===!0?E.background:null;y&&y.isTexture&&(y=t.get(y));const M=r.xr,x=M.getSession&&M.getSession();x&&x.environmentBlendMode==="additive"&&(y=null),y===null?d(a,o):y&&y.isColor&&(d(y,1),S=!0),(r.autoClear||S)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),y&&(y.isCubeTexture||y.mapping===ka)?(_===void 0&&(_=new ke(new Pn(1,1,1),new un({name:"BackgroundCubeMaterial",uniforms:Nr(Ai.cube.uniforms),vertexShader:Ai.cube.vertexShader,fragmentShader:Ai.cube.fragmentShader,side:Je,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(I,w,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(_)),_.material.uniforms.envMap.value=y,_.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,(l!==y||u!==y.version||p!==r.toneMapping)&&(_.material.needsUpdate=!0,l=y,u=y.version,p=r.toneMapping),A.unshift(_,_.geometry,_.material,0,0,null)):y&&y.isTexture&&(c===void 0&&(c=new ke(new fn(2,2),new un({name:"BackgroundMaterial",uniforms:Nr(Ai.background.uniforms),vertexShader:Ai.background.vertexShader,fragmentShader:Ai.background.fragmentShader,side:va,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),(l!==y||u!==y.version||p!==r.toneMapping)&&(c.material.needsUpdate=!0,l=y,u=y.version,p=r.toneMapping),A.unshift(c,c.geometry,c.material,0,0,null))}function d(A,E){e.buffers.color.setClear(A.r,A.g,A.b,E,n)}return{getClearColor:function(){return a},setClearColor:function(A,E=1){a.set(A),o=E,d(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(A){o=A,d(a,o)},render:f}}function BM(r,t,e,i){const n=r.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||a!==null,c={},_=E(null);let l=_;function u(G,K,X,z,J){let _t=!1;if(o){const gt=A(z,X,K);l!==gt&&(l=gt,f(l.object)),_t=S(z,J),_t&&y(z,J)}else{const gt=K.wireframe===!0;(l.geometry!==z.id||l.program!==X.id||l.wireframe!==gt)&&(l.geometry=z.id,l.program=X.id,l.wireframe=gt,_t=!0)}G.isInstancedMesh===!0&&(_t=!0),J!==null&&e.update(J,34963),_t&&(m(G,K,X,z),J!==null&&r.bindBuffer(34963,e.get(J).buffer))}function p(){return i.isWebGL2?r.createVertexArray():a.createVertexArrayOES()}function f(G){return i.isWebGL2?r.bindVertexArray(G):a.bindVertexArrayOES(G)}function d(G){return i.isWebGL2?r.deleteVertexArray(G):a.deleteVertexArrayOES(G)}function A(G,K,X){const z=X.wireframe===!0;let J=c[G.id];J===void 0&&(J={},c[G.id]=J);let _t=J[K.id];_t===void 0&&(_t={},J[K.id]=_t);let gt=_t[z];return gt===void 0&&(gt=E(p()),_t[z]=gt),gt}function E(G){const K=[],X=[],z=[];for(let J=0;J<n;J++)K[J]=0,X[J]=0,z[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:X,attributeDivisors:z,object:G,attributes:{},index:null}}function S(G,K){const X=l.attributes,z=G.attributes;let J=0;for(const _t in z){const gt=X[_t],bt=z[_t];if(gt===void 0||gt.attribute!==bt||gt.data!==bt.data)return!0;J++}return l.attributesNum!==J||l.index!==K}function y(G,K){const X={},z=G.attributes;let J=0;for(const _t in z){const gt=z[_t],bt={};bt.attribute=gt,gt.data&&(bt.data=gt.data),X[_t]=bt,J++}l.attributes=X,l.attributesNum=J,l.index=K}function M(){const G=l.newAttributes;for(let K=0,X=G.length;K<X;K++)G[K]=0}function x(G){I(G,0)}function I(G,K){const X=l.newAttributes,z=l.enabledAttributes,J=l.attributeDivisors;X[G]=1,z[G]===0&&(r.enableVertexAttribArray(G),z[G]=1),J[G]!==K&&((i.isWebGL2?r:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,K),J[G]=K)}function w(){const G=l.newAttributes,K=l.enabledAttributes;for(let X=0,z=K.length;X<z;X++)K[X]!==G[X]&&(r.disableVertexAttribArray(X),K[X]=0)}function D(G,K,X,z,J,_t){i.isWebGL2===!0&&(X===5124||X===5125)?r.vertexAttribIPointer(G,K,X,J,_t):r.vertexAttribPointer(G,K,X,z,J,_t)}function m(G,K,X,z){if(i.isWebGL2===!1&&(G.isInstancedMesh||z.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;M();const J=z.attributes,_t=X.getAttributes(),gt=K.defaultAttributeValues;for(const bt in _t){const vt=_t[bt];if(vt.location>=0){let Et=J[bt];if(Et===void 0&&(bt==="instanceMatrix"&&G.instanceMatrix&&(Et=G.instanceMatrix),bt==="instanceColor"&&G.instanceColor&&(Et=G.instanceColor)),Et!==void 0){const pt=Et.normalized,St=Et.itemSize,Ft=e.get(Et);if(Ft===void 0)continue;const ot=Ft.buffer,Xt=Ft.type,te=Ft.bytesPerElement;if(Et.isInterleavedBufferAttribute){const kt=Et.data,Bt=kt.stride,ie=Et.offset;if(kt&&kt.isInstancedInterleavedBuffer){for(let lt=0;lt<vt.locationSize;lt++)I(vt.location+lt,kt.meshPerAttribute);G.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=kt.meshPerAttribute*kt.count)}else for(let lt=0;lt<vt.locationSize;lt++)x(vt.location+lt);r.bindBuffer(34962,ot);for(let lt=0;lt<vt.locationSize;lt++)D(vt.location+lt,St/vt.locationSize,Xt,pt,Bt*te,(ie+St/vt.locationSize*lt)*te)}else{if(Et.isInstancedBufferAttribute){for(let kt=0;kt<vt.locationSize;kt++)I(vt.location+kt,Et.meshPerAttribute);G.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=Et.meshPerAttribute*Et.count)}else for(let kt=0;kt<vt.locationSize;kt++)x(vt.location+kt);r.bindBuffer(34962,ot);for(let kt=0;kt<vt.locationSize;kt++)D(vt.location+kt,St/vt.locationSize,Xt,pt,St*te,St/vt.locationSize*kt*te)}}else if(gt!==void 0){const pt=gt[bt];if(pt!==void 0)switch(pt.length){case 2:r.vertexAttrib2fv(vt.location,pt);break;case 3:r.vertexAttrib3fv(vt.location,pt);break;case 4:r.vertexAttrib4fv(vt.location,pt);break;default:r.vertexAttrib1fv(vt.location,pt)}}}}w()}function U(){F();for(const G in c){const K=c[G];for(const X in K){const z=K[X];for(const J in z)d(z[J].object),delete z[J];delete K[X]}delete c[G]}}function q(G){if(c[G.id]===void 0)return;const K=c[G.id];for(const X in K){const z=K[X];for(const J in z)d(z[J].object),delete z[J];delete K[X]}delete c[G.id]}function Y(G){for(const K in c){const X=c[K];if(X[G.id]===void 0)continue;const z=X[G.id];for(const J in z)d(z[J].object),delete z[J];delete X[G.id]}}function F(){it(),l!==_&&(l=_,f(l.object))}function it(){_.geometry=null,_.program=null,_.wireframe=!1}return{setup:u,reset:F,resetDefaultState:it,dispose:U,releaseStatesOfGeometry:q,releaseStatesOfProgram:Y,initAttributes:M,enableAttribute:x,disableUnusedAttributes:w}}function VM(r,t,e,i){const n=i.isWebGL2;let a;function o(l){a=l}function c(l,u){r.drawArrays(a,l,u),e.update(u,a,1)}function _(l,u,p){if(p===0)return;let f,d;if(n)f=r,d="drawArraysInstanced";else if(f=t.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](a,l,u,p),e.update(u,a,p)}this.setMode=o,this.render=c,this.renderInstances=_}function GM(r,t,e){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){const m=t.get("EXT_texture_filter_anisotropic");i=r.getParameter(m.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(m){if(m==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";m="mediump"}return m==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let c=e.precision!==void 0?e.precision:"highp";const _=a(c);_!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",_,"instead."),c=_);const l=o||t.has("WEBGL_draw_buffers"),u=e.logarithmicDepthBuffer===!0,p=r.getParameter(34930),f=r.getParameter(35660),d=r.getParameter(3379),A=r.getParameter(34076),E=r.getParameter(34921),S=r.getParameter(36347),y=r.getParameter(36348),M=r.getParameter(36349),x=f>0,I=o||t.has("OES_texture_float"),w=x&&I,D=o?r.getParameter(36183):0;return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:n,getMaxPrecision:a,precision:c,logarithmicDepthBuffer:u,maxTextures:p,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:A,maxAttributes:E,maxVertexUniforms:S,maxVaryings:y,maxFragmentUniforms:M,vertexTextures:x,floatFragmentTextures:I,floatVertexTextures:w,maxSamples:D}}function UM(r){const t=this;let e=null,i=0,n=!1,a=!1;const o=new Vi,c=new ss,_={value:null,needsUpdate:!1};this.uniform=_,this.numPlanes=0,this.numIntersection=0,this.init=function(p,f,d){const A=p.length!==0||f||i!==0||n;return n=f,e=u(p,d,0),i=p.length,A},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,l()},this.setState=function(p,f,d){const A=p.clippingPlanes,E=p.clipIntersection,S=p.clipShadows,y=r.get(p);if(!n||A===null||A.length===0||a&&!S)a?u(null):l();else{const M=a?0:i,x=M*4;let I=y.clippingState||null;_.value=I,I=u(A,f,x,d);for(let w=0;w!==x;++w)I[w]=e[w];y.clippingState=I,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=M}};function l(){_.value!==e&&(_.value=e,_.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(p,f,d,A){const E=p!==null?p.length:0;let S=null;if(E!==0){if(S=_.value,A!==!0||S===null){const y=d+E*4,M=f.matrixWorldInverse;c.getNormalMatrix(M),(S===null||S.length<y)&&(S=new Float32Array(y));for(let x=0,I=d;x!==E;++x,I+=4)o.copy(p[x]).applyMatrix4(M,c),o.normal.toArray(S,I),S[I+3]=o.constant}_.value=S,_.needsUpdate=!0}return t.numPlanes=E,t.numIntersection=0,S}}function kM(r){let t=new WeakMap;function e(o,c){return c===$o?o.mapping=Ga:c===Jo&&(o.mapping=Ua),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const c=o.mapping;if(c===$o||c===Jo)if(t.has(o)){const _=t.get(o).texture;return e(_,o.mapping)}else{const _=o.image;if(_&&_.height>0){const l=r.getRenderTarget(),u=new xp(_.height/2);return u.fromEquirectangularTexture(r,o),t.set(o,u),r.setRenderTarget(l),o.addEventListener("dispose",n),e(u.texture,o.mapping)}else return null}}return o}function n(o){const c=o.target;c.removeEventListener("dispose",n);const _=t.get(c);_!==void 0&&(t.delete(c),_.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}class Cc extends bc{constructor(t=-1,e=1,i=1,n=-1,a=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let a=i-t,o=i+t,c=n+e,_=n-e;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=l*this.view.offsetX,o=a+l*this.view.width,c-=u*this.view.offsetY,_=c-u*this.view.height}this.projectionMatrix.makeOrthographic(a,o,c,_,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}Cc.prototype.isOrthographicCamera=!0;class Ha extends un{constructor(t){super(t),this.type="RawShaderMaterial"}}Ha.prototype.isRawShaderMaterial=!0;const Lr=4,on=8,gi=Math.pow(2,on),Op=[.125,.215,.35,.446,.526,.582],wp=on-Lr+1+Op.length,_r=20,pn={[ds]:0,[yn]:1,[Dl]:2,[gp]:3,[Ap]:4,[yp]:5,[bl]:6},V_=new Cc,{_lodPlanes:ra,_sizeLods:Eu,_sigmas:So}=zM(),Mu=new zt;let G_=null;const Ln=(1+Math.sqrt(5))/2,lr=1/Ln,Tu=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,1,-1),new C(0,Ln,lr),new C(0,Ln,-lr),new C(lr,0,Ln),new C(-lr,0,Ln),new C(Ln,lr,0),new C(-Ln,lr,0)];class FM{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=WM(_r),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){G_=this._renderer.getRenderTarget();const a=this._allocateTargets();return this._sceneToCubeUV(t,i,n,a),e>0&&this._blur(a,0,0,e),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=Iu(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=vu(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let t=0;t<ra.length;t++)ra[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(G_),t.scissorTest=!1,vo(t,0,0,t.width,t.height)}_fromTexture(t){G_=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:ts,minFilter:ts,generateMipmaps:!1,type:hn,format:qg,encoding:HM(t)?t.encoding:Dl,depthBuffer:!1},i=Su(e);return i.depthBuffer=!t,this._pingPongRenderTarget=Su(e),i}_compileMaterial(t){const e=new ke(ra[0],t);this._renderer.compile(e,V_)}_sceneToCubeUV(t,e,i,n){const c=new Ke(90,1,e,i),_=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,p=u.autoClear,f=u.outputEncoding,d=u.toneMapping;u.getClearColor(Mu),u.toneMapping=Dn,u.outputEncoding=ds,u.autoClear=!1;const A=new Gr({name:"PMREM.Background",side:Je,depthWrite:!1,depthTest:!1}),E=new ke(new Pn,A);let S=!1;const y=t.background;y?y.isColor&&(A.color.copy(y),t.background=null,S=!0):(A.color.copy(Mu),S=!0);for(let M=0;M<6;M++){const x=M%3;x==0?(c.up.set(0,_[M],0),c.lookAt(l[M],0,0)):x==1?(c.up.set(0,0,_[M]),c.lookAt(0,l[M],0)):(c.up.set(0,_[M],0),c.lookAt(0,0,l[M])),vo(n,x*gi,M>2?gi:0,gi,gi),u.setRenderTarget(n),S&&u.render(E,c),u.render(t,c)}E.geometry.dispose(),E.material.dispose(),u.toneMapping=d,u.outputEncoding=f,u.autoClear=p,t.background=y}_setEncoding(t,e){this._renderer.capabilities.isWebGL2===!0&&e.format===ps&&e.type===hn&&e.encoding===yn?t.value=pn[ds]:t.value=pn[e.encoding]}_textureToCubeUV(t,e){const i=this._renderer;t.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=Iu()):this._equirectShader==null&&(this._equirectShader=vu());const n=t.isCubeTexture?this._cubemapShader:this._equirectShader,a=new ke(ra[0],n),o=n.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(o.inputEncoding,t),this._setEncoding(o.outputEncoding,e.texture),vo(e,0,0,3*gi,2*gi),i.setRenderTarget(e),i.render(a,V_)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let n=1;n<wp;n++){const a=Math.sqrt(So[n]*So[n]-So[n-1]*So[n-1]),o=Tu[(n-1)%Tu.length];this._blur(t,n-1,n,a,o)}e.autoClear=i}_blur(t,e,i,n,a){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,n,"latitudinal",a),this._halfBlur(o,t,i,i,n,"longitudinal",a)}_halfBlur(t,e,i,n,a,o,c){const _=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,p=new ke(ra[n],l),f=l.uniforms,d=Eu[i]-1,A=isFinite(a)?Math.PI/(2*d):2*Math.PI/(2*_r-1),E=a/A,S=isFinite(a)?1+Math.floor(u*E):_r;S>_r&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${_r}`);const y=[];let M=0;for(let D=0;D<_r;++D){const m=D/E,U=Math.exp(-m*m/2);y.push(U),D==0?M+=U:D<S&&(M+=2*U)}for(let D=0;D<y.length;D++)y[D]=y[D]/M;f.envMap.value=t.texture,f.samples.value=S,f.weights.value=y,f.latitudinal.value=o==="latitudinal",c&&(f.poleAxis.value=c),f.dTheta.value=A,f.mipInt.value=on-i,this._setEncoding(f.inputEncoding,t.texture),this._setEncoding(f.outputEncoding,t.texture);const x=Eu[n],I=3*Math.max(0,gi-2*x),w=(n===0?0:2*gi)+2*x*(n>on-Lr?n-on+Lr:0);vo(e,I,w,3*x,2*x),_.setRenderTarget(e),_.render(p,V_)}}function HM(r){return r===void 0||r.type!==hn?!1:r.encoding===ds||r.encoding===yn||r.encoding===bl}function zM(){const r=[],t=[],e=[];let i=on;for(let n=0;n<wp;n++){const a=Math.pow(2,i);t.push(a);let o=1/a;n>on-Lr?o=Op[n-on+Lr-1]:n==0&&(o=0),e.push(o);const c=1/(a-1),_=-c/2,l=1+c/2,u=[_,_,l,_,l,l,_,_,l,l,_,l],p=6,f=6,d=3,A=2,E=1,S=new Float32Array(d*f*p),y=new Float32Array(A*f*p),M=new Float32Array(E*f*p);for(let I=0;I<p;I++){const w=I%3*2/3-1,D=I>2?0:-1,m=[w,D,0,w+2/3,D,0,w+2/3,D+1,0,w,D,0,w+2/3,D+1,0,w,D+1,0];S.set(m,d*f*I),y.set(u,A*f*I);const U=[I,I,I,I,I,I];M.set(U,E*f*I)}const x=new de;x.setAttribute("position",new ze(S,d)),x.setAttribute("uv",new ze(y,A)),x.setAttribute("faceIndex",new ze(M,E)),r.push(x),i>Lr&&i--}return{_lodPlanes:r,_sizeLods:t,_sigmas:e}}function Su(r){const t=new yi(3*gi,3*gi,r);return t.texture.mapping=ka,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function vo(r,t,e,i,n){r.viewport.set(t,e,i,n),r.scissor.set(t,e,i,n)}function WM(r){const t=new Float32Array(r),e=new C(0,1,0);return new Ha({name:"SphericalGaussianBlur",defines:{n:r},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e},inputEncoding:{value:pn[ds]},outputEncoding:{value:pn[ds]}},vertexShader:Pl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${Bl()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:an,depthTest:!1,depthWrite:!1})}function vu(){const r=new dt(1,1);return new Ha({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:r},inputEncoding:{value:pn[ds]},outputEncoding:{value:pn[ds]}},vertexShader:Pl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${Bl()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:an,depthTest:!1,depthWrite:!1})}function Iu(){return new Ha({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:pn[ds]},outputEncoding:{value:pn[ds]}},vertexShader:Pl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${Bl()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:an,depthTest:!1,depthWrite:!1})}function Pl(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Bl(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function YM(r){let t=new WeakMap,e=null;function i(c){if(c&&c.isTexture&&c.isRenderTargetTexture===!1){const _=c.mapping,l=_===$o||_===Jo,u=_===Ga||_===Ua;if(l||u){if(t.has(c))return t.get(c).texture;{const p=c.image;if(l&&p&&p.height>0||u&&p&&n(p)){const f=r.getRenderTarget();e===null&&(e=new FM(r));const d=l?e.fromEquirectangular(c):e.fromCubemap(c);return t.set(c,d),r.setRenderTarget(f),c.addEventListener("dispose",a),d.texture}else return null}}}return c}function n(c){let _=0;const l=6;for(let u=0;u<l;u++)c[u]!==void 0&&_++;return _===l}function a(c){const _=c.target;_.removeEventListener("dispose",a);const l=t.get(_);l!==void 0&&(t.delete(_),l.dispose())}function o(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:o}}function KM(r){const t={};function e(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=r.getExtension(i)}return t[i]=n,n}return{has:function(i){return e(i)!==null},init:function(i){i.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float")},get:function(i){const n=e(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function qM(r,t,e,i){const n={},a=new WeakMap;function o(p){const f=p.target;f.index!==null&&t.remove(f.index);for(const A in f.attributes)t.remove(f.attributes[A]);f.removeEventListener("dispose",o),delete n[f.id];const d=a.get(f);d&&(t.remove(d),a.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,e.memory.geometries--}function c(p,f){return n[f.id]===!0||(f.addEventListener("dispose",o),n[f.id]=!0,e.memory.geometries++),f}function _(p){const f=p.attributes;for(const A in f)t.update(f[A],34962);const d=p.morphAttributes;for(const A in d){const E=d[A];for(let S=0,y=E.length;S<y;S++)t.update(E[S],34962)}}function l(p){const f=[],d=p.index,A=p.attributes.position;let E=0;if(d!==null){const M=d.array;E=d.version;for(let x=0,I=M.length;x<I;x+=3){const w=M[x+0],D=M[x+1],m=M[x+2];f.push(w,D,D,m,m,w)}}else{const M=A.array;E=A.version;for(let x=0,I=M.length/3-1;x<I;x+=3){const w=x+0,D=x+1,m=x+2;f.push(w,D,D,m,m,w)}}const S=new(Ep(f)>65535?Ip:vp)(f,1);S.version=E;const y=a.get(p);y&&t.remove(y),a.set(p,S)}function u(p){const f=a.get(p);if(f){const d=p.index;d!==null&&f.version<d.version&&l(p)}else l(p);return a.get(p)}return{get:c,update:_,getWireframeAttribute:u}}function XM(r,t,e,i){const n=i.isWebGL2;let a;function o(f){a=f}let c,_;function l(f){c=f.type,_=f.bytesPerElement}function u(f,d){r.drawElements(a,d,c,f*_),e.update(d,a,1)}function p(f,d,A){if(A===0)return;let E,S;if(n)E=r,S="drawElementsInstanced";else if(E=t.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[S](a,d,c,f*_,A),e.update(d,a,A)}this.setMode=o,this.setIndex=l,this.render=u,this.renderInstances=p}function jM(r){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,o,c){switch(e.calls++,o){case 4:e.triangles+=c*(a/3);break;case 1:e.lines+=c*(a/2);break;case 3:e.lines+=c*(a-1);break;case 2:e.lines+=c*a;break;case 0:e.points+=c*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:n,update:i}}class Vl extends is{constructor(t=null,e=1,i=1,n=1){super(null),this.image={data:t,width:e,height:i,depth:n},this.magFilter=ts,this.minFilter=ts,this.wrapR=fs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Vl.prototype.isDataTexture2DArray=!0;function QM(r,t){return r[0]-t[0]}function ZM(r,t){return Math.abs(t[1])-Math.abs(r[1])}function xu(r,t){let e=1;const i=t.isInterleavedBufferAttribute?t.data.array:t.array;i instanceof Int8Array?e=127:i instanceof Int16Array?e=32767:i instanceof Int32Array?e=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),r.divideScalar(e)}function $M(r,t,e){const i={},n=new Float32Array(8),a=new WeakMap,o=new C,c=[];for(let l=0;l<8;l++)c[l]=[l,0];function _(l,u,p,f){const d=l.morphTargetInfluences;if(t.isWebGL2===!0){const A=u.morphAttributes.position.length;let E=a.get(u);if(E===void 0||E.count!==A){E!==void 0&&E.texture.dispose();const M=u.morphAttributes.normal!==void 0,x=u.morphAttributes.position,I=u.morphAttributes.normal||[],w=u.attributes.position.count,D=M===!0?2:1;let m=w*D,U=1;m>t.maxTextureSize&&(U=Math.ceil(m/t.maxTextureSize),m=t.maxTextureSize);const q=new Float32Array(m*U*4*A),Y=new Vl(q,m,U,A);Y.format=ps,Y.type=Gi;const F=D*4;for(let it=0;it<A;it++){const G=x[it],K=I[it],X=m*U*4*it;for(let z=0;z<G.count;z++){o.fromBufferAttribute(G,z),G.normalized===!0&&xu(o,G);const J=z*F;q[X+J+0]=o.x,q[X+J+1]=o.y,q[X+J+2]=o.z,q[X+J+3]=0,M===!0&&(o.fromBufferAttribute(K,z),K.normalized===!0&&xu(o,K),q[X+J+4]=o.x,q[X+J+5]=o.y,q[X+J+6]=o.z,q[X+J+7]=0)}}E={count:A,texture:Y,size:new dt(m,U)},a.set(u,E)}let S=0;for(let M=0;M<d.length;M++)S+=d[M];const y=u.morphTargetsRelative?1:1-S;f.getUniforms().setValue(r,"morphTargetBaseInfluence",y),f.getUniforms().setValue(r,"morphTargetInfluences",d),f.getUniforms().setValue(r,"morphTargetsTexture",E.texture,e),f.getUniforms().setValue(r,"morphTargetsTextureSize",E.size)}else{const A=d===void 0?0:d.length;let E=i[u.id];if(E===void 0||E.length!==A){E=[];for(let I=0;I<A;I++)E[I]=[I,0];i[u.id]=E}for(let I=0;I<A;I++){const w=E[I];w[0]=I,w[1]=d[I]}E.sort(ZM);for(let I=0;I<8;I++)I<A&&E[I][1]?(c[I][0]=E[I][0],c[I][1]=E[I][1]):(c[I][0]=Number.MAX_SAFE_INTEGER,c[I][1]=0);c.sort(QM);const S=u.morphAttributes.position,y=u.morphAttributes.normal;let M=0;for(let I=0;I<8;I++){const w=c[I],D=w[0],m=w[1];D!==Number.MAX_SAFE_INTEGER&&m?(S&&u.getAttribute("morphTarget"+I)!==S[D]&&u.setAttribute("morphTarget"+I,S[D]),y&&u.getAttribute("morphNormal"+I)!==y[D]&&u.setAttribute("morphNormal"+I,y[D]),n[I]=m,M+=m):(S&&u.hasAttribute("morphTarget"+I)===!0&&u.deleteAttribute("morphTarget"+I),y&&u.hasAttribute("morphNormal"+I)===!0&&u.deleteAttribute("morphNormal"+I),n[I]=0)}const x=u.morphTargetsRelative?1:1-M;f.getUniforms().setValue(r,"morphTargetBaseInfluence",x),f.getUniforms().setValue(r,"morphTargetInfluences",n)}}return{update:_}}function JM(r,t,e,i){let n=new WeakMap;function a(_){const l=i.render.frame,u=_.geometry,p=t.get(_,u);return n.get(p)!==l&&(t.update(p),n.set(p,l)),_.isInstancedMesh&&(_.hasEventListener("dispose",c)===!1&&_.addEventListener("dispose",c),e.update(_.instanceMatrix,34962),_.instanceColor!==null&&e.update(_.instanceColor,34962)),p}function o(){n=new WeakMap}function c(_){const l=_.target;l.removeEventListener("dispose",c),e.remove(l.instanceMatrix),l.instanceColor!==null&&e.remove(l.instanceColor)}return{update:a,dispose:o}}class Lp extends is{constructor(t=null,e=1,i=1,n=1){super(null),this.image={data:t,width:e,height:i,depth:n},this.magFilter=ts,this.minFilter=ts,this.wrapR=fs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Lp.prototype.isDataTexture3D=!0;const Np=new is,t0=new Vl,e0=new Lp,bp=new Fa,Ru=[],Ou=[],wu=new Float32Array(16),Lu=new Float32Array(9),Nu=new Float32Array(4);function Ur(r,t,e){const i=r[0];if(i<=0||i>0)return r;const n=t*e;let a=Ru[n];if(a===void 0&&(a=new Float32Array(n),Ru[n]=a),t!==0){i.toArray(a,0);for(let o=1,c=0;o!==t;++o)c+=e,r[o].toArray(a,c)}return a}function Ts(r,t){if(r.length!==t.length)return!1;for(let e=0,i=r.length;e<i;e++)if(r[e]!==t[e])return!1;return!0}function ms(r,t){for(let e=0,i=t.length;e<i;e++)r[e]=t[e]}function Dp(r,t){let e=Ou[t];e===void 0&&(e=new Int32Array(t),Ou[t]=e);for(let i=0;i!==t;++i)e[i]=r.allocateTextureUnit();return e}function s0(r,t){const e=this.cache;e[0]!==t&&(r.uniform1f(this.addr,t),e[0]=t)}function i0(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ts(e,t))return;r.uniform2fv(this.addr,t),ms(e,t)}}function n0(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(r.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Ts(e,t))return;r.uniform3fv(this.addr,t),ms(e,t)}}function r0(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ts(e,t))return;r.uniform4fv(this.addr,t),ms(e,t)}}function a0(r,t){const e=this.cache,i=t.elements;if(i===void 0){if(Ts(e,t))return;r.uniformMatrix2fv(this.addr,!1,t),ms(e,t)}else{if(Ts(e,i))return;Nu.set(i),r.uniformMatrix2fv(this.addr,!1,Nu),ms(e,i)}}function o0(r,t){const e=this.cache,i=t.elements;if(i===void 0){if(Ts(e,t))return;r.uniformMatrix3fv(this.addr,!1,t),ms(e,t)}else{if(Ts(e,i))return;Lu.set(i),r.uniformMatrix3fv(this.addr,!1,Lu),ms(e,i)}}function c0(r,t){const e=this.cache,i=t.elements;if(i===void 0){if(Ts(e,t))return;r.uniformMatrix4fv(this.addr,!1,t),ms(e,t)}else{if(Ts(e,i))return;wu.set(i),r.uniformMatrix4fv(this.addr,!1,wu),ms(e,i)}}function _0(r,t){const e=this.cache;e[0]!==t&&(r.uniform1i(this.addr,t),e[0]=t)}function l0(r,t){const e=this.cache;Ts(e,t)||(r.uniform2iv(this.addr,t),ms(e,t))}function h0(r,t){const e=this.cache;Ts(e,t)||(r.uniform3iv(this.addr,t),ms(e,t))}function u0(r,t){const e=this.cache;Ts(e,t)||(r.uniform4iv(this.addr,t),ms(e,t))}function f0(r,t){const e=this.cache;e[0]!==t&&(r.uniform1ui(this.addr,t),e[0]=t)}function p0(r,t){const e=this.cache;Ts(e,t)||(r.uniform2uiv(this.addr,t),ms(e,t))}function d0(r,t){const e=this.cache;Ts(e,t)||(r.uniform3uiv(this.addr,t),ms(e,t))}function m0(r,t){const e=this.cache;Ts(e,t)||(r.uniform4uiv(this.addr,t),ms(e,t))}function g0(r,t,e){const i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.safeSetTexture2D(t||Np,n)}function A0(r,t,e){const i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTexture3D(t||e0,n)}function y0(r,t,e){const i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.safeSetTextureCube(t||bp,n)}function E0(r,t,e){const i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTexture2DArray(t||t0,n)}function M0(r){switch(r){case 5126:return s0;case 35664:return i0;case 35665:return n0;case 35666:return r0;case 35674:return a0;case 35675:return o0;case 35676:return c0;case 5124:case 35670:return _0;case 35667:case 35671:return l0;case 35668:case 35672:return h0;case 35669:case 35673:return u0;case 5125:return f0;case 36294:return p0;case 36295:return d0;case 36296:return m0;case 35678:case 36198:case 36298:case 36306:case 35682:return g0;case 35679:case 36299:case 36307:return A0;case 35680:case 36300:case 36308:case 36293:return y0;case 36289:case 36303:case 36311:case 36292:return E0}}function T0(r,t){r.uniform1fv(this.addr,t)}function S0(r,t){const e=Ur(t,this.size,2);r.uniform2fv(this.addr,e)}function v0(r,t){const e=Ur(t,this.size,3);r.uniform3fv(this.addr,e)}function I0(r,t){const e=Ur(t,this.size,4);r.uniform4fv(this.addr,e)}function x0(r,t){const e=Ur(t,this.size,4);r.uniformMatrix2fv(this.addr,!1,e)}function R0(r,t){const e=Ur(t,this.size,9);r.uniformMatrix3fv(this.addr,!1,e)}function O0(r,t){const e=Ur(t,this.size,16);r.uniformMatrix4fv(this.addr,!1,e)}function w0(r,t){r.uniform1iv(this.addr,t)}function L0(r,t){r.uniform2iv(this.addr,t)}function N0(r,t){r.uniform3iv(this.addr,t)}function b0(r,t){r.uniform4iv(this.addr,t)}function D0(r,t){r.uniform1uiv(this.addr,t)}function C0(r,t){r.uniform2uiv(this.addr,t)}function P0(r,t){r.uniform3uiv(this.addr,t)}function B0(r,t){r.uniform4uiv(this.addr,t)}function V0(r,t,e){const i=t.length,n=Dp(e,i);r.uniform1iv(this.addr,n);for(let a=0;a!==i;++a)e.safeSetTexture2D(t[a]||Np,n[a])}function G0(r,t,e){const i=t.length,n=Dp(e,i);r.uniform1iv(this.addr,n);for(let a=0;a!==i;++a)e.safeSetTextureCube(t[a]||bp,n[a])}function U0(r){switch(r){case 5126:return T0;case 35664:return S0;case 35665:return v0;case 35666:return I0;case 35674:return x0;case 35675:return R0;case 35676:return O0;case 5124:case 35670:return w0;case 35667:case 35671:return L0;case 35668:case 35672:return N0;case 35669:case 35673:return b0;case 5125:return D0;case 36294:return C0;case 36295:return P0;case 36296:return B0;case 35678:case 36198:case 36298:case 36306:case 35682:return V0;case 35680:case 36300:case 36308:case 36293:return G0}}function k0(r,t,e){this.id=r,this.addr=e,this.cache=[],this.setValue=M0(t.type)}function Cp(r,t,e){this.id=r,this.addr=e,this.cache=[],this.size=t.size,this.setValue=U0(t.type)}Cp.prototype.updateCache=function(r){const t=this.cache;r instanceof Float32Array&&t.length!==r.length&&(this.cache=new Float32Array(r.length)),ms(t,r)};function Pp(r){this.id=r,this.seq=[],this.map={}}Pp.prototype.setValue=function(r,t,e){const i=this.seq;for(let n=0,a=i.length;n!==a;++n){const o=i[n];o.setValue(r,t[o.id],e)}};const U_=/(\w+)(\])?(\[|\.)?/g;function bu(r,t){r.seq.push(t),r.map[t.id]=t}function F0(r,t,e){const i=r.name,n=i.length;for(U_.lastIndex=0;;){const a=U_.exec(i),o=U_.lastIndex;let c=a[1];const _=a[2]==="]",l=a[3];if(_&&(c=c|0),l===void 0||l==="["&&o+2===n){bu(e,l===void 0?new k0(c,r,t):new Cp(c,r,t));break}else{let p=e.map[c];p===void 0&&(p=new Pp(c),bu(e,p)),e=p}}}function cn(r,t){this.seq=[],this.map={};const e=r.getProgramParameter(t,35718);for(let i=0;i<e;++i){const n=r.getActiveUniform(t,i),a=r.getUniformLocation(t,n.name);F0(n,a,this)}}cn.prototype.setValue=function(r,t,e,i){const n=this.map[t];n!==void 0&&n.setValue(r,e,i)};cn.prototype.setOptional=function(r,t,e){const i=t[e];i!==void 0&&this.setValue(r,e,i)};cn.upload=function(r,t,e,i){for(let n=0,a=t.length;n!==a;++n){const o=t[n],c=e[o.id];c.needsUpdate!==!1&&o.setValue(r,c.value,i)}};cn.seqWithValue=function(r,t){const e=[];for(let i=0,n=r.length;i!==n;++i){const a=r[i];a.id in t&&e.push(a)}return e};function Du(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}let H0=0;function z0(r){const t=r.split(`
`);for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join(`
`)}function Bp(r){switch(r){case ds:return["Linear","( value )"];case yn:return["sRGB","( value )"];case Dl:return["RGBE","( value )"];case gp:return["RGBM","( value, 7.0 )"];case Ap:return["RGBM","( value, 16.0 )"];case yp:return["RGBD","( value, 256.0 )"];case bl:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case CA:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function Cu(r,t,e){const i=r.getShaderParameter(t,35713),n=r.getShaderInfoLog(t).trim();return i&&n===""?"":e.toUpperCase()+`

`+n+`

`+z0(r.getShaderSource(t))}function hr(r,t){const e=Bp(t);return"vec4 "+r+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function W0(r,t){const e=Bp(t);return"vec4 "+r+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Y0(r,t){let e;switch(t){case Dg:e="Linear";break;case Cg:e="Reinhard";break;case Pg:e="OptimizedCineon";break;case Bg:e="ACESFilmic";break;case Vg:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+r+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function K0(r){return[r.extensionDerivatives||r.envMapCubeUV||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ma).join(`
`)}function q0(r){const t=[];for(const e in r){const i=r[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function X0(r,t){const e={},i=r.getProgramParameter(t,35721);for(let n=0;n<i;n++){const a=r.getActiveAttrib(t,n),o=a.name;let c=1;a.type===35674&&(c=2),a.type===35675&&(c=3),a.type===35676&&(c=4),e[o]={type:a.type,location:r.getAttribLocation(t,o),locationSize:c}}return e}function ma(r){return r!==""}function Pu(r,t){return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Bu(r,t){return r.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const j0=/^[ \t]*#include +<([\w\d./]+)>/gm;function pl(r){return r.replace(j0,Q0)}function Q0(r,t){const e=pe[t];if(e===void 0)throw new Error("Can not resolve #include <"+t+">");return pl(e)}const Z0=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,$0=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Vu(r){return r.replace($0,Vp).replace(Z0,J0)}function J0(r,t,e,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Vp(r,t,e,i)}function Vp(r,t,e,i){let n="";for(let a=parseInt(t);a<parseInt(e);a++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function Gu(r){let t="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?t+=`
#define HIGH_PRECISION`:r.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function tT(r){let t="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===hp?t="SHADOWMAP_TYPE_PCF":r.shadowMapType===hg?t="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===da&&(t="SHADOWMAP_TYPE_VSM"),t}function eT(r){let t="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Ga:case Ua:t="ENVMAP_TYPE_CUBE";break;case ka:case Lc:t="ENVMAP_TYPE_CUBE_UV";break}return t}function sT(r){let t="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Ua:case Lc:t="ENVMAP_MODE_REFRACTION";break}return t}function iT(r){let t="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case wc:t="ENVMAP_BLENDING_MULTIPLY";break;case Ng:t="ENVMAP_BLENDING_MIX";break;case bg:t="ENVMAP_BLENDING_ADD";break}return t}function nT(r,t,e,i){const n=r.getContext(),a=e.defines;let o=e.vertexShader,c=e.fragmentShader;const _=tT(e),l=eT(e),u=sT(e),p=iT(e),f=r.gammaFactor>0?r.gammaFactor:1,d=e.isWebGL2?"":K0(e),A=q0(a),E=n.createProgram();let S,y,M=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(S=[A].filter(ma).join(`
`),S.length>0&&(S+=`
`),y=[d,A].filter(ma).join(`
`),y.length>0&&(y+=`
`)):(S=[Gu(e),"#define SHADER_NAME "+e.shaderName,A,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularTintMap?"#define USE_SPECULARTINTMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphTargets&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargets&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+_:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ma).join(`
`),y=[d,Gu(e),"#define SHADER_NAME "+e.shaderName,A,"#define GAMMA_FACTOR "+f,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+l:"",e.envMap?"#define "+u:"",e.envMap?"#define "+p:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularTintMap?"#define USE_SPECULARTINTMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+_:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Dn?"#define TONE_MAPPING":"",e.toneMapping!==Dn?pe.tonemapping_pars_fragment:"",e.toneMapping!==Dn?Y0("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.format===Or?"#define OPAQUE":"",pe.encodings_pars_fragment,e.map?hr("mapTexelToLinear",e.mapEncoding):"",e.matcap?hr("matcapTexelToLinear",e.matcapEncoding):"",e.envMap?hr("envMapTexelToLinear",e.envMapEncoding):"",e.emissiveMap?hr("emissiveMapTexelToLinear",e.emissiveMapEncoding):"",e.specularTintMap?hr("specularTintMapTexelToLinear",e.specularTintMapEncoding):"",e.lightMap?hr("lightMapTexelToLinear",e.lightMapEncoding):"",W0("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(ma).join(`
`)),o=pl(o),o=Pu(o,e),o=Bu(o,e),c=pl(c),c=Pu(c,e),c=Bu(c,e),o=Vu(o),c=Vu(c),e.isWebGL2&&e.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,S=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,y=["#define varying in",e.glslVersion===ou?"":"out highp vec4 pc_fragColor;",e.glslVersion===ou?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const x=M+S+o,I=M+y+c,w=Du(n,35633,x),D=Du(n,35632,I);if(n.attachShader(E,w),n.attachShader(E,D),e.index0AttributeName!==void 0?n.bindAttribLocation(E,0,e.index0AttributeName):e.morphTargets===!0&&n.bindAttribLocation(E,0,"position"),n.linkProgram(E),r.debug.checkShaderErrors){const q=n.getProgramInfoLog(E).trim(),Y=n.getShaderInfoLog(w).trim(),F=n.getShaderInfoLog(D).trim();let it=!0,G=!0;if(n.getProgramParameter(E,35714)===!1){it=!1;const K=Cu(n,w,"vertex"),X=Cu(n,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(E,35715)+`

Program Info Log: `+q+`
`+K+`
`+X)}else q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",q):(Y===""||F==="")&&(G=!1);G&&(this.diagnostics={runnable:it,programLog:q,vertexShader:{log:Y,prefix:S},fragmentShader:{log:F,prefix:y}})}n.deleteShader(w),n.deleteShader(D);let m;this.getUniforms=function(){return m===void 0&&(m=new cn(n,E)),m};let U;return this.getAttributes=function(){return U===void 0&&(U=X0(n,E)),U},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(E),this.program=void 0},this.name=e.shaderName,this.id=H0++,this.cacheKey=t,this.usedTimes=1,this.program=E,this.vertexShader=w,this.fragmentShader=D,this}function rT(r,t,e,i,n,a,o){const c=[],_=n.isWebGL2,l=n.logarithmicDepthBuffer,u=n.floatVertexTextures,p=n.maxVertexUniforms,f=n.vertexTextures;let d=n.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},E=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function S(m){const q=m.skeleton.bones;if(u)return 1024;{const F=Math.floor((p-20)/4),it=Math.min(F,q.length);return it<q.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+q.length+" bones. This GPU supports "+it+"."),0):it}}function y(m){let U;return m&&m.isTexture?U=m.encoding:m&&m.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),U=m.texture.encoding):U=ds,_&&m&&m.isTexture&&m.format===ps&&m.type===hn&&m.encoding===yn&&(U=ds),U}function M(m,U,q,Y,F){const it=Y.fog,G=m.isMeshStandardMaterial?Y.environment:null,K=(m.isMeshStandardMaterial?e:t).get(m.envMap||G),X=A[m.type],z=F.isSkinnedMesh?S(F):0;m.precision!==null&&(d=n.getMaxPrecision(m.precision),d!==m.precision&&console.warn("THREE.WebGLProgram.getParameters:",m.precision,"not supported, using",d,"instead."));let J,_t;if(X){const pt=Ai[X];J=pt.vertexShader,_t=pt.fragmentShader}else J=m.vertexShader,_t=m.fragmentShader;const gt=r.getRenderTarget(),bt=m.alphaTest>0,vt=m.clearcoat>0;return{isWebGL2:_,shaderID:X,shaderName:m.type,vertexShader:J,fragmentShader:_t,defines:m.defines,isRawShaderMaterial:m.isRawShaderMaterial===!0,glslVersion:m.glslVersion,precision:d,instancing:F.isInstancedMesh===!0,instancingColor:F.isInstancedMesh===!0&&F.instanceColor!==null,supportsVertexTextures:f,outputEncoding:gt!==null?y(gt.texture):r.outputEncoding,map:!!m.map,mapEncoding:y(m.map),matcap:!!m.matcap,matcapEncoding:y(m.matcap),envMap:!!K,envMapMode:K&&K.mapping,envMapEncoding:y(K),envMapCubeUV:!!K&&(K.mapping===ka||K.mapping===Lc),lightMap:!!m.lightMap,lightMapEncoding:y(m.lightMap),aoMap:!!m.aoMap,emissiveMap:!!m.emissiveMap,emissiveMapEncoding:y(m.emissiveMap),bumpMap:!!m.bumpMap,normalMap:!!m.normalMap,objectSpaceNormalMap:m.normalMapType===VA,tangentSpaceNormalMap:m.normalMapType===Br,clearcoat:vt,clearcoatMap:vt&&!!m.clearcoatMap,clearcoatRoughnessMap:vt&&!!m.clearcoatRoughnessMap,clearcoatNormalMap:vt&&!!m.clearcoatNormalMap,displacementMap:!!m.displacementMap,roughnessMap:!!m.roughnessMap,metalnessMap:!!m.metalnessMap,specularMap:!!m.specularMap,specularIntensityMap:!!m.specularIntensityMap,specularTintMap:!!m.specularTintMap,specularTintMapEncoding:y(m.specularTintMap),alphaMap:!!m.alphaMap,alphaTest:bt,gradientMap:!!m.gradientMap,sheen:m.sheen>0,transmission:m.transmission>0,transmissionMap:!!m.transmissionMap,thicknessMap:!!m.thicknessMap,combine:m.combine,vertexTangents:!!m.normalMap&&!!F.geometry&&!!F.geometry.attributes.tangent,vertexColors:m.vertexColors,vertexAlphas:m.vertexColors===!0&&!!F.geometry&&!!F.geometry.attributes.color&&F.geometry.attributes.color.itemSize===4,vertexUvs:!!m.map||!!m.bumpMap||!!m.normalMap||!!m.specularMap||!!m.alphaMap||!!m.emissiveMap||!!m.roughnessMap||!!m.metalnessMap||!!m.clearcoatMap||!!m.clearcoatRoughnessMap||!!m.clearcoatNormalMap||!!m.displacementMap||!!m.transmissionMap||!!m.thicknessMap||!!m.specularIntensityMap||!!m.specularTintMap,uvsVertexOnly:!(m.map||m.bumpMap||m.normalMap||m.specularMap||m.alphaMap||m.emissiveMap||m.roughnessMap||m.metalnessMap||m.clearcoatNormalMap||m.transmission>0||m.transmissionMap||m.thicknessMap||m.specularIntensityMap||m.specularTintMap)&&!!m.displacementMap,fog:!!it,useFog:m.fog,fogExp2:it&&it.isFogExp2,flatShading:!!m.flatShading,sizeAttenuation:m.sizeAttenuation,logarithmicDepthBuffer:l,skinning:F.isSkinnedMesh===!0&&z>0,maxBones:z,useVertexTexture:u,morphTargets:!!F.geometry&&!!F.geometry.morphAttributes.position,morphNormals:!!F.geometry&&!!F.geometry.morphAttributes.normal,morphTargetsCount:F.geometry&&F.geometry.morphAttributes.position?F.geometry.morphAttributes.position.length:0,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:m.format,dithering:m.dithering,shadowMapEnabled:r.shadowMap.enabled&&q.length>0,shadowMapType:r.shadowMap.type,toneMapping:m.toneMapped?r.toneMapping:Dn,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:m.premultipliedAlpha,doubleSided:m.side===ln,flipSided:m.side===Je,depthPacking:m.depthPacking!==void 0?m.depthPacking:!1,index0AttributeName:m.index0AttributeName,extensionDerivatives:m.extensions&&m.extensions.derivatives,extensionFragDepth:m.extensions&&m.extensions.fragDepth,extensionDrawBuffers:m.extensions&&m.extensions.drawBuffers,extensionShaderTextureLOD:m.extensions&&m.extensions.shaderTextureLOD,rendererExtensionFragDepth:_||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:_||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:_||i.has("EXT_shader_texture_lod"),customProgramCacheKey:m.customProgramCacheKey()}}function x(m){const U=[];if(m.shaderID?U.push(m.shaderID):(U.push(m.fragmentShader),U.push(m.vertexShader)),m.defines!==void 0)for(const q in m.defines)U.push(q),U.push(m.defines[q]);if(m.isRawShaderMaterial===!1){for(let q=0;q<E.length;q++)U.push(m[E[q]]);U.push(r.outputEncoding),U.push(r.gammaFactor)}return U.push(m.customProgramCacheKey),U.join()}function I(m){const U=A[m.type];let q;if(U){const Y=Ai[U];q=iy.clone(Y.uniforms)}else q=m.uniforms;return q}function w(m,U){let q;for(let Y=0,F=c.length;Y<F;Y++){const it=c[Y];if(it.cacheKey===U){q=it,++q.usedTimes;break}}return q===void 0&&(q=new nT(r,U,m,a),c.push(q)),q}function D(m){if(--m.usedTimes===0){const U=c.indexOf(m);c[U]=c[c.length-1],c.pop(),m.destroy()}}return{getParameters:M,getProgramCacheKey:x,getUniforms:I,acquireProgram:w,releaseProgram:D,programs:c}}function aT(){let r=new WeakMap;function t(a){let o=r.get(a);return o===void 0&&(o={},r.set(a,o)),o}function e(a){r.delete(a)}function i(a,o,c){r.get(a)[o]=c}function n(){r=new WeakMap}return{get:t,remove:e,update:i,dispose:n}}function oT(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.program!==t.program?r.program.id-t.program.id:r.material.id!==t.material.id?r.material.id-t.material.id:r.z!==t.z?r.z-t.z:r.id-t.id}function Uu(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.z!==t.z?t.z-r.z:r.id-t.id}function ku(r){const t=[];let e=0;const i=[],n=[],a=[],o={id:-1};function c(){e=0,i.length=0,n.length=0,a.length=0}function _(d,A,E,S,y,M){let x=t[e];const I=r.get(E);return x===void 0?(x={id:d.id,object:d,geometry:A,material:E,program:I.program||o,groupOrder:S,renderOrder:d.renderOrder,z:y,group:M},t[e]=x):(x.id=d.id,x.object=d,x.geometry=A,x.material=E,x.program=I.program||o,x.groupOrder=S,x.renderOrder=d.renderOrder,x.z=y,x.group=M),e++,x}function l(d,A,E,S,y,M){const x=_(d,A,E,S,y,M);E.transmission>0?n.push(x):E.transparent===!0?a.push(x):i.push(x)}function u(d,A,E,S,y,M){const x=_(d,A,E,S,y,M);E.transmission>0?n.unshift(x):E.transparent===!0?a.unshift(x):i.unshift(x)}function p(d,A){i.length>1&&i.sort(d||oT),n.length>1&&n.sort(A||Uu),a.length>1&&a.sort(A||Uu)}function f(){for(let d=e,A=t.length;d<A;d++){const E=t[d];if(E.id===null)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.program=null,E.group=null}}return{opaque:i,transmissive:n,transparent:a,init:c,push:l,unshift:u,finish:f,sort:p}}function cT(r){let t=new WeakMap;function e(n,a){let o;return t.has(n)===!1?(o=new ku(r),t.set(n,[o])):a>=t.get(n).length?(o=new ku(r),t.get(n).push(o)):o=t.get(n)[a],o}function i(){t=new WeakMap}return{get:e,dispose:i}}function _T(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new C,color:new zt};break;case"SpotLight":e={position:new C,direction:new C,color:new zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new C,color:new zt,distance:0,decay:0};break;case"HemisphereLight":e={direction:new C,skyColor:new zt,groundColor:new zt};break;case"RectAreaLight":e={color:new zt,position:new C,halfWidth:new C,halfHeight:new C};break}return r[t.id]=e,e}}}function lT(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt};break;case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[t.id]=e,e}}}let hT=0;function uT(r,t){return(t.castShadow?1:0)-(r.castShadow?1:0)}function fT(r,t){const e=new _T,i=lT(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)n.probe.push(new C);const a=new C,o=new jt,c=new jt;function _(u,p){let f=0,d=0,A=0;for(let q=0;q<9;q++)n.probe[q].set(0,0,0);let E=0,S=0,y=0,M=0,x=0,I=0,w=0,D=0;u.sort(uT);const m=p!==!0?Math.PI:1;for(let q=0,Y=u.length;q<Y;q++){const F=u[q],it=F.color,G=F.intensity,K=F.distance,X=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)f+=it.r*G*m,d+=it.g*G*m,A+=it.b*G*m;else if(F.isLightProbe)for(let z=0;z<9;z++)n.probe[z].addScaledVector(F.sh.coefficients[z],G);else if(F.isDirectionalLight){const z=e.get(F);if(z.color.copy(F.color).multiplyScalar(F.intensity*m),F.castShadow){const J=F.shadow,_t=i.get(F);_t.shadowBias=J.bias,_t.shadowNormalBias=J.normalBias,_t.shadowRadius=J.radius,_t.shadowMapSize=J.mapSize,n.directionalShadow[E]=_t,n.directionalShadowMap[E]=X,n.directionalShadowMatrix[E]=F.shadow.matrix,I++}n.directional[E]=z,E++}else if(F.isSpotLight){const z=e.get(F);if(z.position.setFromMatrixPosition(F.matrixWorld),z.color.copy(it).multiplyScalar(G*m),z.distance=K,z.coneCos=Math.cos(F.angle),z.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),z.decay=F.decay,F.castShadow){const J=F.shadow,_t=i.get(F);_t.shadowBias=J.bias,_t.shadowNormalBias=J.normalBias,_t.shadowRadius=J.radius,_t.shadowMapSize=J.mapSize,n.spotShadow[y]=_t,n.spotShadowMap[y]=X,n.spotShadowMatrix[y]=F.shadow.matrix,D++}n.spot[y]=z,y++}else if(F.isRectAreaLight){const z=e.get(F);z.color.copy(it).multiplyScalar(G),z.halfWidth.set(F.width*.5,0,0),z.halfHeight.set(0,F.height*.5,0),n.rectArea[M]=z,M++}else if(F.isPointLight){const z=e.get(F);if(z.color.copy(F.color).multiplyScalar(F.intensity*m),z.distance=F.distance,z.decay=F.decay,F.castShadow){const J=F.shadow,_t=i.get(F);_t.shadowBias=J.bias,_t.shadowNormalBias=J.normalBias,_t.shadowRadius=J.radius,_t.shadowMapSize=J.mapSize,_t.shadowCameraNear=J.camera.near,_t.shadowCameraFar=J.camera.far,n.pointShadow[S]=_t,n.pointShadowMap[S]=X,n.pointShadowMatrix[S]=F.shadow.matrix,w++}n.point[S]=z,S++}else if(F.isHemisphereLight){const z=e.get(F);z.skyColor.copy(F.color).multiplyScalar(G*m),z.groundColor.copy(F.groundColor).multiplyScalar(G*m),n.hemi[x]=z,x++}}M>0&&(t.isWebGL2||r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ct.LTC_FLOAT_1,n.rectAreaLTC2=Ct.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Ct.LTC_HALF_1,n.rectAreaLTC2=Ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=f,n.ambient[1]=d,n.ambient[2]=A;const U=n.hash;(U.directionalLength!==E||U.pointLength!==S||U.spotLength!==y||U.rectAreaLength!==M||U.hemiLength!==x||U.numDirectionalShadows!==I||U.numPointShadows!==w||U.numSpotShadows!==D)&&(n.directional.length=E,n.spot.length=y,n.rectArea.length=M,n.point.length=S,n.hemi.length=x,n.directionalShadow.length=I,n.directionalShadowMap.length=I,n.pointShadow.length=w,n.pointShadowMap.length=w,n.spotShadow.length=D,n.spotShadowMap.length=D,n.directionalShadowMatrix.length=I,n.pointShadowMatrix.length=w,n.spotShadowMatrix.length=D,U.directionalLength=E,U.pointLength=S,U.spotLength=y,U.rectAreaLength=M,U.hemiLength=x,U.numDirectionalShadows=I,U.numPointShadows=w,U.numSpotShadows=D,n.version=hT++)}function l(u,p){let f=0,d=0,A=0,E=0,S=0;const y=p.matrixWorldInverse;for(let M=0,x=u.length;M<x;M++){const I=u[M];if(I.isDirectionalLight){const w=n.directional[f];w.direction.setFromMatrixPosition(I.matrixWorld),a.setFromMatrixPosition(I.target.matrixWorld),w.direction.sub(a),w.direction.transformDirection(y),f++}else if(I.isSpotLight){const w=n.spot[A];w.position.setFromMatrixPosition(I.matrixWorld),w.position.applyMatrix4(y),w.direction.setFromMatrixPosition(I.matrixWorld),a.setFromMatrixPosition(I.target.matrixWorld),w.direction.sub(a),w.direction.transformDirection(y),A++}else if(I.isRectAreaLight){const w=n.rectArea[E];w.position.setFromMatrixPosition(I.matrixWorld),w.position.applyMatrix4(y),c.identity(),o.copy(I.matrixWorld),o.premultiply(y),c.extractRotation(o),w.halfWidth.set(I.width*.5,0,0),w.halfHeight.set(0,I.height*.5,0),w.halfWidth.applyMatrix4(c),w.halfHeight.applyMatrix4(c),E++}else if(I.isPointLight){const w=n.point[d];w.position.setFromMatrixPosition(I.matrixWorld),w.position.applyMatrix4(y),d++}else if(I.isHemisphereLight){const w=n.hemi[S];w.direction.setFromMatrixPosition(I.matrixWorld),w.direction.transformDirection(y),w.direction.normalize(),S++}}}return{setup:_,setupView:l,state:n}}function Fu(r,t){const e=new fT(r,t),i=[],n=[];function a(){i.length=0,n.length=0}function o(p){i.push(p)}function c(p){n.push(p)}function _(p){e.setup(i,p)}function l(p){e.setupView(i,p)}return{init:a,state:{lightsArray:i,shadowsArray:n,lights:e},setupLights:_,setupLightsView:l,pushLight:o,pushShadow:c}}function pT(r,t){let e=new WeakMap;function i(a,o=0){let c;return e.has(a)===!1?(c=new Fu(r,t),e.set(a,[c])):o>=e.get(a).length?(c=new Fu(r,t),e.get(a).push(c)):c=e.get(a)[o],c}function n(){e=new WeakMap}return{get:i,dispose:n}}class Gl extends cs{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=PA,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}Gl.prototype.isMeshDepthMaterial=!0;class Ul extends cs{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new C,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}Ul.prototype.isMeshDistanceMaterial=!0;const dT=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,mT=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
uniform float samples;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Gp(r,t,e){let i=new Dc;const n=new dt,a=new dt,o=new Le,c=new Gl({depthPacking:BA}),_=new Ul,l={},u=e.maxTextureSize,p={0:Je,1:va,2:ln},f=new un({uniforms:{shadow_pass:{value:null},resolution:{value:new dt},radius:{value:4},samples:{value:8}},vertexShader:dT,fragmentShader:mT}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const A=new de;A.setAttribute("position",new ze(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new ke(A,f),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hp,this.render=function(I,w,D){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||I.length===0)return;const m=r.getRenderTarget(),U=r.getActiveCubeFace(),q=r.getActiveMipmapLevel(),Y=r.state;Y.setBlending(an),Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);for(let F=0,it=I.length;F<it;F++){const G=I[F],K=G.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;n.copy(K.mapSize);const X=K.getFrameExtents();if(n.multiply(X),a.copy(K.mapSize),(n.x>u||n.y>u)&&(n.x>u&&(a.x=Math.floor(u/X.x),n.x=a.x*X.x,K.mapSize.x=a.x),n.y>u&&(a.y=Math.floor(u/X.y),n.y=a.y*X.y,K.mapSize.y=a.y)),K.map===null&&!K.isPointLightShadow&&this.type===da){const J={minFilter:Rs,magFilter:Rs,format:ps};K.map=new yi(n.x,n.y,J),K.map.texture.name=G.name+".shadowMap",K.mapPass=new yi(n.x,n.y,J),K.camera.updateProjectionMatrix()}if(K.map===null){const J={minFilter:ts,magFilter:ts,format:ps};K.map=new yi(n.x,n.y,J),K.map.texture.name=G.name+".shadowMap",K.camera.updateProjectionMatrix()}r.setRenderTarget(K.map),r.clear();const z=K.getViewportCount();for(let J=0;J<z;J++){const _t=K.getViewport(J);o.set(a.x*_t.x,a.y*_t.y,a.x*_t.z,a.y*_t.w),Y.viewport(o),K.updateMatrices(G,J),i=K.getFrustum(),x(w,D,K.camera,G,this.type)}!K.isPointLightShadow&&this.type===da&&y(K,D),K.needsUpdate=!1}S.needsUpdate=!1,r.setRenderTarget(m,U,q)};function y(I,w){const D=t.update(E);f.uniforms.shadow_pass.value=I.map.texture,f.uniforms.resolution.value=I.mapSize,f.uniforms.radius.value=I.radius,f.uniforms.samples.value=I.blurSamples,r.setRenderTarget(I.mapPass),r.clear(),r.renderBufferDirect(w,null,D,f,E,null),d.uniforms.shadow_pass.value=I.mapPass.texture,d.uniforms.resolution.value=I.mapSize,d.uniforms.radius.value=I.radius,d.uniforms.samples.value=I.blurSamples,r.setRenderTarget(I.map),r.clear(),r.renderBufferDirect(w,null,D,d,E,null)}function M(I,w,D,m,U,q,Y){let F=null;const it=m.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(it!==void 0?F=it:F=m.isPointLight===!0?_:c,r.localClippingEnabled&&D.clipShadows===!0&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0){const G=F.uuid,K=D.uuid;let X=l[G];X===void 0&&(X={},l[G]=X);let z=X[K];z===void 0&&(z=F.clone(),X[K]=z),F=z}return F.visible=D.visible,F.wireframe=D.wireframe,Y===da?F.side=D.shadowSide!==null?D.shadowSide:D.side:F.side=D.shadowSide!==null?D.shadowSide:p[D.side],F.alphaMap=D.alphaMap,F.alphaTest=D.alphaTest,F.clipShadows=D.clipShadows,F.clippingPlanes=D.clippingPlanes,F.clipIntersection=D.clipIntersection,F.displacementMap=D.displacementMap,F.displacementScale=D.displacementScale,F.displacementBias=D.displacementBias,F.wireframeLinewidth=D.wireframeLinewidth,F.linewidth=D.linewidth,m.isPointLight===!0&&F.isMeshDistanceMaterial===!0&&(F.referencePosition.setFromMatrixPosition(m.matrixWorld),F.nearDistance=U,F.farDistance=q),F}function x(I,w,D,m,U){if(I.visible===!1)return;if(I.layers.test(w.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&U===da)&&(!I.frustumCulled||i.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,I.matrixWorld);const F=t.update(I),it=I.material;if(Array.isArray(it)){const G=F.groups;for(let K=0,X=G.length;K<X;K++){const z=G[K],J=it[z.materialIndex];if(J&&J.visible){const _t=M(I,F,J,m,D.near,D.far,U);r.renderBufferDirect(D,null,F,_t,I,z)}}}else if(it.visible){const G=M(I,F,it,m,D.near,D.far,U);r.renderBufferDirect(D,null,F,G,I,null)}}const Y=I.children;for(let F=0,it=Y.length;F<it;F++)x(Y[F],w,D,m,U)}}function gT(r,t,e){const i=e.isWebGL2;function n(){let $=!1;const Dt=new Le;let At=null;const Ut=new Le(0,0,0,0);return{setMask:function(j){At!==j&&!$&&(r.colorMask(j,j,j,j),At=j)},setLocked:function(j){$=j},setClear:function(j,Rt,ae,ce,be){be===!0&&(j*=ce,Rt*=ce,ae*=ce),Dt.set(j,Rt,ae,ce),Ut.equals(Dt)===!1&&(r.clearColor(j,Rt,ae,ce),Ut.copy(Dt))},reset:function(){$=!1,At=null,Ut.set(-1,0,0,0)}}}function a(){let $=!1,Dt=null,At=null,Ut=null;return{setTest:function(j){j?St(2929):Ft(2929)},setMask:function(j){Dt!==j&&!$&&(r.depthMask(j),Dt=j)},setFunc:function(j){if(At!==j){if(j)switch(j){case vg:r.depthFunc(512);break;case Ig:r.depthFunc(519);break;case xg:r.depthFunc(513);break;case ll:r.depthFunc(515);break;case Rg:r.depthFunc(514);break;case Og:r.depthFunc(518);break;case wg:r.depthFunc(516);break;case Lg:r.depthFunc(517);break;default:r.depthFunc(515)}else r.depthFunc(515);At=j}},setLocked:function(j){$=j},setClear:function(j){Ut!==j&&(r.clearDepth(j),Ut=j)},reset:function(){$=!1,Dt=null,At=null,Ut=null}}}function o(){let $=!1,Dt=null,At=null,Ut=null,j=null,Rt=null,ae=null,ce=null,be=null;return{setTest:function(xe){$||(xe?St(2960):Ft(2960))},setMask:function(xe){Dt!==xe&&!$&&(r.stencilMask(xe),Dt=xe)},setFunc:function(xe,Qe,As){(At!==xe||Ut!==Qe||j!==As)&&(r.stencilFunc(xe,Qe,As),At=xe,Ut=Qe,j=As)},setOp:function(xe,Qe,As){(Rt!==xe||ae!==Qe||ce!==As)&&(r.stencilOp(xe,Qe,As),Rt=xe,ae=Qe,ce=As)},setLocked:function(xe){$=xe},setClear:function(xe){be!==xe&&(r.clearStencil(xe),be=xe)},reset:function(){$=!1,Dt=null,At=null,Ut=null,j=null,Rt=null,ae=null,ce=null,be=null}}}const c=new n,_=new a,l=new o;let u={},p=null,f={},d=null,A=!1,E=null,S=null,y=null,M=null,x=null,I=null,w=null,D=!1,m=null,U=null,q=null,Y=null,F=null;const it=r.getParameter(35661);let G=!1,K=0;const X=r.getParameter(7938);X.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(X)[1]),G=K>=1):X.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),G=K>=2);let z=null,J={};const _t=r.getParameter(3088),gt=r.getParameter(2978),bt=new Le().fromArray(_t),vt=new Le().fromArray(gt);function Et($,Dt,At){const Ut=new Uint8Array(4),j=r.createTexture();r.bindTexture($,j),r.texParameteri($,10241,9728),r.texParameteri($,10240,9728);for(let Rt=0;Rt<At;Rt++)r.texImage2D(Dt+Rt,0,6408,1,1,0,6408,5121,Ut);return j}const pt={};pt[3553]=Et(3553,3553,1),pt[34067]=Et(34067,34069,6),c.setClear(0,0,0,1),_.setClear(1),l.setClear(0),St(2929),_.setFunc(ll),Mt(!1),Ot(Yh),St(2884),ie(an);function St($){u[$]!==!0&&(r.enable($),u[$]=!0)}function Ft($){u[$]!==!1&&(r.disable($),u[$]=!1)}function ot($){$!==p&&(r.bindFramebuffer(36160,$),p=$)}function Xt($,Dt){return Dt===null&&p!==null&&(Dt=p),f[$]!==Dt?(r.bindFramebuffer($,Dt),f[$]=Dt,i&&($===36009&&(f[36160]=Dt),$===36160&&(f[36009]=Dt)),!0):!1}function te($){return d!==$?(r.useProgram($),d=$,!0):!1}const kt={[Ar]:32774,[fg]:32778,[pg]:32779};if(i)kt[jh]=32775,kt[Qh]=32776;else{const $=t.get("EXT_blend_minmax");$!==null&&(kt[jh]=$.MIN_EXT,kt[Qh]=$.MAX_EXT)}const Bt={[dg]:0,[mg]:1,[gg]:768,[fp]:770,[Sg]:776,[Mg]:774,[yg]:772,[Ag]:769,[pp]:771,[Tg]:775,[Eg]:773};function ie($,Dt,At,Ut,j,Rt,ae,ce){if($===an){A===!0&&(Ft(3042),A=!1);return}if(A===!1&&(St(3042),A=!0),$!==ug){if($!==E||ce!==D){if((S!==Ar||x!==Ar)&&(r.blendEquation(32774),S=Ar,x=Ar),ce)switch($){case ga:r.blendFuncSeparate(1,771,1,771);break;case Kh:r.blendFunc(1,1);break;case qh:r.blendFuncSeparate(0,0,769,771);break;case Xh:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case ga:r.blendFuncSeparate(770,771,1,771);break;case Kh:r.blendFunc(770,1);break;case qh:r.blendFunc(0,769);break;case Xh:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}y=null,M=null,I=null,w=null,E=$,D=ce}return}j=j||Dt,Rt=Rt||At,ae=ae||Ut,(Dt!==S||j!==x)&&(r.blendEquationSeparate(kt[Dt],kt[j]),S=Dt,x=j),(At!==y||Ut!==M||Rt!==I||ae!==w)&&(r.blendFuncSeparate(Bt[At],Bt[Ut],Bt[Rt],Bt[ae]),y=At,M=Ut,I=Rt,w=ae),E=$,D=null}function lt($,Dt){$.side===ln?Ft(2884):St(2884);let At=$.side===Je;Dt&&(At=!At),Mt(At),$.blending===ga&&$.transparent===!1?ie(an):ie($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.premultipliedAlpha),_.setFunc($.depthFunc),_.setTest($.depthTest),_.setMask($.depthWrite),c.setMask($.colorWrite);const Ut=$.stencilWrite;l.setTest(Ut),Ut&&(l.setMask($.stencilWriteMask),l.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),l.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),Lt($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?St(32926):Ft(32926)}function Mt($){m!==$&&($?r.frontFace(2304):r.frontFace(2305),m=$)}function Ot($){$!==_g?(St(2884),$!==U&&($===Yh?r.cullFace(1029):$===lg?r.cullFace(1028):r.cullFace(1032))):Ft(2884),U=$}function Yt($){$!==q&&(G&&r.lineWidth($),q=$)}function Lt($,Dt,At){$?(St(32823),(Y!==Dt||F!==At)&&(r.polygonOffset(Dt,At),Y=Dt,F=At)):Ft(32823)}function k($){$?St(3089):Ft(3089)}function P($){$===void 0&&($=33984+it-1),z!==$&&(r.activeTexture($),z=$)}function ht($,Dt){z===null&&P();let At=J[z];At===void 0&&(At={type:void 0,texture:void 0},J[z]=At),(At.type!==$||At.texture!==Dt)&&(r.bindTexture($,Dt||pt[$]),At.type=$,At.texture=Dt)}function xt(){const $=J[z];$!==void 0&&$.type!==void 0&&(r.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function It(){try{r.compressedTexImage2D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Nt(){try{r.texImage2D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Qt(){try{r.texImage3D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Kt($){bt.equals($)===!1&&(r.scissor($.x,$.y,$.z,$.w),bt.copy($))}function yt($){vt.equals($)===!1&&(r.viewport($.x,$.y,$.z,$.w),vt.copy($))}function Pt(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),i===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),u={},z=null,J={},p=null,f={},d=null,A=!1,E=null,S=null,y=null,M=null,x=null,I=null,w=null,D=!1,m=null,U=null,q=null,Y=null,F=null,bt.set(0,0,r.canvas.width,r.canvas.height),vt.set(0,0,r.canvas.width,r.canvas.height),c.reset(),_.reset(),l.reset()}return{buffers:{color:c,depth:_,stencil:l},enable:St,disable:Ft,bindFramebuffer:Xt,bindXRFramebuffer:ot,useProgram:te,setBlending:ie,setMaterial:lt,setFlipSided:Mt,setCullFace:Ot,setLineWidth:Yt,setPolygonOffset:Lt,setScissorTest:k,activeTexture:P,bindTexture:ht,unbindTexture:xt,compressedTexImage2D:It,texImage2D:Nt,texImage3D:Qt,scissor:Kt,viewport:yt,reset:Pt}}function AT(r,t,e,i,n,a,o){const c=n.isWebGL2,_=n.maxTextures,l=n.maxCubemapSize,u=n.maxTextureSize,p=n.maxSamples,f=new WeakMap;let d,A=!1;try{A=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(k,P){return A?new OffscreenCanvas(k,P):Nc("canvas")}function S(k,P,ht,xt){let It=1;if((k.width>xt||k.height>xt)&&(It=xt/Math.max(k.width,k.height)),It<1||P===!0)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap){const Nt=P?HA:Math.floor,Qt=Nt(It*k.width),Kt=Nt(It*k.height);d===void 0&&(d=E(Qt,Kt));const yt=ht?E(Qt,Kt):d;return yt.width=Qt,yt.height=Kt,yt.getContext("2d").drawImage(k,0,0,Qt,Kt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+Qt+"x"+Kt+")."),yt}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k;return k}function y(k){return cu(k.width)&&cu(k.height)}function M(k){return c?!1:k.wrapS!==fs||k.wrapT!==fs||k.minFilter!==ts&&k.minFilter!==Rs}function x(k,P){return k.generateMipmaps&&P&&k.minFilter!==ts&&k.minFilter!==Rs}function I(k,P,ht,xt,It=1){r.generateMipmap(k);const Nt=i.get(P);Nt.__maxMipLevel=Math.log2(Math.max(ht,xt,It))}function w(k,P,ht,xt){if(c===!1)return P;if(k!==null){if(r[k]!==void 0)return r[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let It=P;return P===6403&&(ht===5126&&(It=33326),ht===5131&&(It=33325),ht===5121&&(It=33321)),P===6407&&(ht===5126&&(It=34837),ht===5131&&(It=34843),ht===5121&&(It=32849)),P===6408&&(ht===5126&&(It=34836),ht===5131&&(It=34842),ht===5121&&(It=xt===yn?35907:32856)),(It===33325||It===33326||It===34842||It===34836)&&t.get("EXT_color_buffer_float"),It}function D(k){return k===ts||k===hl||k===ul?9728:9729}function m(k){const P=k.target;P.removeEventListener("dispose",m),q(P),P.isVideoTexture&&f.delete(P),o.memory.textures--}function U(k){const P=k.target;P.removeEventListener("dispose",U),Y(P)}function q(k){const P=i.get(k);P.__webglInit!==void 0&&(r.deleteTexture(P.__webglTexture),i.remove(k))}function Y(k){const P=k.texture,ht=i.get(k),xt=i.get(P);if(k){if(xt.__webglTexture!==void 0&&(r.deleteTexture(xt.__webglTexture),o.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let It=0;It<6;It++)r.deleteFramebuffer(ht.__webglFramebuffer[It]),ht.__webglDepthbuffer&&r.deleteRenderbuffer(ht.__webglDepthbuffer[It]);else r.deleteFramebuffer(ht.__webglFramebuffer),ht.__webglDepthbuffer&&r.deleteRenderbuffer(ht.__webglDepthbuffer),ht.__webglMultisampledFramebuffer&&r.deleteFramebuffer(ht.__webglMultisampledFramebuffer),ht.__webglColorRenderbuffer&&r.deleteRenderbuffer(ht.__webglColorRenderbuffer),ht.__webglDepthRenderbuffer&&r.deleteRenderbuffer(ht.__webglDepthRenderbuffer);if(k.isWebGLMultipleRenderTargets)for(let It=0,Nt=P.length;It<Nt;It++){const Qt=i.get(P[It]);Qt.__webglTexture&&(r.deleteTexture(Qt.__webglTexture),o.memory.textures--),i.remove(P[It])}i.remove(P),i.remove(k)}}let F=0;function it(){F=0}function G(){const k=F;return k>=_&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+_),F+=1,k}function K(k,P){const ht=i.get(k);if(k.isVideoTexture&&lt(k),k.version>0&&ht.__version!==k.version){const xt=k.image;if(xt===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(xt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Et(ht,k,P);return}}e.activeTexture(33984+P),e.bindTexture(3553,ht.__webglTexture)}function X(k,P){const ht=i.get(k);if(k.version>0&&ht.__version!==k.version){Et(ht,k,P);return}e.activeTexture(33984+P),e.bindTexture(35866,ht.__webglTexture)}function z(k,P){const ht=i.get(k);if(k.version>0&&ht.__version!==k.version){Et(ht,k,P);return}e.activeTexture(33984+P),e.bindTexture(32879,ht.__webglTexture)}function J(k,P){const ht=i.get(k);if(k.version>0&&ht.__version!==k.version){pt(ht,k,P);return}e.activeTexture(33984+P),e.bindTexture(34067,ht.__webglTexture)}const _t={[tc]:10497,[fs]:33071,[ec]:33648},gt={[ts]:9728,[hl]:9984,[ul]:9986,[Rs]:9729,[dp]:9985,[Pr]:9987};function bt(k,P,ht){if(ht?(r.texParameteri(k,10242,_t[P.wrapS]),r.texParameteri(k,10243,_t[P.wrapT]),(k===32879||k===35866)&&r.texParameteri(k,32882,_t[P.wrapR]),r.texParameteri(k,10240,gt[P.magFilter]),r.texParameteri(k,10241,gt[P.minFilter])):(r.texParameteri(k,10242,33071),r.texParameteri(k,10243,33071),(k===32879||k===35866)&&r.texParameteri(k,32882,33071),(P.wrapS!==fs||P.wrapT!==fs)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(k,10240,D(P.magFilter)),r.texParameteri(k,10241,D(P.minFilter)),P.minFilter!==ts&&P.minFilter!==Rs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const xt=t.get("EXT_texture_filter_anisotropic");if(P.type===Gi&&t.has("OES_texture_float_linear")===!1||c===!1&&P.type===Rr&&t.has("OES_texture_half_float_linear")===!1)return;(P.anisotropy>1||i.get(P).__currentAnisotropy)&&(r.texParameterf(k,xt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,n.getMaxAnisotropy())),i.get(P).__currentAnisotropy=P.anisotropy)}}function vt(k,P){k.__webglInit===void 0&&(k.__webglInit=!0,P.addEventListener("dispose",m),k.__webglTexture=r.createTexture(),o.memory.textures++)}function Et(k,P,ht){let xt=3553;P.isDataTexture2DArray&&(xt=35866),P.isDataTexture3D&&(xt=32879),vt(k,P),e.activeTexture(33984+ht),e.bindTexture(xt,k.__webglTexture),r.pixelStorei(37440,P.flipY),r.pixelStorei(37441,P.premultiplyAlpha),r.pixelStorei(3317,P.unpackAlignment),r.pixelStorei(37443,0);const It=M(P)&&y(P.image)===!1,Nt=S(P.image,It,!1,u),Qt=y(Nt)||c,Kt=a.convert(P.format);let yt=a.convert(P.type),Pt=w(P.internalFormat,Kt,yt,P.encoding);bt(xt,P,Qt);let $;const Dt=P.mipmaps;if(P.isDepthTexture)Pt=6402,c?P.type===Gi?Pt=36012:P.type===jo?Pt=33190:P.type===Aa?Pt=35056:Pt=33189:P.type===Gi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),P.format===wr&&Pt===6402&&P.type!==sc&&P.type!==jo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),P.type=sc,yt=a.convert(P.type)),P.format===Ia&&Pt===6402&&(Pt=34041,P.type!==Aa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),P.type=Aa,yt=a.convert(P.type))),e.texImage2D(3553,0,Pt,Nt.width,Nt.height,0,Kt,yt,null);else if(P.isDataTexture)if(Dt.length>0&&Qt){for(let At=0,Ut=Dt.length;At<Ut;At++)$=Dt[At],e.texImage2D(3553,At,Pt,$.width,$.height,0,Kt,yt,$.data);P.generateMipmaps=!1,k.__maxMipLevel=Dt.length-1}else e.texImage2D(3553,0,Pt,Nt.width,Nt.height,0,Kt,yt,Nt.data),k.__maxMipLevel=0;else if(P.isCompressedTexture){for(let At=0,Ut=Dt.length;At<Ut;At++)$=Dt[At],P.format!==ps&&P.format!==Or?Kt!==null?e.compressedTexImage2D(3553,At,Pt,$.width,$.height,0,$.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):e.texImage2D(3553,At,Pt,$.width,$.height,0,Kt,yt,$.data);k.__maxMipLevel=Dt.length-1}else if(P.isDataTexture2DArray)e.texImage3D(35866,0,Pt,Nt.width,Nt.height,Nt.depth,0,Kt,yt,Nt.data),k.__maxMipLevel=0;else if(P.isDataTexture3D)e.texImage3D(32879,0,Pt,Nt.width,Nt.height,Nt.depth,0,Kt,yt,Nt.data),k.__maxMipLevel=0;else if(Dt.length>0&&Qt){for(let At=0,Ut=Dt.length;At<Ut;At++)$=Dt[At],e.texImage2D(3553,At,Pt,Kt,yt,$);P.generateMipmaps=!1,k.__maxMipLevel=Dt.length-1}else e.texImage2D(3553,0,Pt,Kt,yt,Nt),k.__maxMipLevel=0;x(P,Qt)&&I(xt,P,Nt.width,Nt.height),k.__version=P.version,P.onUpdate&&P.onUpdate(P)}function pt(k,P,ht){if(P.image.length!==6)return;vt(k,P),e.activeTexture(33984+ht),e.bindTexture(34067,k.__webglTexture),r.pixelStorei(37440,P.flipY),r.pixelStorei(37441,P.premultiplyAlpha),r.pixelStorei(3317,P.unpackAlignment),r.pixelStorei(37443,0);const xt=P&&(P.isCompressedTexture||P.image[0].isCompressedTexture),It=P.image[0]&&P.image[0].isDataTexture,Nt=[];for(let At=0;At<6;At++)!xt&&!It?Nt[At]=S(P.image[At],!1,!0,l):Nt[At]=It?P.image[At].image:P.image[At];const Qt=Nt[0],Kt=y(Qt)||c,yt=a.convert(P.format),Pt=a.convert(P.type),$=w(P.internalFormat,yt,Pt,P.encoding);bt(34067,P,Kt);let Dt;if(xt){for(let At=0;At<6;At++){Dt=Nt[At].mipmaps;for(let Ut=0;Ut<Dt.length;Ut++){const j=Dt[Ut];P.format!==ps&&P.format!==Or?yt!==null?e.compressedTexImage2D(34069+At,Ut,$,j.width,j.height,0,j.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):e.texImage2D(34069+At,Ut,$,j.width,j.height,0,yt,Pt,j.data)}}k.__maxMipLevel=Dt.length-1}else{Dt=P.mipmaps;for(let At=0;At<6;At++)if(It){e.texImage2D(34069+At,0,$,Nt[At].width,Nt[At].height,0,yt,Pt,Nt[At].data);for(let Ut=0;Ut<Dt.length;Ut++){const Rt=Dt[Ut].image[At].image;e.texImage2D(34069+At,Ut+1,$,Rt.width,Rt.height,0,yt,Pt,Rt.data)}}else{e.texImage2D(34069+At,0,$,yt,Pt,Nt[At]);for(let Ut=0;Ut<Dt.length;Ut++){const j=Dt[Ut];e.texImage2D(34069+At,Ut+1,$,yt,Pt,j.image[At])}}k.__maxMipLevel=Dt.length}x(P,Kt)&&I(34067,P,Qt.width,Qt.height),k.__version=P.version,P.onUpdate&&P.onUpdate(P)}function St(k,P,ht,xt,It){const Nt=a.convert(ht.format),Qt=a.convert(ht.type),Kt=w(ht.internalFormat,Nt,Qt,ht.encoding);It===32879||It===35866?e.texImage3D(It,0,Kt,P.width,P.height,P.depth,0,Nt,Qt,null):e.texImage2D(It,0,Kt,P.width,P.height,0,Nt,Qt,null),e.bindFramebuffer(36160,k),r.framebufferTexture2D(36160,xt,It,i.get(ht).__webglTexture,0),e.bindFramebuffer(36160,null)}function Ft(k,P,ht){if(r.bindRenderbuffer(36161,k),P.depthBuffer&&!P.stencilBuffer){let xt=33189;if(ht){const It=P.depthTexture;It&&It.isDepthTexture&&(It.type===Gi?xt=36012:It.type===jo&&(xt=33190));const Nt=ie(P);r.renderbufferStorageMultisample(36161,Nt,xt,P.width,P.height)}else r.renderbufferStorage(36161,xt,P.width,P.height);r.framebufferRenderbuffer(36160,36096,36161,k)}else if(P.depthBuffer&&P.stencilBuffer){if(ht){const xt=ie(P);r.renderbufferStorageMultisample(36161,xt,35056,P.width,P.height)}else r.renderbufferStorage(36161,34041,P.width,P.height);r.framebufferRenderbuffer(36160,33306,36161,k)}else{const xt=P.isWebGLMultipleRenderTargets===!0?P.texture[0]:P.texture,It=a.convert(xt.format),Nt=a.convert(xt.type),Qt=w(xt.internalFormat,It,Nt,xt.encoding);if(ht){const Kt=ie(P);r.renderbufferStorageMultisample(36161,Kt,Qt,P.width,P.height)}else r.renderbufferStorage(36161,Qt,P.width,P.height)}r.bindRenderbuffer(36161,null)}function ot(k,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,k),!(P.depthTexture&&P.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),K(P.depthTexture,0);const xt=i.get(P.depthTexture).__webglTexture;if(P.depthTexture.format===wr)r.framebufferTexture2D(36160,36096,3553,xt,0);else if(P.depthTexture.format===Ia)r.framebufferTexture2D(36160,33306,3553,xt,0);else throw new Error("Unknown depthTexture format")}function Xt(k){const P=i.get(k),ht=k.isWebGLCubeRenderTarget===!0;if(k.depthTexture){if(ht)throw new Error("target.depthTexture not supported in Cube render targets");ot(P.__webglFramebuffer,k)}else if(ht){P.__webglDepthbuffer=[];for(let xt=0;xt<6;xt++)e.bindFramebuffer(36160,P.__webglFramebuffer[xt]),P.__webglDepthbuffer[xt]=r.createRenderbuffer(),Ft(P.__webglDepthbuffer[xt],k,!1)}else e.bindFramebuffer(36160,P.__webglFramebuffer),P.__webglDepthbuffer=r.createRenderbuffer(),Ft(P.__webglDepthbuffer,k,!1);e.bindFramebuffer(36160,null)}function te(k){const P=k.texture,ht=i.get(k),xt=i.get(P);k.addEventListener("dispose",U),k.isWebGLMultipleRenderTargets!==!0&&(xt.__webglTexture=r.createTexture(),xt.__version=P.version,o.memory.textures++);const It=k.isWebGLCubeRenderTarget===!0,Nt=k.isWebGLMultipleRenderTargets===!0,Qt=k.isWebGLMultisampleRenderTarget===!0,Kt=P.isDataTexture3D||P.isDataTexture2DArray,yt=y(k)||c;if(c&&P.format===Or&&(P.type===Gi||P.type===Rr)&&(P.format=ps,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),It){ht.__webglFramebuffer=[];for(let Pt=0;Pt<6;Pt++)ht.__webglFramebuffer[Pt]=r.createFramebuffer()}else if(ht.__webglFramebuffer=r.createFramebuffer(),Nt)if(n.drawBuffers){const Pt=k.texture;for(let $=0,Dt=Pt.length;$<Dt;$++){const At=i.get(Pt[$]);At.__webglTexture===void 0&&(At.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(Qt)if(c){ht.__webglMultisampledFramebuffer=r.createFramebuffer(),ht.__webglColorRenderbuffer=r.createRenderbuffer(),r.bindRenderbuffer(36161,ht.__webglColorRenderbuffer);const Pt=a.convert(P.format),$=a.convert(P.type),Dt=w(P.internalFormat,Pt,$,P.encoding),At=ie(k);r.renderbufferStorageMultisample(36161,At,Dt,k.width,k.height),e.bindFramebuffer(36160,ht.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064,36161,ht.__webglColorRenderbuffer),r.bindRenderbuffer(36161,null),k.depthBuffer&&(ht.__webglDepthRenderbuffer=r.createRenderbuffer(),Ft(ht.__webglDepthRenderbuffer,k,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(It){e.bindTexture(34067,xt.__webglTexture),bt(34067,P,yt);for(let Pt=0;Pt<6;Pt++)St(ht.__webglFramebuffer[Pt],k,P,36064,34069+Pt);x(P,yt)&&I(34067,P,k.width,k.height),e.unbindTexture()}else if(Nt){const Pt=k.texture;for(let $=0,Dt=Pt.length;$<Dt;$++){const At=Pt[$],Ut=i.get(At);e.bindTexture(3553,Ut.__webglTexture),bt(3553,At,yt),St(ht.__webglFramebuffer,k,At,36064+$,3553),x(At,yt)&&I(3553,At,k.width,k.height)}e.unbindTexture()}else{let Pt=3553;Kt&&(c?Pt=P.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),e.bindTexture(Pt,xt.__webglTexture),bt(Pt,P,yt),St(ht.__webglFramebuffer,k,P,36064,Pt),x(P,yt)&&I(Pt,P,k.width,k.height,k.depth),e.unbindTexture()}k.depthBuffer&&Xt(k)}function kt(k){const P=y(k)||c,ht=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let xt=0,It=ht.length;xt<It;xt++){const Nt=ht[xt];if(x(Nt,P)){const Qt=k.isWebGLCubeRenderTarget?34067:3553,Kt=i.get(Nt).__webglTexture;e.bindTexture(Qt,Kt),I(Qt,Nt,k.width,k.height),e.unbindTexture()}}}function Bt(k){if(k.isWebGLMultisampleRenderTarget)if(c){const P=k.width,ht=k.height;let xt=16384;k.depthBuffer&&(xt|=256),k.stencilBuffer&&(xt|=1024);const It=i.get(k);e.bindFramebuffer(36008,It.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,It.__webglFramebuffer),r.blitFramebuffer(0,0,P,ht,0,0,P,ht,xt,9728),e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,It.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function ie(k){return c&&k.isWebGLMultisampleRenderTarget?Math.min(p,k.samples):0}function lt(k){const P=o.render.frame;f.get(k)!==P&&(f.set(k,P),k.update())}let Mt=!1,Ot=!1;function Yt(k,P){k&&k.isWebGLRenderTarget&&(Mt===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Mt=!0),k=k.texture),K(k,P)}function Lt(k,P){k&&k.isWebGLCubeRenderTarget&&(Ot===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Ot=!0),k=k.texture),J(k,P)}this.allocateTextureUnit=G,this.resetTextureUnits=it,this.setTexture2D=K,this.setTexture2DArray=X,this.setTexture3D=z,this.setTextureCube=J,this.setupRenderTarget=te,this.updateRenderTargetMipmap=kt,this.updateMultisampleRenderTarget=Bt,this.safeSetTexture2D=Yt,this.safeSetTextureCube=Lt}function yT(r,t,e){const i=e.isWebGL2;function n(a){let o;if(a===hn)return 5121;if(a===Fg)return 32819;if(a===Hg)return 32820;if(a===zg)return 33635;if(a===Gg)return 5120;if(a===Ug)return 5122;if(a===sc)return 5123;if(a===kg)return 5124;if(a===jo)return 5125;if(a===Gi)return 5126;if(a===Rr)return i?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===Wg)return 6406;if(a===Or)return 6407;if(a===ps)return 6408;if(a===Yg)return 6409;if(a===Kg)return 6410;if(a===wr)return 6402;if(a===Ia)return 34041;if(a===Xg)return 6403;if(a===jg)return 36244;if(a===Qg)return 33319;if(a===Zg)return 33320;if(a===$g)return 36248;if(a===Jg)return 36249;if(a===Zh||a===$h||a===Jh||a===tu)if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===Zh)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===$h)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Jh)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===tu)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===eu||a===su||a===iu||a===nu)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===eu)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===su)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===iu)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===nu)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===tA)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((a===ru||a===au)&&(o=t.get("WEBGL_compressed_texture_etc"),o!==null)){if(a===ru)return o.COMPRESSED_RGB8_ETC2;if(a===au)return o.COMPRESSED_RGBA8_ETC2_EAC}if(a===eA||a===sA||a===iA||a===nA||a===rA||a===aA||a===oA||a===cA||a===_A||a===lA||a===hA||a===uA||a===fA||a===pA||a===mA||a===gA||a===AA||a===yA||a===EA||a===MA||a===TA||a===SA||a===vA||a===IA||a===xA||a===RA||a===OA||a===wA)return o=t.get("WEBGL_compressed_texture_astc"),o!==null?a:null;if(a===dA)return o=t.get("EXT_texture_compression_bptc"),o!==null?a:null;if(a===Aa)return i?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:n}}class Up extends Ke{constructor(t=[]){super(),this.cameras=t}}Up.prototype.isArrayCamera=!0;class ei extends Te{constructor(){super(),this.type="Group"}}ei.prototype.isGroup=!0;const ET={type:"move"};class k_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ei,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ei,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ei,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let n=null,a=null,o=null;const c=this._targetRay,_=this._grip,l=this._hand;if(t&&e.session.visibilityState!=="visible-blurred")if(c!==null&&(n=e.getPose(t.targetRaySpace,i),n!==null&&(c.matrix.fromArray(n.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),n.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(n.linearVelocity)):c.hasLinearVelocity=!1,n.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(n.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(ET))),l&&t.hand){o=!0;for(const E of t.hand.values()){const S=e.getJointPose(E,i);if(l.joints[E.jointName]===void 0){const M=new ei;M.matrixAutoUpdate=!1,M.visible=!1,l.joints[E.jointName]=M,l.add(M)}const y=l.joints[E.jointName];S!==null&&(y.matrix.fromArray(S.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=S.radius),y.visible=S!==null}const u=l.joints["index-finger-tip"],p=l.joints["thumb-tip"],f=u.position.distanceTo(p.position),d=.02,A=.005;l.inputState.pinching&&f>d+A?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&f<=d-A&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else _!==null&&t.gripSpace&&(a=e.getPose(t.gripSpace,i),a!==null&&(_.matrix.fromArray(a.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),a.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(a.linearVelocity)):_.hasLinearVelocity=!1,a.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(a.angularVelocity)):_.hasAngularVelocity=!1));return c!==null&&(c.visible=n!==null),_!==null&&(_.visible=a!==null),l!==null&&(l.visible=o!==null),this}}class MT extends En{constructor(t,e){super();const i=this,n=t.state;let a=null,o=1,c=null,_="local-floor",l=null,u=null,p=null,f=null,d=null,A=!1,E=null,S=null,y=null,M=null,x=null,I=null;const w=[],D=new Map,m=new Ke;m.layers.enable(1),m.viewport=new Le;const U=new Ke;U.layers.enable(2),U.viewport=new Le;const q=[m,U],Y=new Up;Y.layers.enable(1),Y.layers.enable(2);let F=null,it=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(pt){let St=w[pt];return St===void 0&&(St=new k_,w[pt]=St),St.getTargetRaySpace()},this.getControllerGrip=function(pt){let St=w[pt];return St===void 0&&(St=new k_,w[pt]=St),St.getGripSpace()},this.getHand=function(pt){let St=w[pt];return St===void 0&&(St=new k_,w[pt]=St),St.getHandSpace()};function G(pt){const St=D.get(pt.inputSource);St&&St.dispatchEvent({type:pt.type,data:pt.inputSource})}function K(){D.forEach(function(pt,St){pt.disconnect(St)}),D.clear(),F=null,it=null,n.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),p&&e.deleteFramebuffer(p),E&&e.deleteFramebuffer(E),S&&e.deleteRenderbuffer(S),y&&e.deleteRenderbuffer(y),p=null,E=null,S=null,y=null,d=null,f=null,u=null,a=null,Et.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(pt){o=pt,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(pt){_=pt,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return u},this.getFrame=function(){return M},this.getSession=function(){return a},this.setSession=async function(pt){if(a=pt,a!==null){a.addEventListener("select",G),a.addEventListener("selectstart",G),a.addEventListener("selectend",G),a.addEventListener("squeeze",G),a.addEventListener("squeezestart",G),a.addEventListener("squeezeend",G),a.addEventListener("end",K),a.addEventListener("inputsourceschange",X);const St=e.getContextAttributes();if(St.xrCompatible!==!0&&await e.makeXRCompatible(),a.renderState.layers===void 0){const Ft={antialias:St.antialias,alpha:St.alpha,depth:St.depth,stencil:St.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(a,e,Ft),a.updateRenderState({baseLayer:d})}else if(e instanceof WebGLRenderingContext){const Ft={antialias:!0,alpha:St.alpha,depth:St.depth,stencil:St.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(a,e,Ft),a.updateRenderState({layers:[d]})}else{A=St.antialias;let Ft=null;St.depth&&(I=256,St.stencil&&(I|=1024),x=St.stencil?33306:36096,Ft=St.stencil?35056:33190);const ot={colorFormat:St.alpha?32856:32849,depthFormat:Ft,scaleFactor:o};u=new XRWebGLBinding(a,e),f=u.createProjectionLayer(ot),p=e.createFramebuffer(),a.updateRenderState({layers:[f]}),A&&(E=e.createFramebuffer(),S=e.createRenderbuffer(),e.bindRenderbuffer(36161,S),e.renderbufferStorageMultisample(36161,4,32856,f.textureWidth,f.textureHeight),n.bindFramebuffer(36160,E),e.framebufferRenderbuffer(36160,36064,36161,S),e.bindRenderbuffer(36161,null),Ft!==null&&(y=e.createRenderbuffer(),e.bindRenderbuffer(36161,y),e.renderbufferStorageMultisample(36161,4,Ft,f.textureWidth,f.textureHeight),e.framebufferRenderbuffer(36160,x,36161,y),e.bindRenderbuffer(36161,null)),n.bindFramebuffer(36160,null))}c=await a.requestReferenceSpace(_),Et.setContext(a),Et.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function X(pt){const St=a.inputSources;for(let Ft=0;Ft<w.length;Ft++)D.set(St[Ft],w[Ft]);for(let Ft=0;Ft<pt.removed.length;Ft++){const ot=pt.removed[Ft],Xt=D.get(ot);Xt&&(Xt.dispatchEvent({type:"disconnected",data:ot}),D.delete(ot))}for(let Ft=0;Ft<pt.added.length;Ft++){const ot=pt.added[Ft],Xt=D.get(ot);Xt&&Xt.dispatchEvent({type:"connected",data:ot})}}const z=new C,J=new C;function _t(pt,St,Ft){z.setFromMatrixPosition(St.matrixWorld),J.setFromMatrixPosition(Ft.matrixWorld);const ot=z.distanceTo(J),Xt=St.projectionMatrix.elements,te=Ft.projectionMatrix.elements,kt=Xt[14]/(Xt[10]-1),Bt=Xt[14]/(Xt[10]+1),ie=(Xt[9]+1)/Xt[5],lt=(Xt[9]-1)/Xt[5],Mt=(Xt[8]-1)/Xt[0],Ot=(te[8]+1)/te[0],Yt=kt*Mt,Lt=kt*Ot,k=ot/(-Mt+Ot),P=k*-Mt;St.matrixWorld.decompose(pt.position,pt.quaternion,pt.scale),pt.translateX(P),pt.translateZ(k),pt.matrixWorld.compose(pt.position,pt.quaternion,pt.scale),pt.matrixWorldInverse.copy(pt.matrixWorld).invert();const ht=kt+k,xt=Bt+k,It=Yt-P,Nt=Lt+(ot-P),Qt=ie*Bt/xt*ht,Kt=lt*Bt/xt*ht;pt.projectionMatrix.makePerspective(It,Nt,Qt,Kt,ht,xt)}function gt(pt,St){St===null?pt.matrixWorld.copy(pt.matrix):pt.matrixWorld.multiplyMatrices(St.matrixWorld,pt.matrix),pt.matrixWorldInverse.copy(pt.matrixWorld).invert()}this.updateCamera=function(pt){if(a===null)return;Y.near=U.near=m.near=pt.near,Y.far=U.far=m.far=pt.far,(F!==Y.near||it!==Y.far)&&(a.updateRenderState({depthNear:Y.near,depthFar:Y.far}),F=Y.near,it=Y.far);const St=pt.parent,Ft=Y.cameras;gt(Y,St);for(let Xt=0;Xt<Ft.length;Xt++)gt(Ft[Xt],St);Y.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),pt.position.copy(Y.position),pt.quaternion.copy(Y.quaternion),pt.scale.copy(Y.scale),pt.matrix.copy(Y.matrix),pt.matrixWorld.copy(Y.matrixWorld);const ot=pt.children;for(let Xt=0,te=ot.length;Xt<te;Xt++)ot[Xt].updateMatrixWorld(!0);Ft.length===2?_t(Y,m,U):Y.projectionMatrix.copy(m.projectionMatrix)},this.getCamera=function(){return Y},this.getFoveation=function(){if(f!==null)return f.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(pt){f!==null&&(f.fixedFoveation=pt),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=pt)};let bt=null;function vt(pt,St){if(l=St.getViewerPose(c),M=St,l!==null){const ot=l.views;d!==null&&n.bindXRFramebuffer(d.framebuffer);let Xt=!1;ot.length!==Y.cameras.length&&(Y.cameras.length=0,Xt=!0);for(let te=0;te<ot.length;te++){const kt=ot[te];let Bt=null;if(d!==null)Bt=d.getViewport(kt);else{const lt=u.getViewSubImage(f,kt);n.bindXRFramebuffer(p),lt.depthStencilTexture!==void 0&&e.framebufferTexture2D(36160,x,3553,lt.depthStencilTexture,0),e.framebufferTexture2D(36160,36064,3553,lt.colorTexture,0),Bt=lt.viewport}const ie=q[te];ie.matrix.fromArray(kt.transform.matrix),ie.projectionMatrix.fromArray(kt.projectionMatrix),ie.viewport.set(Bt.x,Bt.y,Bt.width,Bt.height),te===0&&Y.matrix.copy(ie.matrix),Xt===!0&&Y.cameras.push(ie)}A&&(n.bindXRFramebuffer(E),I!==null&&e.clear(I))}const Ft=a.inputSources;for(let ot=0;ot<w.length;ot++){const Xt=w[ot],te=Ft[ot];Xt.update(te,St,c)}if(bt&&bt(pt,St),A){const ot=f.textureWidth,Xt=f.textureHeight;n.bindFramebuffer(36008,E),n.bindFramebuffer(36009,p),e.invalidateFramebuffer(36008,[x]),e.invalidateFramebuffer(36009,[x]),e.blitFramebuffer(0,0,ot,Xt,0,0,ot,Xt,16384,9728),e.invalidateFramebuffer(36008,[36064]),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),n.bindFramebuffer(36160,E)}M=null}const Et=new Rp;Et.setAnimationLoop(vt),this.setAnimationLoop=function(pt){bt=pt},this.dispose=function(){}}}function TT(r){function t(y,M){y.fogColor.value.copy(M.color),M.isFog?(y.fogNear.value=M.near,y.fogFar.value=M.far):M.isFogExp2&&(y.fogDensity.value=M.density)}function e(y,M,x,I,w){M.isMeshBasicMaterial?i(y,M):M.isMeshLambertMaterial?(i(y,M),_(y,M)):M.isMeshToonMaterial?(i(y,M),u(y,M)):M.isMeshPhongMaterial?(i(y,M),l(y,M)):M.isMeshStandardMaterial?(i(y,M),M.isMeshPhysicalMaterial?f(y,M,w):p(y,M)):M.isMeshMatcapMaterial?(i(y,M),d(y,M)):M.isMeshDepthMaterial?(i(y,M),A(y,M)):M.isMeshDistanceMaterial?(i(y,M),E(y,M)):M.isMeshNormalMaterial?(i(y,M),S(y,M)):M.isLineBasicMaterial?(n(y,M),M.isLineDashedMaterial&&a(y,M)):M.isPointsMaterial?o(y,M,x,I):M.isSpriteMaterial?c(y,M):M.isShadowMaterial?(y.color.value.copy(M.color),y.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function i(y,M){y.opacity.value=M.opacity,M.color&&y.diffuse.value.copy(M.color),M.emissive&&y.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(y.map.value=M.map),M.alphaMap&&(y.alphaMap.value=M.alphaMap),M.specularMap&&(y.specularMap.value=M.specularMap),M.alphaTest>0&&(y.alphaTest.value=M.alphaTest);const x=r.get(M).envMap;if(x){y.envMap.value=x,y.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=M.reflectivity,y.ior.value=M.ior,y.refractionRatio.value=M.refractionRatio;const D=r.get(x).__maxMipLevel;D!==void 0&&(y.maxMipLevel.value=D)}M.lightMap&&(y.lightMap.value=M.lightMap,y.lightMapIntensity.value=M.lightMapIntensity),M.aoMap&&(y.aoMap.value=M.aoMap,y.aoMapIntensity.value=M.aoMapIntensity);let I;M.map?I=M.map:M.specularMap?I=M.specularMap:M.displacementMap?I=M.displacementMap:M.normalMap?I=M.normalMap:M.bumpMap?I=M.bumpMap:M.roughnessMap?I=M.roughnessMap:M.metalnessMap?I=M.metalnessMap:M.alphaMap?I=M.alphaMap:M.emissiveMap?I=M.emissiveMap:M.clearcoatMap?I=M.clearcoatMap:M.clearcoatNormalMap?I=M.clearcoatNormalMap:M.clearcoatRoughnessMap?I=M.clearcoatRoughnessMap:M.specularIntensityMap?I=M.specularIntensityMap:M.specularTintMap?I=M.specularTintMap:M.transmissionMap?I=M.transmissionMap:M.thicknessMap&&(I=M.thicknessMap),I!==void 0&&(I.isWebGLRenderTarget&&(I=I.texture),I.matrixAutoUpdate===!0&&I.updateMatrix(),y.uvTransform.value.copy(I.matrix));let w;M.aoMap?w=M.aoMap:M.lightMap&&(w=M.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),y.uv2Transform.value.copy(w.matrix))}function n(y,M){y.diffuse.value.copy(M.color),y.opacity.value=M.opacity}function a(y,M){y.dashSize.value=M.dashSize,y.totalSize.value=M.dashSize+M.gapSize,y.scale.value=M.scale}function o(y,M,x,I){y.diffuse.value.copy(M.color),y.opacity.value=M.opacity,y.size.value=M.size*x,y.scale.value=I*.5,M.map&&(y.map.value=M.map),M.alphaMap&&(y.alphaMap.value=M.alphaMap),M.alphaTest>0&&(y.alphaTest.value=M.alphaTest);let w;M.map?w=M.map:M.alphaMap&&(w=M.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),y.uvTransform.value.copy(w.matrix))}function c(y,M){y.diffuse.value.copy(M.color),y.opacity.value=M.opacity,y.rotation.value=M.rotation,M.map&&(y.map.value=M.map),M.alphaMap&&(y.alphaMap.value=M.alphaMap),M.alphaTest>0&&(y.alphaTest.value=M.alphaTest);let x;M.map?x=M.map:M.alphaMap&&(x=M.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),y.uvTransform.value.copy(x.matrix))}function _(y,M){M.emissiveMap&&(y.emissiveMap.value=M.emissiveMap)}function l(y,M){y.specular.value.copy(M.specular),y.shininess.value=Math.max(M.shininess,1e-4),M.emissiveMap&&(y.emissiveMap.value=M.emissiveMap),M.bumpMap&&(y.bumpMap.value=M.bumpMap,y.bumpScale.value=M.bumpScale,M.side===Je&&(y.bumpScale.value*=-1)),M.normalMap&&(y.normalMap.value=M.normalMap,y.normalScale.value.copy(M.normalScale),M.side===Je&&y.normalScale.value.negate()),M.displacementMap&&(y.displacementMap.value=M.displacementMap,y.displacementScale.value=M.displacementScale,y.displacementBias.value=M.displacementBias)}function u(y,M){M.gradientMap&&(y.gradientMap.value=M.gradientMap),M.emissiveMap&&(y.emissiveMap.value=M.emissiveMap),M.bumpMap&&(y.bumpMap.value=M.bumpMap,y.bumpScale.value=M.bumpScale,M.side===Je&&(y.bumpScale.value*=-1)),M.normalMap&&(y.normalMap.value=M.normalMap,y.normalScale.value.copy(M.normalScale),M.side===Je&&y.normalScale.value.negate()),M.displacementMap&&(y.displacementMap.value=M.displacementMap,y.displacementScale.value=M.displacementScale,y.displacementBias.value=M.displacementBias)}function p(y,M){y.roughness.value=M.roughness,y.metalness.value=M.metalness,M.roughnessMap&&(y.roughnessMap.value=M.roughnessMap),M.metalnessMap&&(y.metalnessMap.value=M.metalnessMap),M.emissiveMap&&(y.emissiveMap.value=M.emissiveMap),M.bumpMap&&(y.bumpMap.value=M.bumpMap,y.bumpScale.value=M.bumpScale,M.side===Je&&(y.bumpScale.value*=-1)),M.normalMap&&(y.normalMap.value=M.normalMap,y.normalScale.value.copy(M.normalScale),M.side===Je&&y.normalScale.value.negate()),M.displacementMap&&(y.displacementMap.value=M.displacementMap,y.displacementScale.value=M.displacementScale,y.displacementBias.value=M.displacementBias),r.get(M).envMap&&(y.envMapIntensity.value=M.envMapIntensity)}function f(y,M,x){p(y,M),y.ior.value=M.ior,M.sheen>0&&(y.sheenTint.value.copy(M.sheenTint).multiplyScalar(M.sheen),y.sheenRoughness.value=M.sheenRoughness),M.clearcoat>0&&(y.clearcoat.value=M.clearcoat,y.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(y.clearcoatMap.value=M.clearcoatMap),M.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap),M.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),y.clearcoatNormalMap.value=M.clearcoatNormalMap,M.side===Je&&y.clearcoatNormalScale.value.negate())),M.transmission>0&&(y.transmission.value=M.transmission,y.transmissionSamplerMap.value=x.texture,y.transmissionSamplerSize.value.set(x.width,x.height),M.transmissionMap&&(y.transmissionMap.value=M.transmissionMap),y.thickness.value=M.thickness,M.thicknessMap&&(y.thicknessMap.value=M.thicknessMap),y.attenuationDistance.value=M.attenuationDistance,y.attenuationTint.value.copy(M.attenuationTint)),y.specularIntensity.value=M.specularIntensity,y.specularTint.value.copy(M.specularTint),M.specularIntensityMap&&(y.specularIntensityMap.value=M.specularIntensityMap),M.specularTintMap&&(y.specularTintMap.value=M.specularTintMap)}function d(y,M){M.matcap&&(y.matcap.value=M.matcap),M.bumpMap&&(y.bumpMap.value=M.bumpMap,y.bumpScale.value=M.bumpScale,M.side===Je&&(y.bumpScale.value*=-1)),M.normalMap&&(y.normalMap.value=M.normalMap,y.normalScale.value.copy(M.normalScale),M.side===Je&&y.normalScale.value.negate()),M.displacementMap&&(y.displacementMap.value=M.displacementMap,y.displacementScale.value=M.displacementScale,y.displacementBias.value=M.displacementBias)}function A(y,M){M.displacementMap&&(y.displacementMap.value=M.displacementMap,y.displacementScale.value=M.displacementScale,y.displacementBias.value=M.displacementBias)}function E(y,M){M.displacementMap&&(y.displacementMap.value=M.displacementMap,y.displacementScale.value=M.displacementScale,y.displacementBias.value=M.displacementBias),y.referencePosition.value.copy(M.referencePosition),y.nearDistance.value=M.nearDistance,y.farDistance.value=M.farDistance}function S(y,M){M.bumpMap&&(y.bumpMap.value=M.bumpMap,y.bumpScale.value=M.bumpScale,M.side===Je&&(y.bumpScale.value*=-1)),M.normalMap&&(y.normalMap.value=M.normalMap,y.normalScale.value.copy(M.normalScale),M.side===Je&&y.normalScale.value.negate()),M.displacementMap&&(y.displacementMap.value=M.displacementMap,y.displacementScale.value=M.displacementScale,y.displacementBias.value=M.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:e}}function ST(){const r=Nc("canvas");return r.style.display="block",r}function Ne(r={}){const t=r.canvas!==void 0?r.canvas:ST(),e=r.context!==void 0?r.context:null,i=r.alpha!==void 0?r.alpha:!1,n=r.depth!==void 0?r.depth:!0,a=r.stencil!==void 0?r.stencil:!0,o=r.antialias!==void 0?r.antialias:!1,c=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,_=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,l=r.powerPreference!==void 0?r.powerPreference:"default",u=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let p=null,f=null;const d=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=ds,this.physicallyCorrectLights=!1,this.toneMapping=Dn,this.toneMappingExposure=1;const E=this;let S=!1,y=0,M=0,x=null,I=-1,w=null;const D=new Le,m=new Le;let U=null,q=t.width,Y=t.height,F=1,it=null,G=null;const K=new Le(0,0,q,Y),X=new Le(0,0,q,Y);let z=!1;const J=[],_t=new Dc;let gt=!1,bt=!1,vt=null;const Et=new jt,pt=new C,St={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ft(){return x===null?F:1}let ot=e;function Xt(B,st){for(let rt=0;rt<B.length;rt++){const nt=B[rt],mt=t.getContext(nt,st);if(mt!==null)return mt}return null}try{const B={alpha:i,depth:n,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:_,powerPreference:l,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",ae,!1),t.addEventListener("webglcontextrestored",ce,!1),ot===null){const st=["webgl2","webgl","experimental-webgl"];if(E.isWebGL1Renderer===!0&&st.shift(),ot=Xt(st,B),ot===null)throw Xt(st)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ot.getShaderPrecisionFormat===void 0&&(ot.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let te,kt,Bt,ie,lt,Mt,Ot,Yt,Lt,k,P,ht,xt,It,Nt,Qt,Kt,yt,Pt,$,Dt,At,Ut;function j(){te=new KM(ot),kt=new GM(ot,te,r),te.init(kt),At=new yT(ot,te,kt),Bt=new gT(ot,te,kt),J[0]=1029,ie=new jM,lt=new aT,Mt=new AT(ot,te,Bt,lt,kt,At,ie),Ot=new kM(E),Yt=new YM(E),Lt=new cy(ot,kt),Ut=new BM(ot,te,Lt,kt),k=new qM(ot,Lt,ie,Ut),P=new JM(ot,k,Lt,ie),Pt=new $M(ot,kt,Mt),Qt=new UM(lt),ht=new rT(E,Ot,Yt,te,kt,Ut,Qt),xt=new TT(lt),It=new cT(lt),Nt=new pT(te,kt),yt=new PM(E,Ot,Bt,P,c),Kt=new Gp(E,P,kt),$=new VM(ot,te,ie,kt),Dt=new XM(ot,te,ie,kt),ie.programs=ht.programs,E.capabilities=kt,E.extensions=te,E.properties=lt,E.renderLists=It,E.shadowMap=Kt,E.state=Bt,E.info=ie}j();const Rt=new MT(E,ot);this.xr=Rt,this.getContext=function(){return ot},this.getContextAttributes=function(){return ot.getContextAttributes()},this.forceContextLoss=function(){const B=te.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=te.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(B){B!==void 0&&(F=B,this.setSize(q,Y,!1))},this.getSize=function(B){return B.set(q,Y)},this.setSize=function(B,st,rt){if(Rt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=B,Y=st,t.width=Math.floor(B*F),t.height=Math.floor(st*F),rt!==!1&&(t.style.width=B+"px",t.style.height=st+"px"),this.setViewport(0,0,B,st)},this.getDrawingBufferSize=function(B){return B.set(q*F,Y*F).floor()},this.setDrawingBufferSize=function(B,st,rt){q=B,Y=st,F=rt,t.width=Math.floor(B*rt),t.height=Math.floor(st*rt),this.setViewport(0,0,B,st)},this.getCurrentViewport=function(B){return B.copy(D)},this.getViewport=function(B){return B.copy(K)},this.setViewport=function(B,st,rt,nt){B.isVector4?K.set(B.x,B.y,B.z,B.w):K.set(B,st,rt,nt),Bt.viewport(D.copy(K).multiplyScalar(F).floor())},this.getScissor=function(B){return B.copy(X)},this.setScissor=function(B,st,rt,nt){B.isVector4?X.set(B.x,B.y,B.z,B.w):X.set(B,st,rt,nt),Bt.scissor(m.copy(X).multiplyScalar(F).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(B){Bt.setScissorTest(z=B)},this.setOpaqueSort=function(B){it=B},this.setTransparentSort=function(B){G=B},this.getClearColor=function(B){return B.copy(yt.getClearColor())},this.setClearColor=function(){yt.setClearColor.apply(yt,arguments)},this.getClearAlpha=function(){return yt.getClearAlpha()},this.setClearAlpha=function(){yt.setClearAlpha.apply(yt,arguments)},this.clear=function(B,st,rt){let nt=0;(B===void 0||B)&&(nt|=16384),(st===void 0||st)&&(nt|=256),(rt===void 0||rt)&&(nt|=1024),ot.clear(nt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ae,!1),t.removeEventListener("webglcontextrestored",ce,!1),It.dispose(),Nt.dispose(),lt.dispose(),Ot.dispose(),Yt.dispose(),P.dispose(),Ut.dispose(),Rt.dispose(),Rt.removeEventListener("sessionstart",Ti),Rt.removeEventListener("sessionend",Hi),vt&&(vt.dispose(),vt=null),ri.stop()};function ae(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function ce(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const B=ie.autoReset,st=Kt.enabled,rt=Kt.autoUpdate,nt=Kt.needsUpdate,mt=Kt.type;j(),ie.autoReset=B,Kt.enabled=st,Kt.autoUpdate=rt,Kt.needsUpdate=nt,Kt.type=mt}function be(B){const st=B.target;st.removeEventListener("dispose",be),xe(st)}function xe(B){Qe(B),lt.remove(B)}function Qe(B){const st=lt.get(B).programs;st!==void 0&&st.forEach(function(rt){ht.releaseProgram(rt)})}function As(B,st){B.render(function(rt){E.renderBufferImmediate(rt,st)})}this.renderBufferImmediate=function(B,st){Ut.initAttributes();const rt=lt.get(B);B.hasPositions&&!rt.position&&(rt.position=ot.createBuffer()),B.hasNormals&&!rt.normal&&(rt.normal=ot.createBuffer()),B.hasUvs&&!rt.uv&&(rt.uv=ot.createBuffer()),B.hasColors&&!rt.color&&(rt.color=ot.createBuffer());const nt=st.getAttributes();B.hasPositions&&(ot.bindBuffer(34962,rt.position),ot.bufferData(34962,B.positionArray,35048),Ut.enableAttribute(nt.position.location),ot.vertexAttribPointer(nt.position.location,3,5126,!1,0,0)),B.hasNormals&&(ot.bindBuffer(34962,rt.normal),ot.bufferData(34962,B.normalArray,35048),Ut.enableAttribute(nt.normal.location),ot.vertexAttribPointer(nt.normal.location,3,5126,!1,0,0)),B.hasUvs&&(ot.bindBuffer(34962,rt.uv),ot.bufferData(34962,B.uvArray,35048),Ut.enableAttribute(nt.uv.location),ot.vertexAttribPointer(nt.uv.location,2,5126,!1,0,0)),B.hasColors&&(ot.bindBuffer(34962,rt.color),ot.bufferData(34962,B.colorArray,35048),Ut.enableAttribute(nt.color.location),ot.vertexAttribPointer(nt.color.location,3,5126,!1,0,0)),Ut.disableUnusedAttributes(),ot.drawArrays(4,0,B.count),B.count=0},this.renderBufferDirect=function(B,st,rt,nt,mt,ne){st===null&&(st=St);const Jt=mt.isMesh&&mt.matrixWorld.determinant()<0,Zt=Si(B,st,rt,nt,mt);Bt.setMaterial(nt,Jt);let le=rt.index;const me=rt.attributes.position;if(le===null){if(me===void 0||me.count===0)return}else if(le.count===0)return;let he=1;nt.wireframe===!0&&(le=k.getWireframeAttribute(rt),he=2),Ut.setup(mt,nt,Zt,rt,le);let ge,De=$;le!==null&&(ge=Lt.get(le),De=Dt,De.setIndex(ge));const Us=le!==null?le.count:me.count,ye=rt.drawRange.start*he,Tn=rt.drawRange.count*he,ve=ne!==null?ne.start*he:0,ai=ne!==null?ne.count*he:1/0,oi=Math.max(ye,ve),ci=Math.min(Us,ye+Tn,ve+ai)-1,Ys=Math.max(0,ci-oi+1);if(Ys!==0){if(mt.isMesh)nt.wireframe===!0?(Bt.setLineWidth(nt.wireframeLinewidth*Ft()),De.setMode(1)):De.setMode(4);else if(mt.isLine){let Ve=nt.linewidth;Ve===void 0&&(Ve=1),Bt.setLineWidth(Ve*Ft()),mt.isLineSegments?De.setMode(1):mt.isLineLoop?De.setMode(2):De.setMode(3)}else mt.isPoints?De.setMode(0):mt.isSprite&&De.setMode(4);if(mt.isInstancedMesh)De.renderInstances(oi,Ys,mt.count);else if(rt.isInstancedBufferGeometry){const Ve=Math.min(rt.instanceCount,rt._maxInstanceCount);De.renderInstances(oi,Ys,Ve)}else De.render(oi,Ys)}},this.compile=function(B,st){f=Nt.get(B),f.init(),A.push(f),B.traverseVisible(function(rt){rt.isLight&&rt.layers.test(st.layers)&&(f.pushLight(rt),rt.castShadow&&f.pushShadow(rt))}),f.setupLights(E.physicallyCorrectLights),B.traverse(function(rt){const nt=rt.material;if(nt)if(Array.isArray(nt))for(let mt=0;mt<nt.length;mt++){const ne=nt[mt];Yn(ne,B,rt)}else Yn(nt,B,rt)}),A.pop(),f=null};let _s=null;function Ns(B){_s&&_s(B)}function Ti(){ri.stop()}function Hi(){ri.start()}const ri=new Rp;ri.setAnimationLoop(Ns),typeof window<"u"&&ri.setContext(window),this.setAnimationLoop=function(B){_s=B,Rt.setAnimationLoop(B),B===null?ri.stop():ri.start()},Rt.addEventListener("sessionstart",Ti),Rt.addEventListener("sessionend",Hi),this.render=function(B,st){if(st!==void 0&&st.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;B.autoUpdate===!0&&B.updateMatrixWorld(),st.parent===null&&st.updateMatrixWorld(),Rt.enabled===!0&&Rt.isPresenting===!0&&(Rt.cameraAutoUpdate===!0&&Rt.updateCamera(st),st=Rt.getCamera()),B.isScene===!0&&B.onBeforeRender(E,B,st,x),f=Nt.get(B,A.length),f.init(),A.push(f),Et.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),_t.setFromProjectionMatrix(Et),bt=this.localClippingEnabled,gt=Qt.init(this.clippingPlanes,bt,st),p=It.get(B,d.length),p.init(),d.push(p),Kr(B,st,0,E.sortObjects),p.finish(),E.sortObjects===!0&&p.sort(it,G),gt===!0&&Qt.beginShadows();const rt=f.state.shadowsArray;if(Kt.render(rt,B,st),gt===!0&&Qt.endShadows(),this.info.autoReset===!0&&this.info.reset(),yt.render(p,B),f.setupLights(E.physicallyCorrectLights),st.isArrayCamera){const nt=st.cameras;for(let mt=0,ne=nt.length;mt<ne;mt++){const Jt=nt[mt];ys(p,B,Jt,Jt.viewport)}}else ys(p,B,st);x!==null&&(Mt.updateMultisampleRenderTarget(x),Mt.updateRenderTargetMipmap(x)),B.isScene===!0&&B.onAfterRender(E,B,st),Bt.buffers.depth.setTest(!0),Bt.buffers.depth.setMask(!0),Bt.buffers.color.setMask(!0),Bt.setPolygonOffset(!1),Ut.resetDefaultState(),I=-1,w=null,A.pop(),A.length>0?f=A[A.length-1]:f=null,d.pop(),d.length>0?p=d[d.length-1]:p=null};function Kr(B,st,rt,nt){if(B.visible===!1)return;if(B.layers.test(st.layers)){if(B.isGroup)rt=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(st);else if(B.isLight)f.pushLight(B),B.castShadow&&f.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||_t.intersectsSprite(B)){nt&&pt.setFromMatrixPosition(B.matrixWorld).applyMatrix4(Et);const Jt=P.update(B),Zt=B.material;Zt.visible&&p.push(B,Jt,Zt,rt,pt.z,null)}}else if(B.isImmediateRenderObject)nt&&pt.setFromMatrixPosition(B.matrixWorld).applyMatrix4(Et),p.push(B,null,B.material,rt,pt.z,null);else if((B.isMesh||B.isLine||B.isPoints)&&(B.isSkinnedMesh&&B.skeleton.frame!==ie.render.frame&&(B.skeleton.update(),B.skeleton.frame=ie.render.frame),!B.frustumCulled||_t.intersectsObject(B))){nt&&pt.setFromMatrixPosition(B.matrixWorld).applyMatrix4(Et);const Jt=P.update(B),Zt=B.material;if(Array.isArray(Zt)){const le=Jt.groups;for(let me=0,he=le.length;me<he;me++){const ge=le[me],De=Zt[ge.materialIndex];De&&De.visible&&p.push(B,Jt,De,rt,pt.z,ge)}}else Zt.visible&&p.push(B,Jt,Zt,rt,pt.z,null)}}const ne=B.children;for(let Jt=0,Zt=ne.length;Jt<Zt;Jt++)Kr(ne[Jt],st,rt,nt)}function ys(B,st,rt,nt){const mt=B.opaque,ne=B.transmissive,Jt=B.transparent;f.setupLightsView(rt),ne.length>0&&ls(mt,st,rt),nt&&Bt.viewport(D.copy(nt)),mt.length>0&&zi(mt,st,rt),ne.length>0&&zi(ne,st,rt),Jt.length>0&&zi(Jt,st,rt)}function ls(B,st,rt){if(vt===null){const Jt=o===!0&&kt.isWebGL2===!0?Mp:yi;vt=new Jt(1024,1024,{generateMipmaps:!0,type:At.convert(Rr)!==null?Rr:hn,minFilter:Pr,magFilter:ts,wrapS:fs,wrapT:fs})}const nt=E.getRenderTarget();E.setRenderTarget(vt),E.clear();const mt=E.toneMapping;E.toneMapping=Dn,zi(B,st,rt),E.toneMapping=mt,Mt.updateMultisampleRenderTarget(vt),Mt.updateRenderTargetMipmap(vt),E.setRenderTarget(nt)}function zi(B,st,rt){const nt=st.isScene===!0?st.overrideMaterial:null;for(let mt=0,ne=B.length;mt<ne;mt++){const Jt=B[mt],Zt=Jt.object,le=Jt.geometry,me=nt===null?Jt.material:nt,he=Jt.group;Zt.layers.test(rt.layers)&&Xc(Zt,st,rt,le,me,he)}}function Xc(B,st,rt,nt,mt,ne){if(B.onBeforeRender(E,st,rt,nt,mt,ne),B.modelViewMatrix.multiplyMatrices(rt.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),mt.onBeforeRender(E,st,rt,nt,B,ne),B.isImmediateRenderObject){const Jt=Si(rt,st,nt,mt,B);Bt.setMaterial(mt),Ut.reset(),As(B,Jt)}else mt.transparent===!0&&mt.side===ln?(mt.side=Je,mt.needsUpdate=!0,E.renderBufferDirect(rt,st,nt,mt,B,ne),mt.side=va,mt.needsUpdate=!0,E.renderBufferDirect(rt,st,nt,mt,B,ne),mt.side=ln):E.renderBufferDirect(rt,st,nt,mt,B,ne);B.onAfterRender(E,st,rt,nt,mt,ne)}function Yn(B,st,rt){st.isScene!==!0&&(st=St);const nt=lt.get(B),mt=f.state.lights,ne=f.state.shadowsArray,Jt=mt.state.version,Zt=ht.getParameters(B,mt.state,ne,st,rt),le=ht.getProgramCacheKey(Zt);let me=nt.programs;nt.environment=B.isMeshStandardMaterial?st.environment:null,nt.fog=st.fog,nt.envMap=(B.isMeshStandardMaterial?Yt:Ot).get(B.envMap||nt.environment),me===void 0&&(B.addEventListener("dispose",be),me=new Map,nt.programs=me);let he=me.get(le);if(he!==void 0){if(nt.currentProgram===he&&nt.lightsStateVersion===Jt)return qr(B,Zt),he}else Zt.uniforms=ht.getUniforms(B),B.onBuild(Zt,E),B.onBeforeCompile(Zt,E),he=ht.acquireProgram(Zt,le),me.set(le,he),nt.uniforms=Zt.uniforms;const ge=nt.uniforms;(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(ge.clippingPlanes=Qt.uniform),qr(B,Zt),nt.needsLights=Xr(B),nt.lightsStateVersion=Jt,nt.needsLights&&(ge.ambientLightColor.value=mt.state.ambient,ge.lightProbe.value=mt.state.probe,ge.directionalLights.value=mt.state.directional,ge.directionalLightShadows.value=mt.state.directionalShadow,ge.spotLights.value=mt.state.spot,ge.spotLightShadows.value=mt.state.spotShadow,ge.rectAreaLights.value=mt.state.rectArea,ge.ltc_1.value=mt.state.rectAreaLTC1,ge.ltc_2.value=mt.state.rectAreaLTC2,ge.pointLights.value=mt.state.point,ge.pointLightShadows.value=mt.state.pointShadow,ge.hemisphereLights.value=mt.state.hemi,ge.directionalShadowMap.value=mt.state.directionalShadowMap,ge.directionalShadowMatrix.value=mt.state.directionalShadowMatrix,ge.spotShadowMap.value=mt.state.spotShadowMap,ge.spotShadowMatrix.value=mt.state.spotShadowMatrix,ge.pointShadowMap.value=mt.state.pointShadowMap,ge.pointShadowMatrix.value=mt.state.pointShadowMatrix);const De=he.getUniforms(),Us=cn.seqWithValue(De.seq,ge);return nt.currentProgram=he,nt.uniformsList=Us,he}function qr(B,st){const rt=lt.get(B);rt.outputEncoding=st.outputEncoding,rt.instancing=st.instancing,rt.skinning=st.skinning,rt.morphTargets=st.morphTargets,rt.morphNormals=st.morphNormals,rt.morphTargetsCount=st.morphTargetsCount,rt.numClippingPlanes=st.numClippingPlanes,rt.numIntersection=st.numClipIntersection,rt.vertexAlphas=st.vertexAlphas,rt.vertexTangents=st.vertexTangents}function Si(B,st,rt,nt,mt){st.isScene!==!0&&(st=St),Mt.resetTextureUnits();const ne=st.fog,Jt=nt.isMeshStandardMaterial?st.environment:null,Zt=x===null?E.outputEncoding:x.texture.encoding,le=(nt.isMeshStandardMaterial?Yt:Ot).get(nt.envMap||Jt),me=nt.vertexColors===!0&&!!rt&&!!rt.attributes.color&&rt.attributes.color.itemSize===4,he=!!nt.normalMap&&!!rt&&!!rt.attributes.tangent,ge=!!rt&&!!rt.morphAttributes.position,De=!!rt&&!!rt.morphAttributes.normal,Us=rt&&rt.morphAttributes.position?rt.morphAttributes.position.length:0,ye=lt.get(nt),Tn=f.state.lights;if(gt===!0&&(bt===!0||B!==w)){const bs=B===w&&nt.id===I;Qt.setState(nt,B,bs)}let ve=!1;nt.version===ye.__version?(ye.needsLights&&ye.lightsStateVersion!==Tn.state.version||ye.outputEncoding!==Zt||mt.isInstancedMesh&&ye.instancing===!1||!mt.isInstancedMesh&&ye.instancing===!0||mt.isSkinnedMesh&&ye.skinning===!1||!mt.isSkinnedMesh&&ye.skinning===!0||ye.envMap!==le||nt.fog&&ye.fog!==ne||ye.numClippingPlanes!==void 0&&(ye.numClippingPlanes!==Qt.numPlanes||ye.numIntersection!==Qt.numIntersection)||ye.vertexAlphas!==me||ye.vertexTangents!==he||ye.morphTargets!==ge||ye.morphNormals!==De||kt.isWebGL2===!0&&ye.morphTargetsCount!==Us)&&(ve=!0):(ve=!0,ye.__version=nt.version);let ai=ye.currentProgram;ve===!0&&(ai=Yn(nt,st,mt));let oi=!1,ci=!1,Ys=!1;const Ve=ai.getUniforms(),vi=ye.uniforms;if(Bt.useProgram(ai.program)&&(oi=!0,ci=!0,Ys=!0),nt.id!==I&&(I=nt.id,ci=!0),oi||w!==B){if(Ve.setValue(ot,"projectionMatrix",B.projectionMatrix),kt.logarithmicDepthBuffer&&Ve.setValue(ot,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),w!==B&&(w=B,ci=!0,Ys=!0),nt.isShaderMaterial||nt.isMeshPhongMaterial||nt.isMeshToonMaterial||nt.isMeshStandardMaterial||nt.envMap){const bs=Ve.map.cameraPosition;bs!==void 0&&bs.setValue(ot,pt.setFromMatrixPosition(B.matrixWorld))}(nt.isMeshPhongMaterial||nt.isMeshToonMaterial||nt.isMeshLambertMaterial||nt.isMeshBasicMaterial||nt.isMeshStandardMaterial||nt.isShaderMaterial)&&Ve.setValue(ot,"isOrthographic",B.isOrthographicCamera===!0),(nt.isMeshPhongMaterial||nt.isMeshToonMaterial||nt.isMeshLambertMaterial||nt.isMeshBasicMaterial||nt.isMeshStandardMaterial||nt.isShaderMaterial||nt.isShadowMaterial||mt.isSkinnedMesh)&&Ve.setValue(ot,"viewMatrix",B.matrixWorldInverse)}if(mt.isSkinnedMesh){Ve.setOptional(ot,mt,"bindMatrix"),Ve.setOptional(ot,mt,"bindMatrixInverse");const bs=mt.skeleton;bs&&(kt.floatVertexTextures?(bs.boneTexture===null&&bs.computeBoneTexture(),Ve.setValue(ot,"boneTexture",bs.boneTexture,Mt),Ve.setValue(ot,"boneTextureSize",bs.boneTextureSize)):Ve.setOptional(ot,bs,"boneMatrices"))}return rt&&(rt.morphAttributes.position!==void 0||rt.morphAttributes.normal!==void 0)&&Pt.update(mt,rt,nt,ai),(ci||ye.receiveShadow!==mt.receiveShadow)&&(ye.receiveShadow=mt.receiveShadow,Ve.setValue(ot,"receiveShadow",mt.receiveShadow)),ci&&(Ve.setValue(ot,"toneMappingExposure",E.toneMappingExposure),ye.needsLights&&Wi(vi,Ys),ne&&nt.fog&&xt.refreshFogUniforms(vi,ne),xt.refreshMaterialUniforms(vi,nt,F,Y,vt),cn.upload(ot,ye.uniformsList,vi,Mt)),nt.isShaderMaterial&&nt.uniformsNeedUpdate===!0&&(cn.upload(ot,ye.uniformsList,vi,Mt),nt.uniformsNeedUpdate=!1),nt.isSpriteMaterial&&Ve.setValue(ot,"center",mt.center),Ve.setValue(ot,"modelViewMatrix",mt.modelViewMatrix),Ve.setValue(ot,"normalMatrix",mt.normalMatrix),Ve.setValue(ot,"modelMatrix",mt.matrixWorld),ai}function Wi(B,st){B.ambientLightColor.needsUpdate=st,B.lightProbe.needsUpdate=st,B.directionalLights.needsUpdate=st,B.directionalLightShadows.needsUpdate=st,B.pointLights.needsUpdate=st,B.pointLightShadows.needsUpdate=st,B.spotLights.needsUpdate=st,B.spotLightShadows.needsUpdate=st,B.rectAreaLights.needsUpdate=st,B.hemisphereLights.needsUpdate=st}function Xr(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return x},this.setRenderTarget=function(B,st=0,rt=0){x=B,y=st,M=rt,B&&lt.get(B).__webglFramebuffer===void 0&&Mt.setupRenderTarget(B);let nt=null,mt=!1,ne=!1;if(B){const Zt=B.texture;(Zt.isDataTexture3D||Zt.isDataTexture2DArray)&&(ne=!0);const le=lt.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(nt=le[st],mt=!0):B.isWebGLMultisampleRenderTarget?nt=lt.get(B).__webglMultisampledFramebuffer:nt=le,D.copy(B.viewport),m.copy(B.scissor),U=B.scissorTest}else D.copy(K).multiplyScalar(F).floor(),m.copy(X).multiplyScalar(F).floor(),U=z;if(Bt.bindFramebuffer(36160,nt)&&kt.drawBuffers){let Zt=!1;if(B)if(B.isWebGLMultipleRenderTargets){const le=B.texture;if(J.length!==le.length||J[0]!==36064){for(let me=0,he=le.length;me<he;me++)J[me]=36064+me;J.length=le.length,Zt=!0}}else(J.length!==1||J[0]!==36064)&&(J[0]=36064,J.length=1,Zt=!0);else(J.length!==1||J[0]!==1029)&&(J[0]=1029,J.length=1,Zt=!0);Zt&&(kt.isWebGL2?ot.drawBuffers(J):te.get("WEBGL_draw_buffers").drawBuffersWEBGL(J))}if(Bt.viewport(D),Bt.scissor(m),Bt.setScissorTest(U),mt){const Zt=lt.get(B.texture);ot.framebufferTexture2D(36160,36064,34069+st,Zt.__webglTexture,rt)}else if(ne){const Zt=lt.get(B.texture),le=st||0;ot.framebufferTextureLayer(36160,36064,Zt.__webglTexture,rt||0,le)}I=-1},this.readRenderTargetPixels=function(B,st,rt,nt,mt,ne,Jt){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Zt=lt.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&Jt!==void 0&&(Zt=Zt[Jt]),Zt){Bt.bindFramebuffer(36160,Zt);try{const le=B.texture,me=le.format,he=le.type;if(me!==ps&&At.convert(me)!==ot.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ge=he===Rr&&(te.has("EXT_color_buffer_half_float")||kt.isWebGL2&&te.has("EXT_color_buffer_float"));if(he!==hn&&At.convert(he)!==ot.getParameter(35738)&&!(he===Gi&&(kt.isWebGL2||te.has("OES_texture_float")||te.has("WEBGL_color_buffer_float")))&&!ge){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ot.checkFramebufferStatus(36160)===36053?st>=0&&st<=B.width-nt&&rt>=0&&rt<=B.height-mt&&ot.readPixels(st,rt,nt,mt,At.convert(me),At.convert(he),ne):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const le=x!==null?lt.get(x).__webglFramebuffer:null;Bt.bindFramebuffer(36160,le)}}},this.copyFramebufferToTexture=function(B,st,rt=0){const nt=Math.pow(2,-rt),mt=Math.floor(st.image.width*nt),ne=Math.floor(st.image.height*nt);let Jt=At.convert(st.format);kt.isWebGL2&&(Jt===6407&&(Jt=32849),Jt===6408&&(Jt=32856)),Mt.setTexture2D(st,0),ot.copyTexImage2D(3553,rt,Jt,B.x,B.y,mt,ne,0),Bt.unbindTexture()},this.copyTextureToTexture=function(B,st,rt,nt=0){const mt=st.image.width,ne=st.image.height,Jt=At.convert(rt.format),Zt=At.convert(rt.type);Mt.setTexture2D(rt,0),ot.pixelStorei(37440,rt.flipY),ot.pixelStorei(37441,rt.premultiplyAlpha),ot.pixelStorei(3317,rt.unpackAlignment),st.isDataTexture?ot.texSubImage2D(3553,nt,B.x,B.y,mt,ne,Jt,Zt,st.image.data):st.isCompressedTexture?ot.compressedTexSubImage2D(3553,nt,B.x,B.y,st.mipmaps[0].width,st.mipmaps[0].height,Jt,st.mipmaps[0].data):ot.texSubImage2D(3553,nt,B.x,B.y,Jt,Zt,st.image),nt===0&&rt.generateMipmaps&&ot.generateMipmap(3553),Bt.unbindTexture()},this.copyTextureToTexture3D=function(B,st,rt,nt,mt=0){if(E.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ne=B.max.x-B.min.x+1,Jt=B.max.y-B.min.y+1,Zt=B.max.z-B.min.z+1,le=At.convert(nt.format),me=At.convert(nt.type);let he;if(nt.isDataTexture3D)Mt.setTexture3D(nt,0),he=32879;else if(nt.isDataTexture2DArray)Mt.setTexture2DArray(nt,0),he=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ot.pixelStorei(37440,nt.flipY),ot.pixelStorei(37441,nt.premultiplyAlpha),ot.pixelStorei(3317,nt.unpackAlignment);const ge=ot.getParameter(3314),De=ot.getParameter(32878),Us=ot.getParameter(3316),ye=ot.getParameter(3315),Tn=ot.getParameter(32877),ve=rt.isCompressedTexture?rt.mipmaps[0]:rt.image;ot.pixelStorei(3314,ve.width),ot.pixelStorei(32878,ve.height),ot.pixelStorei(3316,B.min.x),ot.pixelStorei(3315,B.min.y),ot.pixelStorei(32877,B.min.z),rt.isDataTexture||rt.isDataTexture3D?ot.texSubImage3D(he,mt,st.x,st.y,st.z,ne,Jt,Zt,le,me,ve.data):rt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ot.compressedTexSubImage3D(he,mt,st.x,st.y,st.z,ne,Jt,Zt,le,ve.data)):ot.texSubImage3D(he,mt,st.x,st.y,st.z,ne,Jt,Zt,le,me,ve),ot.pixelStorei(3314,ge),ot.pixelStorei(32878,De),ot.pixelStorei(3316,Us),ot.pixelStorei(3315,ye),ot.pixelStorei(32877,Tn),mt===0&&nt.generateMipmaps&&ot.generateMipmap(he),Bt.unbindTexture()},this.initTexture=function(B){Mt.setTexture2D(B,0),Bt.unbindTexture()},this.resetState=function(){y=0,M=0,x=null,Bt.reset(),Ut.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class vT extends Ne{}vT.prototype.isWebGL1Renderer=!0;class Pc{constructor(t,e=25e-5){this.name="",this.color=new zt(t),this.density=e}clone(){return new Pc(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Pc.prototype.isFogExp2=!0;class Bc{constructor(t,e=1,i=1e3){this.name="",this.color=new zt(t),this.near=e,this.far=i}clone(){return new Bc(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Bc.prototype.isFog=!0;class Vc extends Te{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),e}}Vc.prototype.isScene=!0;class kr{constructor(t,e){this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=xa,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ii()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let n=0,a=this.stride;n<a;n++)this.array[t+n]=e.array[i+n];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ii()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ii()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}kr.prototype.isInterleavedBuffer=!0;const We=new C;class Bn{constructor(t,e,i,n=!1){this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=n===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)We.x=this.getX(e),We.y=this.getY(e),We.z=this.getZ(e),We.applyMatrix4(t),this.setXYZ(e,We.x,We.y,We.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)We.x=this.getX(e),We.y=this.getY(e),We.z=this.getZ(e),We.applyNormalMatrix(t),this.setXYZ(e,We.x,We.y,We.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)We.x=this.getX(e),We.y=this.getY(e),We.z=this.getZ(e),We.transformDirection(t),this.setXYZ(e,We.x,We.y,We.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this}setXYZW(t,e,i,n,a){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=a,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)e.push(this.data.array[n+a])}return new ze(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Bn(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)e.push(this.data.array[n+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Bn.prototype.isInterleavedBufferAttribute=!0;class kl extends cs{constructor(t){super(),this.type="SpriteMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}kl.prototype.isSpriteMaterial=!0;let ur;const aa=new C,fr=new C,pr=new C,dr=new dt,oa=new dt,kp=new jt,Io=new C,ca=new C,xo=new C,Hu=new dt,F_=new dt,zu=new dt;class Fp extends Te{constructor(t){if(super(),this.type="Sprite",ur===void 0){ur=new de;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new kr(e,5);ur.setIndex([0,1,2,0,2,3]),ur.setAttribute("position",new Bn(i,3,0,!1)),ur.setAttribute("uv",new Bn(i,2,3,!1))}this.geometry=ur,this.material=t!==void 0?t:new kl,this.center=new dt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),fr.setFromMatrixScale(this.matrixWorld),kp.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),pr.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&fr.multiplyScalar(-pr.z);const i=this.material.rotation;let n,a;i!==0&&(a=Math.cos(i),n=Math.sin(i));const o=this.center;Ro(Io.set(-.5,-.5,0),pr,o,fr,n,a),Ro(ca.set(.5,-.5,0),pr,o,fr,n,a),Ro(xo.set(.5,.5,0),pr,o,fr,n,a),Hu.set(0,0),F_.set(1,0),zu.set(1,1);let c=t.ray.intersectTriangle(Io,ca,xo,!1,aa);if(c===null&&(Ro(ca.set(-.5,.5,0),pr,o,fr,n,a),F_.set(0,1),c=t.ray.intersectTriangle(Io,xo,ca,!1,aa),c===null))return;const _=t.ray.origin.distanceTo(aa);_<t.near||_>t.far||e.push({distance:_,point:aa.clone(),uv:je.getUV(aa,Io,ca,xo,Hu,F_,zu,new dt),face:null,object:this})}copy(t){return super.copy(t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}Fp.prototype.isSprite=!0;function Ro(r,t,e,i,n,a){dr.subVectors(r,e).addScalar(.5).multiply(i),n!==void 0?(oa.x=a*dr.x-n*dr.y,oa.y=n*dr.x+a*dr.y):oa.copy(dr),r.copy(t),r.x+=oa.x,r.y+=oa.y,r.applyMatrix4(kp)}const Oo=new C,Wu=new C;class IT extends Te{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let i=0,n=e.length;i<n;i++){const a=e[i];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0){e=Math.abs(e);const i=this.levels;let n;for(n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let i,n;for(i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){Oo.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(Oo);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){Oo.setFromMatrixPosition(t.matrixWorld),Wu.setFromMatrixPosition(this.matrixWorld);const i=Oo.distanceTo(Wu)/t.zoom;e[0].object.visible=!0;let n,a;for(n=1,a=e.length;n<a&&i>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<a;n++)e[n].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let n=0,a=i.length;n<a;n++){const o=i[n];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}const Yu=new C,Ku=new Le,qu=new Le,xT=new C,Xu=new jt;class Fl extends ke{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new jt,this.bindMatrixInverse=new jt}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Le,e=this.geometry.attributes.skinWeight;for(let i=0,n=e.count;i<n;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);const a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const i=this.skeleton,n=this.geometry;Ku.fromBufferAttribute(n.attributes.skinIndex,t),qu.fromBufferAttribute(n.attributes.skinWeight,t),Yu.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let a=0;a<4;a++){const o=qu.getComponent(a);if(o!==0){const c=Ku.getComponent(a);Xu.multiplyMatrices(i.bones[c].matrixWorld,i.boneInverses[c]),e.addScaledVector(xT.copy(Yu).applyMatrix4(Xu),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}Fl.prototype.isSkinnedMesh=!0;class Hl extends Te{constructor(){super(),this.type="Bone"}}Hl.prototype.isBone=!0;class ya extends is{constructor(t=null,e=1,i=1,n,a,o,c,_,l=ts,u=ts,p,f){super(null,o,c,_,l,u,n,a,p,f),this.image={data:t,width:e,height:i},this.magFilter=l,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}ya.prototype.isDataTexture=!0;const ju=new jt,RT=new jt;class zl{constructor(t=[],e=[]){this.uuid=ii(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new jt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new jt;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let a=0,o=t.length;a<o;a++){const c=t[a]?t[a].matrixWorld:RT;ju.multiplyMatrices(c,e[a]),ju.toArray(i,a*16)}n!==null&&(n.needsUpdate=!0)}clone(){return new zl(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=FA(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new ya(e,t,t,ps,Gi);return this.boneMatrices=e,this.boneTexture=i,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,n=t.bones.length;i<n;i++){const a=t.bones[i];let o=e[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new Hl),this.bones.push(o),this.boneInverses.push(new jt().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let n=0,a=e.length;n<a;n++){const o=e[n];t.bones.push(o.uuid);const c=i[n];t.boneInverses.push(c.toArray())}return t}}class br extends ze{constructor(t,e,i,n=1){typeof i=="number"&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,i),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}br.prototype.isInstancedBufferAttribute=!0;const Qu=new jt,Zu=new jt,wo=[],_a=new ke;class Hp extends ke{constructor(t,e,i){super(t,e),this.instanceMatrix=new br(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}raycast(t,e){const i=this.matrixWorld,n=this.count;if(_a.geometry=this.geometry,_a.material=this.material,_a.material!==void 0)for(let a=0;a<n;a++){this.getMatrixAt(a,Qu),Zu.multiplyMatrices(i,Qu),_a.matrixWorld=Zu,_a.raycast(t,wo);for(let o=0,c=wo.length;o<c;o++){const _=wo[o];_.instanceId=a,_.object=this,e.push(_)}wo.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new br(new Float32Array(this.instanceMatrix.count*3),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}Hp.prototype.isInstancedMesh=!0;class Fn extends cs{constructor(t){super(),this.type="LineBasicMaterial",this.color=new zt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Fn.prototype.isLineBasicMaterial=!0;const $u=new C,Ju=new C,tf=new jt,H_=new Un,Lo=new Gn;class Gc extends Te{constructor(t=new de,e=new Fn){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,i=[0];for(let n=1,a=e.count;n<a;n++)$u.fromBufferAttribute(e,n-1),Ju.fromBufferAttribute(e,n),i[n]=i[n-1],i[n]+=$u.distanceTo(Ju);t.setAttribute("lineDistance",new se(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const i=this.geometry,n=this.matrixWorld,a=t.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Lo.copy(i.boundingSphere),Lo.applyMatrix4(n),Lo.radius+=a,t.ray.intersectsSphere(Lo)===!1)return;tf.copy(n).invert(),H_.copy(t.ray).applyMatrix4(tf);const c=a/((this.scale.x+this.scale.y+this.scale.z)/3),_=c*c,l=new C,u=new C,p=new C,f=new C,d=this.isLineSegments?2:1;if(i.isBufferGeometry){const A=i.index,S=i.attributes.position;if(A!==null){const y=Math.max(0,o.start),M=Math.min(A.count,o.start+o.count);for(let x=y,I=M-1;x<I;x+=d){const w=A.getX(x),D=A.getX(x+1);if(l.fromBufferAttribute(S,w),u.fromBufferAttribute(S,D),H_.distanceSqToSegment(l,u,f,p)>_)continue;f.applyMatrix4(this.matrixWorld);const U=t.ray.origin.distanceTo(f);U<t.near||U>t.far||e.push({distance:U,point:p.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,o.start),M=Math.min(S.count,o.start+o.count);for(let x=y,I=M-1;x<I;x+=d){if(l.fromBufferAttribute(S,x),u.fromBufferAttribute(S,x+1),H_.distanceSqToSegment(l,u,f,p)>_)continue;f.applyMatrix4(this.matrixWorld);const D=t.ray.origin.distanceTo(f);D<t.near||D>t.far||e.push({distance:D,point:p.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const n=e[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=n.length;a<o;a++){const c=n[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Gc.prototype.isLine=!0;const ef=new C,sf=new C;class za extends Gc{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,i=[];for(let n=0,a=e.count;n<a;n+=2)ef.fromBufferAttribute(e,n),sf.fromBufferAttribute(e,n+1),i[n]=n===0?0:i[n-1],i[n+1]=i[n]+ef.distanceTo(sf);t.setAttribute("lineDistance",new se(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}za.prototype.isLineSegments=!0;class zp extends Gc{constructor(t,e){super(t,e),this.type="LineLoop"}}zp.prototype.isLineLoop=!0;class Wl extends cs{constructor(t){super(),this.type="PointsMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}Wl.prototype.isPointsMaterial=!0;const nf=new jt,dl=new Un,No=new Gn,bo=new C;class Wp extends Te{constructor(t=new de,e=new Wl){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,n=this.matrixWorld,a=t.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),No.copy(i.boundingSphere),No.applyMatrix4(n),No.radius+=a,t.ray.intersectsSphere(No)===!1)return;nf.copy(n).invert(),dl.copy(t.ray).applyMatrix4(nf);const c=a/((this.scale.x+this.scale.y+this.scale.z)/3),_=c*c;if(i.isBufferGeometry){const l=i.index,p=i.attributes.position;if(l!==null){const f=Math.max(0,o.start),d=Math.min(l.count,o.start+o.count);for(let A=f,E=d;A<E;A++){const S=l.getX(A);bo.fromBufferAttribute(p,S),rf(bo,S,_,n,t,e,this)}}else{const f=Math.max(0,o.start),d=Math.min(p.count,o.start+o.count);for(let A=f,E=d;A<E;A++)bo.fromBufferAttribute(p,A),rf(bo,A,_,n,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const n=e[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=n.length;a<o;a++){const c=n[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Wp.prototype.isPoints=!0;function rf(r,t,e,i,n,a,o){const c=dl.distanceSqToPoint(r);if(c<e){const _=new C;dl.closestPointToPoint(r,_),_.applyMatrix4(i);const l=n.ray.origin.distanceTo(_);if(l<n.near||l>n.far)return;a.push({distance:l,distanceToRay:Math.sqrt(c),point:_,index:t,face:null,object:o})}}class OT extends is{constructor(t,e,i,n,a,o,c,_,l){super(t,e,i,n,a,o,c,_,l),this.format=c!==void 0?c:Or,this.minFilter=o!==void 0?o:Rs,this.magFilter=a!==void 0?a:Rs,this.generateMipmaps=!1;const u=this;function p(){u.needsUpdate=!0,t.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}OT.prototype.isVideoTexture=!0;class wT extends is{constructor(t,e,i,n,a,o,c,_,l,u,p,f){super(null,o,c,_,l,u,n,a,p,f),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}wT.prototype.isCompressedTexture=!0;class Yp extends is{constructor(t,e,i,n,a,o,c,_,l){super(t,e,i,n,a,o,c,_,l),this.needsUpdate=!0}}Yp.prototype.isCanvasTexture=!0;class LT extends is{constructor(t,e,i,n,a,o,c,_,l,u){if(u=u!==void 0?u:wr,u!==wr&&u!==Ia)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===wr&&(i=sc),i===void 0&&u===Ia&&(i=Aa),super(null,n,a,o,c,_,u,i,l),this.image={width:t,height:e},this.magFilter=c!==void 0?c:ts,this.minFilter=_!==void 0?_:ts,this.flipY=!1,this.generateMipmaps=!1}}LT.prototype.isDepthTexture=!0;class oc extends de{constructor(t=1,e=8,i=0,n=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},e=Math.max(3,e);const a=[],o=[],c=[],_=[],l=new C,u=new dt;o.push(0,0,0),c.push(0,0,1),_.push(.5,.5);for(let p=0,f=3;p<=e;p++,f+=3){const d=i+p/e*n;l.x=t*Math.cos(d),l.y=t*Math.sin(d),o.push(l.x,l.y,l.z),c.push(0,0,1),u.x=(o[f]/t+1)/2,u.y=(o[f+1]/t+1)/2,_.push(u.x,u.y)}for(let p=1;p<=e;p++)a.push(p,p+1,0);this.setIndex(a),this.setAttribute("position",new se(o,3)),this.setAttribute("normal",new se(c,3)),this.setAttribute("uv",new se(_,2))}static fromJSON(t){return new oc(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Ra extends de{constructor(t=1,e=1,i=1,n=8,a=1,o=!1,c=0,_=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:c,thetaLength:_};const l=this;n=Math.floor(n),a=Math.floor(a);const u=[],p=[],f=[],d=[];let A=0;const E=[],S=i/2;let y=0;M(),o===!1&&(t>0&&x(!0),e>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new se(p,3)),this.setAttribute("normal",new se(f,3)),this.setAttribute("uv",new se(d,2));function M(){const I=new C,w=new C;let D=0;const m=(e-t)/i;for(let U=0;U<=a;U++){const q=[],Y=U/a,F=Y*(e-t)+t;for(let it=0;it<=n;it++){const G=it/n,K=G*_+c,X=Math.sin(K),z=Math.cos(K);w.x=F*X,w.y=-Y*i+S,w.z=F*z,p.push(w.x,w.y,w.z),I.set(X,m,z).normalize(),f.push(I.x,I.y,I.z),d.push(G,1-Y),q.push(A++)}E.push(q)}for(let U=0;U<n;U++)for(let q=0;q<a;q++){const Y=E[q][U],F=E[q+1][U],it=E[q+1][U+1],G=E[q][U+1];u.push(Y,F,G),u.push(F,it,G),D+=6}l.addGroup(y,D,0),y+=D}function x(I){const w=A,D=new dt,m=new C;let U=0;const q=I===!0?t:e,Y=I===!0?1:-1;for(let it=1;it<=n;it++)p.push(0,S*Y,0),f.push(0,Y,0),d.push(.5,.5),A++;const F=A;for(let it=0;it<=n;it++){const K=it/n*_+c,X=Math.cos(K),z=Math.sin(K);m.x=q*z,m.y=S*Y,m.z=q*X,p.push(m.x,m.y,m.z),f.push(0,Y,0),D.x=X*.5+.5,D.y=z*.5*Y+.5,d.push(D.x,D.y),A++}for(let it=0;it<n;it++){const G=w+it,K=F+it;I===!0?u.push(K,K+1,G):u.push(K+1,K,G),U+=3}l.addGroup(y,U,I===!0?1:2),y+=U}}static fromJSON(t){return new Ra(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class cc extends Ra{constructor(t=1,e=1,i=8,n=1,a=!1,o=0,c=Math.PI*2){super(0,t,e,i,n,a,o,c),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:c}}static fromJSON(t){return new cc(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class dn extends de{constructor(t=[],e=[],i=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n};const a=[],o=[];c(n),l(i),u(),this.setAttribute("position",new se(a,3)),this.setAttribute("normal",new se(a.slice(),3)),this.setAttribute("uv",new se(o,2)),n===0?this.computeVertexNormals():this.normalizeNormals();function c(M){const x=new C,I=new C,w=new C;for(let D=0;D<e.length;D+=3)d(e[D+0],x),d(e[D+1],I),d(e[D+2],w),_(x,I,w,M)}function _(M,x,I,w){const D=w+1,m=[];for(let U=0;U<=D;U++){m[U]=[];const q=M.clone().lerp(I,U/D),Y=x.clone().lerp(I,U/D),F=D-U;for(let it=0;it<=F;it++)it===0&&U===D?m[U][it]=q:m[U][it]=q.clone().lerp(Y,it/F)}for(let U=0;U<D;U++)for(let q=0;q<2*(D-U)-1;q++){const Y=Math.floor(q/2);q%2===0?(f(m[U][Y+1]),f(m[U+1][Y]),f(m[U][Y])):(f(m[U][Y+1]),f(m[U+1][Y+1]),f(m[U+1][Y]))}}function l(M){const x=new C;for(let I=0;I<a.length;I+=3)x.x=a[I+0],x.y=a[I+1],x.z=a[I+2],x.normalize().multiplyScalar(M),a[I+0]=x.x,a[I+1]=x.y,a[I+2]=x.z}function u(){const M=new C;for(let x=0;x<a.length;x+=3){M.x=a[x+0],M.y=a[x+1],M.z=a[x+2];const I=S(M)/2/Math.PI+.5,w=y(M)/Math.PI+.5;o.push(I,1-w)}A(),p()}function p(){for(let M=0;M<o.length;M+=6){const x=o[M+0],I=o[M+2],w=o[M+4],D=Math.max(x,I,w),m=Math.min(x,I,w);D>.9&&m<.1&&(x<.2&&(o[M+0]+=1),I<.2&&(o[M+2]+=1),w<.2&&(o[M+4]+=1))}}function f(M){a.push(M.x,M.y,M.z)}function d(M,x){const I=M*3;x.x=t[I+0],x.y=t[I+1],x.z=t[I+2]}function A(){const M=new C,x=new C,I=new C,w=new C,D=new dt,m=new dt,U=new dt;for(let q=0,Y=0;q<a.length;q+=9,Y+=6){M.set(a[q+0],a[q+1],a[q+2]),x.set(a[q+3],a[q+4],a[q+5]),I.set(a[q+6],a[q+7],a[q+8]),D.set(o[Y+0],o[Y+1]),m.set(o[Y+2],o[Y+3]),U.set(o[Y+4],o[Y+5]),w.copy(M).add(x).add(I).divideScalar(3);const F=S(w);E(D,Y+0,M,F),E(m,Y+2,x,F),E(U,Y+4,I,F)}}function E(M,x,I,w){w<0&&M.x===1&&(o[x]=M.x-1),I.x===0&&I.z===0&&(o[x]=w/2/Math.PI+.5)}function S(M){return Math.atan2(M.z,-M.x)}function y(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}static fromJSON(t){return new dn(t.vertices,t.indices,t.radius,t.details)}}class _c extends dn{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,n=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,o,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new _c(t.radius,t.detail)}}const Do=new C,Co=new C,z_=new C,Po=new je;class NT extends de{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const n=Math.pow(10,4),a=Math.cos(Qo*e),o=t.getIndex(),c=t.getAttribute("position"),_=o?o.count:c.count,l=[0,0,0],u=["a","b","c"],p=new Array(3),f={},d=[];for(let A=0;A<_;A+=3){o?(l[0]=o.getX(A),l[1]=o.getX(A+1),l[2]=o.getX(A+2)):(l[0]=A,l[1]=A+1,l[2]=A+2);const{a:E,b:S,c:y}=Po;if(E.fromBufferAttribute(c,l[0]),S.fromBufferAttribute(c,l[1]),y.fromBufferAttribute(c,l[2]),Po.getNormal(z_),p[0]=`${Math.round(E.x*n)},${Math.round(E.y*n)},${Math.round(E.z*n)}`,p[1]=`${Math.round(S.x*n)},${Math.round(S.y*n)},${Math.round(S.z*n)}`,p[2]=`${Math.round(y.x*n)},${Math.round(y.y*n)},${Math.round(y.z*n)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let M=0;M<3;M++){const x=(M+1)%3,I=p[M],w=p[x],D=Po[u[M]],m=Po[u[x]],U=`${I}_${w}`,q=`${w}_${I}`;q in f&&f[q]?(z_.dot(f[q].normal)<=a&&(d.push(D.x,D.y,D.z),d.push(m.x,m.y,m.z)),f[q]=null):U in f||(f[U]={index0:l[M],index1:l[x],normal:z_.clone()})}}for(const A in f)if(f[A]){const{index0:E,index1:S}=f[A];Do.fromBufferAttribute(c,E),Co.fromBufferAttribute(c,S),d.push(Do.x,Do.y,Do.z),d.push(Co.x,Co.y,Co.z)}this.setAttribute("position",new se(d,3))}}}class zs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,n=this.getPoint(0),a=0;e.push(0);for(let o=1;o<=t;o++)i=this.getPoint(o/t),a+=i.distanceTo(n),e.push(a),n=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let n=0;const a=i.length;let o;e?o=e:o=t*i[a-1];let c=0,_=a-1,l;for(;c<=_;)if(n=Math.floor(c+(_-c)/2),l=i[n]-o,l<0)c=n+1;else if(l>0)_=n-1;else{_=n;break}if(n=_,i[n]===o)return n/(a-1);const u=i[n],f=i[n+1]-u,d=(o-u)/f;return(n+d)/(a-1)}getTangent(t,e){let n=t-1e-4,a=t+1e-4;n<0&&(n=0),a>1&&(a=1);const o=this.getPoint(n),c=this.getPoint(a),_=e||(o.isVector2?new dt:new C);return _.copy(c).sub(o).normalize(),_}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new C,n=[],a=[],o=[],c=new C,_=new jt;for(let d=0;d<=t;d++){const A=d/t;n[d]=this.getTangentAt(A,new C)}a[0]=new C,o[0]=new C;let l=Number.MAX_VALUE;const u=Math.abs(n[0].x),p=Math.abs(n[0].y),f=Math.abs(n[0].z);u<=l&&(l=u,i.set(1,0,0)),p<=l&&(l=p,i.set(0,1,0)),f<=l&&i.set(0,0,1),c.crossVectors(n[0],i).normalize(),a[0].crossVectors(n[0],c),o[0].crossVectors(n[0],a[0]);for(let d=1;d<=t;d++){if(a[d]=a[d-1].clone(),o[d]=o[d-1].clone(),c.crossVectors(n[d-1],n[d]),c.length()>Number.EPSILON){c.normalize();const A=Math.acos(Ms(n[d-1].dot(n[d]),-1,1));a[d].applyMatrix4(_.makeRotationAxis(c,A))}o[d].crossVectors(n[d],a[d])}if(e===!0){let d=Math.acos(Ms(a[0].dot(a[t]),-1,1));d/=t,n[0].dot(c.crossVectors(a[0],a[t]))>0&&(d=-d);for(let A=1;A<=t;A++)a[A].applyMatrix4(_.makeRotationAxis(n[A],d*A)),o[A].crossVectors(n[A],a[A])}return{tangents:n,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Uc extends zs{constructor(t=0,e=0,i=1,n=1,a=0,o=Math.PI*2,c=!1,_=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=c,this.aRotation=_}getPoint(t,e){const i=e||new dt,n=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=n;for(;a>n;)a-=n;a<Number.EPSILON&&(o?a=0:a=n),this.aClockwise===!0&&!o&&(a===n?a=-n:a=a-n);const c=this.aStartAngle+t*a;let _=this.aX+this.xRadius*Math.cos(c),l=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const u=Math.cos(this.aRotation),p=Math.sin(this.aRotation),f=_-this.aX,d=l-this.aY;_=f*u-d*p+this.aX,l=f*p+d*u+this.aY}return i.set(_,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Uc.prototype.isEllipseCurve=!0;class Kp extends Uc{constructor(t,e,i,n,a,o){super(t,e,i,i,n,a,o),this.type="ArcCurve"}}Kp.prototype.isArcCurve=!0;function Yl(){let r=0,t=0,e=0,i=0;function n(a,o,c,_){r=a,t=c,e=-3*a+3*o-2*c-_,i=2*a-2*o+c+_}return{initCatmullRom:function(a,o,c,_,l){n(o,c,l*(c-a),l*(_-o))},initNonuniformCatmullRom:function(a,o,c,_,l,u,p){let f=(o-a)/l-(c-a)/(l+u)+(c-o)/u,d=(c-o)/u-(_-o)/(u+p)+(_-c)/p;f*=u,d*=u,n(o,c,f,d)},calc:function(a){const o=a*a,c=o*a;return r+t*a+e*o+i*c}}}const Bo=new C,W_=new Yl,Y_=new Yl,K_=new Yl;class qp extends zs{constructor(t=[],e=!1,i="centripetal",n=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=n}getPoint(t,e=new C){const i=e,n=this.points,a=n.length,o=(a-(this.closed?0:1))*t;let c=Math.floor(o),_=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/a)+1)*a:_===0&&c===a-1&&(c=a-2,_=1);let l,u;this.closed||c>0?l=n[(c-1)%a]:(Bo.subVectors(n[0],n[1]).add(n[0]),l=Bo);const p=n[c%a],f=n[(c+1)%a];if(this.closed||c+2<a?u=n[(c+2)%a]:(Bo.subVectors(n[a-1],n[a-2]).add(n[a-1]),u=Bo),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let A=Math.pow(l.distanceToSquared(p),d),E=Math.pow(p.distanceToSquared(f),d),S=Math.pow(f.distanceToSquared(u),d);E<1e-4&&(E=1),A<1e-4&&(A=E),S<1e-4&&(S=E),W_.initNonuniformCatmullRom(l.x,p.x,f.x,u.x,A,E,S),Y_.initNonuniformCatmullRom(l.y,p.y,f.y,u.y,A,E,S),K_.initNonuniformCatmullRom(l.z,p.z,f.z,u.z,A,E,S)}else this.curveType==="catmullrom"&&(W_.initCatmullRom(l.x,p.x,f.x,u.x,this.tension),Y_.initCatmullRom(l.y,p.y,f.y,u.y,this.tension),K_.initCatmullRom(l.z,p.z,f.z,u.z,this.tension));return i.set(W_.calc(_),Y_.calc(_),K_.calc(_)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const n=t.points[e];this.points.push(new C().fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}qp.prototype.isCatmullRomCurve3=!0;function af(r,t,e,i,n){const a=(i-t)*.5,o=(n-e)*.5,c=r*r,_=r*c;return(2*e-2*i+a+o)*_+(-3*e+3*i-2*a-o)*c+a*r+e}function bT(r,t){const e=1-r;return e*e*t}function DT(r,t){return 2*(1-r)*r*t}function CT(r,t){return r*r*t}function Ea(r,t,e,i){return bT(r,t)+DT(r,e)+CT(r,i)}function PT(r,t){const e=1-r;return e*e*e*t}function BT(r,t){const e=1-r;return 3*e*e*r*t}function VT(r,t){return 3*(1-r)*r*r*t}function GT(r,t){return r*r*r*t}function Ma(r,t,e,i,n){return PT(r,t)+BT(r,e)+VT(r,i)+GT(r,n)}class Kl extends zs{constructor(t=new dt,e=new dt,i=new dt,n=new dt){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new dt){const i=e,n=this.v0,a=this.v1,o=this.v2,c=this.v3;return i.set(Ma(t,n.x,a.x,o.x,c.x),Ma(t,n.y,a.y,o.y,c.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Kl.prototype.isCubicBezierCurve=!0;class Xp extends zs{constructor(t=new C,e=new C,i=new C,n=new C){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new C){const i=e,n=this.v0,a=this.v1,o=this.v2,c=this.v3;return i.set(Ma(t,n.x,a.x,o.x,c.x),Ma(t,n.y,a.y,o.y,c.y),Ma(t,n.z,a.z,o.z,c.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Xp.prototype.isCubicBezierCurve3=!0;class kc extends zs{constructor(t=new dt,e=new dt){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new dt){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const i=e||new dt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}kc.prototype.isLineCurve=!0;class UT extends zs{constructor(t=new C,e=new C){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new C){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class ql extends zs{constructor(t=new dt,e=new dt,i=new dt){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new dt){const i=e,n=this.v0,a=this.v1,o=this.v2;return i.set(Ea(t,n.x,a.x,o.x),Ea(t,n.y,a.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}ql.prototype.isQuadraticBezierCurve=!0;class Xl extends zs{constructor(t=new C,e=new C,i=new C){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new C){const i=e,n=this.v0,a=this.v1,o=this.v2;return i.set(Ea(t,n.x,a.x,o.x),Ea(t,n.y,a.y,o.y),Ea(t,n.z,a.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Xl.prototype.isQuadraticBezierCurve3=!0;class jl extends zs{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new dt){const i=e,n=this.points,a=(n.length-1)*t,o=Math.floor(a),c=a-o,_=n[o===0?o:o-1],l=n[o],u=n[o>n.length-2?n.length-1:o+1],p=n[o>n.length-3?n.length-1:o+2];return i.set(af(c,_.x,l.x,u.x,p.x),af(c,_.y,l.y,u.y,p.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const n=t.points[e];this.points.push(new dt().fromArray(n))}return this}}jl.prototype.isSplineCurve=!0;var Ql=Object.freeze({__proto__:null,ArcCurve:Kp,CatmullRomCurve3:qp,CubicBezierCurve:Kl,CubicBezierCurve3:Xp,EllipseCurve:Uc,LineCurve:kc,LineCurve3:UT,QuadraticBezierCurve:ql,QuadraticBezierCurve3:Xl,SplineCurve:jl});class kT extends zs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new kc(e,t))}getPoint(t,e){const i=t*this.getLength(),n=this.getCurveLengths();let a=0;for(;a<n.length;){if(n[a]>=i){const o=n[a]-i,c=this.curves[a],_=c.getLength(),l=_===0?0:1-o/_;return c.getPointAt(l,e)}a++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let n=0,a=this.curves;n<a.length;n++){const o=a[n],c=o&&o.isEllipseCurve?t*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,_=o.getPoints(c);for(let l=0;l<_.length;l++){const u=_[l];i&&i.equals(u)||(e.push(u),i=u)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const n=t.curves[e];this.curves.push(new Ql[n.type]().fromJSON(n))}return this}}class ml extends kT{constructor(t){super(),this.type="Path",this.currentPoint=new dt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new kc(this.currentPoint.clone(),new dt(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,n){const a=new ql(this.currentPoint.clone(),new dt(t,e),new dt(i,n));return this.curves.push(a),this.currentPoint.set(i,n),this}bezierCurveTo(t,e,i,n,a,o){const c=new Kl(this.currentPoint.clone(),new dt(t,e),new dt(i,n),new dt(a,o));return this.curves.push(c),this.currentPoint.set(a,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new jl(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,n,a,o){const c=this.currentPoint.x,_=this.currentPoint.y;return this.absarc(t+c,e+_,i,n,a,o),this}absarc(t,e,i,n,a,o){return this.absellipse(t,e,i,i,n,a,o),this}ellipse(t,e,i,n,a,o,c,_){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+l,e+u,i,n,a,o,c,_),this}absellipse(t,e,i,n,a,o,c,_){const l=new Uc(t,e,i,n,a,o,c,_);if(this.curves.length>0){const p=l.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}let Fr=class extends ml{constructor(t){super(t),this.uuid=ii(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const n=t.holes[e];this.holes.push(new ml().fromJSON(n))}return this}};const FT={triangulate:function(r,t,e=2){const i=t&&t.length,n=i?t[0]*e:r.length;let a=jp(r,0,n,e,!0);const o=[];if(!a||a.next===a.prev)return o;let c,_,l,u,p,f,d;if(i&&(a=KT(r,t,a,e)),r.length>80*e){c=l=r[0],_=u=r[1];for(let A=e;A<n;A+=e)p=r[A],f=r[A+1],p<c&&(c=p),f<_&&(_=f),p>l&&(l=p),f>u&&(u=f);d=Math.max(l-c,u-_),d=d!==0?1/d:0}return Oa(a,o,e,c,_,d),o}};function jp(r,t,e,i,n){let a,o;if(n===iS(r,t,e,i)>0)for(a=t;a<e;a+=i)o=of(a,r[a],r[a+1],o);else for(a=e-i;a>=t;a-=i)o=of(a,r[a],r[a+1],o);return o&&Fc(o,o.next)&&(La(o),o=o.next),o}function mn(r,t){if(!r)return r;t||(t=r);let e=r,i;do if(i=!1,!e.steiner&&(Fc(e,e.next)||Ue(e.prev,e,e.next)===0)){if(La(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Oa(r,t,e,i,n,a,o){if(!r)return;!o&&a&&ZT(r,i,n,a);let c=r,_,l;for(;r.prev!==r.next;){if(_=r.prev,l=r.next,a?zT(r,i,n,a):HT(r)){t.push(_.i/e),t.push(r.i/e),t.push(l.i/e),La(r),r=l.next,c=l.next;continue}if(r=l,r===c){o?o===1?(r=WT(mn(r),t,e),Oa(r,t,e,i,n,a,2)):o===2&&YT(r,t,e,i,n,a):Oa(mn(r),t,e,i,n,a,1);break}}}function HT(r){const t=r.prev,e=r,i=r.next;if(Ue(t,e,i)>=0)return!1;let n=r.next.next;for(;n!==r.prev;){if(Tr(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y)&&Ue(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function zT(r,t,e,i){const n=r.prev,a=r,o=r.next;if(Ue(n,a,o)>=0)return!1;const c=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,_=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,l=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,u=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,p=gl(c,_,t,e,i),f=gl(l,u,t,e,i);let d=r.prevZ,A=r.nextZ;for(;d&&d.z>=p&&A&&A.z<=f;){if(d!==r.prev&&d!==r.next&&Tr(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ue(d.prev,d,d.next)>=0||(d=d.prevZ,A!==r.prev&&A!==r.next&&Tr(n.x,n.y,a.x,a.y,o.x,o.y,A.x,A.y)&&Ue(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;d&&d.z>=p;){if(d!==r.prev&&d!==r.next&&Tr(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ue(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;A&&A.z<=f;){if(A!==r.prev&&A!==r.next&&Tr(n.x,n.y,a.x,a.y,o.x,o.y,A.x,A.y)&&Ue(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function WT(r,t,e){let i=r;do{const n=i.prev,a=i.next.next;!Fc(n,a)&&Qp(n,i,i.next,a)&&wa(n,a)&&wa(a,n)&&(t.push(n.i/e),t.push(i.i/e),t.push(a.i/e),La(i),La(i.next),i=r=a),i=i.next}while(i!==r);return mn(i)}function YT(r,t,e,i,n,a){let o=r;do{let c=o.next.next;for(;c!==o.prev;){if(o.i!==c.i&&tS(o,c)){let _=Zp(o,c);o=mn(o,o.next),_=mn(_,_.next),Oa(o,t,e,i,n,a),Oa(_,t,e,i,n,a);return}c=c.next}o=o.next}while(o!==r)}function KT(r,t,e,i){const n=[];let a,o,c,_,l;for(a=0,o=t.length;a<o;a++)c=t[a]*i,_=a<o-1?t[a+1]*i:r.length,l=jp(r,c,_,i,!1),l===l.next&&(l.steiner=!0),n.push(JT(l));for(n.sort(qT),a=0;a<n.length;a++)XT(n[a],e),e=mn(e,e.next);return e}function qT(r,t){return r.x-t.x}function XT(r,t){if(t=jT(r,t),t){const e=Zp(t,r);mn(t,t.next),mn(e,e.next)}}function jT(r,t){let e=t;const i=r.x,n=r.y;let a=-1/0,o;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){const f=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(f<=i&&f>a){if(a=f,f===i){if(n===e.y)return e;if(n===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!o)return null;if(i===a)return o;const c=o,_=o.x,l=o.y;let u=1/0,p;e=o;do i>=e.x&&e.x>=_&&i!==e.x&&Tr(n<l?i:a,n,_,l,n<l?a:i,n,e.x,e.y)&&(p=Math.abs(n-e.y)/(i-e.x),wa(e,r)&&(p<u||p===u&&(e.x>o.x||e.x===o.x&&QT(o,e)))&&(o=e,u=p)),e=e.next;while(e!==c);return o}function QT(r,t){return Ue(r.prev,r,t.prev)<0&&Ue(t.next,r,r.next)<0}function ZT(r,t,e,i){let n=r;do n.z===null&&(n.z=gl(n.x,n.y,t,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,$T(n)}function $T(r){let t,e,i,n,a,o,c,_,l=1;do{for(e=r,r=null,a=null,o=0;e;){for(o++,i=e,c=0,t=0;t<l&&(c++,i=i.nextZ,!!i);t++);for(_=l;c>0||_>0&&i;)c!==0&&(_===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,c--):(n=i,i=i.nextZ,_--),a?a.nextZ=n:r=n,n.prevZ=a,a=n;e=i}a.nextZ=null,l*=2}while(o>1);return r}function gl(r,t,e,i,n){return r=32767*(r-e)*n,t=32767*(t-i)*n,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function JT(r){let t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function Tr(r,t,e,i,n,a,o,c){return(n-o)*(t-c)-(r-o)*(a-c)>=0&&(r-o)*(i-c)-(e-o)*(t-c)>=0&&(e-o)*(a-c)-(n-o)*(i-c)>=0}function tS(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!eS(r,t)&&(wa(r,t)&&wa(t,r)&&sS(r,t)&&(Ue(r.prev,r,t.prev)||Ue(r,t.prev,t))||Fc(r,t)&&Ue(r.prev,r,r.next)>0&&Ue(t.prev,t,t.next)>0)}function Ue(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function Fc(r,t){return r.x===t.x&&r.y===t.y}function Qp(r,t,e,i){const n=Go(Ue(r,t,e)),a=Go(Ue(r,t,i)),o=Go(Ue(e,i,r)),c=Go(Ue(e,i,t));return!!(n!==a&&o!==c||n===0&&Vo(r,e,t)||a===0&&Vo(r,i,t)||o===0&&Vo(e,r,i)||c===0&&Vo(e,t,i))}function Vo(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function Go(r){return r>0?1:r<0?-1:0}function eS(r,t){let e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&Qp(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function wa(r,t){return Ue(r.prev,r,r.next)<0?Ue(r,t,r.next)>=0&&Ue(r,r.prev,t)>=0:Ue(r,t,r.prev)<0||Ue(r,r.next,t)<0}function sS(r,t){let e=r,i=!1;const n=(r.x+t.x)/2,a=(r.y+t.y)/2;do e.y>a!=e.next.y>a&&e.next.y!==e.y&&n<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function Zp(r,t){const e=new Al(r.i,r.x,r.y),i=new Al(t.i,t.x,t.y),n=r.next,a=t.prev;return r.next=t,t.prev=r,e.next=n,n.prev=e,i.next=e,e.prev=i,a.next=i,i.prev=a,i}function of(r,t,e,i){const n=new Al(r,t,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function La(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Al(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function iS(r,t,e,i){let n=0;for(let a=t,o=e-i;a<e;a+=i)n+=(r[o]-r[a])*(r[a+1]+r[o+1]),o=a;return n}class _n{static area(t){const e=t.length;let i=0;for(let n=e-1,a=0;a<e;n=a++)i+=t[n].x*t[a].y-t[a].x*t[n].y;return i*.5}static isClockWise(t){return _n.area(t)<0}static triangulateShape(t,e){const i=[],n=[],a=[];cf(t),_f(i,t);let o=t.length;e.forEach(cf);for(let _=0;_<e.length;_++)n.push(o),o+=e[_].length,_f(i,e[_]);const c=FT.triangulate(i,n);for(let _=0;_<c.length;_+=3)a.push(c.slice(_,_+3));return a}}function cf(r){const t=r.length;t>2&&r[t-1].equals(r[0])&&r.pop()}function _f(r,t){for(let e=0;e<t.length;e++)r.push(t[e].x),r.push(t[e].y)}class gn extends de{constructor(t=new Fr([new dt(.5,.5),new dt(-.5,.5),new dt(-.5,-.5),new dt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,n=[],a=[];for(let c=0,_=t.length;c<_;c++){const l=t[c];o(l)}this.setAttribute("position",new se(n,3)),this.setAttribute("uv",new se(a,2)),this.computeVertexNormals();function o(c){const _=[],l=e.curveSegments!==void 0?e.curveSegments:12,u=e.steps!==void 0?e.steps:1;let p=e.depth!==void 0?e.depth:1,f=e.bevelEnabled!==void 0?e.bevelEnabled:!0,d=e.bevelThickness!==void 0?e.bevelThickness:.2,A=e.bevelSize!==void 0?e.bevelSize:d-.1,E=e.bevelOffset!==void 0?e.bevelOffset:0,S=e.bevelSegments!==void 0?e.bevelSegments:3;const y=e.extrudePath,M=e.UVGenerator!==void 0?e.UVGenerator:nS;e.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),p=e.amount);let x,I=!1,w,D,m,U;y&&(x=y.getSpacedPoints(u),I=!0,f=!1,w=y.computeFrenetFrames(u,!1),D=new C,m=new C,U=new C),f||(S=0,d=0,A=0,E=0);const q=c.extractPoints(l);let Y=q.shape;const F=q.holes;if(!_n.isClockWise(Y)){Y=Y.reverse();for(let lt=0,Mt=F.length;lt<Mt;lt++){const Ot=F[lt];_n.isClockWise(Ot)&&(F[lt]=Ot.reverse())}}const G=_n.triangulateShape(Y,F),K=Y;for(let lt=0,Mt=F.length;lt<Mt;lt++){const Ot=F[lt];Y=Y.concat(Ot)}function X(lt,Mt,Ot){return Mt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Mt.clone().multiplyScalar(Ot).add(lt)}const z=Y.length,J=G.length;function _t(lt,Mt,Ot){let Yt,Lt,k;const P=lt.x-Mt.x,ht=lt.y-Mt.y,xt=Ot.x-lt.x,It=Ot.y-lt.y,Nt=P*P+ht*ht,Qt=P*It-ht*xt;if(Math.abs(Qt)>Number.EPSILON){const Kt=Math.sqrt(Nt),yt=Math.sqrt(xt*xt+It*It),Pt=Mt.x-ht/Kt,$=Mt.y+P/Kt,Dt=Ot.x-It/yt,At=Ot.y+xt/yt,Ut=((Dt-Pt)*It-(At-$)*xt)/(P*It-ht*xt);Yt=Pt+P*Ut-lt.x,Lt=$+ht*Ut-lt.y;const j=Yt*Yt+Lt*Lt;if(j<=2)return new dt(Yt,Lt);k=Math.sqrt(j/2)}else{let Kt=!1;P>Number.EPSILON?xt>Number.EPSILON&&(Kt=!0):P<-Number.EPSILON?xt<-Number.EPSILON&&(Kt=!0):Math.sign(ht)===Math.sign(It)&&(Kt=!0),Kt?(Yt=-ht,Lt=P,k=Math.sqrt(Nt)):(Yt=P,Lt=ht,k=Math.sqrt(Nt/2))}return new dt(Yt/k,Lt/k)}const gt=[];for(let lt=0,Mt=K.length,Ot=Mt-1,Yt=lt+1;lt<Mt;lt++,Ot++,Yt++)Ot===Mt&&(Ot=0),Yt===Mt&&(Yt=0),gt[lt]=_t(K[lt],K[Ot],K[Yt]);const bt=[];let vt,Et=gt.concat();for(let lt=0,Mt=F.length;lt<Mt;lt++){const Ot=F[lt];vt=[];for(let Yt=0,Lt=Ot.length,k=Lt-1,P=Yt+1;Yt<Lt;Yt++,k++,P++)k===Lt&&(k=0),P===Lt&&(P=0),vt[Yt]=_t(Ot[Yt],Ot[k],Ot[P]);bt.push(vt),Et=Et.concat(vt)}for(let lt=0;lt<S;lt++){const Mt=lt/S,Ot=d*Math.cos(Mt*Math.PI/2),Yt=A*Math.sin(Mt*Math.PI/2)+E;for(let Lt=0,k=K.length;Lt<k;Lt++){const P=X(K[Lt],gt[Lt],Yt);Xt(P.x,P.y,-Ot)}for(let Lt=0,k=F.length;Lt<k;Lt++){const P=F[Lt];vt=bt[Lt];for(let ht=0,xt=P.length;ht<xt;ht++){const It=X(P[ht],vt[ht],Yt);Xt(It.x,It.y,-Ot)}}}const pt=A+E;for(let lt=0;lt<z;lt++){const Mt=f?X(Y[lt],Et[lt],pt):Y[lt];I?(m.copy(w.normals[0]).multiplyScalar(Mt.x),D.copy(w.binormals[0]).multiplyScalar(Mt.y),U.copy(x[0]).add(m).add(D),Xt(U.x,U.y,U.z)):Xt(Mt.x,Mt.y,0)}for(let lt=1;lt<=u;lt++)for(let Mt=0;Mt<z;Mt++){const Ot=f?X(Y[Mt],Et[Mt],pt):Y[Mt];I?(m.copy(w.normals[lt]).multiplyScalar(Ot.x),D.copy(w.binormals[lt]).multiplyScalar(Ot.y),U.copy(x[lt]).add(m).add(D),Xt(U.x,U.y,U.z)):Xt(Ot.x,Ot.y,p/u*lt)}for(let lt=S-1;lt>=0;lt--){const Mt=lt/S,Ot=d*Math.cos(Mt*Math.PI/2),Yt=A*Math.sin(Mt*Math.PI/2)+E;for(let Lt=0,k=K.length;Lt<k;Lt++){const P=X(K[Lt],gt[Lt],Yt);Xt(P.x,P.y,p+Ot)}for(let Lt=0,k=F.length;Lt<k;Lt++){const P=F[Lt];vt=bt[Lt];for(let ht=0,xt=P.length;ht<xt;ht++){const It=X(P[ht],vt[ht],Yt);I?Xt(It.x,It.y+x[u-1].y,x[u-1].x+Ot):Xt(It.x,It.y,p+Ot)}}}St(),Ft();function St(){const lt=n.length/3;if(f){let Mt=0,Ot=z*Mt;for(let Yt=0;Yt<J;Yt++){const Lt=G[Yt];te(Lt[2]+Ot,Lt[1]+Ot,Lt[0]+Ot)}Mt=u+S*2,Ot=z*Mt;for(let Yt=0;Yt<J;Yt++){const Lt=G[Yt];te(Lt[0]+Ot,Lt[1]+Ot,Lt[2]+Ot)}}else{for(let Mt=0;Mt<J;Mt++){const Ot=G[Mt];te(Ot[2],Ot[1],Ot[0])}for(let Mt=0;Mt<J;Mt++){const Ot=G[Mt];te(Ot[0]+z*u,Ot[1]+z*u,Ot[2]+z*u)}}i.addGroup(lt,n.length/3-lt,0)}function Ft(){const lt=n.length/3;let Mt=0;ot(K,Mt),Mt+=K.length;for(let Ot=0,Yt=F.length;Ot<Yt;Ot++){const Lt=F[Ot];ot(Lt,Mt),Mt+=Lt.length}i.addGroup(lt,n.length/3-lt,1)}function ot(lt,Mt){let Ot=lt.length;for(;--Ot>=0;){const Yt=Ot;let Lt=Ot-1;Lt<0&&(Lt=lt.length-1);for(let k=0,P=u+S*2;k<P;k++){const ht=z*k,xt=z*(k+1),It=Mt+Yt+ht,Nt=Mt+Lt+ht,Qt=Mt+Lt+xt,Kt=Mt+Yt+xt;kt(It,Nt,Qt,Kt)}}}function Xt(lt,Mt,Ot){_.push(lt),_.push(Mt),_.push(Ot)}function te(lt,Mt,Ot){Bt(lt),Bt(Mt),Bt(Ot);const Yt=n.length/3,Lt=M.generateTopUV(i,n,Yt-3,Yt-2,Yt-1);ie(Lt[0]),ie(Lt[1]),ie(Lt[2])}function kt(lt,Mt,Ot,Yt){Bt(lt),Bt(Mt),Bt(Yt),Bt(Mt),Bt(Ot),Bt(Yt);const Lt=n.length/3,k=M.generateSideWallUV(i,n,Lt-6,Lt-3,Lt-2,Lt-1);ie(k[0]),ie(k[1]),ie(k[3]),ie(k[1]),ie(k[2]),ie(k[3])}function Bt(lt){n.push(_[lt*3+0]),n.push(_[lt*3+1]),n.push(_[lt*3+2])}function ie(lt){a.push(lt.x),a.push(lt.y)}}}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return rS(e,i,t)}static fromJSON(t,e){const i=[];for(let a=0,o=t.shapes.length;a<o;a++){const c=e[t.shapes[a]];i.push(c)}const n=t.options.extrudePath;return n!==void 0&&(t.options.extrudePath=new Ql[n.type]().fromJSON(n)),new gn(i,t.options)}}const nS={generateTopUV:function(r,t,e,i,n){const a=t[e*3],o=t[e*3+1],c=t[i*3],_=t[i*3+1],l=t[n*3],u=t[n*3+1];return[new dt(a,o),new dt(c,_),new dt(l,u)]},generateSideWallUV:function(r,t,e,i,n,a){const o=t[e*3],c=t[e*3+1],_=t[e*3+2],l=t[i*3],u=t[i*3+1],p=t[i*3+2],f=t[n*3],d=t[n*3+1],A=t[n*3+2],E=t[a*3],S=t[a*3+1],y=t[a*3+2];return Math.abs(c-u)<Math.abs(o-l)?[new dt(o,1-_),new dt(l,1-p),new dt(f,1-A),new dt(E,1-y)]:[new dt(c,1-_),new dt(u,1-p),new dt(d,1-A),new dt(S,1-y)]}};function rS(r,t,e){if(e.shapes=[],Array.isArray(r))for(let i=0,n=r.length;i<n;i++){const a=r[i];e.shapes.push(a.uuid)}else e.shapes.push(r.uuid);return t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class lc extends dn{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(n,a,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new lc(t.radius,t.detail)}}class hc extends de{constructor(t=[new dt(0,.5),new dt(.5,0),new dt(0,-.5)],e=12,i=0,n=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=Math.floor(e),n=Ms(n,0,Math.PI*2);const a=[],o=[],c=[],_=1/e,l=new C,u=new dt;for(let p=0;p<=e;p++){const f=i+p*_*n,d=Math.sin(f),A=Math.cos(f);for(let E=0;E<=t.length-1;E++)l.x=t[E].x*d,l.y=t[E].y,l.z=t[E].x*A,o.push(l.x,l.y,l.z),u.x=p/e,u.y=E/(t.length-1),c.push(u.x,u.y)}for(let p=0;p<e;p++)for(let f=0;f<t.length-1;f++){const d=f+p*t.length,A=d,E=d+t.length,S=d+t.length+1,y=d+1;a.push(A,E,y),a.push(E,S,y)}if(this.setIndex(a),this.setAttribute("position",new se(o,3)),this.setAttribute("uv",new se(c,2)),this.computeVertexNormals(),n===Math.PI*2){const p=this.attributes.normal.array,f=new C,d=new C,A=new C,E=e*t.length*3;for(let S=0,y=0;S<t.length;S++,y+=3)f.x=p[y+0],f.y=p[y+1],f.z=p[y+2],d.x=p[E+y+0],d.y=p[E+y+1],d.z=p[E+y+2],A.addVectors(f,d).normalize(),p[y+0]=p[E+y+0]=A.x,p[y+1]=p[E+y+1]=A.y,p[y+2]=p[E+y+2]=A.z}}static fromJSON(t){return new hc(t.points,t.segments,t.phiStart,t.phiLength)}}class uc extends dn{constructor(t=1,e=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,n,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new uc(t.radius,t.detail)}}class fc extends de{constructor(t=.5,e=1,i=8,n=1,a=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:a,thetaLength:o},i=Math.max(3,i),n=Math.max(1,n);const c=[],_=[],l=[],u=[];let p=t;const f=(e-t)/n,d=new C,A=new dt;for(let E=0;E<=n;E++){for(let S=0;S<=i;S++){const y=a+S/i*o;d.x=p*Math.cos(y),d.y=p*Math.sin(y),_.push(d.x,d.y,d.z),l.push(0,0,1),A.x=(d.x/e+1)/2,A.y=(d.y/e+1)/2,u.push(A.x,A.y)}p+=f}for(let E=0;E<n;E++){const S=E*(i+1);for(let y=0;y<i;y++){const M=y+S,x=M,I=M+i+1,w=M+i+2,D=M+1;c.push(x,I,D),c.push(I,w,D)}}this.setIndex(c),this.setAttribute("position",new se(_,3)),this.setAttribute("normal",new se(l,3)),this.setAttribute("uv",new se(u,2))}static fromJSON(t){return new fc(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class Na extends de{constructor(t=new Fr([new dt(0,.5),new dt(-.5,-.5),new dt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],n=[],a=[],o=[];let c=0,_=0;if(Array.isArray(t)===!1)l(t);else for(let u=0;u<t.length;u++)l(t[u]),this.addGroup(c,_,u),c+=_,_=0;this.setIndex(i),this.setAttribute("position",new se(n,3)),this.setAttribute("normal",new se(a,3)),this.setAttribute("uv",new se(o,2));function l(u){const p=n.length/3,f=u.extractPoints(e);let d=f.shape;const A=f.holes;_n.isClockWise(d)===!1&&(d=d.reverse());for(let S=0,y=A.length;S<y;S++){const M=A[S];_n.isClockWise(M)===!0&&(A[S]=M.reverse())}const E=_n.triangulateShape(d,A);for(let S=0,y=A.length;S<y;S++){const M=A[S];d=d.concat(M)}for(let S=0,y=d.length;S<y;S++){const M=d[S];n.push(M.x,M.y,0),a.push(0,0,1),o.push(M.x,M.y)}for(let S=0,y=E.length;S<y;S++){const M=E[S],x=M[0]+p,I=M[1]+p,w=M[2]+p;i.push(x,I,w),_+=3}}}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return aS(e,t)}static fromJSON(t,e){const i=[];for(let n=0,a=t.shapes.length;n<a;n++){const o=e[t.shapes[n]];i.push(o)}return new Na(i,t.curveSegments)}}function aS(r,t){if(t.shapes=[],Array.isArray(r))for(let e=0,i=r.length;e<i;e++){const n=r[e];t.shapes.push(n.uuid)}else t.shapes.push(r.uuid);return t}class ba extends de{constructor(t=1,e=32,i=16,n=0,a=Math.PI*2,o=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:a,thetaStart:o,thetaLength:c},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const _=Math.min(o+c,Math.PI);let l=0;const u=[],p=new C,f=new C,d=[],A=[],E=[],S=[];for(let y=0;y<=i;y++){const M=[],x=y/i;let I=0;y==0&&o==0?I=.5/e:y==i&&_==Math.PI&&(I=-.5/e);for(let w=0;w<=e;w++){const D=w/e;p.x=-t*Math.cos(n+D*a)*Math.sin(o+x*c),p.y=t*Math.cos(o+x*c),p.z=t*Math.sin(n+D*a)*Math.sin(o+x*c),A.push(p.x,p.y,p.z),f.copy(p).normalize(),E.push(f.x,f.y,f.z),S.push(D+I,1-x),M.push(l++)}u.push(M)}for(let y=0;y<i;y++)for(let M=0;M<e;M++){const x=u[y][M+1],I=u[y][M],w=u[y+1][M],D=u[y+1][M+1];(y!==0||o>0)&&d.push(x,I,D),(y!==i-1||_<Math.PI)&&d.push(I,w,D)}this.setIndex(d),this.setAttribute("position",new se(A,3)),this.setAttribute("normal",new se(E,3)),this.setAttribute("uv",new se(S,2))}static fromJSON(t){return new ba(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class pc extends dn{constructor(t=1,e=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,n,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new pc(t.radius,t.detail)}}class dc extends de{constructor(t=1,e=.4,i=8,n=6,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:a},i=Math.floor(i),n=Math.floor(n);const o=[],c=[],_=[],l=[],u=new C,p=new C,f=new C;for(let d=0;d<=i;d++)for(let A=0;A<=n;A++){const E=A/n*a,S=d/i*Math.PI*2;p.x=(t+e*Math.cos(S))*Math.cos(E),p.y=(t+e*Math.cos(S))*Math.sin(E),p.z=e*Math.sin(S),c.push(p.x,p.y,p.z),u.x=t*Math.cos(E),u.y=t*Math.sin(E),f.subVectors(p,u).normalize(),_.push(f.x,f.y,f.z),l.push(A/n),l.push(d/i)}for(let d=1;d<=i;d++)for(let A=1;A<=n;A++){const E=(n+1)*d+A-1,S=(n+1)*(d-1)+A-1,y=(n+1)*(d-1)+A,M=(n+1)*d+A;o.push(E,S,M),o.push(S,y,M)}this.setIndex(o),this.setAttribute("position",new se(c,3)),this.setAttribute("normal",new se(_,3)),this.setAttribute("uv",new se(l,2))}static fromJSON(t){return new dc(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class mc extends de{constructor(t=1,e=.4,i=64,n=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:a,q:o},i=Math.floor(i),n=Math.floor(n);const c=[],_=[],l=[],u=[],p=new C,f=new C,d=new C,A=new C,E=new C,S=new C,y=new C;for(let x=0;x<=i;++x){const I=x/i*a*Math.PI*2;M(I,a,o,t,d),M(I+.01,a,o,t,A),S.subVectors(A,d),y.addVectors(A,d),E.crossVectors(S,y),y.crossVectors(E,S),E.normalize(),y.normalize();for(let w=0;w<=n;++w){const D=w/n*Math.PI*2,m=-e*Math.cos(D),U=e*Math.sin(D);p.x=d.x+(m*y.x+U*E.x),p.y=d.y+(m*y.y+U*E.y),p.z=d.z+(m*y.z+U*E.z),_.push(p.x,p.y,p.z),f.subVectors(p,d).normalize(),l.push(f.x,f.y,f.z),u.push(x/i),u.push(w/n)}}for(let x=1;x<=i;x++)for(let I=1;I<=n;I++){const w=(n+1)*(x-1)+(I-1),D=(n+1)*x+(I-1),m=(n+1)*x+I,U=(n+1)*(x-1)+I;c.push(w,D,U),c.push(D,m,U)}this.setIndex(c),this.setAttribute("position",new se(_,3)),this.setAttribute("normal",new se(l,3)),this.setAttribute("uv",new se(u,2));function M(x,I,w,D,m){const U=Math.cos(x),q=Math.sin(x),Y=w/I*x,F=Math.cos(Y);m.x=D*(2+F)*.5*U,m.y=D*(2+F)*q*.5,m.z=D*Math.sin(Y)*.5}}static fromJSON(t){return new mc(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class gc extends de{constructor(t=new Xl(new C(-1,-1,0),new C(-1,1,0),new C(1,1,0)),e=64,i=1,n=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:a};const o=t.computeFrenetFrames(e,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new C,_=new C,l=new dt;let u=new C;const p=[],f=[],d=[],A=[];E(),this.setIndex(A),this.setAttribute("position",new se(p,3)),this.setAttribute("normal",new se(f,3)),this.setAttribute("uv",new se(d,2));function E(){for(let x=0;x<e;x++)S(x);S(a===!1?e:0),M(),y()}function S(x){u=t.getPointAt(x/e,u);const I=o.normals[x],w=o.binormals[x];for(let D=0;D<=n;D++){const m=D/n*Math.PI*2,U=Math.sin(m),q=-Math.cos(m);_.x=q*I.x+U*w.x,_.y=q*I.y+U*w.y,_.z=q*I.z+U*w.z,_.normalize(),f.push(_.x,_.y,_.z),c.x=u.x+i*_.x,c.y=u.y+i*_.y,c.z=u.z+i*_.z,p.push(c.x,c.y,c.z)}}function y(){for(let x=1;x<=e;x++)for(let I=1;I<=n;I++){const w=(n+1)*(x-1)+(I-1),D=(n+1)*x+(I-1),m=(n+1)*x+I,U=(n+1)*(x-1)+I;A.push(w,D,U),A.push(D,m,U)}}function M(){for(let x=0;x<=e;x++)for(let I=0;I<=n;I++)l.x=x/e,l.y=I/n,d.push(l.x,l.y)}}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new gc(new Ql[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class oS extends de{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],i=new Set,n=new C,a=new C;if(t.index!==null){const o=t.attributes.position,c=t.index;let _=t.groups;_.length===0&&(_=[{start:0,count:c.count,materialIndex:0}]);for(let l=0,u=_.length;l<u;++l){const p=_[l],f=p.start,d=p.count;for(let A=f,E=f+d;A<E;A+=3)for(let S=0;S<3;S++){const y=c.getX(A+S),M=c.getX(A+(S+1)%3);n.fromBufferAttribute(o,y),a.fromBufferAttribute(o,M),lf(n,a,i)===!0&&(e.push(n.x,n.y,n.z),e.push(a.x,a.y,a.z))}}}else{const o=t.attributes.position;for(let c=0,_=o.count/3;c<_;c++)for(let l=0;l<3;l++){const u=3*c+l,p=3*c+(l+1)%3;n.fromBufferAttribute(o,u),a.fromBufferAttribute(o,p),lf(n,a,i)===!0&&(e.push(n.x,n.y,n.z),e.push(a.x,a.y,a.z))}}this.setAttribute("position",new se(e,3))}}}function lf(r,t,e){const i=`${r.x},${r.y},${r.z}-${t.x},${t.y},${t.z}`,n=`${t.x},${t.y},${t.z}-${r.x},${r.y},${r.z}`;return e.has(i)===!0||e.has(n)===!0?!1:(e.add(i,n),!0)}var hf=Object.freeze({__proto__:null,BoxGeometry:Pn,BoxBufferGeometry:Pn,CircleGeometry:oc,CircleBufferGeometry:oc,ConeGeometry:cc,ConeBufferGeometry:cc,CylinderGeometry:Ra,CylinderBufferGeometry:Ra,DodecahedronGeometry:_c,DodecahedronBufferGeometry:_c,EdgesGeometry:NT,ExtrudeGeometry:gn,ExtrudeBufferGeometry:gn,IcosahedronGeometry:lc,IcosahedronBufferGeometry:lc,LatheGeometry:hc,LatheBufferGeometry:hc,OctahedronGeometry:uc,OctahedronBufferGeometry:uc,PlaneGeometry:fn,PlaneBufferGeometry:fn,PolyhedronGeometry:dn,PolyhedronBufferGeometry:dn,RingGeometry:fc,RingBufferGeometry:fc,ShapeGeometry:Na,ShapeBufferGeometry:Na,SphereGeometry:ba,SphereBufferGeometry:ba,TetrahedronGeometry:pc,TetrahedronBufferGeometry:pc,TorusGeometry:dc,TorusBufferGeometry:dc,TorusKnotGeometry:mc,TorusKnotBufferGeometry:mc,TubeGeometry:gc,TubeBufferGeometry:gc,WireframeGeometry:oS});class $p extends cs{constructor(t){super(),this.type="ShadowMaterial",this.color=new zt(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}$p.prototype.isShadowMaterial=!0;class Zl extends cs{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}Zl.prototype.isMeshStandardMaterial=!0;class Jp extends Zl{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new dt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ms(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenTint=new zt(0),this.sheenRoughness=1,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new zt(1,1,1),this.specularTintMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenTint.copy(t.sheenTint),this.sheenRoughness=t.sheenRoughness,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationTint.copy(t.attenuationTint),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularTint.copy(t.specularTint),this.specularTintMap=t.specularTintMap,this}}Jp.prototype.isMeshPhysicalMaterial=!0;class $l extends cs{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new zt(16777215),this.specular=new zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}$l.prototype.isMeshPhongMaterial=!0;class td extends cs{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}td.prototype.isMeshToonMaterial=!0;class ed extends cs{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}ed.prototype.isMeshNormalMaterial=!0;class Jl extends cs{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}Jl.prototype.isMeshLambertMaterial=!0;class sd extends cs{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Br,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}sd.prototype.isMeshMatcapMaterial=!0;class id extends Fn{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}id.prototype.isLineDashedMaterial=!0;var cS=Object.freeze({__proto__:null,ShadowMaterial:$p,SpriteMaterial:kl,RawShaderMaterial:Ha,ShaderMaterial:un,PointsMaterial:Wl,MeshPhysicalMaterial:Jp,MeshStandardMaterial:Zl,MeshPhongMaterial:$l,MeshToonMaterial:td,MeshNormalMaterial:ed,MeshLambertMaterial:Jl,MeshDepthMaterial:Gl,MeshDistanceMaterial:Ul,MeshBasicMaterial:Gr,MeshMatcapMaterial:sd,LineDashedMaterial:id,LineBasicMaterial:Fn,Material:cs});const Ge={arraySlice:function(r,t,e){return Ge.isTypedArray(r)?new r.constructor(r.subarray(t,e!==void 0?e:r.length)):r.slice(t,e)},convertArray:function(r,t,e){return!r||!e&&r.constructor===t?r:typeof t.BYTES_PER_ELEMENT=="number"?new t(r):Array.prototype.slice.call(r)},isTypedArray:function(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)},getKeyframeOrder:function(r){function t(n,a){return r[n]-r[a]}const e=r.length,i=new Array(e);for(let n=0;n!==e;++n)i[n]=n;return i.sort(t),i},sortedArray:function(r,t,e){const i=r.length,n=new r.constructor(i);for(let a=0,o=0;o!==i;++a){const c=e[a]*t;for(let _=0;_!==t;++_)n[o++]=r[c+_]}return n},flattenJSON:function(r,t,e,i){let n=1,a=r[0];for(;a!==void 0&&a[i]===void 0;)a=r[n++];if(a===void 0)return;let o=a[i];if(o!==void 0)if(Array.isArray(o))do o=a[i],o!==void 0&&(t.push(a.time),e.push.apply(e,o)),a=r[n++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[i],o!==void 0&&(t.push(a.time),o.toArray(e,e.length)),a=r[n++];while(a!==void 0);else do o=a[i],o!==void 0&&(t.push(a.time),e.push(o)),a=r[n++];while(a!==void 0)},subclip:function(r,t,e,i,n=30){const a=r.clone();a.name=t;const o=[];for(let _=0;_<a.tracks.length;++_){const l=a.tracks[_],u=l.getValueSize(),p=[],f=[];for(let d=0;d<l.times.length;++d){const A=l.times[d]*n;if(!(A<e||A>=i)){p.push(l.times[d]);for(let E=0;E<u;++E)f.push(l.values[d*u+E])}}p.length!==0&&(l.times=Ge.convertArray(p,l.times.constructor),l.values=Ge.convertArray(f,l.values.constructor),o.push(l))}a.tracks=o;let c=1/0;for(let _=0;_<a.tracks.length;++_)c>a.tracks[_].times[0]&&(c=a.tracks[_].times[0]);for(let _=0;_<a.tracks.length;++_)a.tracks[_].shift(-1*c);return a.resetDuration(),a},makeClipAdditive:function(r,t=0,e=r,i=30){i<=0&&(i=30);const n=e.tracks.length,a=t/i;for(let o=0;o<n;++o){const c=e.tracks[o],_=c.ValueTypeName;if(_==="bool"||_==="string")continue;const l=r.tracks.find(function(y){return y.name===c.name&&y.ValueTypeName===_});if(l===void 0)continue;let u=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=p/3);let f=0;const d=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const A=c.times.length-1;let E;if(a<=c.times[0]){const y=u,M=p-u;E=Ge.arraySlice(c.values,y,M)}else if(a>=c.times[A]){const y=A*p+u,M=y+p-u;E=Ge.arraySlice(c.values,y,M)}else{const y=c.createInterpolant(),M=u,x=p-u;y.evaluate(a),E=Ge.arraySlice(y.resultBuffer,M,x)}_==="quaternion"&&new Se().fromArray(E).normalize().conjugate().toArray(E);const S=l.times.length;for(let y=0;y<S;++y){const M=y*d+f;if(_==="quaternion")Se.multiplyQuaternionsFlat(l.values,M,E,0,l.values,M);else{const x=d-f*2;for(let I=0;I<x;++I)l.values[M+I]-=E[I]}}}return r.blendMode=mp,r}};class An{constructor(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,n=e[i],a=e[i-1];t:{e:{let o;s:{i:if(!(t<n)){for(let c=i+2;;){if(n===void 0){if(t<a)break i;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,a)}if(i===c)break;if(a=n,n=e[++i],t<n)break e}o=e.length;break s}if(!(t>=a)){const c=e[1];t<c&&(i=2,a=c);for(let _=i-2;;){if(a===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===_)break;if(n=a,a=e[--i-1],t>=a)break e}o=i,i=0;break s}break t}for(;i<o;){const c=i+o>>>1;t<e[c]?o=c:i=c+1}if(n=e[i],a=e[i-1],a===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(n===void 0)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,a,t)}this._cachedIndex=i,this.intervalChanged_(i,a,n)}return this.interpolate_(i,a,t,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,a=t*n;for(let o=0;o!==n;++o)e[o]=i[a+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}An.prototype.beforeStart_=An.prototype.copySampleValue_;An.prototype.afterEnd_=An.prototype.copySampleValue_;class _S extends An{constructor(t,e,i,n){super(t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:yr,endingEnd:yr}}intervalChanged_(t,e,i){const n=this.parameterPositions;let a=t-2,o=t+1,c=n[a],_=n[o];if(c===void 0)switch(this.getSettings_().endingStart){case Er:a=t,c=2*e-i;break;case rc:a=n.length-2,c=e+n[a]-n[a+1];break;default:a=t,c=i}if(_===void 0)switch(this.getSettings_().endingEnd){case Er:o=t,_=2*i-e;break;case rc:o=1,_=i+n[1]-n[0];break;default:o=t-1,_=e}const l=(i-e)*.5,u=this.valueSize;this._weightPrev=l/(e-c),this._weightNext=l/(_-i),this._offsetPrev=a*u,this._offsetNext=o*u}interpolate_(t,e,i,n){const a=this.resultBuffer,o=this.sampleValues,c=this.valueSize,_=t*c,l=_-c,u=this._offsetPrev,p=this._offsetNext,f=this._weightPrev,d=this._weightNext,A=(i-e)/(n-e),E=A*A,S=E*A,y=-f*S+2*f*E-f*A,M=(1+f)*S+(-1.5-2*f)*E+(-.5+f)*A+1,x=(-1-d)*S+(1.5+d)*E+.5*A,I=d*S-d*E;for(let w=0;w!==c;++w)a[w]=y*o[u+w]+M*o[l+w]+x*o[_+w]+I*o[p+w];return a}}class nd extends An{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const a=this.resultBuffer,o=this.sampleValues,c=this.valueSize,_=t*c,l=_-c,u=(i-e)/(n-e),p=1-u;for(let f=0;f!==c;++f)a[f]=o[l+f]*p+o[_+f]*u;return a}}class lS extends An{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}}class Mi{constructor(t,e,i,n){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ge.convertArray(e,this.TimeBufferType),this.values=Ge.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Ge.convertArray(t.times,Array),values:Ge.convertArray(t.values,Array)};const n=t.getInterpolation();n!==t.DefaultInterpolation&&(i.interpolation=n)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new lS(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new nd(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new _S(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case ic:e=this.InterpolantFactoryMethodDiscrete;break;case nc:e=this.InterpolantFactoryMethodLinear;break;case h_:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ic;case this.InterpolantFactoryMethodLinear:return nc;case this.InterpolantFactoryMethodSmooth:return h_}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){const i=this.times,n=i.length;let a=0,o=n-1;for(;a!==n&&i[a]<t;)++a;for(;o!==-1&&i[o]>e;)--o;if(++o,a!==0||o!==n){a>=o&&(o=Math.max(o,1),a=o-1);const c=this.getValueSize();this.times=Ge.arraySlice(i,a,o),this.values=Ge.arraySlice(this.values,a*c,o*c)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,n=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let c=0;c!==a;c++){const _=i[c];if(typeof _=="number"&&isNaN(_)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,_),t=!1;break}if(o!==null&&o>_){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,_,o),t=!1;break}o=_}if(n!==void 0&&Ge.isTypedArray(n))for(let c=0,_=n.length;c!==_;++c){const l=n[c];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,l),t=!1;break}}return t}optimize(){const t=Ge.arraySlice(this.times),e=Ge.arraySlice(this.values),i=this.getValueSize(),n=this.getInterpolation()===h_,a=t.length-1;let o=1;for(let c=1;c<a;++c){let _=!1;const l=t[c],u=t[c+1];if(l!==u&&(c!==1||l!==t[0]))if(n)_=!0;else{const p=c*i,f=p-i,d=p+i;for(let A=0;A!==i;++A){const E=e[p+A];if(E!==e[f+A]||E!==e[d+A]){_=!0;break}}}if(_){if(c!==o){t[o]=t[c];const p=c*i,f=o*i;for(let d=0;d!==i;++d)e[f+d]=e[p+d]}++o}}if(a>0){t[o]=t[a];for(let c=a*i,_=o*i,l=0;l!==i;++l)e[_+l]=e[c+l];++o}return o!==t.length?(this.times=Ge.arraySlice(t,0,o),this.values=Ge.arraySlice(e,0,o*i)):(this.times=t,this.values=e),this}clone(){const t=Ge.arraySlice(this.times,0),e=Ge.arraySlice(this.values,0),i=this.constructor,n=new i(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}Mi.prototype.TimeBufferType=Float32Array;Mi.prototype.ValueBufferType=Float32Array;Mi.prototype.DefaultInterpolation=nc;class Hr extends Mi{}Hr.prototype.ValueTypeName="bool";Hr.prototype.ValueBufferType=Array;Hr.prototype.DefaultInterpolation=ic;Hr.prototype.InterpolantFactoryMethodLinear=void 0;Hr.prototype.InterpolantFactoryMethodSmooth=void 0;class rd extends Mi{}rd.prototype.ValueTypeName="color";class Ac extends Mi{}Ac.prototype.ValueTypeName="number";class hS extends An{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const a=this.resultBuffer,o=this.sampleValues,c=this.valueSize,_=(i-e)/(n-e);let l=t*c;for(let u=l+c;l!==u;l+=4)Se.slerpFlat(a,0,o,l-c,o,l,_);return a}}class Wa extends Mi{InterpolantFactoryMethodLinear(t){return new hS(this.times,this.values,this.getValueSize(),t)}}Wa.prototype.ValueTypeName="quaternion";Wa.prototype.DefaultInterpolation=nc;Wa.prototype.InterpolantFactoryMethodSmooth=void 0;class zr extends Mi{}zr.prototype.ValueTypeName="string";zr.prototype.ValueBufferType=Array;zr.prototype.DefaultInterpolation=ic;zr.prototype.InterpolantFactoryMethodLinear=void 0;zr.prototype.InterpolantFactoryMethodSmooth=void 0;class yc extends Mi{}yc.prototype.ValueTypeName="vector";class yl{constructor(t,e=-1,i,n=Nl){this.name=t,this.tracks=i,this.duration=e,this.blendMode=n,this.uuid=ii(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,n=1/(t.fps||1);for(let o=0,c=i.length;o!==c;++o)e.push(fS(i[o]).scale(n));const a=new this(t.name,t.duration,e,t.blendMode);return a.uuid=t.uuid,a}static toJSON(t){const e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let a=0,o=i.length;a!==o;++a)e.push(Mi.toJSON(i[a]));return n}static CreateFromMorphTargetSequence(t,e,i,n){const a=e.length,o=[];for(let c=0;c<a;c++){let _=[],l=[];_.push((c+a-1)%a,c,(c+1)%a),l.push(0,1,0);const u=Ge.getKeyframeOrder(_);_=Ge.sortedArray(_,1,u),l=Ge.sortedArray(l,1,u),!n&&_[0]===0&&(_.push(a),l.push(l[0])),o.push(new Ac(".morphTargetInfluences["+e[c].name+"]",_,l).scale(1/i))}return new this(t,-1,o)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const n=t;i=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<i.length;n++)if(i[n].name===e)return i[n];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const n={},a=/^([\w-]*?)([\d]+)$/;for(let c=0,_=t.length;c<_;c++){const l=t[c],u=l.name.match(a);if(u&&u.length>1){const p=u[1];let f=n[p];f||(n[p]=f=[]),f.push(l)}}const o=[];for(const c in n)o.push(this.CreateFromMorphTargetSequence(c,n[c],e,i));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,f,d,A,E){if(d.length!==0){const S=[],y=[];Ge.flattenJSON(d,S,y,A),S.length!==0&&E.push(new p(f,S,y))}},n=[],a=t.name||"default",o=t.fps||30,c=t.blendMode;let _=t.length||-1;const l=t.hierarchy||[];for(let p=0;p<l.length;p++){const f=l[p].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let A;for(A=0;A<f.length;A++)if(f[A].morphTargets)for(let E=0;E<f[A].morphTargets.length;E++)d[f[A].morphTargets[E]]=-1;for(const E in d){const S=[],y=[];for(let M=0;M!==f[A].morphTargets.length;++M){const x=f[A];S.push(x.time),y.push(x.morphTarget===E?1:0)}n.push(new Ac(".morphTargetInfluence["+E+"]",S,y))}_=d.length*o}else{const d=".bones["+e[p].name+"]";i(yc,d+".position",f,"pos",n),i(Wa,d+".quaternion",f,"rot",n),i(yc,d+".scale",f,"scl",n)}}return n.length===0?null:new this(a,_,n,c)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,n=t.length;i!==n;++i){const a=this.tracks[i];e=Math.max(e,a.times[a.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function uS(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ac;case"vector":case"vector2":case"vector3":case"vector4":return yc;case"color":return rd;case"quaternion":return Wa;case"bool":case"boolean":return Hr;case"string":return zr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function fS(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=uS(r.type);if(r.times===void 0){const e=[],i=[];Ge.flattenJSON(r.keys,e,i,"value"),r.times=e,r.values=i}return t.parse!==void 0?t.parse(r):new t(r.name,r.times,r.values,r.interpolation)}const Dr={enabled:!1,files:{},add:function(r,t){this.enabled!==!1&&(this.files[r]=t)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class ad{constructor(t,e,i){const n=this;let a=!1,o=0,c=0,_;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(u){c++,a===!1&&n.onStart!==void 0&&n.onStart(u,o,c),a=!0},this.itemEnd=function(u){o++,n.onProgress!==void 0&&n.onProgress(u,o,c),o===c&&(a=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(u){n.onError!==void 0&&n.onError(u)},this.resolveURL=function(u){return _?_(u):u},this.setURLModifier=function(u){return _=u,this},this.addHandler=function(u,p){return l.push(u,p),this},this.removeHandler=function(u){const p=l.indexOf(u);return p!==-1&&l.splice(p,2),this},this.getHandler=function(u){for(let p=0,f=l.length;p<f;p+=2){const d=l[p],A=l[p+1];if(d.global&&(d.lastIndex=0),d.test(u))return A}return null}}}const pS=new ad;class ni{constructor(t){this.manager=t!==void 0?t:pS,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(n,a){i.load(t,n,e,a)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Zs={};class Da extends ni{constructor(t){super(t)}load(t,e,i,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,o=Dr.get(t);if(o!==void 0)return a.manager.itemStart(t),setTimeout(function(){e&&e(o),a.manager.itemEnd(t)},0),o;if(Zs[t]!==void 0){Zs[t].push({onLoad:e,onProgress:i,onError:n});return}const c=/^data:(.*?)(;base64)?,(.*)$/,_=t.match(c);let l;if(_){const u=_[1],p=!!_[2];let f=_[3];f=decodeURIComponent(f),p&&(f=atob(f));try{let d;const A=(this.responseType||"").toLowerCase();switch(A){case"arraybuffer":case"blob":const E=new Uint8Array(f.length);for(let y=0;y<f.length;y++)E[y]=f.charCodeAt(y);A==="blob"?d=new Blob([E.buffer],{type:u}):d=E.buffer;break;case"document":d=new DOMParser().parseFromString(f,u);break;case"json":d=JSON.parse(f);break;default:d=f;break}setTimeout(function(){e&&e(d),a.manager.itemEnd(t)},0)}catch(d){setTimeout(function(){n&&n(d),a.manager.itemError(t),a.manager.itemEnd(t)},0)}}else{Zs[t]=[],Zs[t].push({onLoad:e,onProgress:i,onError:n}),l=new XMLHttpRequest,l.open("GET",t,!0),l.addEventListener("load",function(u){const p=this.response,f=Zs[t];if(delete Zs[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Dr.add(t,p);for(let d=0,A=f.length;d<A;d++){const E=f[d];E.onLoad&&E.onLoad(p)}a.manager.itemEnd(t)}else{for(let d=0,A=f.length;d<A;d++){const E=f[d];E.onError&&E.onError(u)}a.manager.itemError(t),a.manager.itemEnd(t)}},!1),l.addEventListener("progress",function(u){const p=Zs[t];for(let f=0,d=p.length;f<d;f++){const A=p[f];A.onProgress&&A.onProgress(u)}},!1),l.addEventListener("error",function(u){const p=Zs[t];delete Zs[t];for(let f=0,d=p.length;f<d;f++){const A=p[f];A.onError&&A.onError(u)}a.manager.itemError(t),a.manager.itemEnd(t)},!1),l.addEventListener("abort",function(u){const p=Zs[t];delete Zs[t];for(let f=0,d=p.length;f<d;f++){const A=p[f];A.onError&&A.onError(u)}a.manager.itemError(t),a.manager.itemEnd(t)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const u in this.requestHeader)l.setRequestHeader(u,this.requestHeader[u]);l.send(null)}return a.manager.itemStart(t),l}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Ec extends ni{constructor(t){super(t)}load(t,e,i,n){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,o=Dr.get(t);if(o!==void 0)return a.manager.itemStart(t),setTimeout(function(){e&&e(o),a.manager.itemEnd(t)},0),o;const c=Nc("img");function _(){c.removeEventListener("load",_,!1),c.removeEventListener("error",l,!1),Dr.add(t,this),e&&e(this),a.manager.itemEnd(t)}function l(u){c.removeEventListener("load",_,!1),c.removeEventListener("error",l,!1),n&&n(u),a.manager.itemError(t),a.manager.itemEnd(t)}return c.addEventListener("load",_,!1),c.addEventListener("error",l,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),a.manager.itemStart(t),c.src=t,c}}class dS extends ni{constructor(t){super(t)}load(t,e,i,n){const a=new Fa,o=new Ec(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let c=0;function _(l){o.load(t[l],function(u){a.images[l]=u,c++,c===6&&(a.needsUpdate=!0,e&&e(a))},void 0,n)}for(let l=0;l<t.length;++l)_(l);return a}}class od extends ni{constructor(t){super(t)}load(t,e,i,n){const a=new is,o=new Ec(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(c){a.image=c,a.needsUpdate=!0,e!==void 0&&e(a)},i,n),a}}class Ei extends Te{constructor(t,e=1){super(),this.type="Light",this.color=new zt(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}Ei.prototype.isLight=!0;class cd extends Ei{constructor(t,e,i){super(t,i),this.type="HemisphereLight",this.position.copy(Te.DefaultUp),this.updateMatrix(),this.groundColor=new zt(e)}copy(t){return Ei.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}cd.prototype.isHemisphereLight=!0;const uf=new jt,ff=new C,pf=new C;class th{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new dt(512,512),this.map=null,this.mapPass=null,this.matrix=new jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Dc,this._frameExtents=new dt(1,1),this._viewportCount=1,this._viewports=[new Le(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;ff.setFromMatrixPosition(t.matrixWorld),e.position.copy(ff),pf.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(pf),e.updateMatrixWorld(),uf.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uf),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class _d extends th{constructor(){super(new Ke(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,i=fl*2*t.angle*this.focus,n=this.mapSize.width/this.mapSize.height,a=t.distance||e.far;(i!==e.fov||n!==e.aspect||a!==e.far)&&(e.fov=i,e.aspect=n,e.far=a,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}_d.prototype.isSpotLightShadow=!0;class ld extends Ei{constructor(t,e,i=0,n=Math.PI/3,a=0,o=1){super(t,e),this.type="SpotLight",this.position.copy(Te.DefaultUp),this.updateMatrix(),this.target=new Te,this.distance=i,this.angle=n,this.penumbra=a,this.decay=o,this.shadow=new _d}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}ld.prototype.isSpotLight=!0;const df=new jt,la=new C,q_=new C;class hd extends th{constructor(){super(new Ke(90,1,.5,500)),this._frameExtents=new dt(4,2),this._viewportCount=6,this._viewports=[new Le(2,1,1,1),new Le(0,1,1,1),new Le(3,1,1,1),new Le(1,1,1,1),new Le(3,0,1,1),new Le(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,n=this.matrix,a=t.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),la.setFromMatrixPosition(t.matrixWorld),i.position.copy(la),q_.copy(i.position),q_.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(q_),i.updateMatrixWorld(),n.makeTranslation(-la.x,-la.y,-la.z),df.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(df)}}hd.prototype.isPointLightShadow=!0;class ud extends Ei{constructor(t,e,i=0,n=1){super(t,e),this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new hd}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}ud.prototype.isPointLight=!0;class fd extends th{constructor(){super(new Cc(-5,5,5,-5,.5,500))}}fd.prototype.isDirectionalLightShadow=!0;class eh extends Ei{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Te.DefaultUp),this.updateMatrix(),this.target=new Te,this.shadow=new fd}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}eh.prototype.isDirectionalLight=!0;class Hc extends Ei{constructor(t,e){super(t,e),this.type="AmbientLight"}}Hc.prototype.isAmbientLight=!0;class pd extends Ei{constructor(t,e,i=10,n=10){super(t,e),this.type="RectAreaLight",this.width=i,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}pd.prototype.isRectAreaLight=!0;class dd{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new C)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,n=t.y,a=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*n),e.addScaledVector(o[2],.488603*a),e.addScaledVector(o[3],.488603*i),e.addScaledVector(o[4],1.092548*(i*n)),e.addScaledVector(o[5],1.092548*(n*a)),e.addScaledVector(o[6],.315392*(3*a*a-1)),e.addScaledVector(o[7],1.092548*(i*a)),e.addScaledVector(o[8],.546274*(i*i-n*n)),e}getIrradianceAt(t,e){const i=t.x,n=t.y,a=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],2*.511664*n),e.addScaledVector(o[2],2*.511664*a),e.addScaledVector(o[3],2*.511664*i),e.addScaledVector(o[4],2*.429043*i*n),e.addScaledVector(o[5],2*.429043*n*a),e.addScaledVector(o[6],.743125*a*a-.247708),e.addScaledVector(o[7],2*.429043*i*a),e.addScaledVector(o[8],.429043*(i*i-n*n)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(t,e+n*3);return this}toArray(t=[],e=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(t,e+n*3);return t}static getBasisAt(t,e){const i=t.x,n=t.y,a=t.z;e[0]=.282095,e[1]=.488603*n,e[2]=.488603*a,e[3]=.488603*i,e[4]=1.092548*i*n,e[5]=1.092548*n*a,e[6]=.315392*(3*a*a-1),e[7]=1.092548*i*a,e[8]=.546274*(i*i-n*n)}}dd.prototype.isSphericalHarmonics3=!0;class zc extends Ei{constructor(t=new dd,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}zc.prototype.isLightProbe=!0;class mS extends ni{constructor(t){super(t),this.textures={}}load(t,e,i,n){const a=this,o=new Da(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,function(c){try{e(a.parse(JSON.parse(c)))}catch(_){n?n(_):console.error(_),a.manager.itemError(t)}},i,n)}parse(t){const e=this.textures;function i(a){return e[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),e[a]}const n=new cS[t.type];if(t.uuid!==void 0&&(n.uuid=t.uuid),t.name!==void 0&&(n.name=t.name),t.color!==void 0&&n.color!==void 0&&n.color.setHex(t.color),t.roughness!==void 0&&(n.roughness=t.roughness),t.metalness!==void 0&&(n.metalness=t.metalness),t.sheen!==void 0&&(n.sheen=t.sheen),t.sheenTint!==void 0&&(n.sheenTint=new zt().setHex(t.sheenTint)),t.sheenRoughness!==void 0&&(n.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&n.emissive!==void 0&&n.emissive.setHex(t.emissive),t.specular!==void 0&&n.specular!==void 0&&n.specular.setHex(t.specular),t.specularIntensity!==void 0&&(n.specularIntensity=t.specularIntensity),t.specularTint!==void 0&&n.specularTint!==void 0&&n.specularTint.setHex(t.specularTint),t.shininess!==void 0&&(n.shininess=t.shininess),t.clearcoat!==void 0&&(n.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=t.clearcoatRoughness),t.transmission!==void 0&&(n.transmission=t.transmission),t.thickness!==void 0&&(n.thickness=t.thickness),t.attenuationDistance!==void 0&&(n.attenuationDistance=t.attenuationDistance),t.attenuationTint!==void 0&&n.attenuationTint!==void 0&&n.attenuationTint.setHex(t.attenuationTint),t.fog!==void 0&&(n.fog=t.fog),t.flatShading!==void 0&&(n.flatShading=t.flatShading),t.blending!==void 0&&(n.blending=t.blending),t.combine!==void 0&&(n.combine=t.combine),t.side!==void 0&&(n.side=t.side),t.shadowSide!==void 0&&(n.shadowSide=t.shadowSide),t.opacity!==void 0&&(n.opacity=t.opacity),t.format!==void 0&&(n.format=t.format),t.transparent!==void 0&&(n.transparent=t.transparent),t.alphaTest!==void 0&&(n.alphaTest=t.alphaTest),t.depthTest!==void 0&&(n.depthTest=t.depthTest),t.depthWrite!==void 0&&(n.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(n.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(n.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(n.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(n.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(n.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(n.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(n.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(n.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(n.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(n.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(n.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(n.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(n.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(n.rotation=t.rotation),t.linewidth!==1&&(n.linewidth=t.linewidth),t.dashSize!==void 0&&(n.dashSize=t.dashSize),t.gapSize!==void 0&&(n.gapSize=t.gapSize),t.scale!==void 0&&(n.scale=t.scale),t.polygonOffset!==void 0&&(n.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(n.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(n.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(n.dithering=t.dithering),t.alphaToCoverage!==void 0&&(n.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(n.premultipliedAlpha=t.premultipliedAlpha),t.visible!==void 0&&(n.visible=t.visible),t.toneMapped!==void 0&&(n.toneMapped=t.toneMapped),t.userData!==void 0&&(n.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?n.vertexColors=t.vertexColors>0:n.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const a in t.uniforms){const o=t.uniforms[a];switch(n.uniforms[a]={},o.type){case"t":n.uniforms[a].value=i(o.value);break;case"c":n.uniforms[a].value=new zt().setHex(o.value);break;case"v2":n.uniforms[a].value=new dt().fromArray(o.value);break;case"v3":n.uniforms[a].value=new C().fromArray(o.value);break;case"v4":n.uniforms[a].value=new Le().fromArray(o.value);break;case"m3":n.uniforms[a].value=new ss().fromArray(o.value);break;case"m4":n.uniforms[a].value=new jt().fromArray(o.value);break;default:n.uniforms[a].value=o.value}}if(t.defines!==void 0&&(n.defines=t.defines),t.vertexShader!==void 0&&(n.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(n.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(const a in t.extensions)n.extensions[a]=t.extensions[a];if(t.shading!==void 0&&(n.flatShading=t.shading===1),t.size!==void 0&&(n.size=t.size),t.sizeAttenuation!==void 0&&(n.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(n.map=i(t.map)),t.matcap!==void 0&&(n.matcap=i(t.matcap)),t.alphaMap!==void 0&&(n.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(n.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(n.bumpScale=t.bumpScale),t.normalMap!==void 0&&(n.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(n.normalMapType=t.normalMapType),t.normalScale!==void 0){let a=t.normalScale;Array.isArray(a)===!1&&(a=[a,a]),n.normalScale=new dt().fromArray(a)}return t.displacementMap!==void 0&&(n.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(n.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(n.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(n.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(n.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(n.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(n.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(n.specularMap=i(t.specularMap)),t.specularIntensityMap!==void 0&&(n.specularIntensityMap=i(t.specularIntensityMap)),t.specularTintMap!==void 0&&(n.specularTintMap=i(t.specularTintMap)),t.envMap!==void 0&&(n.envMap=i(t.envMap)),t.envMapIntensity!==void 0&&(n.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(n.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(n.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(n.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(n.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(n.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(n.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(n.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(n.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(n.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(n.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(n.clearcoatNormalScale=new dt().fromArray(t.clearcoatNormalScale)),t.transmissionMap!==void 0&&(n.transmissionMap=i(t.transmissionMap)),t.thicknessMap!==void 0&&(n.thicknessMap=i(t.thicknessMap)),n}setTextures(t){return this.textures=t,this}}class El{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}}class md extends de{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}md.prototype.isInstancedBufferGeometry=!0;class gS extends ni{constructor(t){super(t)}load(t,e,i,n){const a=this,o=new Da(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,function(c){try{e(a.parse(JSON.parse(c)))}catch(_){n?n(_):console.error(_),a.manager.itemError(t)}},i,n)}parse(t){const e={},i={};function n(d,A){if(e[A]!==void 0)return e[A];const S=d.interleavedBuffers[A],y=a(d,S.buffer),M=Mr(S.type,y),x=new kr(M,S.stride);return x.uuid=S.uuid,e[A]=x,x}function a(d,A){if(i[A]!==void 0)return i[A];const S=d.arrayBuffers[A],y=new Uint32Array(S).buffer;return i[A]=y,y}const o=t.isInstancedBufferGeometry?new md:new de,c=t.data.index;if(c!==void 0){const d=Mr(c.type,c.array);o.setIndex(new ze(d,1))}const _=t.data.attributes;for(const d in _){const A=_[d];let E;if(A.isInterleavedBufferAttribute){const S=n(t.data,A.data);E=new Bn(S,A.itemSize,A.offset,A.normalized)}else{const S=Mr(A.type,A.array),y=A.isInstancedBufferAttribute?br:ze;E=new y(S,A.itemSize,A.normalized)}A.name!==void 0&&(E.name=A.name),A.usage!==void 0&&E.setUsage(A.usage),A.updateRange!==void 0&&(E.updateRange.offset=A.updateRange.offset,E.updateRange.count=A.updateRange.count),o.setAttribute(d,E)}const l=t.data.morphAttributes;if(l)for(const d in l){const A=l[d],E=[];for(let S=0,y=A.length;S<y;S++){const M=A[S];let x;if(M.isInterleavedBufferAttribute){const I=n(t.data,M.data);x=new Bn(I,M.itemSize,M.offset,M.normalized)}else{const I=Mr(M.type,M.array);x=new ze(I,M.itemSize,M.normalized)}M.name!==void 0&&(x.name=M.name),E.push(x)}o.morphAttributes[d]=E}t.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=t.data.groups||t.data.drawcalls||t.data.offsets;if(p!==void 0)for(let d=0,A=p.length;d!==A;++d){const E=p[d];o.addGroup(E.start,E.count,E.materialIndex)}const f=t.data.boundingSphere;if(f!==void 0){const d=new C;f.center!==void 0&&d.fromArray(f.center),o.boundingSphere=new Gn(d,f.radius)}return t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o}}class Nn extends ni{constructor(t){super(t)}load(t,e,i,n){const a=this,o=this.path===""?El.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const c=new Da(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(_){let l=null;try{l=JSON.parse(_)}catch(p){n!==void 0&&n(p),console.error("THREE:ObjectLoader: Can't parse "+t+".",p.message);return}const u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+t);return}a.parse(l,e)},i,n)}async loadAsync(t,e){const i=this,n=this.path===""?El.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const a=new Da(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const o=await a.loadAsync(t,e),c=JSON.parse(o),_=c.metadata;if(_===void 0||_.type===void 0||_.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await i.parseAsync(c)}parse(t,e){const i=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,n),o=this.parseImages(t.images,function(){e!==void 0&&e(l)}),c=this.parseTextures(t.textures,o),_=this.parseMaterials(t.materials,c),l=this.parseObject(t.object,a,_,c,i),u=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,u),e!==void 0){let p=!1;for(const f in o)if(o[f]instanceof HTMLImageElement){p=!0;break}p===!1&&e(l)}return l}async parseAsync(t){const e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),n=this.parseGeometries(t.geometries,i),a=await this.parseImagesAsync(t.images),o=this.parseTextures(t.textures,a),c=this.parseMaterials(t.materials,o),_=this.parseObject(t.object,n,c,o,e),l=this.parseSkeletons(t.skeletons,_);return this.bindSkeletons(_,l),_}parseShapes(t){const e={};if(t!==void 0)for(let i=0,n=t.length;i<n;i++){const a=new Fr().fromJSON(t[i]);e[a.uuid]=a}return e}parseSkeletons(t,e){const i={},n={};if(e.traverse(function(a){a.isBone&&(n[a.uuid]=a)}),t!==void 0)for(let a=0,o=t.length;a<o;a++){const c=new zl().fromJSON(t[a],n);i[c.uuid]=c}return i}parseGeometries(t,e){const i={};if(t!==void 0){const n=new gS;for(let a=0,o=t.length;a<o;a++){let c;const _=t[a];switch(_.type){case"BufferGeometry":case"InstancedBufferGeometry":c=n.parse(_);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:_.type in hf?c=hf[_.type].fromJSON(_,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${_.type}"`)}c.uuid=_.uuid,_.name!==void 0&&(c.name=_.name),c.isBufferGeometry===!0&&_.userData!==void 0&&(c.userData=_.userData),i[_.uuid]=c}}return i}parseMaterials(t,e){const i={},n={};if(t!==void 0){const a=new mS;a.setTextures(e);for(let o=0,c=t.length;o<c;o++){const _=t[o];if(_.type==="MultiMaterial"){const l=[];for(let u=0;u<_.materials.length;u++){const p=_.materials[u];i[p.uuid]===void 0&&(i[p.uuid]=a.parse(p)),l.push(i[p.uuid])}n[_.uuid]=l}else i[_.uuid]===void 0&&(i[_.uuid]=a.parse(_)),n[_.uuid]=i[_.uuid]}}return n}parseAnimations(t){const e={};if(t!==void 0)for(let i=0;i<t.length;i++){const n=t[i],a=yl.parse(n);e[a.uuid]=a}return e}parseImages(t,e){const i=this,n={};let a;function o(_){return i.manager.itemStart(_),a.load(_,function(){i.manager.itemEnd(_)},void 0,function(){i.manager.itemError(_),i.manager.itemEnd(_)})}function c(_){if(typeof _=="string"){const l=_,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:i.resourcePath+l;return o(u)}else return _.data?{data:Mr(_.type,_.data),width:_.width,height:_.height}:null}if(t!==void 0&&t.length>0){const _=new ad(e);a=new Ec(_),a.setCrossOrigin(this.crossOrigin);for(let l=0,u=t.length;l<u;l++){const p=t[l],f=p.url;if(Array.isArray(f)){n[p.uuid]=[];for(let d=0,A=f.length;d<A;d++){const E=f[d],S=c(E);S!==null&&(S instanceof HTMLImageElement?n[p.uuid].push(S):n[p.uuid].push(new ya(S.data,S.width,S.height)))}}else{const d=c(p.url);d!==null&&(n[p.uuid]=d)}}}return n}async parseImagesAsync(t){const e=this,i={};let n;async function a(o){if(typeof o=="string"){const c=o,_=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:e.resourcePath+c;return await n.loadAsync(_)}else return o.data?{data:Mr(o.type,o.data),width:o.width,height:o.height}:null}if(t!==void 0&&t.length>0){n=new Ec(this.manager),n.setCrossOrigin(this.crossOrigin);for(let o=0,c=t.length;o<c;o++){const _=t[o],l=_.url;if(Array.isArray(l)){i[_.uuid]=[];for(let u=0,p=l.length;u<p;u++){const f=l[u],d=await a(f);d!==null&&(d instanceof HTMLImageElement?i[_.uuid].push(d):i[_.uuid].push(new ya(d.data,d.width,d.height)))}}else{const u=await a(_.url);u!==null&&(i[_.uuid]=u)}}}return i}parseTextures(t,e){function i(a,o){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),o[a])}const n={};if(t!==void 0)for(let a=0,o=t.length;a<o;a++){const c=t[a];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),e[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);let _;const l=e[c.image];Array.isArray(l)?(_=new Fa(l),l.length===6&&(_.needsUpdate=!0)):(l&&l.data?_=new ya(l.data,l.width,l.height):_=new is(l),l&&(_.needsUpdate=!0)),_.uuid=c.uuid,c.name!==void 0&&(_.name=c.name),c.mapping!==void 0&&(_.mapping=i(c.mapping,AS)),c.offset!==void 0&&_.offset.fromArray(c.offset),c.repeat!==void 0&&_.repeat.fromArray(c.repeat),c.center!==void 0&&_.center.fromArray(c.center),c.rotation!==void 0&&(_.rotation=c.rotation),c.wrap!==void 0&&(_.wrapS=i(c.wrap[0],mf),_.wrapT=i(c.wrap[1],mf)),c.format!==void 0&&(_.format=c.format),c.type!==void 0&&(_.type=c.type),c.encoding!==void 0&&(_.encoding=c.encoding),c.minFilter!==void 0&&(_.minFilter=i(c.minFilter,gf)),c.magFilter!==void 0&&(_.magFilter=i(c.magFilter,gf)),c.anisotropy!==void 0&&(_.anisotropy=c.anisotropy),c.flipY!==void 0&&(_.flipY=c.flipY),c.premultiplyAlpha!==void 0&&(_.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(_.unpackAlignment=c.unpackAlignment),n[c.uuid]=_}return n}parseObject(t,e,i,n,a){let o;function c(f){return e[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),e[f]}function _(f){if(f!==void 0){if(Array.isArray(f)){const d=[];for(let A=0,E=f.length;A<E;A++){const S=f[A];i[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),d.push(i[S])}return d}return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),i[f]}}function l(f){return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),n[f]}let u,p;switch(t.type){case"Scene":o=new Vc,t.background!==void 0&&(Number.isInteger(t.background)?o.background=new zt(t.background):o.background=l(t.background)),t.environment!==void 0&&(o.environment=l(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?o.fog=new Bc(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(o.fog=new Pc(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new Ke(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(o.focus=t.focus),t.zoom!==void 0&&(o.zoom=t.zoom),t.filmGauge!==void 0&&(o.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(o.filmOffset=t.filmOffset),t.view!==void 0&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new Cc(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(o.zoom=t.zoom),t.view!==void 0&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new Hc(t.color,t.intensity);break;case"DirectionalLight":o=new eh(t.color,t.intensity);break;case"PointLight":o=new ud(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new pd(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new ld(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new cd(t.color,t.groundColor,t.intensity);break;case"LightProbe":o=new zc().fromJSON(t);break;case"SkinnedMesh":u=c(t.geometry),p=_(t.material),o=new Fl(u,p),t.bindMode!==void 0&&(o.bindMode=t.bindMode),t.bindMatrix!==void 0&&o.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(o.skeleton=t.skeleton);break;case"Mesh":u=c(t.geometry),p=_(t.material),o=new ke(u,p);break;case"InstancedMesh":u=c(t.geometry),p=_(t.material);const f=t.count,d=t.instanceMatrix,A=t.instanceColor;o=new Hp(u,p,f),o.instanceMatrix=new br(new Float32Array(d.array),16),A!==void 0&&(o.instanceColor=new br(new Float32Array(A.array),A.itemSize));break;case"LOD":o=new IT;break;case"Line":o=new Gc(c(t.geometry),_(t.material));break;case"LineLoop":o=new zp(c(t.geometry),_(t.material));break;case"LineSegments":o=new za(c(t.geometry),_(t.material));break;case"PointCloud":case"Points":o=new Wp(c(t.geometry),_(t.material));break;case"Sprite":o=new Fp(_(t.material));break;case"Group":o=new ei;break;case"Bone":o=new Hl;break;default:o=new Te}if(o.uuid=t.uuid,t.name!==void 0&&(o.name=t.name),t.matrix!==void 0?(o.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(t.position!==void 0&&o.position.fromArray(t.position),t.rotation!==void 0&&o.rotation.fromArray(t.rotation),t.quaternion!==void 0&&o.quaternion.fromArray(t.quaternion),t.scale!==void 0&&o.scale.fromArray(t.scale)),t.castShadow!==void 0&&(o.castShadow=t.castShadow),t.receiveShadow!==void 0&&(o.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(o.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(o.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(o.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(o.visible=t.visible),t.frustumCulled!==void 0&&(o.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(o.renderOrder=t.renderOrder),t.userData!==void 0&&(o.userData=t.userData),t.layers!==void 0&&(o.layers.mask=t.layers),t.children!==void 0){const f=t.children;for(let d=0;d<f.length;d++)o.add(this.parseObject(f[d],e,i,n,a))}if(t.animations!==void 0){const f=t.animations;for(let d=0;d<f.length;d++){const A=f[d];o.animations.push(a[A])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(o.autoUpdate=t.autoUpdate);const f=t.levels;for(let d=0;d<f.length;d++){const A=f[d],E=o.getObjectByProperty("uuid",A.object);E!==void 0&&o.addLevel(E,A.distance)}}return o}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const n=e[i.skeleton];n===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(n,i.bindMatrix)}})}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const AS={UVMapping:Ll,CubeReflectionMapping:Ga,CubeRefractionMapping:Ua,EquirectangularReflectionMapping:$o,EquirectangularRefractionMapping:Jo,CubeUVReflectionMapping:ka,CubeUVRefractionMapping:Lc},mf={RepeatWrapping:tc,ClampToEdgeWrapping:fs,MirroredRepeatWrapping:ec},gf={NearestFilter:ts,NearestMipmapNearestFilter:hl,NearestMipmapLinearFilter:ul,LinearFilter:Rs,LinearMipmapNearestFilter:dp,LinearMipmapLinearFilter:Pr};class yS extends ni{constructor(t){super(t),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,o=Dr.get(t);if(o!==void 0)return a.manager.itemStart(t),setTimeout(function(){e&&e(o),a.manager.itemEnd(t)},0),o;const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,fetch(t,c).then(function(_){return _.blob()}).then(function(_){return createImageBitmap(_,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(_){Dr.add(t,_),e&&e(_),a.manager.itemEnd(t)}).catch(function(_){n&&n(_),a.manager.itemError(t),a.manager.itemEnd(t)}),a.manager.itemStart(t)}}yS.prototype.isImageBitmapLoader=!0;let Uo;const ES={getContext:function(){return Uo===void 0&&(Uo=new(window.AudioContext||window.webkitAudioContext)),Uo},setContext:function(r){Uo=r}};class MS extends ni{constructor(t){super(t)}load(t,e,i,n){const a=this,o=new Da(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(c){try{const _=c.slice(0);ES.getContext().decodeAudioData(_,function(u){e(u)})}catch(_){n?n(_):console.error(_),a.manager.itemError(t)}},i,n)}}class TS extends zc{constructor(t,e,i=1){super(void 0,i);const n=new zt().set(t),a=new zt().set(e),o=new C(n.r,n.g,n.b),c=new C(a.r,a.g,a.b),_=Math.sqrt(Math.PI),l=_*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(c).multiplyScalar(_),this.sh.coefficients[1].copy(o).sub(c).multiplyScalar(l)}}TS.prototype.isHemisphereLightProbe=!0;class SS extends zc{constructor(t,e=1){super(void 0,e);const i=new zt().set(t);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}SS.prototype.isAmbientLightProbe=!0;class vS{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Af(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Af();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Af(){return(typeof performance>"u"?Date:performance).now()}class IS extends Te{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}class xS{constructor(t,e,i){this.binding=t,this.valueSize=i;let n,a,o;switch(e){case"quaternion":n=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":n=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:n=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,n=this.valueSize,a=t*n+n;let o=this.cumulativeWeight;if(o===0){for(let c=0;c!==n;++c)i[a+c]=i[c];o=e}else{o+=e;const c=e/o;this._mixBufferRegion(i,a,0,c,n)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,n=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,n,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,n=t*e+e,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const _=e*this._origIndex;this._mixBufferRegion(i,n,_,1-a,e)}o>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*e,1,e);for(let _=e,l=e+e;_!==l;++_)if(i[_]!==i[_+e]){c.setValue(i,n);break}}saveOriginalState(){const t=this.binding,e=this.buffer,i=this.valueSize,n=i*this._origIndex;t.getValue(e,n);for(let a=i,o=n;a!==o;++a)e[a]=e[n+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,n,a){if(n>=.5)for(let o=0;o!==a;++o)t[e+o]=t[i+o]}_slerp(t,e,i,n){Se.slerpFlat(t,e,t,e,t,i,n)}_slerpAdditive(t,e,i,n,a){const o=this._workIndex*a;Se.multiplyQuaternionsFlat(t,o,t,e,t,i),Se.slerpFlat(t,e,t,e,t,o,n)}_lerp(t,e,i,n,a){const o=1-n;for(let c=0;c!==a;++c){const _=e+c;t[_]=t[_]*o+t[i+c]*n}}_lerpAdditive(t,e,i,n,a){for(let o=0;o!==a;++o){const c=e+o;t[c]=t[c]+t[i+o]*n}}}const sh="\\[\\]\\.:\\/",RS=new RegExp("["+sh+"]","g"),ih="[^"+sh+"]",OS="[^"+sh.replace("\\.","")+"]",wS=/((?:WC+[\/:])*)/.source.replace("WC",ih),LS=/(WCOD+)?/.source.replace("WCOD",OS),NS=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ih),bS=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ih),DS=new RegExp("^"+wS+LS+NS+bS+"$"),CS=["material","materials","bones"];class PS{constructor(t,e,i){const n=i||we.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];n!==void 0&&n.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,a=i.length;n!==a;++n)i[n].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class we{constructor(t,e,i){this.path=e,this.parsedPath=i||we.parseTrackName(e),this.node=we.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new we.Composite(t,e,i):new we(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(RS,"")}static parseTrackName(t){const e=DS.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){const a=i.nodeName.substring(n+1);CS.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(!e||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(a){for(let o=0;o<a.length;o++){const c=a[o];if(c.name===e||c.uuid===e)return c;const _=i(c.children);if(_)return _}return null},n=i(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let n=0,a=i.length;n!==a;++n)t[e++]=i[n]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let n=0,a=i.length;n!==a;++n)i[n]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,a=i.length;n!==a;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,a=i.length;n!==a;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,n=e.propertyName;let a=e.propertyIndex;if(t||(t=we.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let l=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let u=0;u<t.length;u++)if(t[u].name===l){l=u;break}break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(l!==void 0){if(t[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[l]}}const o=t[n];if(o===void 0){const l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let _=this.BindingType.Direct;if(a!==void 0){if(n==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[a]!==void 0&&(a=t.morphTargetDictionary[a])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}_=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(_=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(_=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[_],this.setValue=this.SetterByBindingTypeAndVersioning[_][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}we.Composite=PS;we.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};we.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};we.prototype.GetterByBindingType=[we.prototype._getValue_direct,we.prototype._getValue_array,we.prototype._getValue_arrayElement,we.prototype._getValue_toArray];we.prototype.SetterByBindingTypeAndVersioning=[[we.prototype._setValue_direct,we.prototype._setValue_direct_setNeedsUpdate,we.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[we.prototype._setValue_array,we.prototype._setValue_array_setNeedsUpdate,we.prototype._setValue_array_setMatrixWorldNeedsUpdate],[we.prototype._setValue_arrayElement,we.prototype._setValue_arrayElement_setNeedsUpdate,we.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[we.prototype._setValue_fromArray,we.prototype._setValue_fromArray_setNeedsUpdate,we.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class BS{constructor(t,e,i=null,n=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=n;const a=e.tracks,o=a.length,c=new Array(o),_={endingStart:yr,endingEnd:yr};for(let l=0;l!==o;++l){const u=a[l].createInterpolant(null);c[l]=u,u.settings=_}this._interpolantSettings=_,this._interpolants=c,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=NA,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const n=this._clip.duration,a=t._clip.duration,o=a/n,c=n/a;t.warp(1,o,e),this.warp(c,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const n=this._mixer,a=n.time,o=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=n._lendControlInterpolant(),this._timeScaleInterpolant=c);const _=c.parameterPositions,l=c.sampleValues;return _[0]=a,_[1]=a+i,l[0]=t/o,l[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,n){if(!this.enabled){this._updateWeight(t);return}const a=this._startTime;if(a!==null){const _=(t-a)*i;if(_<0||i===0)return;this._startTime=null,e=i*_}e*=this._updateTimeScale(t);const o=this._updateTime(e),c=this._updateWeight(t);if(c>0){const _=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case mp:for(let u=0,p=_.length;u!==p;++u)_[u].evaluate(o),l[u].accumulateAdditive(c);break;case Nl:default:for(let u=0,p=_.length;u!==p;++u)_[u].evaluate(o),l[u].accumulate(n,c)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(i!==null){const n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),n===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let n=this.time+t,a=this._loopCount;const o=i===bA;if(t===0)return a===-1?n:o&&(a&1)===1?e-n:n;if(i===LA){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(n>=e)n=e;else if(n<0)n=0;else{this.time=n;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(a===-1&&(t>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),n>=e||n<0){const c=Math.floor(n/e);n-=e*c,a+=Math.abs(c);const _=this.repetitions-a;if(_<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=t>0?e:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(_===1){const l=t<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=n;if(o&&(a&1)===1)return e-n}return n}_setEndings(t,e,i){const n=this._interpolantSettings;i?(n.endingStart=Er,n.endingEnd=Er):(t?n.endingStart=this.zeroSlopeAtStart?Er:yr:n.endingStart=rc,e?n.endingEnd=this.zeroSlopeAtEnd?Er:yr:n.endingEnd=rc)}_scheduleFading(t,e,i){const n=this._mixer,a=n.time;let o=this._weightInterpolant;o===null&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);const c=o.parameterPositions,_=o.sampleValues;return c[0]=a,_[0]=e,c[1]=a+t,_[1]=i,this}}class VS extends En{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,n=t._clip.tracks,a=n.length,o=t._propertyBindings,c=t._interpolants,_=i.uuid,l=this._bindingsByRootAndName;let u=l[_];u===void 0&&(u={},l[_]=u);for(let p=0;p!==a;++p){const f=n[p],d=f.name;let A=u[d];if(A!==void 0)o[p]=A;else{if(A=o[p],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,_,d));continue}const E=e&&e._propertyBindings[p].binding.parsedPath;A=new xS(we.create(i,d,E),f.ValueTypeName,f.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,_,d),o[p]=A}c[p].resultBuffer=A.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const i=(t._localRoot||this._root).uuid,n=t._clip.uuid,a=this._actionsByClip[n];this._bindAction(t,a&&a.knownActions[0]),this._addInactiveAction(t,n,i)}const e=t._propertyBindings;for(let i=0,n=e.length;i!==n;++i){const a=e[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,n=e.length;i!==n;++i){const a=e[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){const n=this._actions,a=this._actionsByClip;let o=a[e];if(o===void 0)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,a[e]=o;else{const c=o.knownActions;t._byClipCacheIndex=c.length,c.push(t)}t._cacheIndex=n.length,n.push(t),o.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null;const a=t._clip.uuid,o=this._actionsByClip,c=o[a],_=c.knownActions,l=_[_.length-1],u=t._byClipCacheIndex;l._byClipCacheIndex=u,_[u]=l,_.pop(),t._byClipCacheIndex=null;const p=c.actionByRoot,f=(t._localRoot||this._root).uuid;delete p[f],_.length===0&&delete o[a],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,n=e.length;i!==n;++i){const a=e[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,a=e[n];t._cacheIndex=n,e[n]=t,a._cacheIndex=i,e[i]=a}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,a=e[n];t._cacheIndex=n,e[n]=t,a._cacheIndex=i,e[i]=a}_addInactiveBinding(t,e,i){const n=this._bindingsByRootAndName,a=this._bindings;let o=n[e];o===void 0&&(o={},n[e]=o),o[i]=t,t._cacheIndex=a.length,a.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,n=i.rootNode.uuid,a=i.path,o=this._bindingsByRootAndName,c=o[n],_=e[e.length-1],l=t._cacheIndex;_._cacheIndex=l,e[l]=_,e.pop(),delete c[a],Object.keys(c).length===0&&delete o[n]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,a=e[n];t._cacheIndex=n,e[n]=t,a._cacheIndex=i,e[i]=a}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,a=e[n];t._cacheIndex=n,e[n]=t,a._cacheIndex=i,e[i]=a}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return i===void 0&&(i=new nd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,a=e[n];t.__cacheIndex=n,e[n]=t,a.__cacheIndex=i,e[i]=a}clipAction(t,e,i){const n=e||this._root,a=n.uuid;let o=typeof t=="string"?yl.findByName(n,t):t;const c=o!==null?o.uuid:t,_=this._actionsByClip[c];let l=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Nl),_!==void 0){const p=_.actionByRoot[a];if(p!==void 0&&p.blendMode===i)return p;l=_.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const u=new BS(this,o,e,i);return this._bindAction(u,l),this._addInactiveAction(u,c,a),u}existingAction(t,e){const i=e||this._root,n=i.uuid,a=typeof t=="string"?yl.findByName(i,t):t,o=a?a.uuid:t,c=this._actionsByClip[o];return c!==void 0&&c.actionByRoot[n]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,n=this.time+=t,a=Math.sign(t),o=this._accuIndex^=1;for(let l=0;l!==i;++l)e[l]._update(n,t,a,o);const c=this._bindings,_=this._nActiveBindings;for(let l=0;l!==_;++l)c[l].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,n=this._actionsByClip,a=n[i];if(a!==void 0){const o=a.knownActions;for(let c=0,_=o.length;c!==_;++c){const l=o[c];this._deactivateAction(l);const u=l._cacheIndex,p=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,p._cacheIndex=u,e[u]=p,e.pop(),this._removeInactiveBindingsForAction(l)}delete n[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const o in i){const c=i[o].actionByRoot,_=c[e];_!==void 0&&(this._deactivateAction(_),this._removeInactiveAction(_))}const n=this._bindingsByRootAndName,a=n[e];if(a!==void 0)for(const o in a){const c=a[o];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(t,e){const i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}VS.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class GS extends kr{constructor(t,e,i=1){super(t,e),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}GS.prototype.isInstancedInterleavedBuffer=!0;class US{constructor(t,e,i=0,n=1/0){this.ray=new Un(t,e),this.near=i,this.far=n,this.camera=null,this.layers=new Tp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,i=[]){return Ml(t,this,i,e),i.sort(yf),i}intersectObjects(t,e=!0,i=[]){for(let n=0,a=t.length;n<a;n++)Ml(t[n],this,i,e);return i.sort(yf),i}}function yf(r,t){return r.distance-t.distance}function Ml(r,t,e,i){if(r.layers.test(t.layers)&&r.raycast(t,e),i===!0){const n=r.children;for(let a=0,o=n.length;a<o;a++)Ml(n[a],t,e,!0)}}class Ef{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Ms(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class kS extends Te{constructor(t){super(),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}kS.prototype.isImmediateRenderObject=!0;const en=new C,ko=new jt,X_=new jt;class FS extends za{constructor(t){const e=gd(t),i=new de,n=[],a=[],o=new zt(0,0,1),c=new zt(0,1,0);for(let l=0;l<e.length;l++){const u=e[l];u.parent&&u.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),a.push(o.r,o.g,o.b),a.push(c.r,c.g,c.b))}i.setAttribute("position",new se(n,3)),i.setAttribute("color",new se(a,3));const _=new Fn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,_),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,n=i.getAttribute("position");X_.copy(this.root.matrixWorld).invert();for(let a=0,o=0;a<e.length;a++){const c=e[a];c.parent&&c.parent.isBone&&(ko.multiplyMatrices(X_,c.matrixWorld),en.setFromMatrixPosition(ko),n.setXYZ(o,en.x,en.y,en.z),ko.multiplyMatrices(X_,c.parent.matrixWorld),en.setFromMatrixPosition(ko),n.setXYZ(o+1,en.x,en.y,en.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function gd(r){const t=[];r&&r.isBone&&t.push(r);for(let e=0;e<r.children.length;e++)t.push.apply(t,gd(r.children[e]));return t}class HS extends za{constructor(t=10,e=10,i=4473924,n=8947848){i=new zt(i),n=new zt(n);const a=e/2,o=t/e,c=t/2,_=[],l=[];for(let f=0,d=0,A=-c;f<=e;f++,A+=o){_.push(-c,0,A,c,0,A),_.push(A,0,-c,A,0,c);const E=f===a?i:n;E.toArray(l,d),d+=3,E.toArray(l,d),d+=3,E.toArray(l,d),d+=3,E.toArray(l,d),d+=3}const u=new de;u.setAttribute("position",new se(_,3)),u.setAttribute("color",new se(l,3));const p=new Fn({vertexColors:!0,toneMapped:!1});super(u,p),this.type="GridHelper"}}const Fo=new C,He=new bc;class zS extends za{constructor(t){const e=new de,i=new Fn({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],a=[],o={},c=new zt(16755200),_=new zt(16711680),l=new zt(43775),u=new zt(16777215),p=new zt(3355443);f("n1","n2",c),f("n2","n4",c),f("n4","n3",c),f("n3","n1",c),f("f1","f2",c),f("f2","f4",c),f("f4","f3",c),f("f3","f1",c),f("n1","f1",c),f("n2","f2",c),f("n3","f3",c),f("n4","f4",c),f("p","n1",_),f("p","n2",_),f("p","n3",_),f("p","n4",_),f("u1","u2",l),f("u2","u3",l),f("u3","u1",l),f("c","t",u),f("p","c",p),f("cn1","cn2",p),f("cn3","cn4",p),f("cf1","cf2",p),f("cf3","cf4",p);function f(A,E,S){d(A,S),d(E,S)}function d(A,E){n.push(0,0,0),a.push(E.r,E.g,E.b),o[A]===void 0&&(o[A]=[]),o[A].push(n.length/3-1)}e.setAttribute("position",new se(n,3)),e.setAttribute("color",new se(a,3)),super(e,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const t=this.geometry,e=this.pointMap,i=1,n=1;He.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ye("c",e,t,He,0,0,-1),Ye("t",e,t,He,0,0,1),Ye("n1",e,t,He,-i,-n,-1),Ye("n2",e,t,He,i,-n,-1),Ye("n3",e,t,He,-i,n,-1),Ye("n4",e,t,He,i,n,-1),Ye("f1",e,t,He,-i,-n,1),Ye("f2",e,t,He,i,-n,1),Ye("f3",e,t,He,-i,n,1),Ye("f4",e,t,He,i,n,1),Ye("u1",e,t,He,i*.7,n*1.1,-1),Ye("u2",e,t,He,-i*.7,n*1.1,-1),Ye("u3",e,t,He,0,n*2,-1),Ye("cf1",e,t,He,-i,0,1),Ye("cf2",e,t,He,i,0,1),Ye("cf3",e,t,He,0,-n,1),Ye("cf4",e,t,He,0,n,1),Ye("cn1",e,t,He,-i,0,-1),Ye("cn2",e,t,He,i,0,-1),Ye("cn3",e,t,He,0,-n,-1),Ye("cn4",e,t,He,0,n,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ye(r,t,e,i,n,a,o){Fo.set(n,a,o).unproject(i);const c=t[r];if(c!==void 0){const _=e.getAttribute("position");for(let l=0,u=c.length;l<u;l++)_.setXYZ(c[l],Fo.x,Fo.y,Fo.z)}}const WS=new Float32Array(1);new Int32Array(WS.buffer);zs.create=function(r,t){return console.log("THREE.Curve.create() has been deprecated"),r.prototype=Object.create(zs.prototype),r.prototype.constructor=r,r.prototype.getPoint=t,r};ml.prototype.fromPoints=function(r){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(r)};HS.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};FS.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};ni.prototype.extractUrlBase=function(r){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),El.extractUrlBase(r)};ni.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Bs.prototype.center=function(r){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(r)};Bs.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Bs.prototype.isIntersectionBox=function(r){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)};Bs.prototype.isIntersectionSphere=function(r){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)};Bs.prototype.size=function(r){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(r)};Gn.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Dc.prototype.setFromMatrix=function(r){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(r)};ss.prototype.flattenToArrayOffset=function(r,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,t)};ss.prototype.multiplyVector3=function(r){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)};ss.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};ss.prototype.applyToBufferAttribute=function(r){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)};ss.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};ss.prototype.getInverse=function(r){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(r).invert()};jt.prototype.extractPosition=function(r){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(r)};jt.prototype.flattenToArrayOffset=function(r,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,t)};jt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new C().setFromMatrixColumn(this,3)};jt.prototype.setRotationFromQuaternion=function(r){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(r)};jt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};jt.prototype.multiplyVector3=function(r){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};jt.prototype.multiplyVector4=function(r){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};jt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};jt.prototype.rotateAxis=function(r){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),r.transformDirection(this)};jt.prototype.crossVector=function(r){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};jt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};jt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};jt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};jt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};jt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};jt.prototype.applyToBufferAttribute=function(r){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};jt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};jt.prototype.makeFrustum=function(r,t,e,i,n,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(r,t,i,e,n,a)};jt.prototype.getInverse=function(r){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(r).invert()};Vi.prototype.isIntersectionLine=function(r){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(r)};Se.prototype.multiplyVector3=function(r){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),r.applyQuaternion(this)};Se.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Un.prototype.isIntersectionBox=function(r){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)};Un.prototype.isIntersectionPlane=function(r){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(r)};Un.prototype.isIntersectionSphere=function(r){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)};je.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};je.prototype.barycoordFromPoint=function(r,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(r,t)};je.prototype.midpoint=function(r){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(r)};je.prototypenormal=function(r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(r)};je.prototype.plane=function(r){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(r)};je.barycoordFromPoint=function(r,t,e,i,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),je.getBarycoord(r,t,e,i,n)};je.normal=function(r,t,e,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),je.getNormal(r,t,e,i)};Fr.prototype.extractAllPoints=function(r){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(r)};Fr.prototype.extrude=function(r){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new gn(this,r)};Fr.prototype.makeGeometry=function(r){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Na(this,r)};dt.prototype.fromAttribute=function(r,t,e){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,t,e)};dt.prototype.distanceToManhattan=function(r){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)};dt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};C.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};C.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};C.prototype.getPositionFromMatrix=function(r){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(r)};C.prototype.getScaleFromMatrix=function(r){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(r)};C.prototype.getColumnFromMatrix=function(r,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,r)};C.prototype.applyProjection=function(r){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(r)};C.prototype.fromAttribute=function(r,t,e){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,t,e)};C.prototype.distanceToManhattan=function(r){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)};C.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Le.prototype.fromAttribute=function(r,t,e){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,t,e)};Le.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Te.prototype.getChildByName=function(r){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(r)};Te.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Te.prototype.translate=function(r,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,r)};Te.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Te.prototype.applyMatrix=function(r){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(r)};Object.defineProperties(Te.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(r){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=r}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});ke.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(ke.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),DA},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Fl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Ke.prototype.setLens=function(r,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(r)};Object.defineProperties(Ei.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(r){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=r}},shadowCameraLeft:{set:function(r){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=r}},shadowCameraRight:{set:function(r){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=r}},shadowCameraTop:{set:function(r){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=r}},shadowCameraBottom:{set:function(r){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=r}},shadowCameraNear:{set:function(r){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=r}},shadowCameraFar:{set:function(r){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=r}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(r){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=r}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(r){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=r}},shadowMapHeight:{set:function(r){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=r}}});Object.defineProperties(ze.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===ac},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(ac)}}});ze.prototype.setDynamic=function(r){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(r===!0?ac:xa),this};ze.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ze.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};de.prototype.addIndex=function(r){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(r)};de.prototype.addAttribute=function(r,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(r,new ze(arguments[1],arguments[2]))):r==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(r,t)};de.prototype.addDrawCall=function(r,t,e){e!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(r,t)};de.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};de.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};de.prototype.removeAttribute=function(r){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(r)};de.prototype.applyMatrix=function(r){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(r)};Object.defineProperties(de.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});kr.prototype.setDynamic=function(r){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(r===!0?ac:xa),this};kr.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};gn.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};gn.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};gn.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Vc.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(cs.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new zt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(r){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===up}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(r){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=r}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(un.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(r){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=r}}});Ne.prototype.clearTarget=function(r,t,e,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(r),this.clear(t,e,i)};Ne.prototype.animate=function(r){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(r)};Ne.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Ne.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Ne.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Ne.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Ne.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Ne.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Ne.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Ne.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Ne.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Ne.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Ne.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Ne.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Ne.prototype.enableScissorTest=function(r){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(r)};Ne.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Ne.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Ne.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Ne.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Ne.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Ne.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Ne.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Ne.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Ne.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Ne.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Ne.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=r}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=r}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(r){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=r===!0?yn:ds}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Gp.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(yi.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=r}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=r}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=r}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=r}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(r){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=r}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(r){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=r}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(r){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=r}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(r){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=r}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(r){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=r}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(r){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=r}}});IS.prototype.load=function(r){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new MS().load(r,function(i){t.setBuffer(i)}),this};Cl.prototype.updateCubeMap=function(r,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(r,t)};Cl.prototype.clear=function(r,t,e,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(r,t,e,i)};Vr.crossOrigin=void 0;Vr.loadTexture=function(r,t,e,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const n=new od;n.setCrossOrigin(this.crossOrigin);const a=n.load(r,e,void 0,i);return t&&(a.mapping=t),a};Vr.loadTextureCube=function(r,t,e,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const n=new dS;n.setCrossOrigin(this.crossOrigin);const a=n.load(r,e,void 0,i);return t&&(a.mapping=t),a};Vr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Vr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:lp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=lp);const Mf={type:"change"},j_={type:"start"},Q_={type:"end"};class Tl extends En{constructor(t,e){super(),e===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new C,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:jn.ROTATE,MIDDLE:jn.DOLLY,RIGHT:jn.PAN},this.touches={ONE:rn.ROTATE,TWO:rn.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(j){j.addEventListener("keydown",Nt),this._domElementKeyEvents=j},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(Mf),i.update(),a=n.NONE},this.update=(function(){const j=new C,Rt=new Se().setFromUnitVectors(t.up,new C(0,1,0)),ae=Rt.clone().invert(),ce=new C,be=new Se,xe=2*Math.PI;return function(){const As=i.object.position;j.copy(As).sub(i.target),j.applyQuaternion(Rt),c.setFromVector3(j),i.autoRotate&&a===n.NONE&&q(m()),i.enableDamping?(c.theta+=_.theta*i.dampingFactor,c.phi+=_.phi*i.dampingFactor):(c.theta+=_.theta,c.phi+=_.phi);let _s=i.minAzimuthAngle,Ns=i.maxAzimuthAngle;return isFinite(_s)&&isFinite(Ns)&&(_s<-Math.PI?_s+=xe:_s>Math.PI&&(_s-=xe),Ns<-Math.PI?Ns+=xe:Ns>Math.PI&&(Ns-=xe),_s<=Ns?c.theta=Math.max(_s,Math.min(Ns,c.theta)):c.theta=c.theta>(_s+Ns)/2?Math.max(_s,c.theta):Math.min(Ns,c.theta)),c.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=l,c.radius=Math.max(i.minDistance,Math.min(i.maxDistance,c.radius)),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),j.setFromSpherical(c),j.applyQuaternion(ae),As.copy(i.target).add(j),i.object.lookAt(i.target),i.enableDamping===!0?(_.theta*=1-i.dampingFactor,_.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(_.set(0,0,0),u.set(0,0,0)),l=1,p||ce.distanceToSquared(i.object.position)>o||8*(1-be.dot(i.object.quaternion))>o?(i.dispatchEvent(Mf),ce.copy(i.object.position),be.copy(i.object.quaternion),p=!1,!0):!1}})(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Pt),i.domElement.removeEventListener("pointerdown",Ot),i.domElement.removeEventListener("pointercancel",k),i.domElement.removeEventListener("wheel",It),i.domElement.removeEventListener("pointermove",Yt),i.domElement.removeEventListener("pointerup",Lt),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Nt)};const i=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=n.NONE;const o=1e-6,c=new Ef,_=new Ef;let l=1;const u=new C;let p=!1;const f=new dt,d=new dt,A=new dt,E=new dt,S=new dt,y=new dt,M=new dt,x=new dt,I=new dt,w=[],D={};function m(){return 2*Math.PI/60/60*i.autoRotateSpeed}function U(){return Math.pow(.95,i.zoomSpeed)}function q(j){_.theta-=j}function Y(j){_.phi-=j}const F=(function(){const j=new C;return function(ae,ce){j.setFromMatrixColumn(ce,0),j.multiplyScalar(-ae),u.add(j)}})(),it=(function(){const j=new C;return function(ae,ce){i.screenSpacePanning===!0?j.setFromMatrixColumn(ce,1):(j.setFromMatrixColumn(ce,0),j.crossVectors(i.object.up,j)),j.multiplyScalar(ae),u.add(j)}})(),G=(function(){const j=new C;return function(ae,ce){const be=i.domElement;if(i.object.isPerspectiveCamera){const xe=i.object.position;j.copy(xe).sub(i.target);let Qe=j.length();Qe*=Math.tan(i.object.fov/2*Math.PI/180),F(2*ae*Qe/be.clientHeight,i.object.matrix),it(2*ce*Qe/be.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(F(ae*(i.object.right-i.object.left)/i.object.zoom/be.clientWidth,i.object.matrix),it(ce*(i.object.top-i.object.bottom)/i.object.zoom/be.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function K(j){i.object.isPerspectiveCamera?l/=j:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*j)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(j){i.object.isPerspectiveCamera?l*=j:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/j)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function z(j){f.set(j.clientX,j.clientY)}function J(j){M.set(j.clientX,j.clientY)}function _t(j){E.set(j.clientX,j.clientY)}function gt(j){d.set(j.clientX,j.clientY),A.subVectors(d,f).multiplyScalar(i.rotateSpeed);const Rt=i.domElement;q(2*Math.PI*A.x/Rt.clientHeight),Y(2*Math.PI*A.y/Rt.clientHeight),f.copy(d),i.update()}function bt(j){x.set(j.clientX,j.clientY),I.subVectors(x,M),I.y>0?K(U()):I.y<0&&X(U()),M.copy(x),i.update()}function vt(j){S.set(j.clientX,j.clientY),y.subVectors(S,E).multiplyScalar(i.panSpeed),G(y.x,y.y),E.copy(S),i.update()}function Et(j){j.deltaY<0?X(U()):j.deltaY>0&&K(U()),i.update()}function pt(j){let Rt=!1;switch(j.code){case i.keys.UP:G(0,i.keyPanSpeed),Rt=!0;break;case i.keys.BOTTOM:G(0,-i.keyPanSpeed),Rt=!0;break;case i.keys.LEFT:G(i.keyPanSpeed,0),Rt=!0;break;case i.keys.RIGHT:G(-i.keyPanSpeed,0),Rt=!0;break}Rt&&(j.preventDefault(),i.update())}function St(){if(w.length===1)f.set(w[0].pageX,w[0].pageY);else{const j=.5*(w[0].pageX+w[1].pageX),Rt=.5*(w[0].pageY+w[1].pageY);f.set(j,Rt)}}function Ft(){if(w.length===1)E.set(w[0].pageX,w[0].pageY);else{const j=.5*(w[0].pageX+w[1].pageX),Rt=.5*(w[0].pageY+w[1].pageY);E.set(j,Rt)}}function ot(){const j=w[0].pageX-w[1].pageX,Rt=w[0].pageY-w[1].pageY,ae=Math.sqrt(j*j+Rt*Rt);M.set(0,ae)}function Xt(){i.enableZoom&&ot(),i.enablePan&&Ft()}function te(){i.enableZoom&&ot(),i.enableRotate&&St()}function kt(j){if(w.length==1)d.set(j.pageX,j.pageY);else{const ae=Ut(j),ce=.5*(j.pageX+ae.x),be=.5*(j.pageY+ae.y);d.set(ce,be)}A.subVectors(d,f).multiplyScalar(i.rotateSpeed);const Rt=i.domElement;q(2*Math.PI*A.x/Rt.clientHeight),Y(2*Math.PI*A.y/Rt.clientHeight),f.copy(d)}function Bt(j){if(w.length===1)S.set(j.pageX,j.pageY);else{const Rt=Ut(j),ae=.5*(j.pageX+Rt.x),ce=.5*(j.pageY+Rt.y);S.set(ae,ce)}y.subVectors(S,E).multiplyScalar(i.panSpeed),G(y.x,y.y),E.copy(S)}function ie(j){const Rt=Ut(j),ae=j.pageX-Rt.x,ce=j.pageY-Rt.y,be=Math.sqrt(ae*ae+ce*ce);x.set(0,be),I.set(0,Math.pow(x.y/M.y,i.zoomSpeed)),K(I.y),M.copy(x)}function lt(j){i.enableZoom&&ie(j),i.enablePan&&Bt(j)}function Mt(j){i.enableZoom&&ie(j),i.enableRotate&&kt(j)}function Ot(j){i.enabled!==!1&&(w.length===0&&(i.domElement.setPointerCapture(j.pointerId),i.domElement.addEventListener("pointermove",Yt),i.domElement.addEventListener("pointerup",Lt)),$(j),j.pointerType==="touch"?Qt(j):P(j))}function Yt(j){i.enabled!==!1&&(j.pointerType==="touch"?Kt(j):ht(j))}function Lt(j){i.enabled!==!1&&(j.pointerType==="touch"?yt():xt(),Dt(j),w.length===0&&(i.domElement.releasePointerCapture(j.pointerId),i.domElement.removeEventListener("pointermove",Yt),i.domElement.removeEventListener("pointerup",Lt)))}function k(j){Dt(j)}function P(j){let Rt;switch(j.button){case 0:Rt=i.mouseButtons.LEFT;break;case 1:Rt=i.mouseButtons.MIDDLE;break;case 2:Rt=i.mouseButtons.RIGHT;break;default:Rt=-1}switch(Rt){case jn.DOLLY:if(i.enableZoom===!1)return;J(j),a=n.DOLLY;break;case jn.ROTATE:if(j.ctrlKey||j.metaKey||j.shiftKey){if(i.enablePan===!1)return;_t(j),a=n.PAN}else{if(i.enableRotate===!1)return;z(j),a=n.ROTATE}break;case jn.PAN:if(j.ctrlKey||j.metaKey||j.shiftKey){if(i.enableRotate===!1)return;z(j),a=n.ROTATE}else{if(i.enablePan===!1)return;_t(j),a=n.PAN}break;default:a=n.NONE}a!==n.NONE&&i.dispatchEvent(j_)}function ht(j){if(i.enabled!==!1)switch(a){case n.ROTATE:if(i.enableRotate===!1)return;gt(j);break;case n.DOLLY:if(i.enableZoom===!1)return;bt(j);break;case n.PAN:if(i.enablePan===!1)return;vt(j);break}}function xt(j){i.dispatchEvent(Q_),a=n.NONE}function It(j){i.enabled===!1||i.enableZoom===!1||a!==n.NONE&&a!==n.ROTATE||(j.preventDefault(),i.dispatchEvent(j_),Et(j),i.dispatchEvent(Q_))}function Nt(j){i.enabled===!1||i.enablePan===!1||pt(j)}function Qt(j){switch(At(j),w.length){case 1:switch(i.touches.ONE){case rn.ROTATE:if(i.enableRotate===!1)return;St(),a=n.TOUCH_ROTATE;break;case rn.PAN:if(i.enablePan===!1)return;Ft(),a=n.TOUCH_PAN;break;default:a=n.NONE}break;case 2:switch(i.touches.TWO){case rn.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Xt(),a=n.TOUCH_DOLLY_PAN;break;case rn.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;te(),a=n.TOUCH_DOLLY_ROTATE;break;default:a=n.NONE}break;default:a=n.NONE}a!==n.NONE&&i.dispatchEvent(j_)}function Kt(j){switch(At(j),a){case n.TOUCH_ROTATE:if(i.enableRotate===!1)return;kt(j),i.update();break;case n.TOUCH_PAN:if(i.enablePan===!1)return;Bt(j),i.update();break;case n.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;lt(j),i.update();break;case n.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Mt(j),i.update();break;default:a=n.NONE}}function yt(j){i.dispatchEvent(Q_),a=n.NONE}function Pt(j){i.enabled!==!1&&j.preventDefault()}function $(j){w.push(j)}function Dt(j){delete D[j.pointerId];for(let Rt=0;Rt<w.length;Rt++)if(w[Rt].pointerId==j.pointerId){w.splice(Rt,1);return}}function At(j){let Rt=D[j.pointerId];Rt===void 0&&(Rt=new dt,D[j.pointerId]=Rt),Rt.set(j.pageX,j.pageY)}function Ut(j){const Rt=j.pointerId===w[0].pointerId?w[1]:w[0];return D[Rt.pointerId]}i.domElement.addEventListener("contextmenu",Pt),i.domElement.addEventListener("pointerdown",Ot),i.domElement.addEventListener("pointercancel",k),i.domElement.addEventListener("wheel",It,{passive:!1}),this.update()}}class si{constructor(t){t===void 0&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z}getTrace(t){t===void 0&&(t=new N);const e=this.elements;return t.x=e[0],t.y=e[4],t.z=e[8],t}vmult(t,e){e===void 0&&(e=new N);const i=this.elements,n=t.x,a=t.y,o=t.z;return e.x=i[0]*n+i[1]*a+i[2]*o,e.y=i[3]*n+i[4]*a+i[5]*o,e.z=i[6]*n+i[7]*a+i[8]*o,e}smult(t){for(let e=0;e<this.elements.length;e++)this.elements[e]*=t}mmult(t,e){e===void 0&&(e=new si);const i=this.elements,n=t.elements,a=e.elements,o=i[0],c=i[1],_=i[2],l=i[3],u=i[4],p=i[5],f=i[6],d=i[7],A=i[8],E=n[0],S=n[1],y=n[2],M=n[3],x=n[4],I=n[5],w=n[6],D=n[7],m=n[8];return a[0]=o*E+c*M+_*w,a[1]=o*S+c*x+_*D,a[2]=o*y+c*I+_*m,a[3]=l*E+u*M+p*w,a[4]=l*S+u*x+p*D,a[5]=l*y+u*I+p*m,a[6]=f*E+d*M+A*w,a[7]=f*S+d*x+A*D,a[8]=f*y+d*I+A*m,e}scale(t,e){e===void 0&&(e=new si);const i=this.elements,n=e.elements;for(let a=0;a!==3;a++)n[3*a+0]=t.x*i[3*a+0],n[3*a+1]=t.y*i[3*a+1],n[3*a+2]=t.z*i[3*a+2];return e}solve(t,e){e===void 0&&(e=new N);const i=3,n=4,a=[];let o,c;for(o=0;o<i*n;o++)a.push(0);for(o=0;o<3;o++)for(c=0;c<3;c++)a[o+n*c]=this.elements[o+3*c];a[3]=t.x,a[7]=t.y,a[11]=t.z;let _=3;const l=_;let u;const p=4;let f;do{if(o=l-_,a[o+n*o]===0){for(c=o+1;c<l;c++)if(a[o+n*c]!==0){u=p;do f=p-u,a[f+n*o]+=a[f+n*c];while(--u);break}}if(a[o+n*o]!==0)for(c=o+1;c<l;c++){const d=a[o+n*c]/a[o+n*o];u=p;do f=p-u,a[f+n*c]=f<=o?0:a[f+n*c]-a[f+n*o]*d;while(--u)}}while(--_);if(e.z=a[2*n+3]/a[2*n+2],e.y=(a[1*n+3]-a[1*n+2]*e.z)/a[1*n+1],e.x=(a[0*n+3]-a[0*n+2]*e.z-a[0*n+1]*e.y)/a[0*n+0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw`Could not solve equation! Got x=[${e.toString()}], b=[${t.toString()}], A=[${this.toString()}]`;return e}e(t,e,i){if(i===void 0)return this.elements[e+3*t];this.elements[e+3*t]=i}copy(t){for(let e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this}toString(){let t="";for(let i=0;i<9;i++)t+=this.elements[i]+",";return t}reverse(t){t===void 0&&(t=new si);const e=3,i=6,n=YS;let a,o;for(a=0;a<3;a++)for(o=0;o<3;o++)n[a+i*o]=this.elements[a+3*o];n[3]=1,n[9]=0,n[15]=0,n[4]=0,n[10]=1,n[16]=0,n[5]=0,n[11]=0,n[17]=1;let c=3;const _=c;let l;const u=i;let p;do{if(a=_-c,n[a+i*a]===0){for(o=a+1;o<_;o++)if(n[a+i*o]!==0){l=u;do p=u-l,n[p+i*a]+=n[p+i*o];while(--l);break}}if(n[a+i*a]!==0)for(o=a+1;o<_;o++){const f=n[a+i*o]/n[a+i*a];l=u;do p=u-l,n[p+i*o]=p<=a?0:n[p+i*o]-n[p+i*a]*f;while(--l)}}while(--c);a=2;do{o=a-1;do{const f=n[a+i*o]/n[a+i*a];l=i;do p=i-l,n[p+i*o]=n[p+i*o]-n[p+i*a]*f;while(--l)}while(o--)}while(--a);a=2;do{const f=1/n[a+i*a];l=i;do p=i-l,n[p+i*a]=n[p+i*a]*f;while(--l)}while(a--);a=2;do{o=2;do{if(p=n[e+o+i*a],isNaN(p)||p===1/0)throw`Could not reverse! A=[${this.toString()}]`;t.e(a,o,p)}while(o--)}while(a--);return t}setRotationFromQuaternion(t){const e=t.x,i=t.y,n=t.z,a=t.w,o=e+e,c=i+i,_=n+n,l=e*o,u=e*c,p=e*_,f=i*c,d=i*_,A=n*_,E=a*o,S=a*c,y=a*_,M=this.elements;return M[0]=1-(f+A),M[1]=u-y,M[2]=p+S,M[3]=u+y,M[4]=1-(l+A),M[5]=d-E,M[6]=p-S,M[7]=d+E,M[8]=1-(l+f),this}transpose(t){t===void 0&&(t=new si);const e=this.elements,i=t.elements;let n;return i[0]=e[0],i[4]=e[4],i[8]=e[8],n=e[1],i[1]=e[3],i[3]=n,n=e[2],i[2]=e[6],i[6]=n,n=e[5],i[5]=e[7],i[7]=n,t}}const YS=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class N{constructor(t,e,i){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),this.x=t,this.y=e,this.z=i}cross(t,e){e===void 0&&(e=new N);const i=t.x,n=t.y,a=t.z,o=this.x,c=this.y,_=this.z;return e.x=c*a-_*n,e.y=_*i-o*a,e.z=o*n-c*i,e}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(t,e){if(e)e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z;else return new N(this.x+t.x,this.y+t.y,this.z+t.z)}vsub(t,e){if(e)e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z;else return new N(this.x-t.x,this.y-t.y,this.z-t.z)}crossmat(){return new si([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,e=this.y,i=this.z,n=Math.sqrt(t*t+e*e+i*i);if(n>0){const a=1/n;this.x*=a,this.y*=a,this.z*=a}else this.x=0,this.y=0,this.z=0;return n}unit(t){t===void 0&&(t=new N);const e=this.x,i=this.y,n=this.z;let a=Math.sqrt(e*e+i*i+n*n);return a>0?(a=1/a,t.x=e*a,t.y=i*a,t.z=n*a):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)}lengthSquared(){return this.dot(this)}distanceTo(t){const e=this.x,i=this.y,n=this.z,a=t.x,o=t.y,c=t.z;return Math.sqrt((a-e)*(a-e)+(o-i)*(o-i)+(c-n)*(c-n))}distanceSquared(t){const e=this.x,i=this.y,n=this.z,a=t.x,o=t.y,c=t.z;return(a-e)*(a-e)+(o-i)*(o-i)+(c-n)*(c-n)}scale(t,e){e===void 0&&(e=new N);const i=this.x,n=this.y,a=this.z;return e.x=t*i,e.y=t*n,e.z=t*a,e}vmul(t,e){return e===void 0&&(e=new N),e.x=t.x*this.x,e.y=t.y*this.y,e.z=t.z*this.z,e}addScaledVector(t,e,i){return i===void 0&&(i=new N),i.x=this.x+t*e.x,i.y=this.y+t*e.y,i.z=this.z+t*e.z,i}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(t){return t===void 0&&(t=new N),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,e){const i=this.length();if(i>0){const n=KS,a=1/i;n.set(this.x*a,this.y*a,this.z*a);const o=qS;Math.abs(n.x)<.9?(o.set(1,0,0),n.cross(o,t)):(o.set(0,1,0),n.cross(o,t)),n.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,e,i){const n=this.x,a=this.y,o=this.z;i.x=n+(t.x-n)*e,i.y=a+(t.y-a)*e,i.z=o+(t.z-o)*e}almostEquals(t,e){return e===void 0&&(e=1e-6),!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)}almostZero(t){return t===void 0&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,e){return this.negate(Tf),Tf.almostEquals(t,e)}clone(){return new N(this.x,this.y,this.z)}}N.ZERO=new N(0,0,0);N.UNIT_X=new N(1,0,0);N.UNIT_Y=new N(0,1,0);N.UNIT_Z=new N(0,0,1);const KS=new N,qS=new N,Tf=new N;class Vs{constructor(t){t===void 0&&(t={}),this.lowerBound=new N,this.upperBound=new N,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,e,i,n){const a=this.lowerBound,o=this.upperBound,c=i;a.copy(t[0]),c&&c.vmult(a,a),o.copy(a);for(let _=1;_<t.length;_++){let l=t[_];c&&(c.vmult(l,Sf),l=Sf),l.x>o.x&&(o.x=l.x),l.x<a.x&&(a.x=l.x),l.y>o.y&&(o.y=l.y),l.y<a.y&&(a.y=l.y),l.z>o.z&&(o.z=l.z),l.z<a.z&&(a.z=l.z)}return e&&(e.vadd(a,a),e.vadd(o,o)),n&&(a.x-=n,a.y-=n,a.z-=n,o.x+=n,o.y+=n,o.z+=n),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return new Vs().copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const e=this.lowerBound,i=this.upperBound,n=t.lowerBound,a=t.upperBound,o=n.x<=i.x&&i.x<=a.x||e.x<=a.x&&a.x<=i.x,c=n.y<=i.y&&i.y<=a.y||e.y<=a.y&&a.y<=i.y,_=n.z<=i.z&&i.z<=a.z||e.z<=a.z&&a.z<=i.z;return o&&c&&_}volume(){const t=this.lowerBound,e=this.upperBound;return(e.x-t.x)*(e.y-t.y)*(e.z-t.z)}contains(t){const e=this.lowerBound,i=this.upperBound,n=t.lowerBound,a=t.upperBound;return e.x<=n.x&&i.x>=a.x&&e.y<=n.y&&i.y>=a.y&&e.z<=n.z&&i.z>=a.z}getCorners(t,e,i,n,a,o,c,_){const l=this.lowerBound,u=this.upperBound;t.copy(l),e.set(u.x,l.y,l.z),i.set(u.x,u.y,l.z),n.set(l.x,u.y,u.z),a.set(u.x,l.y,u.z),o.set(l.x,u.y,l.z),c.set(l.x,l.y,u.z),_.copy(u)}toLocalFrame(t,e){const i=vf,n=i[0],a=i[1],o=i[2],c=i[3],_=i[4],l=i[5],u=i[6],p=i[7];this.getCorners(n,a,o,c,_,l,u,p);for(let f=0;f!==8;f++){const d=i[f];t.pointToLocal(d,d)}return e.setFromPoints(i)}toWorldFrame(t,e){const i=vf,n=i[0],a=i[1],o=i[2],c=i[3],_=i[4],l=i[5],u=i[6],p=i[7];this.getCorners(n,a,o,c,_,l,u,p);for(let f=0;f!==8;f++){const d=i[f];t.pointToWorld(d,d)}return e.setFromPoints(i)}overlapsRay(t){const{direction:e,from:i}=t,n=1/e.x,a=1/e.y,o=1/e.z,c=(this.lowerBound.x-i.x)*n,_=(this.upperBound.x-i.x)*n,l=(this.lowerBound.y-i.y)*a,u=(this.upperBound.y-i.y)*a,p=(this.lowerBound.z-i.z)*o,f=(this.upperBound.z-i.z)*o,d=Math.max(Math.max(Math.min(c,_),Math.min(l,u)),Math.min(p,f)),A=Math.min(Math.min(Math.max(c,_),Math.max(l,u)),Math.max(p,f));return!(A<0||d>A)}}const Sf=new N,vf=[new N,new N,new N,new N,new N,new N,new N,new N];class If{constructor(){this.matrix=[]}get(t,e){let{index:i}=t,{index:n}=e;if(n>i){const a=n;n=i,i=a}return this.matrix[(i*(i+1)>>1)+n-1]}set(t,e,i){let{index:n}=t,{index:a}=e;if(a>n){const o=a;a=n,n=o}this.matrix[(n*(n+1)>>1)+a-1]=i?1:0}reset(){for(let t=0,e=this.matrix.length;t!==e;t++)this.matrix[t]=0}setNumObjects(t){this.matrix.length=t*(t-1)>>1}}class Ad{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;return i[t]===void 0&&(i[t]=[]),i[t].includes(e)||i[t].push(e),this}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return!!(i[t]!==void 0&&i[t].includes(e))}hasAnyEventListener(t){return this._listeners===void 0?!1:this._listeners[t]!==void 0}removeEventListener(t,e){if(this._listeners===void 0)return this;const i=this._listeners;if(i[t]===void 0)return this;const n=i[t].indexOf(e);return n!==-1&&i[t].splice(n,1),this}dispatchEvent(t){if(this._listeners===void 0)return this;const i=this._listeners[t.type];if(i!==void 0){t.target=this;for(let n=0,a=i.length;n<a;n++)i[n].call(this,t)}return this}}class Xe{constructor(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),this.x=t,this.y=e,this.z=i,this.w=n}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,e){const i=Math.sin(e*.5);return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=Math.cos(e*.5),this}toAxisAngle(t){t===void 0&&(t=new N),this.normalize();const e=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/i,t.y=this.y/i,t.z=this.z/i),[t,e]}setFromVectors(t,e){if(t.isAntiparallelTo(e)){const i=XS,n=jS;t.tangents(i,n),this.setFromAxisAngle(i,Math.PI)}else{const i=t.cross(e);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(t.length()**2*e.length()**2)+t.dot(e),this.normalize()}return this}mult(t,e){e===void 0&&(e=new Xe);const i=this.x,n=this.y,a=this.z,o=this.w,c=t.x,_=t.y,l=t.z,u=t.w;return e.x=i*u+o*c+n*l-a*_,e.y=n*u+o*_+a*c-i*l,e.z=a*u+o*l+i*_-n*c,e.w=o*u-i*c-n*_-a*l,e}inverse(t){t===void 0&&(t=new Xe);const e=this.x,i=this.y,n=this.z,a=this.w;this.conjugate(t);const o=1/(e*e+i*i+n*n+a*a);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}conjugate(t){return t===void 0&&(t=new Xe),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,e){e===void 0&&(e=new N);const i=t.x,n=t.y,a=t.z,o=this.x,c=this.y,_=this.z,l=this.w,u=l*i+c*a-_*n,p=l*n+_*i-o*a,f=l*a+o*n-c*i,d=-o*i-c*n-_*a;return e.x=u*l+d*-o+p*-_-f*-c,e.y=p*l+d*-c+f*-o-u*-_,e.z=f*l+d*-_+u*-c-p*-o,e}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,e){e===void 0&&(e="YZX");let i,n,a;const o=this.x,c=this.y,_=this.z,l=this.w;switch(e){case"YZX":const u=o*c+_*l;if(u>.499&&(i=2*Math.atan2(o,l),n=Math.PI/2,a=0),u<-.499&&(i=-2*Math.atan2(o,l),n=-Math.PI/2,a=0),i===void 0){const p=o*o,f=c*c,d=_*_;i=Math.atan2(2*c*l-2*o*_,1-2*f-2*d),n=Math.asin(2*u),a=Math.atan2(2*o*l-2*c*_,1-2*p-2*d)}break;default:throw new Error(`Euler order ${e} not supported yet.`)}t.y=i,t.z=n,t.x=a}setFromEuler(t,e,i,n){n===void 0&&(n="XYZ");const a=Math.cos(t/2),o=Math.cos(e/2),c=Math.cos(i/2),_=Math.sin(t/2),l=Math.sin(e/2),u=Math.sin(i/2);return n==="XYZ"?(this.x=_*o*c+a*l*u,this.y=a*l*c-_*o*u,this.z=a*o*u+_*l*c,this.w=a*o*c-_*l*u):n==="YXZ"?(this.x=_*o*c+a*l*u,this.y=a*l*c-_*o*u,this.z=a*o*u-_*l*c,this.w=a*o*c+_*l*u):n==="ZXY"?(this.x=_*o*c-a*l*u,this.y=a*l*c+_*o*u,this.z=a*o*u+_*l*c,this.w=a*o*c-_*l*u):n==="ZYX"?(this.x=_*o*c-a*l*u,this.y=a*l*c+_*o*u,this.z=a*o*u-_*l*c,this.w=a*o*c+_*l*u):n==="YZX"?(this.x=_*o*c+a*l*u,this.y=a*l*c+_*o*u,this.z=a*o*u-_*l*c,this.w=a*o*c-_*l*u):n==="XZY"&&(this.x=_*o*c-a*l*u,this.y=a*l*c-_*o*u,this.z=a*o*u+_*l*c,this.w=a*o*c+_*l*u),this}clone(){return new Xe(this.x,this.y,this.z,this.w)}slerp(t,e,i){i===void 0&&(i=new Xe);const n=this.x,a=this.y,o=this.z,c=this.w;let _=t.x,l=t.y,u=t.z,p=t.w,f,d,A,E,S;return d=n*_+a*l+o*u+c*p,d<0&&(d=-d,_=-_,l=-l,u=-u,p=-p),1-d>1e-6?(f=Math.acos(d),A=Math.sin(f),E=Math.sin((1-e)*f)/A,S=Math.sin(e*f)/A):(E=1-e,S=e),i.x=E*n+S*_,i.y=E*a+S*l,i.z=E*o+S*u,i.w=E*c+S*p,i}integrate(t,e,i,n){n===void 0&&(n=new Xe);const a=t.x*i.x,o=t.y*i.y,c=t.z*i.z,_=this.x,l=this.y,u=this.z,p=this.w,f=e*.5;return n.x+=f*(a*p+o*u-c*l),n.y+=f*(o*p+c*_-a*u),n.z+=f*(c*p+a*l-o*_),n.w+=f*(-a*_-o*l-c*u),n}}const XS=new N,jS=new N,QS={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class Ht{constructor(t){t===void 0&&(t={}),this.id=Ht.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=t.collisionResponse?t.collisionResponse:!0,this.collisionFilterGroup=t.collisionFilterGroup!==void 0?t.collisionFilterGroup:1,this.collisionFilterMask=t.collisionFilterMask!==void 0?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,e){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,e,i,n){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}Ht.idCounter=0;Ht.types=QS;class Ie{constructor(t){t===void 0&&(t={}),this.position=new N,this.quaternion=new Xe,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,e){return Ie.pointToLocalFrame(this.position,this.quaternion,t,e)}pointToWorld(t,e){return Ie.pointToWorldFrame(this.position,this.quaternion,t,e)}vectorToWorldFrame(t,e){return e===void 0&&(e=new N),this.quaternion.vmult(t,e),e}static pointToLocalFrame(t,e,i,n){return n===void 0&&(n=new N),i.vsub(t,n),e.conjugate(xf),xf.vmult(n,n),n}static pointToWorldFrame(t,e,i,n){return n===void 0&&(n=new N),e.vmult(i,n),n.vadd(t,n),n}static vectorToWorldFrame(t,e,i){return i===void 0&&(i=new N),t.vmult(e,i),i}static vectorToLocalFrame(t,e,i,n){return n===void 0&&(n=new N),e.w*=-1,e.vmult(i,n),e.w*=-1,n}}const xf=new Xe;class Ta extends Ht{constructor(t){t===void 0&&(t={});const{vertices:e=[],faces:i=[],normals:n=[],axes:a,boundingSphereRadius:o}=t;super({type:Ht.types.CONVEXPOLYHEDRON}),this.vertices=e,this.faces=i,this.faceNormals=n,this.faceNormals.length===0&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=a?a.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,e=this.vertices,i=this.uniqueEdges;i.length=0;const n=new N;for(let a=0;a!==t.length;a++){const o=t[a],c=o.length;for(let _=0;_!==c;_++){const l=(_+1)%c;e[o[_]].vsub(e[o[l]],n),n.normalize();let u=!1;for(let p=0;p!==i.length;p++)if(i[p].almostEquals(n)||i[p].almostEquals(n)){u=!0;break}u||i.push(n.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let n=0;n<this.faces[t].length;n++)if(!this.vertices[this.faces[t][n]])throw new Error(`Vertex ${this.faces[t][n]} not found!`);const e=this.faceNormals[t]||new N;this.getFaceNormal(t,e),e.negate(e),this.faceNormals[t]=e;const i=this.vertices[this.faces[t][0]];if(e.dot(i)<0){console.error(`.faceNormals[${t}] = Vec3(${e.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let n=0;n<this.faces[t].length;n++)console.warn(`.vertices[${this.faces[t][n]}] = Vec3(${this.vertices[this.faces[t][n]].toString()})`)}}}getFaceNormal(t,e){const i=this.faces[t],n=this.vertices[i[0]],a=this.vertices[i[1]],o=this.vertices[i[2]];Ta.computeNormal(n,a,o,e)}static computeNormal(t,e,i,n){const a=new N,o=new N;e.vsub(t,o),i.vsub(e,a),a.cross(o,n),n.isZero()||n.normalize()}clipAgainstHull(t,e,i,n,a,o,c,_,l){const u=new N;let p=-1,f=-Number.MAX_VALUE;for(let A=0;A<i.faces.length;A++){u.copy(i.faceNormals[A]),a.vmult(u,u);const E=u.dot(o);E>f&&(f=E,p=A)}const d=[];for(let A=0;A<i.faces[p].length;A++){const E=i.vertices[i.faces[p][A]],S=new N;S.copy(E),a.vmult(S,S),n.vadd(S,S),d.push(S)}p>=0&&this.clipFaceAgainstHull(o,t,e,d,c,_,l)}findSeparatingAxis(t,e,i,n,a,o,c,_){const l=new N,u=new N,p=new N,f=new N,d=new N,A=new N;let E=Number.MAX_VALUE;const S=this;if(S.uniqueAxes)for(let y=0;y!==S.uniqueAxes.length;y++){i.vmult(S.uniqueAxes[y],l);const M=S.testSepAxis(l,t,e,i,n,a);if(M===!1)return!1;M<E&&(E=M,o.copy(l))}else{const y=c?c.length:S.faces.length;for(let M=0;M<y;M++){const x=c?c[M]:M;l.copy(S.faceNormals[x]),i.vmult(l,l);const I=S.testSepAxis(l,t,e,i,n,a);if(I===!1)return!1;I<E&&(E=I,o.copy(l))}}if(t.uniqueAxes)for(let y=0;y!==t.uniqueAxes.length;y++){a.vmult(t.uniqueAxes[y],u);const M=S.testSepAxis(u,t,e,i,n,a);if(M===!1)return!1;M<E&&(E=M,o.copy(u))}else{const y=_?_.length:t.faces.length;for(let M=0;M<y;M++){const x=_?_[M]:M;u.copy(t.faceNormals[x]),a.vmult(u,u);const I=S.testSepAxis(u,t,e,i,n,a);if(I===!1)return!1;I<E&&(E=I,o.copy(u))}}for(let y=0;y!==S.uniqueEdges.length;y++){i.vmult(S.uniqueEdges[y],f);for(let M=0;M!==t.uniqueEdges.length;M++)if(a.vmult(t.uniqueEdges[M],d),f.cross(d,A),!A.almostZero()){A.normalize();const x=S.testSepAxis(A,t,e,i,n,a);if(x===!1)return!1;x<E&&(E=x,o.copy(A))}}return n.vsub(e,p),p.dot(o)>0&&o.negate(o),!0}testSepAxis(t,e,i,n,a,o){const c=this;Ta.project(c,t,i,n,Z_),Ta.project(e,t,a,o,$_);const _=Z_[0],l=Z_[1],u=$_[0],p=$_[1];if(_<p||u<l)return!1;const f=_-p,d=u-l;return f<d?f:d}calculateLocalInertia(t,e){const i=new N,n=new N;this.computeLocalAABB(n,i);const a=i.x-n.x,o=i.y-n.y,c=i.z-n.z;e.x=1/12*t*(2*o*2*o+2*c*2*c),e.y=1/12*t*(2*a*2*a+2*c*2*c),e.z=1/12*t*(2*o*2*o+2*a*2*a)}getPlaneConstantOfFace(t){const e=this.faces[t],i=this.faceNormals[t],n=this.vertices[e[0]];return-i.dot(n)}clipFaceAgainstHull(t,e,i,n,a,o,c){const _=new N,l=new N,u=new N,p=new N,f=new N,d=new N,A=new N,E=new N,S=this,y=[],M=n,x=y;let I=-1,w=Number.MAX_VALUE;for(let Y=0;Y<S.faces.length;Y++){_.copy(S.faceNormals[Y]),i.vmult(_,_);const F=_.dot(t);F<w&&(w=F,I=Y)}if(I<0)return;const D=S.faces[I];D.connectedFaces=[];for(let Y=0;Y<S.faces.length;Y++)for(let F=0;F<S.faces[Y].length;F++)D.indexOf(S.faces[Y][F])!==-1&&Y!==I&&D.connectedFaces.indexOf(Y)===-1&&D.connectedFaces.push(Y);const m=D.length;for(let Y=0;Y<m;Y++){const F=S.vertices[D[Y]],it=S.vertices[D[(Y+1)%m]];F.vsub(it,l),u.copy(l),i.vmult(u,u),e.vadd(u,u),p.copy(this.faceNormals[I]),i.vmult(p,p),e.vadd(p,p),u.cross(p,f),f.negate(f),d.copy(F),i.vmult(d,d),e.vadd(d,d);const G=D.connectedFaces[Y];A.copy(this.faceNormals[G]);const K=this.getPlaneConstantOfFace(G);E.copy(A),i.vmult(E,E);const X=K-E.dot(e);for(this.clipFaceAgainstPlane(M,x,E,X);M.length;)M.shift();for(;x.length;)M.push(x.shift())}A.copy(this.faceNormals[I]);const U=this.getPlaneConstantOfFace(I);E.copy(A),i.vmult(E,E);const q=U-E.dot(e);for(let Y=0;Y<M.length;Y++){let F=E.dot(M[Y])+q;if(F<=a&&(console.log(`clamped: depth=${F} to minDist=${a}`),F=a),F<=o){const it=M[Y];if(F<=1e-6){const G={point:it,normal:E,depth:F};c.push(G)}}}}clipFaceAgainstPlane(t,e,i,n){let a,o;const c=t.length;if(c<2)return e;let _=t[t.length-1],l=t[0];a=i.dot(_)+n;for(let u=0;u<c;u++){if(l=t[u],o=i.dot(l)+n,a<0)if(o<0){const p=new N;p.copy(l),e.push(p)}else{const p=new N;_.lerp(l,a/(a-o),p),e.push(p)}else if(o<0){const p=new N;_.lerp(l,a/(a-o),p),e.push(p),e.push(l)}_=l,a=o}return e}computeWorldVertices(t,e){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new N);const i=this.vertices,n=this.worldVertices;for(let a=0;a!==this.vertices.length;a++)e.vmult(i[a],n[a]),t.vadd(n[a],n[a]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,e){const i=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let n=0;n<this.vertices.length;n++){const a=i[n];a.x<t.x?t.x=a.x:a.x>e.x&&(e.x=a.x),a.y<t.y?t.y=a.y:a.y>e.y&&(e.y=a.y),a.z<t.z?t.z=a.z:a.z>e.z&&(e.z=a.z)}}computeWorldFaceNormals(t){const e=this.faceNormals.length;for(;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new N);const i=this.faceNormals,n=this.worldFaceNormals;for(let a=0;a!==e;a++)t.vmult(i[a],n[a]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const e=this.vertices;for(let i=0;i!==e.length;i++){const n=e[i].lengthSquared();n>t&&(t=n)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,e,i,n){const a=this.vertices;let o,c,_,l,u,p,f=new N;for(let d=0;d<a.length;d++){f.copy(a[d]),e.vmult(f,f),t.vadd(f,f);const A=f;(o===void 0||A.x<o)&&(o=A.x),(l===void 0||A.x>l)&&(l=A.x),(c===void 0||A.y<c)&&(c=A.y),(u===void 0||A.y>u)&&(u=A.y),(_===void 0||A.z<_)&&(_=A.z),(p===void 0||A.z>p)&&(p=A.z)}i.set(o,c,_),n.set(l,u,p)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t){t===void 0&&(t=new N);const e=this.vertices;for(let i=0;i<e.length;i++)t.vadd(e[i],t);return t.scale(1/e.length,t),t}transformAllPoints(t,e){const i=this.vertices.length,n=this.vertices;if(e){for(let a=0;a<i;a++){const o=n[a];e.vmult(o,o)}for(let a=0;a<this.faceNormals.length;a++){const o=this.faceNormals[a];e.vmult(o,o)}}if(t)for(let a=0;a<i;a++){const o=n[a];o.vadd(t,o)}}pointIsInside(t){const e=this.vertices,i=this.faces,n=this.faceNormals,a=new N;this.getAveragePointLocal(a);for(let o=0;o<this.faces.length;o++){let c=n[o];const _=e[i[o][0]],l=new N;t.vsub(_,l);const u=c.dot(l),p=new N;a.vsub(_,p);const f=c.dot(p);if(u<0&&f>0||u>0&&f<0)return!1}return-1}static project(t,e,i,n,a){const o=t.vertices.length,c=ZS;let _=0,l=0;const u=$S,p=t.vertices;u.setZero(),Ie.vectorToLocalFrame(i,n,e,c),Ie.pointToLocalFrame(i,n,u,u);const f=u.dot(c);l=_=p[0].dot(c);for(let d=1;d<o;d++){const A=p[d].dot(c);A>_&&(_=A),A<l&&(l=A)}if(l-=f,_-=f,l>_){const d=l;l=_,_=d}a[0]=_,a[1]=l}}const Z_=[],$_=[];new N;const ZS=new N,$S=new N;class nh extends Ht{constructor(t){super({type:Ht.types.BOX}),this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,e=this.halfExtents.y,i=this.halfExtents.z,n=N,a=[new n(-t,-e,-i),new n(t,-e,-i),new n(t,e,-i),new n(-t,e,-i),new n(-t,-e,i),new n(t,-e,i),new n(t,e,i),new n(-t,e,i)],o=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],c=[new n(0,0,1),new n(0,1,0),new n(1,0,0)],_=new Ta({vertices:a,faces:o,axes:c});this.convexPolyhedronRepresentation=_,_.material=this.material}calculateLocalInertia(t,e){return e===void 0&&(e=new N),nh.calculateInertia(this.halfExtents,t,e),e}static calculateInertia(t,e,i){const n=t;i.x=1/12*e*(2*n.y*2*n.y+2*n.z*2*n.z),i.y=1/12*e*(2*n.x*2*n.x+2*n.z*2*n.z),i.z=1/12*e*(2*n.y*2*n.y+2*n.x*2*n.x)}getSideNormals(t,e){const i=t,n=this.halfExtents;if(i[0].set(n.x,0,0),i[1].set(0,n.y,0),i[2].set(0,0,n.z),i[3].set(-n.x,0,0),i[4].set(0,-n.y,0),i[5].set(0,0,-n.z),e!==void 0)for(let a=0;a!==i.length;a++)e.vmult(i[a],i[a]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,e,i){const n=this.halfExtents,a=[[n.x,n.y,n.z],[-n.x,n.y,n.z],[-n.x,-n.y,n.z],[-n.x,-n.y,-n.z],[n.x,-n.y,-n.z],[n.x,n.y,-n.z],[-n.x,n.y,-n.z],[n.x,-n.y,n.z]];for(let o=0;o<a.length;o++)sn.set(a[o][0],a[o][1],a[o][2]),e.vmult(sn,sn),t.vadd(sn,sn),i(sn.x,sn.y,sn.z)}calculateWorldAABB(t,e,i,n){const a=this.halfExtents;pi[0].set(a.x,a.y,a.z),pi[1].set(-a.x,a.y,a.z),pi[2].set(-a.x,-a.y,a.z),pi[3].set(-a.x,-a.y,-a.z),pi[4].set(a.x,-a.y,-a.z),pi[5].set(a.x,a.y,-a.z),pi[6].set(-a.x,a.y,-a.z),pi[7].set(a.x,-a.y,a.z);const o=pi[0];e.vmult(o,o),t.vadd(o,o),n.copy(o),i.copy(o);for(let c=1;c<8;c++){const _=pi[c];e.vmult(_,_),t.vadd(_,_);const l=_.x,u=_.y,p=_.z;l>n.x&&(n.x=l),u>n.y&&(n.y=u),p>n.z&&(n.z=p),l<i.x&&(i.x=l),u<i.y&&(i.y=u),p<i.z&&(i.z=p)}}}const sn=new N,pi=[new N,new N,new N,new N,new N,new N,new N,new N],rh={DYNAMIC:1,STATIC:2,KINEMATIC:4},ah={AWAKE:0,SLEEPY:1,SLEEPING:2};class Wt extends Ad{constructor(t){t===void 0&&(t={}),super(),this.id=Wt.idCounter++,this.index=-1,this.world=null,this.vlambda=new N,this.collisionFilterGroup=typeof t.collisionFilterGroup=="number"?t.collisionFilterGroup:1,this.collisionFilterMask=typeof t.collisionFilterMask=="number"?t.collisionFilterMask:-1,this.collisionResponse=typeof t.collisionResponse=="boolean"?t.collisionResponse:!0,this.position=new N,this.previousPosition=new N,this.interpolatedPosition=new N,this.initPosition=new N,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new N,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new N,this.force=new N;const e=typeof t.mass=="number"?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping=typeof t.linearDamping=="number"?t.linearDamping:.01,this.type=e<=0?Wt.STATIC:Wt.DYNAMIC,typeof t.type==typeof Wt.STATIC&&(this.type=t.type),this.allowSleep=typeof t.allowSleep<"u"?t.allowSleep:!0,this.sleepState=Wt.AWAKE,this.sleepSpeedLimit=typeof t.sleepSpeedLimit<"u"?t.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof t.sleepTimeLimit<"u"?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new N,this.quaternion=new Xe,this.initQuaternion=new Xe,this.previousQuaternion=new Xe,this.interpolatedQuaternion=new Xe,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new N,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new N,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new N,this.invInertia=new N,this.invInertiaWorld=new si,this.invMassSolve=0,this.invInertiaSolve=new N,this.invInertiaWorldSolve=new si,this.fixedRotation=typeof t.fixedRotation<"u"?t.fixedRotation:!1,this.angularDamping=typeof t.angularDamping<"u"?t.angularDamping:.01,this.linearFactor=new N(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new N(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new Vs,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new N,this.isTrigger=!!t.isTrigger,t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=Wt.AWAKE,this.wakeUpAfterNarrowphase=!1,t===Wt.SLEEPING&&this.dispatchEvent(Wt.wakeupEvent)}sleep(){this.sleepState=Wt.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const e=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),n=this.sleepSpeedLimit**2;e===Wt.AWAKE&&i<n?(this.sleepState=Wt.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(Wt.sleepyEvent)):e===Wt.SLEEPY&&i>n?this.wakeUp():e===Wt.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(Wt.sleepEvent))}}updateSolveMassProperties(){this.sleepState===Wt.SLEEPING||this.type===Wt.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,e){return e===void 0&&(e=new N),t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e}vectorToLocalFrame(t,e){return e===void 0&&(e=new N),this.quaternion.conjugate().vmult(t,e),e}pointToWorldFrame(t,e){return e===void 0&&(e=new N),this.quaternion.vmult(t,e),e.vadd(this.position,e),e}vectorToWorldFrame(t,e){return e===void 0&&(e=new N),this.quaternion.vmult(t,e),e}addShape(t,e,i){const n=new N,a=new Xe;return e&&n.copy(e),i&&a.copy(i),this.shapes.push(t),this.shapeOffsets.push(n),this.shapeOrientations.push(a),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const e=this.shapes.indexOf(t);return e===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(e,1),this.shapeOffsets.splice(e,1),this.shapeOrientations.splice(e,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null,this)}updateBoundingRadius(){const t=this.shapes,e=this.shapeOffsets,i=t.length;let n=0;for(let a=0;a!==i;a++){const o=t[a];o.updateBoundingSphereRadius();const c=e[a].length(),_=o.boundingSphereRadius;c+_>n&&(n=c+_)}this.boundingRadius=n}updateAABB(){const t=this.shapes,e=this.shapeOffsets,i=this.shapeOrientations,n=t.length,a=JS,o=tv,c=this.quaternion,_=this.aabb,l=ev;for(let u=0;u!==n;u++){const p=t[u];c.vmult(e[u],a),a.vadd(this.position,a),c.mult(i[u],o),p.calculateWorldAABB(a,o,l.lowerBound,l.upperBound),u===0?_.copy(l):_.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const e=this.invInertia;if(!(e.x===e.y&&e.y===e.z&&!t)){const i=sv,n=iv;i.setRotationFromQuaternion(this.quaternion),i.transpose(n),i.scale(e,i),i.mmult(n,this.invInertiaWorld)}}applyForce(t,e){if(e===void 0&&(e=new N),this.type!==Wt.DYNAMIC)return;this.sleepState===Wt.SLEEPING&&this.wakeUp();const i=nv;e.cross(t,i),this.force.vadd(t,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(t,e){if(e===void 0&&(e=new N),this.type!==Wt.DYNAMIC)return;const i=rv,n=av;this.vectorToWorldFrame(t,i),this.vectorToWorldFrame(e,n),this.applyForce(i,n)}applyTorque(t){this.type===Wt.DYNAMIC&&(this.sleepState===Wt.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,e){if(e===void 0&&(e=new N),this.type!==Wt.DYNAMIC)return;this.sleepState===Wt.SLEEPING&&this.wakeUp();const i=e,n=ov;n.copy(t),n.scale(this.invMass,n),this.velocity.vadd(n,this.velocity);const a=cv;i.cross(t,a),this.invInertiaWorld.vmult(a,a),this.angularVelocity.vadd(a,this.angularVelocity)}applyLocalImpulse(t,e){if(e===void 0&&(e=new N),this.type!==Wt.DYNAMIC)return;const i=_v,n=lv;this.vectorToWorldFrame(t,i),this.vectorToWorldFrame(e,n),this.applyImpulse(i,n)}updateMassProperties(){const t=hv;this.invMass=this.mass>0?1/this.mass:0;const e=this.inertia,i=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),nh.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!i?1/e.x:0,e.y>0&&!i?1/e.y:0,e.z>0&&!i?1/e.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,e){const i=new N;return t.vsub(this.position,i),this.angularVelocity.cross(i,e),this.velocity.vadd(e,e),e}integrate(t,e,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===Wt.DYNAMIC||this.type===Wt.KINEMATIC)||this.sleepState===Wt.SLEEPING)return;const n=this.velocity,a=this.angularVelocity,o=this.position,c=this.force,_=this.torque,l=this.quaternion,u=this.invMass,p=this.invInertiaWorld,f=this.linearFactor,d=u*t;n.x+=c.x*d*f.x,n.y+=c.y*d*f.y,n.z+=c.z*d*f.z;const A=p.elements,E=this.angularFactor,S=_.x*E.x,y=_.y*E.y,M=_.z*E.z;a.x+=t*(A[0]*S+A[1]*y+A[2]*M),a.y+=t*(A[3]*S+A[4]*y+A[5]*M),a.z+=t*(A[6]*S+A[7]*y+A[8]*M),o.x+=n.x*t,o.y+=n.y*t,o.z+=n.z*t,l.integrate(this.angularVelocity,t,this.angularFactor,l),e&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}Wt.idCounter=0;Wt.COLLIDE_EVENT_NAME="collide";Wt.DYNAMIC=rh.DYNAMIC;Wt.STATIC=rh.STATIC;Wt.KINEMATIC=rh.KINEMATIC;Wt.AWAKE=ah.AWAKE;Wt.SLEEPY=ah.SLEEPY;Wt.SLEEPING=ah.SLEEPING;Wt.wakeupEvent={type:"wakeup"};Wt.sleepyEvent={type:"sleepy"};Wt.sleepEvent={type:"sleep"};const JS=new N,tv=new Xe,ev=new Vs,sv=new si,iv=new si;new si;const nv=new N,rv=new N,av=new N,ov=new N,cv=new N,_v=new N,lv=new N,hv=new N;class yd{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(t,e,i){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(t,e){return!((t.collisionFilterGroup&e.collisionFilterMask)===0||(e.collisionFilterGroup&t.collisionFilterMask)===0||((t.type&Wt.STATIC)!==0||t.sleepState===Wt.SLEEPING)&&((e.type&Wt.STATIC)!==0||e.sleepState===Wt.SLEEPING))}intersectionTest(t,e,i,n){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,e,i,n):this.doBoundingSphereBroadphase(t,e,i,n)}doBoundingSphereBroadphase(t,e,i,n){const a=uv;e.position.vsub(t.position,a);const o=(t.boundingRadius+e.boundingRadius)**2;a.lengthSquared()<o&&(i.push(t),n.push(e))}doBoundingBoxBroadphase(t,e,i,n){t.aabbNeedsUpdate&&t.updateAABB(),e.aabbNeedsUpdate&&e.updateAABB(),t.aabb.overlaps(e.aabb)&&(i.push(t),n.push(e))}makePairsUnique(t,e){const i=fv,n=pv,a=dv,o=t.length;for(let c=0;c!==o;c++)n[c]=t[c],a[c]=e[c];t.length=0,e.length=0;for(let c=0;c!==o;c++){const _=n[c].id,l=a[c].id,u=_<l?`${_},${l}`:`${l},${_}`;i[u]=c,i.keys.push(u)}for(let c=0;c!==i.keys.length;c++){const _=i.keys.pop(),l=i[_];t.push(n[l]),e.push(a[l]),delete i[_]}}setWorld(t){}static boundingSphereCheck(t,e){const i=new N;t.position.vsub(e.position,i);const n=t.shapes[0],a=e.shapes[0];return Math.pow(n.boundingSphereRadius+a.boundingSphereRadius,2)>i.lengthSquared()}aabbQuery(t,e,i){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const uv=new N;new N;new Xe;new N;const fv={keys:[]},pv=[],dv=[];new N;new N;new N;class mv extends yd{constructor(){super()}collisionPairs(t,e,i){const n=t.bodies,a=n.length;let o,c;for(let _=0;_!==a;_++)for(let l=0;l!==_;l++)o=n[_],c=n[l],this.needBroadphaseCollision(o,c)&&this.intersectionTest(o,c,e,i)}aabbQuery(t,e,i){i===void 0&&(i=[]);for(let n=0;n<t.bodies.length;n++){const a=t.bodies[n];a.aabbNeedsUpdate&&a.updateAABB(),a.aabb.overlaps(e)&&i.push(a)}return i}}class Mc{constructor(){this.rayFromWorld=new N,this.rayToWorld=new N,this.hitNormalWorld=new N,this.hitPointWorld=new N,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,e,i,n,a,o,c){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(n),this.shape=a,this.body=o,this.distance=c}}let Ed,Md,Td,Sd,vd,Id,xd;const oh={CLOSEST:1,ANY:2,ALL:4};Ed=Ht.types.SPHERE;Md=Ht.types.PLANE;Td=Ht.types.BOX;Sd=Ht.types.CYLINDER;vd=Ht.types.CONVEXPOLYHEDRON;Id=Ht.types.HEIGHTFIELD;xd=Ht.types.TRIMESH;class qe{get[Ed](){return this._intersectSphere}get[Md](){return this._intersectPlane}get[Td](){return this._intersectBox}get[Sd](){return this._intersectConvex}get[vd](){return this._intersectConvex}get[Id](){return this._intersectHeightfield}get[xd](){return this._intersectTrimesh}constructor(t,e){t===void 0&&(t=new N),e===void 0&&(e=new N),this.from=t.clone(),this.to=e.clone(),this.direction=new N,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=qe.ANY,this.result=new Mc,this.hasHit=!1,this.callback=i=>{}}intersectWorld(t,e){return this.mode=e.mode||qe.ANY,this.result=e.result||new Mc,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask=typeof e.collisionFilterMask<"u"?e.collisionFilterMask:-1,this.collisionFilterGroup=typeof e.collisionFilterGroup<"u"?e.collisionFilterGroup:-1,this.checkCollisionResponse=typeof e.checkCollisionResponse<"u"?e.checkCollisionResponse:!0,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Rf),J_.length=0,t.broadphase.aabbQuery(t,Rf,J_),this.intersectBodies(J_),this.hasHit}intersectBody(t,e){e&&(this.result=e,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!t.collisionResponse||(this.collisionFilterGroup&t.collisionFilterMask)===0||(t.collisionFilterGroup&this.collisionFilterMask)===0)return;const n=gv,a=Av;for(let o=0,c=t.shapes.length;o<c;o++){const _=t.shapes[o];if(!(i&&!_.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[o],a),t.quaternion.vmult(t.shapeOffsets[o],n),n.vadd(t.position,n),this.intersectShape(_,a,n,t),this.result.shouldStop))break}}intersectBodies(t,e){e&&(this.result=e,this.updateDirection());for(let i=0,n=t.length;!this.result.shouldStop&&i<n;i++)this.intersectBody(t[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,e,i,n){const a=this.from;if(bv(a,this.direction,i)>t.boundingSphereRadius)return;const c=this[t.type];c&&c.call(this,t,e,i,n,t)}_intersectBox(t,e,i,n,a){return this._intersectConvex(t.convexPolyhedronRepresentation,e,i,n,a)}_intersectPlane(t,e,i,n,a){const o=this.from,c=this.to,_=this.direction,l=new N(0,0,1);e.vmult(l,l);const u=new N;o.vsub(i,u);const p=u.dot(l);c.vsub(i,u);const f=u.dot(l);if(p*f>0||o.distanceTo(c)<p)return;const d=l.dot(_);if(Math.abs(d)<this.precision)return;const A=new N,E=new N,S=new N;o.vsub(i,A);const y=-l.dot(A)/d;_.scale(y,E),o.vadd(E,S),this.reportIntersection(l,S,a,n,-1)}getAABB(t){const{lowerBound:e,upperBound:i}=t,n=this.to,a=this.from;e.x=Math.min(n.x,a.x),e.y=Math.min(n.y,a.y),e.z=Math.min(n.z,a.z),i.x=Math.max(n.x,a.x),i.y=Math.max(n.y,a.y),i.z=Math.max(n.z,a.z)}_intersectHeightfield(t,e,i,n,a){t.data,t.elementSize;const o=yv;o.from.copy(this.from),o.to.copy(this.to),Ie.pointToLocalFrame(i,e,o.from,o.from),Ie.pointToLocalFrame(i,e,o.to,o.to),o.updateDirection();const c=Ev;let _,l,u,p;_=l=0,u=p=t.data.length-1;const f=new Vs;o.getAABB(f),t.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,c,!0),_=Math.max(_,c[0]),l=Math.max(l,c[1]),t.getIndexOfPosition(f.upperBound.x,f.upperBound.y,c,!0),u=Math.min(u,c[0]+1),p=Math.min(p,c[1]+1);for(let d=_;d<u;d++)for(let A=l;A<p;A++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(d,A,f),!!f.overlapsRay(o)){if(t.getConvexTrianglePillar(d,A,!1),Ie.pointToWorldFrame(i,e,t.pillarOffset,Ho),this._intersectConvex(t.pillarConvex,e,Ho,n,a,Of),this.result.shouldStop)return;t.getConvexTrianglePillar(d,A,!0),Ie.pointToWorldFrame(i,e,t.pillarOffset,Ho),this._intersectConvex(t.pillarConvex,e,Ho,n,a,Of)}}}_intersectSphere(t,e,i,n,a){const o=this.from,c=this.to,_=t.radius,l=(c.x-o.x)**2+(c.y-o.y)**2+(c.z-o.z)**2,u=2*((c.x-o.x)*(o.x-i.x)+(c.y-o.y)*(o.y-i.y)+(c.z-o.z)*(o.z-i.z)),p=(o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-_**2,f=u**2-4*l*p,d=Mv,A=Tv;if(!(f<0))if(f===0)o.lerp(c,f,d),d.vsub(i,A),A.normalize(),this.reportIntersection(A,d,a,n,-1);else{const E=(-u-Math.sqrt(f))/(2*l),S=(-u+Math.sqrt(f))/(2*l);if(E>=0&&E<=1&&(o.lerp(c,E,d),d.vsub(i,A),A.normalize(),this.reportIntersection(A,d,a,n,-1)),this.result.shouldStop)return;S>=0&&S<=1&&(o.lerp(c,S,d),d.vsub(i,A),A.normalize(),this.reportIntersection(A,d,a,n,-1))}}_intersectConvex(t,e,i,n,a,o){const c=Sv,_=wf,l=o&&o.faceList||null,u=t.faces,p=t.vertices,f=t.faceNormals,d=this.direction,A=this.from,E=this.to,S=A.distanceTo(E),y=l?l.length:u.length,M=this.result;for(let x=0;!M.shouldStop&&x<y;x++){const I=l?l[x]:x,w=u[I],D=f[I],m=e,U=i;_.copy(p[w[0]]),m.vmult(_,_),_.vadd(U,_),_.vsub(A,_),m.vmult(D,c);const q=d.dot(c);if(Math.abs(q)<this.precision)continue;const Y=c.dot(_)/q;if(!(Y<0)){d.scale(Y,xs),xs.vadd(A,xs),$s.copy(p[w[0]]),m.vmult($s,$s),U.vadd($s,$s);for(let F=1;!M.shouldStop&&F<w.length-1;F++){di.copy(p[w[F]]),mi.copy(p[w[F+1]]),m.vmult(di,di),m.vmult(mi,mi),U.vadd(di,di),U.vadd(mi,mi);const it=xs.distanceTo(A);!(qe.pointInTriangle(xs,$s,di,mi)||qe.pointInTriangle(xs,di,$s,mi))||it>S||this.reportIntersection(c,xs,a,n,I)}}}}_intersectTrimesh(t,e,i,n,a,o){const c=vv,_=Lv,l=Nv,u=wf,p=Iv,f=xv,d=Rv,A=wv,E=Ov,S=t.indices;t.vertices;const y=this.from,M=this.to,x=this.direction;l.position.copy(i),l.quaternion.copy(e),Ie.vectorToLocalFrame(i,e,x,p),Ie.pointToLocalFrame(i,e,y,f),Ie.pointToLocalFrame(i,e,M,d),d.x*=t.scale.x,d.y*=t.scale.y,d.z*=t.scale.z,f.x*=t.scale.x,f.y*=t.scale.y,f.z*=t.scale.z,d.vsub(f,p),p.normalize();const I=f.distanceSquared(d);t.tree.rayQuery(this,l,_);for(let w=0,D=_.length;!this.result.shouldStop&&w!==D;w++){const m=_[w];t.getNormal(m,c),t.getVertex(S[m*3],$s),$s.vsub(f,u);const U=p.dot(c),q=c.dot(u)/U;if(q<0)continue;p.scale(q,xs),xs.vadd(f,xs),t.getVertex(S[m*3+1],di),t.getVertex(S[m*3+2],mi);const Y=xs.distanceSquared(f);!(qe.pointInTriangle(xs,di,$s,mi)||qe.pointInTriangle(xs,$s,di,mi))||Y>I||(Ie.vectorToWorldFrame(e,c,E),Ie.pointToWorldFrame(i,e,xs,A),this.reportIntersection(E,A,a,n,m))}_.length=0}reportIntersection(t,e,i,n,a){const o=this.from,c=this.to,_=o.distanceTo(e),l=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(l.hitFaceIndex=typeof a<"u"?a:-1,this.mode){case qe.ALL:this.hasHit=!0,l.set(o,c,t,e,i,n,_),l.hasHit=!0,this.callback(l);break;case qe.CLOSEST:(_<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,c,t,e,i,n,_));break;case qe.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,c,t,e,i,n,_),l.shouldStop=!0;break}}static pointInTriangle(t,e,i,n){n.vsub(e,bn),i.vsub(e,ha),t.vsub(e,tl);const a=bn.dot(bn),o=bn.dot(ha),c=bn.dot(tl),_=ha.dot(ha),l=ha.dot(tl);let u,p;return(u=_*c-o*l)>=0&&(p=a*l-o*c)>=0&&u+p<a*_-o*o}}qe.CLOSEST=oh.CLOSEST;qe.ANY=oh.ANY;qe.ALL=oh.ALL;const Rf=new Vs,J_=[],ha=new N,tl=new N,gv=new N,Av=new Xe,xs=new N,$s=new N,di=new N,mi=new N;new N;new Mc;const Of={faceList:[0]},Ho=new N,yv=new qe,Ev=[],Mv=new N,Tv=new N,Sv=new N;new N;new N;const wf=new N,vv=new N,Iv=new N,xv=new N,Rv=new N,Ov=new N,wv=new N;new Vs;const Lv=[],Nv=new Ie,bn=new N,zo=new N;function bv(r,t,e){e.vsub(r,bn);const i=bn.dot(t);return t.scale(i,zo),zo.vadd(r,zo),e.distanceTo(zo)}class Sr extends yd{static checkBounds(t,e,i){let n,a;i===0?(n=t.position.x,a=e.position.x):i===1?(n=t.position.y,a=e.position.y):i===2&&(n=t.position.z,a=e.position.z);const o=t.boundingRadius,c=e.boundingRadius,_=n+o;return a-c<_}static insertionSortX(t){for(let e=1,i=t.length;e<i;e++){const n=t[e];let a;for(a=e-1;a>=0&&!(t[a].aabb.lowerBound.x<=n.aabb.lowerBound.x);a--)t[a+1]=t[a];t[a+1]=n}return t}static insertionSortY(t){for(let e=1,i=t.length;e<i;e++){const n=t[e];let a;for(a=e-1;a>=0&&!(t[a].aabb.lowerBound.y<=n.aabb.lowerBound.y);a--)t[a+1]=t[a];t[a+1]=n}return t}static insertionSortZ(t){for(let e=1,i=t.length;e<i;e++){const n=t[e];let a;for(a=e-1;a>=0&&!(t[a].aabb.lowerBound.z<=n.aabb.lowerBound.z);a--)t[a+1]=t[a];t[a+1]=n}return t}constructor(t){super(),this.axisList=[],this.world=null,this.axisIndex=0;const e=this.axisList;this._addBodyHandler=i=>{e.push(i.body)},this._removeBodyHandler=i=>{const n=e.indexOf(i.body);n!==-1&&e.splice(n,1)},t&&this.setWorld(t)}setWorld(t){this.axisList.length=0;for(let e=0;e<t.bodies.length;e++)this.axisList.push(t.bodies[e]);t.removeEventListener("addBody",this._addBodyHandler),t.removeEventListener("removeBody",this._removeBodyHandler),t.addEventListener("addBody",this._addBodyHandler),t.addEventListener("removeBody",this._removeBodyHandler),this.world=t,this.dirty=!0}collisionPairs(t,e,i){const n=this.axisList,a=n.length,o=this.axisIndex;let c,_;for(this.dirty&&(this.sortList(),this.dirty=!1),c=0;c!==a;c++){const l=n[c];for(_=c+1;_<a;_++){const u=n[_];if(this.needBroadphaseCollision(l,u)){if(!Sr.checkBounds(l,u,o))break;this.intersectionTest(l,u,e,i)}}}}sortList(){const t=this.axisList,e=this.axisIndex,i=t.length;for(let n=0;n!==i;n++){const a=t[n];a.aabbNeedsUpdate&&a.updateAABB()}e===0?Sr.insertionSortX(t):e===1?Sr.insertionSortY(t):e===2&&Sr.insertionSortZ(t)}autoDetectAxis(){let t=0,e=0,i=0,n=0,a=0,o=0;const c=this.axisList,_=c.length,l=1/_;for(let d=0;d!==_;d++){const A=c[d],E=A.position.x;t+=E,e+=E*E;const S=A.position.y;i+=S,n+=S*S;const y=A.position.z;a+=y,o+=y*y}const u=e-t*t*l,p=n-i*i*l,f=o-a*a*l;u>p?u>f?this.axisIndex=0:this.axisIndex=2:p>f?this.axisIndex=1:this.axisIndex=2}aabbQuery(t,e,i){i===void 0&&(i=[]),this.dirty&&(this.sortList(),this.dirty=!1);const n=this.axisIndex;let a="x";n===1&&(a="y"),n===2&&(a="z");const o=this.axisList;e.lowerBound[a],e.upperBound[a];for(let c=0;c<o.length;c++){const _=o[c];_.aabbNeedsUpdate&&_.updateAABB(),_.aabb.overlaps(e)&&i.push(_)}return i}}class Dv{static defaults(t,e){t===void 0&&(t={});for(let i in e)i in t||(t[i]=e[i]);return t}}class Lf{constructor(){this.spatial=new N,this.rotational=new N}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}}class Ya{constructor(t,e,i,n){i===void 0&&(i=-1e6),n===void 0&&(n=1e6),this.id=Ya.idCounter++,this.minForce=i,this.maxForce=n,this.bi=t,this.bj=e,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new Lf,this.jacobianElementB=new Lf,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(t,e,i){const n=e,a=t,o=i;this.a=4/(o*(1+4*n)),this.b=4*n/(1+4*n),this.eps=4/(o*o*a*(1+4*n))}computeB(t,e,i){const n=this.computeGW(),a=this.computeGq(),o=this.computeGiMf();return-a*t-n*e-o*i}computeGq(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,a=i.position,o=n.position;return t.spatial.dot(a)+e.spatial.dot(o)}computeGW(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,a=i.velocity,o=n.velocity,c=i.angularVelocity,_=n.angularVelocity;return t.multiplyVectors(a,c)+e.multiplyVectors(o,_)}computeGWlambda(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,a=i.vlambda,o=n.vlambda,c=i.wlambda,_=n.wlambda;return t.multiplyVectors(a,c)+e.multiplyVectors(o,_)}computeGiMf(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,a=i.force,o=i.torque,c=n.force,_=n.torque,l=i.invMassSolve,u=n.invMassSolve;return a.scale(l,Nf),c.scale(u,bf),i.invInertiaWorldSolve.vmult(o,Df),n.invInertiaWorldSolve.vmult(_,Cf),t.multiplyVectors(Nf,Df)+e.multiplyVectors(bf,Cf)}computeGiMGt(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,a=i.invMassSolve,o=n.invMassSolve,c=i.invInertiaWorldSolve,_=n.invInertiaWorldSolve;let l=a+o;return c.vmult(t.rotational,Wo),l+=Wo.dot(t.rotational),_.vmult(e.rotational,Wo),l+=Wo.dot(e.rotational),l}addToWlambda(t){const e=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,a=this.bj,o=Cv;n.vlambda.addScaledVector(n.invMassSolve*t,e.spatial,n.vlambda),a.vlambda.addScaledVector(a.invMassSolve*t,i.spatial,a.vlambda),n.invInertiaWorldSolve.vmult(e.rotational,o),n.wlambda.addScaledVector(t,o,n.wlambda),a.invInertiaWorldSolve.vmult(i.rotational,o),a.wlambda.addScaledVector(t,o,a.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}Ya.idCounter=0;const Nf=new N,bf=new N,Df=new N,Cf=new N,Wo=new N,Cv=new N;class Pv extends Ya{constructor(t,e,i){i===void 0&&(i=1e6),super(t,e,0,i),this.restitution=0,this.ri=new N,this.rj=new N,this.ni=new N}computeB(t){const e=this.a,i=this.b,n=this.bi,a=this.bj,o=this.ri,c=this.rj,_=Bv,l=Vv,u=n.velocity,p=n.angularVelocity;n.force,n.torque;const f=a.velocity,d=a.angularVelocity;a.force,a.torque;const A=Gv,E=this.jacobianElementA,S=this.jacobianElementB,y=this.ni;o.cross(y,_),c.cross(y,l),y.negate(E.spatial),_.negate(E.rotational),S.spatial.copy(y),S.rotational.copy(l),A.copy(a.position),A.vadd(c,A),A.vsub(n.position,A),A.vsub(o,A);const M=y.dot(A),x=this.restitution+1,I=x*f.dot(y)-x*u.dot(y)+d.dot(l)-p.dot(_),w=this.computeGiMf();return-M*e-I*i-t*w}getImpactVelocityAlongNormal(){const t=Uv,e=kv,i=Fv,n=Hv,a=zv;return this.bi.position.vadd(this.ri,i),this.bj.position.vadd(this.rj,n),this.bi.getVelocityAtWorldPoint(i,t),this.bj.getVelocityAtWorldPoint(n,e),t.vsub(e,a),this.ni.dot(a)}}const Bv=new N,Vv=new N,Gv=new N,Uv=new N,kv=new N,Fv=new N,Hv=new N,zv=new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;class Pf extends Ya{constructor(t,e,i){super(t,e,-i,i),this.ri=new N,this.rj=new N,this.t=new N}computeB(t){this.a;const e=this.b;this.bi,this.bj;const i=this.ri,n=this.rj,a=Wv,o=Yv,c=this.t;i.cross(c,a),n.cross(c,o);const _=this.jacobianElementA,l=this.jacobianElementB;c.negate(_.spatial),a.negate(_.rotational),l.spatial.copy(c),l.rotational.copy(o);const u=this.computeGW(),p=this.computeGiMf();return-u*e-t*p}}const Wv=new N,Yv=new N;class Ka{constructor(t,e,i){i=Dv.defaults(i,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=Ka.idCounter++,this.materials=[t,e],this.friction=i.friction,this.restitution=i.restitution,this.contactEquationStiffness=i.contactEquationStiffness,this.contactEquationRelaxation=i.contactEquationRelaxation,this.frictionEquationStiffness=i.frictionEquationStiffness,this.frictionEquationRelaxation=i.frictionEquationRelaxation}}Ka.idCounter=0;class qa{constructor(t){t===void 0&&(t={});let e="";typeof t=="string"&&(e=t,t={}),this.name=e,this.id=qa.idCounter++,this.friction=typeof t.friction<"u"?t.friction:-1,this.restitution=typeof t.restitution<"u"?t.restitution:-1}}qa.idCounter=0;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new qe;new N;new N;new N;new N(1,0,0),new N(0,1,0),new N(0,0,1);new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;class Kv extends Ht{constructor(t){if(super({type:Ht.types.SPHERE}),this.radius=t!==void 0?t:1,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}calculateLocalInertia(t,e){e===void 0&&(e=new N);const i=2*t*this.radius*this.radius/5;return e.x=i,e.y=i,e.z=i,e}volume(){return 4*Math.PI*Math.pow(this.radius,3)/3}updateBoundingSphereRadius(){this.boundingSphereRadius=this.radius}calculateWorldAABB(t,e,i,n){const a=this.radius,o=["x","y","z"];for(let c=0;c<o.length;c++){const _=o[c];i[_]=t[_]-a,n[_]=t[_]+a}}}new N;new N;new N;new N;new N;new N;new N;new N;new N;class qv extends Ht{constructor(){super({type:Ht.types.PLANE}),this.worldNormal=new N,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}computeWorldNormal(t){const e=this.worldNormal;e.set(0,0,1),t.vmult(e,e),this.worldNormalNeedsUpdate=!1}calculateLocalInertia(t,e){return e===void 0&&(e=new N),e}volume(){return Number.MAX_VALUE}calculateWorldAABB(t,e,i,n){bi.set(0,0,1),e.vmult(bi,bi);const a=Number.MAX_VALUE;i.set(-a,-a,-a),n.set(a,a,a),bi.x===1?n.x=t.x:bi.x===-1&&(i.x=t.x),bi.y===1?n.y=t.y:bi.y===-1&&(i.y=t.y),bi.z===1?n.z=t.z:bi.z===-1&&(i.z=t.z)}updateBoundingSphereRadius(){this.boundingSphereRadius=Number.MAX_VALUE}}const bi=new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new N;new Vs;new N;new Vs;new N;new N;new N;new N;new N;new N;new N;new Vs;new N;new Ie;new Vs;class Xv{constructor(){this.equations=[]}solve(t,e){return 0}addEquation(t){t.enabled&&!t.bi.isTrigger&&!t.bj.isTrigger&&this.equations.push(t)}removeEquation(t){const e=this.equations,i=e.indexOf(t);i!==-1&&e.splice(i,1)}removeAllEquations(){this.equations.length=0}}class jv extends Xv{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(t,e){let i=0;const n=this.iterations,a=this.tolerance*this.tolerance,o=this.equations,c=o.length,_=e.bodies,l=_.length,u=t;let p,f,d,A,E,S;if(c!==0)for(let I=0;I!==l;I++)_[I].updateSolveMassProperties();const y=Zv,M=$v,x=Qv;y.length=c,M.length=c,x.length=c;for(let I=0;I!==c;I++){const w=o[I];x[I]=0,M[I]=w.computeB(u),y[I]=1/w.computeC()}if(c!==0){for(let D=0;D!==l;D++){const m=_[D],U=m.vlambda,q=m.wlambda;U.set(0,0,0),q.set(0,0,0)}for(i=0;i!==n;i++){A=0;for(let D=0;D!==c;D++){const m=o[D];p=M[D],f=y[D],S=x[D],E=m.computeGWlambda(),d=f*(p-E-m.eps*S),S+d<m.minForce?d=m.minForce-S:S+d>m.maxForce&&(d=m.maxForce-S),x[D]+=d,A+=d>0?d:-d,m.addToWlambda(d)}if(A*A<a)break}for(let D=0;D!==l;D++){const m=_[D],U=m.velocity,q=m.angularVelocity;m.vlambda.vmul(m.linearFactor,m.vlambda),U.vadd(m.vlambda,U),m.wlambda.vmul(m.angularFactor,m.wlambda),q.vadd(m.wlambda,q)}let I=o.length;const w=1/u;for(;I--;)o[I].multiplier=x[I]*w}return i}}const Qv=[],Zv=[],$v=[];class Jv{constructor(){this.objects=[],this.type=Object}release(){const t=arguments.length;for(let e=0;e!==t;e++)this.objects.push(e<0||arguments.length<=e?void 0:arguments[e]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){const e=this.objects;for(;e.length>t;)e.pop();for(;e.length<t;)e.push(this.constructObject());return this}}class tI extends Jv{constructor(){super(...arguments),this.type=N}constructObject(){return new N}}const Be={sphereSphere:Ht.types.SPHERE,spherePlane:Ht.types.SPHERE|Ht.types.PLANE,boxBox:Ht.types.BOX|Ht.types.BOX,sphereBox:Ht.types.SPHERE|Ht.types.BOX,planeBox:Ht.types.PLANE|Ht.types.BOX,convexConvex:Ht.types.CONVEXPOLYHEDRON,sphereConvex:Ht.types.SPHERE|Ht.types.CONVEXPOLYHEDRON,planeConvex:Ht.types.PLANE|Ht.types.CONVEXPOLYHEDRON,boxConvex:Ht.types.BOX|Ht.types.CONVEXPOLYHEDRON,sphereHeightfield:Ht.types.SPHERE|Ht.types.HEIGHTFIELD,boxHeightfield:Ht.types.BOX|Ht.types.HEIGHTFIELD,convexHeightfield:Ht.types.CONVEXPOLYHEDRON|Ht.types.HEIGHTFIELD,sphereParticle:Ht.types.PARTICLE|Ht.types.SPHERE,planeParticle:Ht.types.PLANE|Ht.types.PARTICLE,boxParticle:Ht.types.BOX|Ht.types.PARTICLE,convexParticle:Ht.types.PARTICLE|Ht.types.CONVEXPOLYHEDRON,cylinderCylinder:Ht.types.CYLINDER,sphereCylinder:Ht.types.SPHERE|Ht.types.CYLINDER,planeCylinder:Ht.types.PLANE|Ht.types.CYLINDER,boxCylinder:Ht.types.BOX|Ht.types.CYLINDER,convexCylinder:Ht.types.CONVEXPOLYHEDRON|Ht.types.CYLINDER,heightfieldCylinder:Ht.types.HEIGHTFIELD|Ht.types.CYLINDER,particleCylinder:Ht.types.PARTICLE|Ht.types.CYLINDER,sphereTrimesh:Ht.types.SPHERE|Ht.types.TRIMESH,planeTrimesh:Ht.types.PLANE|Ht.types.TRIMESH};class eI{get[Be.sphereSphere](){return this.sphereSphere}get[Be.spherePlane](){return this.spherePlane}get[Be.boxBox](){return this.boxBox}get[Be.sphereBox](){return this.sphereBox}get[Be.planeBox](){return this.planeBox}get[Be.convexConvex](){return this.convexConvex}get[Be.sphereConvex](){return this.sphereConvex}get[Be.planeConvex](){return this.planeConvex}get[Be.boxConvex](){return this.boxConvex}get[Be.sphereHeightfield](){return this.sphereHeightfield}get[Be.boxHeightfield](){return this.boxHeightfield}get[Be.convexHeightfield](){return this.convexHeightfield}get[Be.sphereParticle](){return this.sphereParticle}get[Be.planeParticle](){return this.planeParticle}get[Be.boxParticle](){return this.boxParticle}get[Be.convexParticle](){return this.convexParticle}get[Be.cylinderCylinder](){return this.convexConvex}get[Be.sphereCylinder](){return this.sphereConvex}get[Be.planeCylinder](){return this.planeConvex}get[Be.boxCylinder](){return this.boxConvex}get[Be.convexCylinder](){return this.convexConvex}get[Be.heightfieldCylinder](){return this.heightfieldCylinder}get[Be.particleCylinder](){return this.particleCylinder}get[Be.sphereTrimesh](){return this.sphereTrimesh}get[Be.planeTrimesh](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new tI,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,e,i,n,a,o){let c;this.contactPointPool.length?(c=this.contactPointPool.pop(),c.bi=t,c.bj=e):c=new Pv(t,e),c.enabled=t.collisionResponse&&e.collisionResponse&&i.collisionResponse&&n.collisionResponse;const _=this.currentContactMaterial;c.restitution=_.restitution,c.setSpookParams(_.contactEquationStiffness,_.contactEquationRelaxation,this.world.dt);const l=i.material||t.material,u=n.material||e.material;return l&&u&&l.restitution>=0&&u.restitution>=0&&(c.restitution=l.restitution*u.restitution),c.si=a||i,c.sj=o||n,c}createFrictionEquationsFromContact(t,e){const i=t.bi,n=t.bj,a=t.si,o=t.sj,c=this.world,_=this.currentContactMaterial;let l=_.friction;const u=a.material||i.material,p=o.material||n.material;if(u&&p&&u.friction>=0&&p.friction>=0&&(l=u.friction*p.friction),l>0){const f=l*(c.frictionGravity||c.gravity).length();let d=i.invMass+n.invMass;d>0&&(d=1/d);const A=this.frictionEquationPool,E=A.length?A.pop():new Pf(i,n,f*d),S=A.length?A.pop():new Pf(i,n,f*d);return E.bi=S.bi=i,E.bj=S.bj=n,E.minForce=S.minForce=-f*d,E.maxForce=S.maxForce=f*d,E.ri.copy(t.ri),E.rj.copy(t.rj),S.ri.copy(t.ri),S.rj.copy(t.rj),t.ni.tangents(E.t,S.t),E.setSpookParams(_.frictionEquationStiffness,_.frictionEquationRelaxation,c.dt),S.setSpookParams(_.frictionEquationStiffness,_.frictionEquationRelaxation,c.dt),E.enabled=S.enabled=t.enabled,e.push(E,S),!0}return!1}createFrictionFromAverage(t){let e=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(e,this.frictionResult)||t===1)return;const i=this.frictionResult[this.frictionResult.length-2],n=this.frictionResult[this.frictionResult.length-1];wn.setZero(),mr.setZero(),gr.setZero();const a=e.bi;e.bj;for(let c=0;c!==t;c++)e=this.result[this.result.length-1-c],e.bi!==a?(wn.vadd(e.ni,wn),mr.vadd(e.ri,mr),gr.vadd(e.rj,gr)):(wn.vsub(e.ni,wn),mr.vadd(e.rj,mr),gr.vadd(e.ri,gr));const o=1/t;mr.scale(o,i.ri),gr.scale(o,i.rj),n.ri.copy(i.ri),n.rj.copy(i.rj),wn.normalize(),wn.tangents(i.t,n.t)}getContacts(t,e,i,n,a,o,c){this.contactPointPool=a,this.frictionEquationPool=c,this.result=n,this.frictionResult=o;const _=nI,l=rI,u=sI,p=iI;for(let f=0,d=t.length;f!==d;f++){const A=t[f],E=e[f];let S=null;A.material&&E.material&&(S=i.getContactMaterial(A.material,E.material)||null);const y=A.type&Wt.KINEMATIC&&E.type&Wt.STATIC||A.type&Wt.STATIC&&E.type&Wt.KINEMATIC||A.type&Wt.KINEMATIC&&E.type&Wt.KINEMATIC;for(let M=0;M<A.shapes.length;M++){A.quaternion.mult(A.shapeOrientations[M],_),A.quaternion.vmult(A.shapeOffsets[M],u),u.vadd(A.position,u);const x=A.shapes[M];for(let I=0;I<E.shapes.length;I++){E.quaternion.mult(E.shapeOrientations[I],l),E.quaternion.vmult(E.shapeOffsets[I],p),p.vadd(E.position,p);const w=E.shapes[I];if(!(x.collisionFilterMask&w.collisionFilterGroup&&w.collisionFilterMask&x.collisionFilterGroup)||u.distanceTo(p)>x.boundingSphereRadius+w.boundingSphereRadius)continue;let D=null;x.material&&w.material&&(D=i.getContactMaterial(x.material,w.material)||null),this.currentContactMaterial=D||S||i.defaultContactMaterial;const m=x.type|w.type,U=this[m];if(U){let q=!1;x.type<w.type?q=U.call(this,x,w,u,p,_,l,A,E,x,w,y):q=U.call(this,w,x,p,u,l,_,E,A,x,w,y),q&&y&&(i.shapeOverlapKeeper.set(x.id,w.id),i.bodyOverlapKeeper.set(A.id,E.id))}}}}}sphereSphere(t,e,i,n,a,o,c,_,l,u,p){if(p)return i.distanceSquared(n)<(t.radius+e.radius)**2;const f=this.createContactEquation(c,_,t,e,l,u);n.vsub(i,f.ni),f.ni.normalize(),f.ri.copy(f.ni),f.rj.copy(f.ni),f.ri.scale(t.radius,f.ri),f.rj.scale(-e.radius,f.rj),f.ri.vadd(i,f.ri),f.ri.vsub(c.position,f.ri),f.rj.vadd(n,f.rj),f.rj.vsub(_.position,f.rj),this.result.push(f),this.createFrictionEquationsFromContact(f,this.frictionResult)}spherePlane(t,e,i,n,a,o,c,_,l,u,p){const f=this.createContactEquation(c,_,t,e,l,u);if(f.ni.set(0,0,1),o.vmult(f.ni,f.ni),f.ni.negate(f.ni),f.ni.normalize(),f.ni.scale(t.radius,f.ri),i.vsub(n,Yo),f.ni.scale(f.ni.dot(Yo),Bf),Yo.vsub(Bf,f.rj),-Yo.dot(f.ni)<=t.radius){if(p)return!0;const d=f.ri,A=f.rj;d.vadd(i,d),d.vsub(c.position,d),A.vadd(n,A),A.vsub(_.position,A),this.result.push(f),this.createFrictionEquationsFromContact(f,this.frictionResult)}}boxBox(t,e,i,n,a,o,c,_,l,u,p){return t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,i,n,a,o,c,_,t,e,p)}sphereBox(t,e,i,n,a,o,c,_,l,u,p){const f=this.v3pool,d=NI;i.vsub(n,Ko),e.getSideNormals(d,o);const A=t.radius;let E=!1;const S=DI,y=CI,M=PI;let x=null,I=0,w=0,D=0,m=null;for(let z=0,J=d.length;z!==J&&E===!1;z++){const _t=OI;_t.copy(d[z]);const gt=_t.length();_t.normalize();const bt=Ko.dot(_t);if(bt<gt+A&&bt>0){const vt=wI,Et=LI;vt.copy(d[(z+1)%3]),Et.copy(d[(z+2)%3]);const pt=vt.length(),St=Et.length();vt.normalize(),Et.normalize();const Ft=Ko.dot(vt),ot=Ko.dot(Et);if(Ft<pt&&Ft>-pt&&ot<St&&ot>-St){const Xt=Math.abs(bt-gt-A);if((m===null||Xt<m)&&(m=Xt,w=Ft,D=ot,x=gt,S.copy(_t),y.copy(vt),M.copy(Et),I++,p))return!0}}}if(I){E=!0;const z=this.createContactEquation(c,_,t,e,l,u);S.scale(-A,z.ri),z.ni.copy(S),z.ni.negate(z.ni),S.scale(x,S),y.scale(w,y),S.vadd(y,S),M.scale(D,M),S.vadd(M,z.rj),z.ri.vadd(i,z.ri),z.ri.vsub(c.position,z.ri),z.rj.vadd(n,z.rj),z.rj.vsub(_.position,z.rj),this.result.push(z),this.createFrictionEquationsFromContact(z,this.frictionResult)}let U=f.get();const q=bI;for(let z=0;z!==2&&!E;z++)for(let J=0;J!==2&&!E;J++)for(let _t=0;_t!==2&&!E;_t++)if(U.set(0,0,0),z?U.vadd(d[0],U):U.vsub(d[0],U),J?U.vadd(d[1],U):U.vsub(d[1],U),_t?U.vadd(d[2],U):U.vsub(d[2],U),n.vadd(U,q),q.vsub(i,q),q.lengthSquared()<A*A){if(p)return!0;E=!0;const gt=this.createContactEquation(c,_,t,e,l,u);gt.ri.copy(q),gt.ri.normalize(),gt.ni.copy(gt.ri),gt.ri.scale(A,gt.ri),gt.rj.copy(U),gt.ri.vadd(i,gt.ri),gt.ri.vsub(c.position,gt.ri),gt.rj.vadd(n,gt.rj),gt.rj.vsub(_.position,gt.rj),this.result.push(gt),this.createFrictionEquationsFromContact(gt,this.frictionResult)}f.release(U),U=null;const Y=f.get(),F=f.get(),it=f.get(),G=f.get(),K=f.get(),X=d.length;for(let z=0;z!==X&&!E;z++)for(let J=0;J!==X&&!E;J++)if(z%3!==J%3){d[J].cross(d[z],Y),Y.normalize(),d[z].vadd(d[J],F),it.copy(i),it.vsub(F,it),it.vsub(n,it);const _t=it.dot(Y);Y.scale(_t,G);let gt=0;for(;gt===z%3||gt===J%3;)gt++;K.copy(i),K.vsub(G,K),K.vsub(F,K),K.vsub(n,K);const bt=Math.abs(_t),vt=K.length();if(bt<d[gt].length()&&vt<A){if(p)return!0;E=!0;const Et=this.createContactEquation(c,_,t,e,l,u);F.vadd(G,Et.rj),Et.rj.copy(Et.rj),K.negate(Et.ni),Et.ni.normalize(),Et.ri.copy(Et.rj),Et.ri.vadd(n,Et.ri),Et.ri.vsub(i,Et.ri),Et.ri.normalize(),Et.ri.scale(A,Et.ri),Et.ri.vadd(i,Et.ri),Et.ri.vsub(c.position,Et.ri),Et.rj.vadd(n,Et.rj),Et.rj.vsub(_.position,Et.rj),this.result.push(Et),this.createFrictionEquationsFromContact(Et,this.frictionResult)}}f.release(Y,F,it,G,K)}planeBox(t,e,i,n,a,o,c,_,l,u,p){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,e.convexPolyhedronRepresentation.id=e.id,this.planeConvex(t,e.convexPolyhedronRepresentation,i,n,a,o,c,_,t,e,p)}convexConvex(t,e,i,n,a,o,c,_,l,u,p,f,d){const A=QI;if(!(i.distanceTo(n)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,i,a,n,o,A,f,d)){const E=[],S=ZI;t.clipAgainstHull(i,a,e,n,o,A,-100,100,E);let y=0;for(let M=0;M!==E.length;M++){if(p)return!0;const x=this.createContactEquation(c,_,t,e,l,u),I=x.ri,w=x.rj;A.negate(x.ni),E[M].normal.negate(S),S.scale(E[M].depth,S),E[M].point.vadd(S,I),w.copy(E[M].point),I.vsub(i,I),w.vsub(n,w),I.vadd(i,I),I.vsub(c.position,I),w.vadd(n,w),w.vsub(_.position,w),this.result.push(x),y++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(x,this.frictionResult)}this.enableFrictionReduction&&y&&this.createFrictionFromAverage(y)}}sphereConvex(t,e,i,n,a,o,c,_,l,u,p){const f=this.v3pool;i.vsub(n,BI);const d=e.faceNormals,A=e.faces,E=e.vertices,S=t.radius;let y=!1;for(let M=0;M!==E.length;M++){const x=E[M],I=kI;o.vmult(x,I),n.vadd(I,I);const w=UI;if(I.vsub(i,w),w.lengthSquared()<S*S){if(p)return!0;y=!0;const D=this.createContactEquation(c,_,t,e,l,u);D.ri.copy(w),D.ri.normalize(),D.ni.copy(D.ri),D.ri.scale(S,D.ri),I.vsub(n,D.rj),D.ri.vadd(i,D.ri),D.ri.vsub(c.position,D.ri),D.rj.vadd(n,D.rj),D.rj.vsub(_.position,D.rj),this.result.push(D),this.createFrictionEquationsFromContact(D,this.frictionResult);return}}for(let M=0,x=A.length;M!==x&&y===!1;M++){const I=d[M],w=A[M],D=FI;o.vmult(I,D);const m=HI;o.vmult(E[w[0]],m),m.vadd(n,m);const U=zI;D.scale(-S,U),i.vadd(U,U);const q=WI;U.vsub(m,q);const Y=q.dot(D),F=YI;if(i.vsub(m,F),Y<0&&F.dot(D)>0){const it=[];for(let G=0,K=w.length;G!==K;G++){const X=f.get();o.vmult(E[w[G]],X),n.vadd(X,X),it.push(X)}if(RI(it,D,i)){if(p)return!0;y=!0;const G=this.createContactEquation(c,_,t,e,l,u);D.scale(-S,G.ri),D.negate(G.ni);const K=f.get();D.scale(-Y,K);const X=f.get();D.scale(-S,X),i.vsub(n,G.rj),G.rj.vadd(X,G.rj),G.rj.vadd(K,G.rj),G.rj.vadd(n,G.rj),G.rj.vsub(_.position,G.rj),G.ri.vadd(i,G.ri),G.ri.vsub(c.position,G.ri),f.release(K),f.release(X),this.result.push(G),this.createFrictionEquationsFromContact(G,this.frictionResult);for(let z=0,J=it.length;z!==J;z++)f.release(it[z]);return}else for(let G=0;G!==w.length;G++){const K=f.get(),X=f.get();o.vmult(E[w[(G+1)%w.length]],K),o.vmult(E[w[(G+2)%w.length]],X),n.vadd(K,K),n.vadd(X,X);const z=VI;X.vsub(K,z);const J=GI;z.unit(J);const _t=f.get(),gt=f.get();i.vsub(K,gt);const bt=gt.dot(J);J.scale(bt,_t),_t.vadd(K,_t);const vt=f.get();if(_t.vsub(i,vt),bt>0&&bt*bt<z.lengthSquared()&&vt.lengthSquared()<S*S){if(p)return!0;const Et=this.createContactEquation(c,_,t,e,l,u);_t.vsub(n,Et.rj),_t.vsub(i,Et.ni),Et.ni.normalize(),Et.ni.scale(S,Et.ri),Et.rj.vadd(n,Et.rj),Et.rj.vsub(_.position,Et.rj),Et.ri.vadd(i,Et.ri),Et.ri.vsub(c.position,Et.ri),this.result.push(Et),this.createFrictionEquationsFromContact(Et,this.frictionResult);for(let pt=0,St=it.length;pt!==St;pt++)f.release(it[pt]);f.release(K),f.release(X),f.release(_t),f.release(vt),f.release(gt);return}f.release(K),f.release(X),f.release(_t),f.release(vt),f.release(gt)}for(let G=0,K=it.length;G!==K;G++)f.release(it[G])}}}planeConvex(t,e,i,n,a,o,c,_,l,u,p){const f=KI,d=qI;d.set(0,0,1),a.vmult(d,d);let A=0;const E=XI;for(let S=0;S!==e.vertices.length;S++)if(f.copy(e.vertices[S]),o.vmult(f,f),n.vadd(f,f),f.vsub(i,E),d.dot(E)<=0){if(p)return!0;const M=this.createContactEquation(c,_,t,e,l,u),x=jI;d.scale(d.dot(E),x),f.vsub(x,x),x.vsub(i,M.ri),M.ni.copy(d),f.vsub(n,M.rj),M.ri.vadd(i,M.ri),M.ri.vsub(c.position,M.ri),M.rj.vadd(n,M.rj),M.rj.vsub(_.position,M.rj),this.result.push(M),A++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(M,this.frictionResult)}this.enableFrictionReduction&&A&&this.createFrictionFromAverage(A)}boxConvex(t,e,i,n,a,o,c,_,l,u,p){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,i,n,a,o,c,_,t,e,p)}sphereHeightfield(t,e,i,n,a,o,c,_,l,u,p){const f=e.data,d=t.radius,A=e.elementSize,E=_x,S=cx;Ie.pointToLocalFrame(n,o,i,S);let y=Math.floor((S.x-d)/A)-1,M=Math.ceil((S.x+d)/A)+1,x=Math.floor((S.y-d)/A)-1,I=Math.ceil((S.y+d)/A)+1;if(M<0||I<0||y>f.length||x>f[0].length)return;y<0&&(y=0),M<0&&(M=0),x<0&&(x=0),I<0&&(I=0),y>=f.length&&(y=f.length-1),M>=f.length&&(M=f.length-1),I>=f[0].length&&(I=f[0].length-1),x>=f[0].length&&(x=f[0].length-1);const w=[];e.getRectMinMax(y,x,M,I,w);const D=w[0],m=w[1];if(S.z-d>m||S.z+d<D)return;const U=this.result;for(let q=y;q<M;q++)for(let Y=x;Y<I;Y++){const F=U.length;let it=!1;if(e.getConvexTrianglePillar(q,Y,!1),Ie.pointToWorldFrame(n,o,e.pillarOffset,E),i.distanceTo(E)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(it=this.sphereConvex(t,e.pillarConvex,i,E,a,o,c,_,t,e,p)),p&&it||(e.getConvexTrianglePillar(q,Y,!0),Ie.pointToWorldFrame(n,o,e.pillarOffset,E),i.distanceTo(E)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(it=this.sphereConvex(t,e.pillarConvex,i,E,a,o,c,_,t,e,p)),p&&it))return!0;if(U.length-F>2)return}}boxHeightfield(t,e,i,n,a,o,c,_,l,u,p){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,i,n,a,o,c,_,t,e,p)}convexHeightfield(t,e,i,n,a,o,c,_,l,u,p){const f=e.data,d=e.elementSize,A=t.boundingSphereRadius,E=ax,S=ox,y=rx;Ie.pointToLocalFrame(n,o,i,y);let M=Math.floor((y.x-A)/d)-1,x=Math.ceil((y.x+A)/d)+1,I=Math.floor((y.y-A)/d)-1,w=Math.ceil((y.y+A)/d)+1;if(x<0||w<0||M>f.length||I>f[0].length)return;M<0&&(M=0),x<0&&(x=0),I<0&&(I=0),w<0&&(w=0),M>=f.length&&(M=f.length-1),x>=f.length&&(x=f.length-1),w>=f[0].length&&(w=f[0].length-1),I>=f[0].length&&(I=f[0].length-1);const D=[];e.getRectMinMax(M,I,x,w,D);const m=D[0],U=D[1];if(!(y.z-A>U||y.z+A<m))for(let q=M;q<x;q++)for(let Y=I;Y<w;Y++){let F=!1;if(e.getConvexTrianglePillar(q,Y,!1),Ie.pointToWorldFrame(n,o,e.pillarOffset,E),i.distanceTo(E)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(F=this.convexConvex(t,e.pillarConvex,i,E,a,o,c,_,null,null,p,S,null)),p&&F||(e.getConvexTrianglePillar(q,Y,!0),Ie.pointToWorldFrame(n,o,e.pillarOffset,E),i.distanceTo(E)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(F=this.convexConvex(t,e.pillarConvex,i,E,a,o,c,_,null,null,p,S,null)),p&&F))return!0}}sphereParticle(t,e,i,n,a,o,c,_,l,u,p){const f=ex;if(f.set(0,0,1),n.vsub(i,f),f.lengthSquared()<=t.radius*t.radius){if(p)return!0;const A=this.createContactEquation(_,c,e,t,l,u);f.normalize(),A.rj.copy(f),A.rj.scale(t.radius,A.rj),A.ni.copy(f),A.ni.negate(A.ni),A.ri.set(0,0,0),this.result.push(A),this.createFrictionEquationsFromContact(A,this.frictionResult)}}planeParticle(t,e,i,n,a,o,c,_,l,u,p){const f=$I;f.set(0,0,1),c.quaternion.vmult(f,f);const d=JI;if(n.vsub(c.position,d),f.dot(d)<=0){if(p)return!0;const E=this.createContactEquation(_,c,e,t,l,u);E.ni.copy(f),E.ni.negate(E.ni),E.ri.set(0,0,0);const S=tx;f.scale(f.dot(n),S),n.vsub(S,S),E.rj.copy(S),this.result.push(E),this.createFrictionEquationsFromContact(E,this.frictionResult)}}boxParticle(t,e,i,n,a,o,c,_,l,u,p){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,i,n,a,o,c,_,t,e,p)}convexParticle(t,e,i,n,a,o,c,_,l,u,p){let f=-1;const d=ix,A=nx;let E=null;const S=sx;if(S.copy(n),S.vsub(i,S),a.conjugate(Vf),Vf.vmult(S,S),t.pointIsInside(S)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(i,a),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(a);for(let y=0,M=t.faces.length;y!==M;y++){const x=[t.worldVertices[t.faces[y][0]]],I=t.worldFaceNormals[y];n.vsub(x[0],Gf);const w=-I.dot(Gf);if(E===null||Math.abs(w)<Math.abs(E)){if(p)return!0;E=w,f=y,d.copy(I)}}if(f!==-1){const y=this.createContactEquation(_,c,e,t,l,u);d.scale(E,A),A.vadd(n,A),A.vsub(i,A),y.rj.copy(A),d.negate(y.ni),y.ri.set(0,0,0);const M=y.ri,x=y.rj;M.vadd(n,M),M.vsub(_.position,M),x.vadd(i,x),x.vsub(c.position,x),this.result.push(y),this.createFrictionEquationsFromContact(y,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(t,e,i,n,a,o,c,_,l,u,p){return this.convexHeightfield(e,t,n,i,o,a,_,c,l,u,p)}particleCylinder(t,e,i,n,a,o,c,_,l,u,p){return this.convexParticle(e,t,n,i,o,a,_,c,l,u,p)}sphereTrimesh(t,e,i,n,a,o,c,_,l,u,p){const f=fI,d=pI,A=dI,E=mI,S=gI,y=AI,M=TI,x=uI,I=lI,w=SI;Ie.pointToLocalFrame(n,o,i,S);const D=t.radius;M.lowerBound.set(S.x-D,S.y-D,S.z-D),M.upperBound.set(S.x+D,S.y+D,S.z+D),e.getTrianglesInAABB(M,w);const m=hI,U=t.radius*t.radius;for(let G=0;G<w.length;G++)for(let K=0;K<3;K++)if(e.getVertex(e.indices[w[G]*3+K],m),m.vsub(S,I),I.lengthSquared()<=U){if(x.copy(m),Ie.pointToWorldFrame(n,o,x,m),m.vsub(i,I),p)return!0;let X=this.createContactEquation(c,_,t,e,l,u);X.ni.copy(I),X.ni.normalize(),X.ri.copy(X.ni),X.ri.scale(t.radius,X.ri),X.ri.vadd(i,X.ri),X.ri.vsub(c.position,X.ri),X.rj.copy(m),X.rj.vsub(_.position,X.rj),this.result.push(X),this.createFrictionEquationsFromContact(X,this.frictionResult)}for(let G=0;G<w.length;G++)for(let K=0;K<3;K++){e.getVertex(e.indices[w[G]*3+K],f),e.getVertex(e.indices[w[G]*3+(K+1)%3],d),d.vsub(f,A),S.vsub(d,y);const X=y.dot(A);S.vsub(f,y);let z=y.dot(A);if(z>0&&X<0&&(S.vsub(f,y),E.copy(A),E.normalize(),z=y.dot(E),E.scale(z,y),y.vadd(f,y),y.distanceTo(S)<t.radius)){if(p)return!0;const _t=this.createContactEquation(c,_,t,e,l,u);y.vsub(S,_t.ni),_t.ni.normalize(),_t.ni.scale(t.radius,_t.ri),_t.ri.vadd(i,_t.ri),_t.ri.vsub(c.position,_t.ri),Ie.pointToWorldFrame(n,o,y,y),y.vsub(_.position,_t.rj),Ie.vectorToWorldFrame(o,_t.ni,_t.ni),Ie.vectorToWorldFrame(o,_t.ri,_t.ri),this.result.push(_t),this.createFrictionEquationsFromContact(_t,this.frictionResult)}}const q=yI,Y=EI,F=MI,it=_I;for(let G=0,K=w.length;G!==K;G++){e.getTriangleVertices(w[G],q,Y,F),e.getNormal(w[G],it),S.vsub(q,y);let X=y.dot(it);if(it.scale(X,y),S.vsub(y,y),X=y.distanceTo(S),qe.pointInTriangle(y,q,Y,F)&&X<t.radius){if(p)return!0;let z=this.createContactEquation(c,_,t,e,l,u);y.vsub(S,z.ni),z.ni.normalize(),z.ni.scale(t.radius,z.ri),z.ri.vadd(i,z.ri),z.ri.vsub(c.position,z.ri),Ie.pointToWorldFrame(n,o,y,y),y.vsub(_.position,z.rj),Ie.vectorToWorldFrame(o,z.ni,z.ni),Ie.vectorToWorldFrame(o,z.ri,z.ri),this.result.push(z),this.createFrictionEquationsFromContact(z,this.frictionResult)}}w.length=0}planeTrimesh(t,e,i,n,a,o,c,_,l,u,p){const f=new N,d=aI;d.set(0,0,1),a.vmult(d,d);for(let A=0;A<e.vertices.length/3;A++){e.getVertex(A,f);const E=new N;E.copy(f),Ie.pointToWorldFrame(n,o,E,f);const S=oI;if(f.vsub(i,S),d.dot(S)<=0){if(p)return!0;const M=this.createContactEquation(c,_,t,e,l,u);M.ni.copy(d);const x=cI;d.scale(S.dot(d),x),f.vsub(x,x),M.ri.copy(x),M.ri.vsub(c.position,M.ri),M.rj.copy(f),M.rj.vsub(_.position,M.rj),this.result.push(M),this.createFrictionEquationsFromContact(M,this.frictionResult)}}}}const wn=new N,mr=new N,gr=new N,sI=new N,iI=new N,nI=new Xe,rI=new Xe,aI=new N,oI=new N,cI=new N,_I=new N,lI=new N;new N;const hI=new N,uI=new N,fI=new N,pI=new N,dI=new N,mI=new N,gI=new N,AI=new N,yI=new N,EI=new N,MI=new N,TI=new Vs,SI=[],Yo=new N,Bf=new N,vI=new N,II=new N,xI=new N;function RI(r,t,e){let i=null;const n=r.length;for(let a=0;a!==n;a++){const o=r[a],c=vI;r[(a+1)%n].vsub(o,c);const _=II;c.cross(t,_);const l=xI;e.vsub(o,l);const u=_.dot(l);if(i===null||u>0&&i===!0||u<=0&&i===!1){i===null&&(i=u>0);continue}else return!1}return!0}const Ko=new N,OI=new N,wI=new N,LI=new N,NI=[new N,new N,new N,new N,new N,new N],bI=new N,DI=new N,CI=new N,PI=new N,BI=new N,VI=new N,GI=new N,UI=new N,kI=new N,FI=new N,HI=new N,zI=new N,WI=new N,YI=new N;new N;new N;const KI=new N,qI=new N,XI=new N,jI=new N,QI=new N,ZI=new N,$I=new N,JI=new N,tx=new N,ex=new N,Vf=new Xe,sx=new N;new N;const ix=new N,Gf=new N,nx=new N,rx=new N,ax=new N,ox=[0],cx=new N,_x=new N;class Uf{constructor(){this.current=[],this.previous=[]}getKey(t,e){if(e<t){const i=e;e=t,t=i}return t<<16|e}set(t,e){const i=this.getKey(t,e),n=this.current;let a=0;for(;i>n[a];)a++;if(i!==n[a]){for(let o=n.length-1;o>=a;o--)n[o+1]=n[o];n[a]=i}}tick(){const t=this.current;this.current=this.previous,this.previous=t,this.current.length=0}getDiff(t,e){const i=this.current,n=this.previous,a=i.length,o=n.length;let c=0;for(let _=0;_<a;_++){let l=!1;const u=i[_];for(;u>n[c];)c++;l=u===n[c],l||kf(t,u)}c=0;for(let _=0;_<o;_++){let l=!1;const u=n[_];for(;u>i[c];)c++;l=i[c]===u,l||kf(e,u)}}}function kf(r,t){r.push((t&4294901760)>>16,t&65535)}const el=(r,t)=>r<t?`${r}-${t}`:`${t}-${r}`;class lx{constructor(){this.data={keys:[]}}get(t,e){const i=el(t,e);return this.data[i]}set(t,e,i){const n=el(t,e);this.get(t,e)||this.data.keys.push(n),this.data[n]=i}delete(t,e){const i=el(t,e),n=this.data.keys.indexOf(i);n!==-1&&this.data.keys.splice(n,1),delete this.data[i]}reset(){const t=this.data,e=t.keys;for(;e.length>0;){const i=e.pop();delete t[i]}}}class hx extends Ad{constructor(t){t===void 0&&(t={}),super(),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=t.quatNormalizeSkip!==void 0?t.quatNormalizeSkip:0,this.quatNormalizeFast=t.quatNormalizeFast!==void 0?t.quatNormalizeFast:!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new N,t.gravity&&this.gravity.copy(t.gravity),t.frictionGravity&&(this.frictionGravity=new N,this.frictionGravity.copy(t.frictionGravity)),this.broadphase=t.broadphase!==void 0?t.broadphase:new mv,this.bodies=[],this.hasActiveBodies=!1,this.solver=t.solver!==void 0?t.solver:new jv,this.constraints=[],this.narrowphase=new eI(this),this.collisionMatrix=new If,this.collisionMatrixPrevious=new If,this.bodyOverlapKeeper=new Uf,this.shapeOverlapKeeper=new Uf,this.contactmaterials=[],this.contactMaterialTable=new lx,this.defaultMaterial=new qa("default"),this.defaultContactMaterial=new Ka(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(t,e){return this.contactMaterialTable.get(t.id,e.id)}collisionMatrixTick(){const t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(t){this.constraints.push(t)}removeConstraint(t){const e=this.constraints.indexOf(t);e!==-1&&this.constraints.splice(e,1)}rayTest(t,e,i){i instanceof Mc?this.raycastClosest(t,e,{skipBackfaces:!0},i):this.raycastAll(t,e,{skipBackfaces:!0},i)}raycastAll(t,e,i,n){return i===void 0&&(i={}),i.mode=qe.ALL,i.from=t,i.to=e,i.callback=n,sl.intersectWorld(this,i)}raycastAny(t,e,i,n){return i===void 0&&(i={}),i.mode=qe.ANY,i.from=t,i.to=e,i.result=n,sl.intersectWorld(this,i)}raycastClosest(t,e,i,n){return i===void 0&&(i={}),i.mode=qe.CLOSEST,i.from=t,i.to=e,i.result=n,sl.intersectWorld(this,i)}addBody(t){this.bodies.includes(t)||(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof Wt&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))}removeBody(t){t.world=null;const e=this.bodies.length-1,i=this.bodies,n=i.indexOf(t);if(n!==-1){i.splice(n,1);for(let a=0;a!==i.length;a++)i[a].index=a;this.collisionMatrix.setNumObjects(e),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(t){return this.idToBodyMap[t]}getShapeById(t){const e=this.bodies;for(let i=0;i<e.length;i++){const n=e[i].shapes;for(let a=0;a<n.length;a++){const o=n[a];if(o.id===t)return o}}return null}addContactMaterial(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)}removeContactMaterial(t){const e=this.contactmaterials.indexOf(t);e!==-1&&(this.contactmaterials.splice(e,1),this.contactMaterialTable.delete(t.materials[0].id,t.materials[1].id))}fixedStep(t,e){t===void 0&&(t=1/60),e===void 0&&(e=10);const i=$e.now()/1e3;if(!this.lastCallTime)this.step(t,void 0,e);else{const n=i-this.lastCallTime;this.step(t,n,e)}this.lastCallTime=i}step(t,e,i){if(i===void 0&&(i=10),e===void 0)this.internalStep(t),this.time+=t;else{this.accumulator+=e;const n=$e.now();let a=0;for(;this.accumulator>=t&&a<i&&(this.internalStep(t),this.accumulator-=t,a++,!($e.now()-n>t*1e3)););this.accumulator=this.accumulator%t;const o=this.accumulator/t;for(let c=0;c!==this.bodies.length;c++){const _=this.bodies[c];_.previousPosition.lerp(_.position,o,_.interpolatedPosition),_.previousQuaternion.slerp(_.quaternion,o,_.interpolatedQuaternion),_.previousQuaternion.normalize()}this.time+=e}}internalStep(t){this.dt=t;const e=this.contacts,i=mx,n=gx,a=this.bodies.length,o=this.bodies,c=this.solver,_=this.gravity,l=this.doProfiling,u=this.profile,p=Wt.DYNAMIC;let f=-1/0;const d=this.constraints,A=dx;_.length();const E=_.x,S=_.y,y=_.z;let M=0;for(l&&(f=$e.now()),M=0;M!==a;M++){const G=o[M];if(G.type===p){const K=G.force,X=G.mass;K.x+=X*E,K.y+=X*S,K.z+=X*y}}for(let G=0,K=this.subsystems.length;G!==K;G++)this.subsystems[G].update();l&&(f=$e.now()),i.length=0,n.length=0,this.broadphase.collisionPairs(this,i,n),l&&(u.broadphase=$e.now()-f);let x=d.length;for(M=0;M!==x;M++){const G=d[M];if(!G.collideConnected)for(let K=i.length-1;K>=0;K-=1)(G.bodyA===i[K]&&G.bodyB===n[K]||G.bodyB===i[K]&&G.bodyA===n[K])&&(i.splice(K,1),n.splice(K,1))}this.collisionMatrixTick(),l&&(f=$e.now());const I=px,w=e.length;for(M=0;M!==w;M++)I.push(e[M]);e.length=0;const D=this.frictionEquations.length;for(M=0;M!==D;M++)A.push(this.frictionEquations[M]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(i,n,this,e,I,this.frictionEquations,A),l&&(u.narrowphase=$e.now()-f),l&&(f=$e.now()),M=0;M<this.frictionEquations.length;M++)c.addEquation(this.frictionEquations[M]);const m=e.length;for(let G=0;G!==m;G++){const K=e[G],X=K.bi,z=K.bj,J=K.si,_t=K.sj;let gt;if(X.material&&z.material?gt=this.getContactMaterial(X.material,z.material)||this.defaultContactMaterial:gt=this.defaultContactMaterial,gt.friction,X.material&&z.material&&(X.material.friction>=0&&z.material.friction>=0&&X.material.friction*z.material.friction,X.material.restitution>=0&&z.material.restitution>=0&&(K.restitution=X.material.restitution*z.material.restitution)),c.addEquation(K),X.allowSleep&&X.type===Wt.DYNAMIC&&X.sleepState===Wt.SLEEPING&&z.sleepState===Wt.AWAKE&&z.type!==Wt.STATIC){const bt=z.velocity.lengthSquared()+z.angularVelocity.lengthSquared(),vt=z.sleepSpeedLimit**2;bt>=vt*2&&(X.wakeUpAfterNarrowphase=!0)}if(z.allowSleep&&z.type===Wt.DYNAMIC&&z.sleepState===Wt.SLEEPING&&X.sleepState===Wt.AWAKE&&X.type!==Wt.STATIC){const bt=X.velocity.lengthSquared()+X.angularVelocity.lengthSquared(),vt=X.sleepSpeedLimit**2;bt>=vt*2&&(z.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(X,z,!0),this.collisionMatrixPrevious.get(X,z)||(ua.body=z,ua.contact=K,X.dispatchEvent(ua),ua.body=X,z.dispatchEvent(ua)),this.bodyOverlapKeeper.set(X.id,z.id),this.shapeOverlapKeeper.set(J.id,_t.id)}for(this.emitContactEvents(),l&&(u.makeContactConstraints=$e.now()-f,f=$e.now()),M=0;M!==a;M++){const G=o[M];G.wakeUpAfterNarrowphase&&(G.wakeUp(),G.wakeUpAfterNarrowphase=!1)}for(x=d.length,M=0;M!==x;M++){const G=d[M];G.update();for(let K=0,X=G.equations.length;K!==X;K++){const z=G.equations[K];c.addEquation(z)}}c.solve(t,this),l&&(u.solve=$e.now()-f),c.removeAllEquations();const U=Math.pow;for(M=0;M!==a;M++){const G=o[M];if(G.type&p){const K=U(1-G.linearDamping,t),X=G.velocity;X.scale(K,X);const z=G.angularVelocity;if(z){const J=U(1-G.angularDamping,t);z.scale(J,z)}}}this.dispatchEvent(fx),l&&(f=$e.now());const Y=this.stepnumber%(this.quatNormalizeSkip+1)===0,F=this.quatNormalizeFast;for(M=0;M!==a;M++)o[M].integrate(t,Y,F);this.clearForces(),this.broadphase.dirty=!0,l&&(u.integrate=$e.now()-f),this.stepnumber+=1,this.dispatchEvent(ux);let it=!0;if(this.allowSleep)for(it=!1,M=0;M!==a;M++){const G=o[M];G.sleepTick(this.time),G.sleepState!==Wt.SLEEPING&&(it=!0)}this.hasActiveBodies=it}emitContactEvents(){const t=this.hasAnyEventListener("beginContact"),e=this.hasAnyEventListener("endContact");if((t||e)&&this.bodyOverlapKeeper.getDiff(Di,Ci),t){for(let a=0,o=Di.length;a<o;a+=2)fa.bodyA=this.getBodyById(Di[a]),fa.bodyB=this.getBodyById(Di[a+1]),this.dispatchEvent(fa);fa.bodyA=fa.bodyB=null}if(e){for(let a=0,o=Ci.length;a<o;a+=2)pa.bodyA=this.getBodyById(Ci[a]),pa.bodyB=this.getBodyById(Ci[a+1]),this.dispatchEvent(pa);pa.bodyA=pa.bodyB=null}Di.length=Ci.length=0;const i=this.hasAnyEventListener("beginShapeContact"),n=this.hasAnyEventListener("endShapeContact");if((i||n)&&this.shapeOverlapKeeper.getDiff(Di,Ci),i){for(let a=0,o=Di.length;a<o;a+=2){const c=this.getShapeById(Di[a]),_=this.getShapeById(Di[a+1]);Pi.shapeA=c,Pi.shapeB=_,c&&(Pi.bodyA=c.body),_&&(Pi.bodyB=_.body),this.dispatchEvent(Pi)}Pi.bodyA=Pi.bodyB=Pi.shapeA=Pi.shapeB=null}if(n){for(let a=0,o=Ci.length;a<o;a+=2){const c=this.getShapeById(Ci[a]),_=this.getShapeById(Ci[a+1]);Bi.shapeA=c,Bi.shapeB=_,c&&(Bi.bodyA=c.body),_&&(Bi.bodyB=_.body),this.dispatchEvent(Bi)}Bi.bodyA=Bi.bodyB=Bi.shapeA=Bi.shapeB=null}}clearForces(){const t=this.bodies,e=t.length;for(let i=0;i!==e;i++){const n=t[i];n.force,n.torque,n.force.set(0,0,0),n.torque.set(0,0,0)}}}new Vs;const sl=new qe,$e=globalThis.performance||{};if(!$e.now){let r=Date.now();$e.timing&&$e.timing.navigationStart&&(r=$e.timing.navigationStart),$e.now=()=>Date.now()-r}new N;const ux={type:"postStep"},fx={type:"preStep"},ua={type:Wt.COLLIDE_EVENT_NAME,body:null,contact:null},px=[],dx=[],mx=[],gx=[],Di=[],Ci=[],fa={type:"beginContact",bodyA:null,bodyB:null},pa={type:"endContact",bodyA:null,bodyB:null},Pi={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},Bi={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};class Rd{static create(t,e,i=.2,n=16733491,a){const o=new ke(new ba(i,16,12),new $l({color:n}));o.castShadow=!1,o.receiveShadow=!1,o.position.set(e.x,e.y,e.z);let c=null;if(t&&t.cannonWorld){const _=new Kv(i);if(c=new Wt({mass:1,shape:_}),c._isBall=!0,c.position.set(e.x,e.y,e.z),a){const{vx:l=0,vy:u=0,vz:p=0}=a;c.velocity.set(l,u,p)}t.cannonWorld.addBody(c),t._physicsObjects.push({mesh:o,body:c}),o.userData.m_physicsBody=c,o.userData.type="ball"}else o.userData.m_physicsBody=null;return t&&t.v_scene&&t.v_scene.add(o),{mesh:o,body:c}}}class Od extends Te{constructor(t){super(),this.element=t||document.createElement("div"),this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&e.element.parentNode!==null&&e.element.parentNode.removeChild(e.element)})})}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this}}Od.prototype.isCSS2DObject=!0;const nn=new C,Ff=new jt,Hf=new jt,zf=new C,Wf=new C;class Ax{constructor(){const t=this;let e,i,n,a;const o={objects:new WeakMap},c=document.createElement("div");c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:e,height:i}},this.render=function(f,d){f.autoUpdate===!0&&f.updateMatrixWorld(),d.parent===null&&d.updateMatrixWorld(),Ff.copy(d.matrixWorldInverse),Hf.multiplyMatrices(d.projectionMatrix,Ff),_(f,f,d),p(f)},this.setSize=function(f,d){e=f,i=d,n=e/2,a=i/2,c.style.width=f+"px",c.style.height=d+"px"};function _(f,d,A){if(f.isCSS2DObject){f.onBeforeRender(t,d,A),nn.setFromMatrixPosition(f.matrixWorld),nn.applyMatrix4(Hf);const E=f.element;/apple/i.test(navigator.vendor)?E.style.transform="translate(-50%,-50%) translate("+Math.round(nn.x*n+n)+"px,"+Math.round(-nn.y*a+a)+"px)":E.style.transform="translate(-50%,-50%) translate("+(nn.x*n+n)+"px,"+(-nn.y*a+a)+"px)",E.style.display=f.visible&&nn.z>=-1&&nn.z<=1?"":"none";const S={distanceToCameraSquared:l(A,f)};o.objects.set(f,S),E.parentNode!==c&&c.appendChild(E),f.onAfterRender(t,d,A)}for(let E=0,S=f.children.length;E<S;E++)_(f.children[E],d,A)}function l(f,d){return zf.setFromMatrixPosition(f.matrixWorld),Wf.setFromMatrixPosition(d.matrixWorld),zf.distanceToSquared(Wf)}function u(f){const d=[];return f.traverse(function(A){A.isCSS2DObject&&d.push(A)}),d}function p(f){const d=u(f).sort(function(E,S){const y=o.objects.get(E).distanceToCameraSquared,M=o.objects.get(S).distanceToCameraSquared;return y-M}),A=d.length;for(let E=0,S=d.length;E<S;E++)d[E].element.style.zIndex=A-E}}}const yx=15;class Xa{constructor(t,e,i,n,a=!1){this.m_world=t,this.m_canvas=e,this.v_droneIndex=0,this.m_view_selected_camera=null,this.isStreamable=a,this.ws=null,this.m_skip=0,this.targetFps=yx,this.sendInterval=Math.ceil(60/this.targetFps);const o=window.devicePixelRatio,c=Math.floor(e.clientWidth*o)&-2,_=Math.floor(e.clientHeight*o)&-2;this.m_canvas.width=c,this.m_canvas.height=_,this.v_context=e.getContext("2d"),this.renderer=t.renderer,this.m_main_camera=new Ke(75,e.width/e.height,.1,5e3),this.m_view_selected_camera=this.m_main_camera,this.m_main_camera.position.set(5,5,0),this.m_main_camera.lookAt(new C(i+0,0,n+0)),this.m_main_camera.m_controls=new Tl(this.m_main_camera,e),this.m_main_camera.m_controls&&this.fn_configureControls(this.m_main_camera.m_controls),this.m_main_camera.m_controls.enabled=!0,this.m_activeControls=this.m_main_camera.m_controls,this.controlsByCamera=new Map,this.selectedDroneId=null,this.followMinDist=1,this.followMaxDist=15,this.followOffset=null,this.labelRenderer=new Ax;const l=this.m_canvas.parentNode;this.labelRenderer.setSize(l.clientWidth,l.clientHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top="0px",this.labelRenderer.domElement.style.left="0px",this.labelRenderer.domElement.style.pointerEvents="none",this.labelRenderer.domElement.className=`label-renderer-${e.id}`,l.appendChild(this.labelRenderer.domElement),console.log(`Initialized CSS2DRenderer for canvas ${e.id}, container size: ${l.clientWidth}x${l.clientHeight}`),this.fn_onMouseDown=this.fn_onMouseDown.bind(this),this.fn_onMouseDoubleClick=this.fn_onMouseDoubleClick.bind(this),this.m_canvas.addEventListener("click",this.fn_onMouseDown,!1),this.m_canvas.addEventListener("dblclick",this.fn_onMouseDoubleClick,!1);try{this.isStreamable&&this.initWebSocket()}catch{}}initWebSocket(){try{this.ws=new WebSocket("ws://localhost:8081"),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{console.log("Streaming WebSocket connected")},this.ws.onclose=()=>{console.log("Streaming WebSocket closed")},this.ws.onerror=t=>{console.error("Streaming WebSocket error:",t)}}catch{return}}downloadImage(t,e){console.warn(`downloadImage not implemented: would save ${e} from ${t}`);const i=document.createElement("a");i.href=t,i.download=e,i.click()}fn_onMouseDown(t){t.preventDefault(),this.m_world.v_selectedView=this,document.querySelectorAll(".map3D_container").forEach(i=>i.classList.remove("selected")),t.currentTarget.parentNode.classList.add("selected")}fn_onMouseDoubleClick(t){t.preventDefault();var e=t.currentTarget.toDataURL(),i=new Date;this.downloadImage(e,"image"+i.getSeconds()+"_"+i.getMilliseconds()+".png")}fn_resizeRendererToDisplaySize(t){if(!this.renderer)return console.error("Renderer is undefined in C_View.fn_resizeRendererToDisplaySize"),!1;const e=this.m_canvas,i=window.devicePixelRatio,n=e.clientWidth*i,a=e.clientHeight*i,o=Math.floor(n)&-2,c=Math.floor(a)&-2,_=e.width!==o||e.height!==c;if(_){e.width=o,e.height=c,this.renderer.setSize(o,c,!1);const l=e.parentNode;this.labelRenderer.setSize(l.clientWidth,l.clientHeight)}return _}fn_selectWorldCamera(){this.fn_setSelectedCamera(this.m_main_camera)}fn_iterateAttachedCameras(){const t=this.m_world.m_objects_attached_cameras;if(t.length==0)return;let i=t;const n=this.selectedDroneId;if(n&&this.m_world.v_drone&&this.m_world.v_drone[n]){const a=this.m_world.v_drone[n];i=t.filter(o=>o&&o.m_ownerObject===a),i.length===0&&(i=t)}this.v_droneIndex=this.v_droneIndex-1,this.v_droneIndex<0&&(this.v_droneIndex=i.length-1);{const a=i[this.v_droneIndex];a.m_cameraThree!=null?this.fn_setSelectedCamera(a.m_cameraThree):this.fn_setSelectedCamera(a);try{const o=this.m_view_selected_camera;if(o===this.m_main_camera)this.fn_displayMessage("<b>Camera:</b> World",1e3);else{const c=o?.userData?.m_ownerObject?.m_camera_tag||"attached";this.fn_displayMessage(`<b>Drone:</b>${this.selectedDroneId}<b>   Camera:</b>${c}`,1e3)}}catch{}}}fn_handleCameraSwitch(t){const i=this.m_world.m_objects_attached_cameras;if(i.length==0)return;let a=i;const o=this.selectedDroneId;if(o&&this.m_world.v_drone&&this.m_world.v_drone[o]){const c=this.m_world.v_drone[o];a=i.filter(_=>_&&_.m_ownerObject===c),a.length===0&&(a=i)}switch(t.keyCode){case 65:if(this.m_view_selected_camera===this.m_main_camera){this.m_main_camera.translateX(-.5);break}if(this.m_view_selected_camera.userData.m_ownerObject==null)break;this.m_view_selected_camera.userData.m_ownerObject.fn_setCameraDeltaOrientation(0,0,.1);break;case 68:if(this.m_view_selected_camera===this.m_main_camera){this.m_main_camera.translateX(.5);break}if(this.m_view_selected_camera.userData.m_ownerObject==null)break;this.m_view_selected_camera.userData.m_ownerObject.fn_setCameraDeltaOrientation(0,0,-.1);break;case 69:if(this.m_view_selected_camera.userData.m_ownerObject==null)break;this.m_view_selected_camera.userData.m_ownerObject.fn_setCameraDeltaOrientation(-.1,0,0);break;case 72:if(this.m_main_camera==null)break;this.m_main_camera.lookAt(0,0,.1);break;case 79:if(a.length===0)break;this.v_droneIndex=(this.v_droneIndex+1)%a.length;{const _=a[this.v_droneIndex];_.m_cameraThree!=null?this.fn_setSelectedCamera(_.m_cameraThree):this.fn_setSelectedCamera(_);try{const l=this.m_view_selected_camera;if(l===this.m_main_camera)this.fn_displayMessage("<b>Camera:</b> World",1e3);else{const u=l?.userData?.m_ownerObject?.m_camera_tag||"attached";this.fn_displayMessage(`<b>Drone:</b>${this.selectedDroneId}<b>   Camera:</b>${u}`,1e3)}}catch{}}break;case 81:if(this.m_view_selected_camera===this.m_main_camera){this.m_main_camera.position.set(5,5,0),this.m_main_camera.lookAt(new C(0,0,0));break}if(this.m_view_selected_camera.userData.m_ownerObject==null)break;this.m_view_selected_camera.userData.m_ownerObject.fn_setCameraDeltaOrientation(.1,0,0);break;case 82:if(this.m_view_selected_camera.userData.m_ownerObject==null)break;this.m_view_selected_camera.userData.m_ownerObject.fn_setCameraOrientation(0,0,0);break;case 83:if(this.m_view_selected_camera===this.m_main_camera){this.m_main_camera.translateZ(.5);break}if(this.m_view_selected_camera.userData.m_ownerObject==null)break;this.m_view_selected_camera.userData.m_ownerObject.fn_setCameraDeltaOrientation(0,-.1,0);break;case 87:if(this.m_view_selected_camera===this.m_main_camera){this.m_main_camera.translateZ(-.5);break}if(this.m_view_selected_camera.userData.m_ownerObject==null)break;this.m_view_selected_camera.userData.m_ownerObject.fn_setCameraDeltaOrientation(0,.1,0);break;case 112:const c=document.getElementById("help_dlg");c.style.display=c.style.display==="none"?"block":"none",t.preventDefault();break}}fn_render(){if(!this.renderer){console.error("Renderer is undefined in C_View.fn_render");return}const t=this.m_canvas,e=t.parentNode;if(t.clientWidth*window.devicePixelRatio,t.clientHeight*window.devicePixelRatio,this.renderer.setViewport(0,0,t.clientWidth,t.clientHeight),this.renderer.setScissor(0,0,t.clientWidth,t.clientHeight),this.renderer.setScissorTest(!0),this.fn_resizeRendererToDisplaySize()&&(this.m_view_selected_camera.aspect=t.clientWidth/t.clientHeight,this.m_view_selected_camera.updateProjectionMatrix(),this.labelRenderer.setSize(e.clientWidth,e.clientHeight)),this.m_activeControls&&this.m_activeControls.update){const i=this.m_view_selected_camera;if(i&&i.userData&&i.userData.m_ownerObject){const n=i.userData.m_ownerObject,a=n&&n.m_camera_tag==="followme",o=n&&n.m_ownerObject;if(a&&o&&this.m_activeControls.target){let c=null;try{const p=this.m_activeControls.target;c=new C().subVectors(i.position,p),this.followOffset=c.clone()}catch{}const{x:_,y:l,z:u}=o.fn_translateXYZ();this.m_activeControls.target.set(_,l,u);try{c&&i.position.set(_+c.x,l+c.y,u+c.z)}catch{}}}this.m_activeControls.update();try{this.m_activeControls&&this.m_activeControls.target&&(this.followOffset=new C().subVectors(this.m_view_selected_camera.position,this.m_activeControls.target))}catch{}}this.renderer.render(this.m_world.v_scene,this.m_view_selected_camera),this.labelRenderer.render(this.m_world.v_scene,this.m_view_selected_camera),this.v_context.drawImage(this.renderer.domElement,0,0),this.m_world.fn_setCameraHelperEnabled(this.v_droneIndex,this.m_world.m_global_camera_helper),this.m_skip++,this.m_skip%this.sendInterval===0&&this.isStreamable&&this.ws?.readyState===WebSocket.OPEN&&this.v_context.canvas.toBlob(i=>{if(i){const n=new FileReader;n.onload=()=>this.ws.send(n.result),n.readAsArrayBuffer(i)}},"image/jpeg",.8),this.renderer.setScissorTest(!1)}}Xa.prototype.fn_setSelectedCamera=function(r){if(!r)return;if(this.m_view_selected_camera)if(this.m_view_selected_camera===this.m_main_camera)this.m_main_camera.m_controls&&(this.m_main_camera.m_controls.enabled=!1);else{const i=this.controlsByCamera.get(this.m_view_selected_camera);i&&(i.enabled=!1)}if(this.m_view_selected_camera&&this.m_view_selected_camera.userData&&this.m_view_selected_camera.userData.m_ownerObject){const i=this.m_view_selected_camera.userData.m_ownerObject;if(i&&i.m_camera_tag==="followme"){const a=this.m_view_selected_camera.userData;a.manualControlRefs=(a.manualControlRefs||0)-1,a.manualControlRefs<0&&(a.manualControlRefs=0),a.manualControl=a.manualControlRefs>0}else this.m_view_selected_camera.userData.manualControl=!1}const t=!!(r.userData&&r.userData.m_ownerObject),e=t&&r.userData.m_ownerObject.m_camera_tag==="followme";if(t)try{const i=r.userData.m_ownerObject,n=i&&i.m_ownerObject;if(n&&this.m_world&&this.m_world.v_drone){const o=Object.keys(this.m_world.v_drone).find(c=>this.m_world.v_drone[c]===n);o&&(this.selectedDroneId=o)}}catch{}if(r===this.m_main_camera)this.m_main_camera.m_controls||(this.m_main_camera.m_controls=new Tl(this.m_main_camera,this.m_canvas),this.fn_configureControls(this.m_main_camera.m_controls)),this.m_main_camera.m_controls.enabled=!0,this.m_activeControls=this.m_main_camera.m_controls;else{let i=this.controlsByCamera.get(r);if(i||(i=new Tl(r,this.m_canvas),this.fn_configureControls(i),this.controlsByCamera.set(r,i)),e){i.enabled=!0,this.m_activeControls=i;const n=r.userData;n.manualControlRefs=(n.manualControlRefs||0)+1,n.manualControl=n.manualControlRefs>0;try{i.enablePan=!1,i.enableDamping=!1,typeof this.followMaxDist=="number"&&(i.maxDistance=this.followMaxDist)}catch{}try{const a=r.userData.m_ownerObject,o=a&&a.m_ownerObject;if(o&&this.m_activeControls&&this.m_activeControls.target){const{x:c,y:_,z:l}=o.fn_translateXYZ();this.m_activeControls.target.set(c,_,l),this.followOffset||(this.followOffset=new C().subVectors(r.position,this.m_activeControls.target))}}catch{}}else i.enabled=!1,this.m_activeControls=null,t&&(r.userData.manualControl=!1)}this.m_view_selected_camera=r};Xa.prototype.fn_configureControls=function(r){try{r.enableDamping=!0,r.dampingFactor=.075,r.enablePan=!0,r.touches.ONE=rn.ROTATE,r.touches.TWO=rn.DOLLY_PAN}catch{}};Xa.prototype.dispose=function(){if(this.m_main_camera&&this.m_main_camera.m_controls&&(this.m_main_camera.m_controls.enabled=!1,this.m_main_camera.m_controls.dispose&&this.m_main_camera.m_controls.dispose()),this.controlsByCamera){for(const[t,e]of this.controlsByCamera.entries())e&&(e.enabled=!1,e.dispose&&e.dispose());this.controlsByCamera.clear()}const r=this.m_view_selected_camera;if(r&&r.userData&&r.userData.m_ownerObject){const t=r.userData.m_ownerObject;if(t&&t.m_camera_tag==="followme"){const e=r.userData;e.manualControlRefs=(e.manualControlRefs||0)-1,e.manualControlRefs<0&&(e.manualControlRefs=0),e.manualControl=e.manualControlRefs>0}}this.m_canvas&&this.fn_onMouseDown&&this.m_canvas.removeEventListener("click",this.fn_onMouseDown,!1),this.m_canvas&&this.fn_onMouseDoubleClick&&this.m_canvas.removeEventListener("dblclick",this.fn_onMouseDoubleClick,!1),this.labelRenderer&&this.labelRenderer.domElement&&this.labelRenderer.domElement.parentNode&&this.labelRenderer.domElement.parentNode.removeChild(this.labelRenderer.domElement),this.labelRenderer=null;try{this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.close()}catch{}this.ws=null,this.m_activeControls=null,this.m_view_selected_camera=null};Xa.prototype.fn_displayMessage=function(r,t=2e3){try{const e=this.m_canvas&&this.m_canvas.parentNode?this.m_canvas.parentNode:null;if(!e)return;if(!this.messageOverlay){const n=document.createElement("div");n.className="view-message-overlay",n.style.position="absolute",n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)",n.style.padding="10px 14px",n.style.background="rgba(0,0,0,0.7)",n.style.color="#fff",n.style.borderRadius="6px",n.style.fontSize="13px",n.style.textAlign="center",n.style.pointerEvents="none",n.style.zIndex="1000",n.style.opacity="0",n.style.transition="opacity 200ms ease",e.appendChild(n),this.messageOverlay=n}this.messageOverlay.innerHTML=r||"",this.messageOverlay.style.opacity="1",this.messageOverlay.style.visibility="visible",this.messageHideTimer&&(clearTimeout(this.messageHideTimer),this.messageHideTimer=null),this.messageCleanupTimer&&(clearTimeout(this.messageCleanupTimer),this.messageCleanupTimer=null);const i=Math.max(0,Number(t)||0);this.messageHideTimer=setTimeout(()=>{this.messageOverlay&&(this.messageOverlay.style.opacity="0",this.messageCleanupTimer=setTimeout(()=>{this.messageOverlay&&(this.messageOverlay.style.visibility="hidden")},220))},i)}catch{}};class Ex{#t={};constructor(t,e){t==null&&(t=0),e==null&&(e=0),this.v_scene=null,this.v_clock=null,this.v_water=null,this.v_selectedView=null,this.v_collisionConfiguration,this.v_dispatcher,this.v_broadphase,this.v_solver,this.v_physicsWorld,this.v_rigidBodies=[],this.v_tmpTrans=null,this.v_XZero=t,this.v_YZero=e,this.v_height3D=0,this.v_drone={},this.#t={},this.v_cameras=[],this.v_views=[],this.v_droneVel={},this._lastDronePos={},this.v_needUpdate=!1,this.canvas=null,this.stats=null,this.renderer=null,this.raycaster=new US,this.mouseCoords=new dt,this.mouse=new dt(1,1),this.pos=new C,this.quat=new Se,this.v_convexBreaker=null,this.fractureImpulse=15,this.v_impactPoint=new C,this.v_impactNormal=new C,this.v_objectsToRemove=[],this.m_objects_attached_cameras=[],this.m_global_camera_helper=!0;for(let n=0;n<500;n++)this.v_objectsToRemove[n]=null;this.v_numObjectsToRemove=0,this.cannonWorld=null,this._physicsObjects=[],this._fixedTimeStep=1/60,this._maxSubSteps=3,this.v_selectedDroneId=null;const i=document.createElement("div");i.id="help_dlg",i.innerHTML=ig,document.getElementById("mav3dmap").appendChild(i),i.style.display="none",this.fn_animate=this.fn_animate.bind(this)}fn_addRobot(t,e){t&&(this.#t[t]=e)}fn_getRobot(t){return this.#t[t]}fn_deleteRobot(t){delete this.#t[t]}fn_registerCamerasOfObject(t){let e=t.fn_getCamera();for(let i=0;i<e.length;++i){let n=e[i];this.m_objects_attached_cameras.push(n),this.v_scene.add(n.m_cameraThree),n.m_helperThree!=null&&this.v_scene.add(n.m_helperThree)}}fn_saveLayoutToLocalStorage(){const t="m3d_layout_v1",e=this.v_views||[],i={version:1,savedAt:Date.now(),views:e.map(n=>{let a="world",o=null,c=null,_=n.selectedDroneId||null;if(n.m_view_selected_camera&&n.m_view_selected_camera!==n.m_main_camera){a="attached";const l=n.m_view_selected_camera.userData&&n.m_view_selected_camera.userData.m_ownerObject;o=l&&l.m_camera_tag?l.m_camera_tag:null;try{if(!_&&l&&l.m_ownerObject&&this.v_drone){const p=Object.keys(this.v_drone).find(f=>this.v_drone[f]===l.m_ownerObject);p&&(_=p)}}catch{}}else{const l=n.m_main_camera,u=l&&l.position?[l.position.x,l.position.y,l.position.z]:[5,5,0],p=l&&typeof l.fov=="number"?l.fov:75;let f=[0,0,0];try{if(l&&l.m_controls&&l.m_controls.target){const d=l.m_controls.target;f=[d.x,d.y,d.z]}}catch{}c={pos:u,target:f,fov:p}}return{selectedDroneId:_,camera:{mode:a,tag:o,world:c}}})};try{localStorage.setItem(t,JSON.stringify(i)),console.log("Layout saved");try{this.v_selectedView?.fn_displayMessage("<b>Layout saved</b>",1200)}catch{}}catch(n){console.warn("Failed to save layout:",n)}}fn_restoreLayoutFromLocalStorage(){const t="m3d_layout_v1";let e=null;try{const a=localStorage.getItem(t);if(!a){console.warn("No saved layout to restore");return}e=JSON.parse(a)}catch(a){console.warn("Failed to parse saved layout:",a);return}if(!e||!Array.isArray(e.views))return;const i=this.v_views||[],n=Math.min(i.length,e.views.length);for(let a=0;a<n;a++){const o=e.views[a]||{};this.#e(i[a],o)}for(let a=n;a<i.length;a++)i[a].fn_selectWorldCamera(),i[a].selectedDroneId=null;console.log("Layout restored");try{this.v_selectedView?.fn_displayMessage("<b>Layout restored</b>",1200)}catch{}}fn_resetLayout(){const t="m3d_layout_v1";try{localStorage.removeItem(t)}catch{}const e=this.v_views||[];for(const i of e)i.fn_selectWorldCamera(),i.selectedDroneId=null;console.log("Layout reset");try{this.v_selectedView?.fn_displayMessage("<b>Layout reset</b>",1200)}catch{}}#e(t,e){if(!t)return;const i=e.camera||{},n=i.mode||"world",a=i.tag||null,o=e.selectedDroneId||null,c=o&&this.v_drone?this.v_drone[o]:null;if(n==="world"||!c){t.fn_selectWorldCamera(),t.selectedDroneId=c?o:null;const u=i.world;if(u&&t.m_main_camera)try{const p=t.m_main_camera;Array.isArray(u.pos)&&u.pos.length===3&&p.position.set(u.pos[0],u.pos[1],u.pos[2]),typeof u.fov=="number"&&(p.fov=u.fov,p.updateProjectionMatrix()),Array.isArray(u.target)&&u.target.length===3&&p.m_controls&&p.m_controls.target&&(p.m_controls.target.set(u.target[0],u.target[1],u.target[2]),p.m_controls.update?.())}catch{}return}const _=c&&Array.isArray(c.m_cameras)?c.m_cameras:[];let l=null;a&&(l=_.find(u=>u&&u.m_camera_tag===a)),l||(l=_.length>0?_[0]:null),l&&l.m_cameraThree?(t.selectedDroneId=o,t.fn_setSelectedCamera(l.m_cameraThree)):(t.fn_selectWorldCamera(),t.selectedDroneId=o)}fn_createBall(t,e,i,n){const{mesh:a}=Rd.create(this,{x:e,y:n+5,z:i},n,10530724);a.name=t}fn_onKeyDown(t){try{const e=(t.key||"").toLowerCase();if(t.ctrlKey&&!t.altKey&&!t.metaKey){if(e==="s"){t.preventDefault(),this.fn_saveLayoutToLocalStorage();return}if(e==="r"&&!t.shiftKey){t.preventDefault(),this.fn_restoreLayoutFromLocalStorage();return}if(e==="r"&&t.shiftKey){t.preventDefault(),this.fn_resetLayout();return}}}catch{}if(t.key=="-"){const e=Object.keys(this.v_drone);for(const i of e)this.v_drone[i].fn_changeScaleByDelta(-2,-2,-2)}else if(t.key=="+"||t.key=="="){const e=Object.keys(this.v_drone);for(const i of e)this.v_drone[i].fn_changeScaleByDelta(2,2,2)}else if(t.keyCode===48){if(this.v_selectedView){try{this.v_selectedView.fn_selectWorldCamera()}catch{}this.v_selectedView.selectedDroneId=null,this.v_selectedView.v_droneIndex=0;try{this.v_selectedView.fn_displayMessage("<b>Camera:</b> World",1e3)}catch{}}return}else if(t.keyCode>=49&&t.keyCode<=57){const e=t.keyCode-49,i=Object.keys(this.v_drone);if(e>=i.length){console.warn(`No drone found at index ${e}.`);return}const n=i[e];if(this.v_selectedView&&this.v_selectedView.selectedDroneId===n){this.v_selectedView.fn_iterateAttachedCameras();return}if(this.v_selectedView.fn_selectWorldCamera(),this.v_selectedView){this.v_selectedView.selectedDroneId=n,this.v_selectedView.v_droneIndex=0;try{this.v_selectedView.fn_displayMessage(`<b>Drone ${n}</b> selected`,1200)}catch{}}const a=this.v_drone[n];if(!a){console.warn(`Drone at index ${e} is undefined.`);return}const{x:o,y:c,z:_}=a.fn_translateXYZ();this.v_selectedView.m_main_camera.position.set(o,c+10,_),this.v_selectedView.m_main_camera.lookAt(new C(o,c,_)),this.v_selectedView.m_main_camera.m_controls&&(this.v_selectedView.m_main_camera.m_controls.target.set(o,c,_),this.v_selectedView.m_main_camera.m_controls.update())}else if(t.keyCode===76){const e=Object.keys(this.v_drone);for(const i of e)this.v_drone[i].fn_toggleLabel()}else if(t.keyCode===84){this.m_global_camera_helper=!this.m_global_camera_helper;const e=this.m_objects_attached_cameras.length;for(let i=0;i<e;++i)this.fn_setCameraHelperEnabled(i,this.m_global_camera_helper)}else if(t.keyCode===32){const e=this.v_selectedView;if(!e)return;const i=e.selectedDroneId;if(!i)return;const n=this.v_drone[i];if(!n)return;n.m_trigger&&n.m_trigger.fn_trigger&&n.m_trigger.fn_trigger(this)}this.v_selectedView==null||this.v_selectedView.fn_handleCameraSwitch==null||this.v_selectedView.fn_handleCameraSwitch(t)}fn_setCameraHelperEnabled(t,e){this.m_objects_attached_cameras[t]&&this.m_objects_attached_cameras[t].m_cameraThree!=null&&this.m_objects_attached_cameras[t].fn_setCameraHelperEnabled(e)}fn_addCanvas(t,e=!1){const i=new Xa(this,t,this.v_XZero,this.v_YZero,e);this.v_views.push(i),this.v_selectedView=i}fn_removeCanvas(t){const e=this.v_views.findIndex(i=>i.m_canvas===t);if(e>=0){const i=this.v_views[e];try{i&&typeof i.dispose=="function"&&i.dispose()}catch{}this.v_views.splice(e,1),this.v_selectedView===i&&(this.v_selectedView=this.v_views.length>0?this.v_views[0]:null)}}fn_disposeAllViews(){if(this.v_views&&this.v_views.length){for(const t of this.v_views)try{t&&typeof t.dispose=="function"&&t.dispose()}catch{}this.v_views=[]}this.v_selectedView=null}removeDebris(t){this.v_scene.remove(t)}createRandomColor(){return Math.floor(Math.random()*(1<<24))}fn_initPhysics(){this.cannonWorld=new hx({gravity:new N(0,-9.82,0)}),this.cannonWorld.broadphase=new Sr(this.cannonWorld),this.cannonWorld.allowSleep=!0;const t=new qa("default"),e=new Ka(t,t,{friction:.4,restitution:.2});this.cannonWorld.defaultContactMaterial=e;const i=new qv,n=new Wt({mass:0,material:t});return n.addShape(i),n.quaternion.setFromEuler(-Math.PI/2,0,0,"XYZ"),this.cannonWorld.addBody(n),Promise.resolve(this.cannonWorld)}fn_initTHREE(t,e){t==null&&(t=640),e==null&&(e=640),this.v_clock=new vS,this.v_height3D=0,this.v_scene=new Vc,this.renderer=new Ne({logarithmicDepthBuffer:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(t,e),this.renderer.setClearColor("#337ab7"),this.renderer.shadowMap.enabled=!1,this.fn_onKeyDown=this.fn_onKeyDown.bind(this),document.addEventListener("keydown",this.fn_onKeyDown,!1)}m_scene_env(t,e){console.warn("m_scene_env not implemented; define fn_initDesertWorld")}fn_resizeRendererToDisplaySize(t){const e=t.domElement,i=e.clientWidth,n=e.clientHeight,a=e.width!==i||e.height!==n;return a&&t.setSize(i,n,!1),a}fn_animate(t){let e=Object.keys(this.v_drone),i=e.length;for(let o=0;o<i;++o)this.v_drone[e[o]].fn_updateSimulationStep();e=Object.keys(this.#t),i=e.length;for(let o=0;o<i;++o)this.#t[e[o]].fn_updateSimulationStep();this.v_views.forEach(o=>{o.fn_render()}),this.v_water!=null&&(this.v_water.material.uniforms.time.value+=1/60);let n=this.v_clock.getDelta();const a=Object.keys(this.v_drone);for(const o of a){const c=this.v_drone[o],{x:_,y:l,z:u}=c.fn_translateXYZ(),p=this._lastDronePos[o];p&&n>0&&(this.v_droneVel[o]={x:(_-p.x)/n,y:(l-p.y)/n,z:(u-p.z)/n}),this._lastDronePos[o]={x:_,y:l,z:u}}this.fn_updatePhysics(n),requestAnimationFrame(this.fn_animate)}fn_updatePhysics(t){if(this.cannonWorld){this.cannonWorld.step(this._fixedTimeStep,t,this._maxSubSteps);for(let e=this._physicsObjects.length-1;e>=0;--e){const{mesh:i,body:n}=this._physicsObjects[e];!i||!n||(i.position.set(n.position.x,n.position.y,n.position.z),i.quaternion.set(n.quaternion.x,n.quaternion.y,n.quaternion.z,n.quaternion.w),n.position.y<-100&&(this.v_scene.remove(i),this.cannonWorld.removeBody(n),this._physicsObjects.splice(e,1)))}}}}var il={};var Yf;function Mx(){if(Yf)return il;Yf=1;function r(){var t,e=!1,i=this;i._DeArray=function(n,a,o){return[n.slice(a,a+o)]},i._EnArray=function(n,a,o,c){for(var _=0;_<o;n[a+_]=c[_]?c[_]:0,_++);},i._DeChar=function(n,a){return String.fromCharCode(n[a])},i._EnChar=function(n,a,o){n[a]=o.charCodeAt(0)},i._DeInt=function(n,a){var o=e?t.len-1:0,c=e?-1:1,_=o+c*t.len,l,u,p;for(l=0,u=o,p=1;u!=_;l+=n[a+u]*p,u+=c,p*=256);return t.bSigned&&l&Math.pow(2,t.len*8-1)&&(l-=Math.pow(2,t.len*8)),l},i._EnInt=function(n,a,o){var c=e?t.len-1:0,_=e?-1:1,l=c+_*t.len,u;for(o=o<t.min?t.min:o>t.max?t.max:o,u=c;u!=l;n[a+u]=o&255,u+=_,o>>=8);},i._DeString=function(n,a,o){for(var c=new Array(o),_=0;_<o;c[_]=String.fromCharCode(n[a+_]),_++);return c.join("")},i._EnString=function(n,a,o,c){for(var _,l=0;l<o;n[a+l]=(_=c.charCodeAt(l))?_:0,l++);},i._De754=function(n,a){var o,c,_,l,u,p,f,d,A,E;for(f=t.mLen,d=t.len*8-t.mLen-1,E=(1<<d)-1,A=E>>1,l=e?0:t.len-1,u=e?1:-1,o=n[a+l],l+=u,p=-7,c=o&(1<<-p)-1,o>>=-p,p+=d;p>0;c=c*256+n[a+l],l+=u,p-=8);for(_=c&(1<<-p)-1,c>>=-p,p+=f;p>0;_=_*256+n[a+l],l+=u,p-=8);switch(c){case 0:c=1-A;break;case E:return _?NaN:(o?-1:1)*(1/0);default:_=_+Math.pow(2,f),c=c-A;break}return(o?-1:1)*_*Math.pow(2,c-f)},i._En754=function(n,a,o){var c,_,l,u,p,f,d,A,E,S;for(d=t.mLen,A=t.len*8-t.mLen-1,S=(1<<A)-1,E=S>>1,c=o<0?1:0,o=Math.abs(o),isNaN(o)||o==1/0?(l=isNaN(o)?1:0,_=S):(_=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-_))<1&&(_--,f*=2),_+E>=1?o+=t.rt/f:o+=t.rt*Math.pow(2,1-E),o*f>=2&&(_++,f/=2),_+E>=S?(l=0,_=S):_+E>=1?(l=(o*f-1)*Math.pow(2,d),_=_+E):(l=o*Math.pow(2,E-1)*Math.pow(2,d),_=0)),u=e?t.len-1:0,p=e?-1:1;d>=8;n[a+u]=l&255,u+=p,l/=256,d-=8);for(_=_<<d|l,A+=d;A>0;n[a+u]=_&255,u+=p,_/=256,A-=8);n[a+u-p]|=c*128},i._DeInt64=function(n,a){var o=e?0:7,c=e?1:-1,_=o+c*8,l=[0,0,!t.bSigned],u,p,f;for(u=o,f=1,p=0;u!=_;l[f]=(l[f]<<8>>>0)+n[a+u],u+=c,p++,f=p<4?1:0);return l},i._EnInt64=function(n,a,o){var c=e?0:7,_=e?1:-1,l=c+_*8,u,p,f,d;for(u=c,f=1,p=0,d=24;u!=l;n[a+u]=o[f]>>d&255,u+=_,p++,f=p<4?1:0,d=24-8*(p%4));},i._sPattern="(\\d+)?([AxcbBhHsfdiIlLqQ])",i._lenLut={A:1,x:1,c:1,b:1,B:1,h:2,H:2,s:1,f:4,d:8,i:4,I:4,l:4,L:4,q:8,Q:8},i._elLut={A:{en:i._EnArray,de:i._DeArray},s:{en:i._EnString,de:i._DeString},c:{en:i._EnChar,de:i._DeChar},b:{en:i._EnInt,de:i._DeInt,len:1,bSigned:!0,min:-Math.pow(2,7),max:Math.pow(2,7)-1},B:{en:i._EnInt,de:i._DeInt,len:1,bSigned:!1,min:0,max:Math.pow(2,8)-1},h:{en:i._EnInt,de:i._DeInt,len:2,bSigned:!0,min:-Math.pow(2,15),max:Math.pow(2,15)-1},H:{en:i._EnInt,de:i._DeInt,len:2,bSigned:!1,min:0,max:Math.pow(2,16)-1},i:{en:i._EnInt,de:i._DeInt,len:4,bSigned:!0,min:-Math.pow(2,31),max:Math.pow(2,31)-1},I:{en:i._EnInt,de:i._DeInt,len:4,bSigned:!1,min:0,max:Math.pow(2,32)-1},l:{en:i._EnInt,de:i._DeInt,len:4,bSigned:!0,min:-Math.pow(2,31),max:Math.pow(2,31)-1},L:{en:i._EnInt,de:i._DeInt,len:4,bSigned:!1,min:0,max:Math.pow(2,32)-1},f:{en:i._En754,de:i._De754,len:4,mLen:23,rt:Math.pow(2,-24)-Math.pow(2,-77)},d:{en:i._En754,de:i._De754,len:8,mLen:52,rt:0},q:{en:i._EnInt64,de:i._DeInt64,bSigned:!0},Q:{en:i._EnInt64,de:i._DeInt64,bSigned:!1}},i._UnpackSeries=function(n,a,o,c){for(var _=t.de,l=[],u=0;u<n;l.push(_(o,c+u*a)),u++);return l},i._PackSeries=function(n,a,o,c,_,l){for(var u=t.en,p=0;p<n;u(o,c+p*a,_[l+p]),p++);},i.Unpack=function(n,a,o){e=n.charAt(0)!="<",o=o||0;for(var c=new RegExp(this._sPattern,"g"),_,l,u,p=[];_=c.exec(n);){if(l=_[1]==null||_[1]==""?1:parseInt(_[1]),u=this._lenLut[_[2]],o+l*u>a.length)return;switch(_[2]){case"A":case"s":p.push(this._elLut[_[2]].de(a,o,l));break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":case"q":case"Q":t=this._elLut[_[2]],p.push(this._UnpackSeries(l,u,a,o));break}o+=l*u}return Array.prototype.concat.apply([],p)},i.PackTo=function(n,a,o,c){e=n.charAt(0)!="<";for(var _=new RegExp(this._sPattern,"g"),l,u,p,f=0,d;l=_.exec(n);){if(u=l[1]==null||l[1]==""?1:parseInt(l[1]),p=this._lenLut[l[2]],o+u*p>a.length)return!1;switch(l[2]){case"A":case"s":if(f+1>c.length)return!1;this._elLut[l[2]].en(a,o,u,c[f]),f+=1;break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":case"q":case"Q":if(t=this._elLut[l[2]],f+u>c.length)return!1;this._PackSeries(u,p,a,o,c,f),f+=u;break;case"x":for(d=0;d<u;d++)a[o+d]=0;break}o+=u*p}return a},i.Pack=function(n,a){return this.PackTo(n,new Array(this.CalcLength(n)),0,a)},i.CalcLength=function(n){for(var a=new RegExp(this._sPattern,"g"),o,c=0;o=a.exec(n);)c+=(o[1]==null||o[1]==""?1:parseInt(o[1]))*this._lenLut[o[2]];return c}}return il.jspack=new r,il}var b=Mx(),wd="1.13.7",Kf=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Wc=Array.prototype,ch=Object.prototype,qf=typeof Symbol<"u"?Symbol.prototype:null,Tx=Wc.push,ja=Wc.slice,Ca=ch.toString,Sx=ch.hasOwnProperty,Ld=typeof ArrayBuffer<"u",vx=typeof DataView<"u",Ix=Array.isArray,Xf=Object.keys,jf=Object.create,Qf=Ld&&ArrayBuffer.isView,xx=isNaN,Rx=isFinite,Nd=!{toString:null}.propertyIsEnumerable("toString"),Zf=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ox=Math.pow(2,53)-1;function Os(r,t){return t=t==null?r.length-1:+t,function(){for(var e=Math.max(arguments.length-t,0),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+t];switch(t){case 0:return r.call(this,i);case 1:return r.call(this,arguments[0],i);case 2:return r.call(this,arguments[0],arguments[1],i)}var a=Array(t+1);for(n=0;n<t;n++)a[n]=arguments[n];return a[t]=i,r.apply(this,a)}}function Hn(r){var t=typeof r;return t==="function"||t==="object"&&!!r}function wx(r){return r===null}function bd(r){return r===void 0}function Dd(r){return r===!0||r===!1||Ca.call(r)==="[object Boolean]"}function Lx(r){return!!(r&&r.nodeType===1)}function gs(r){var t="[object "+r+"]";return function(e){return Ca.call(e)===t}}const _h=gs("String"),Cd=gs("Number"),Nx=gs("Date"),bx=gs("RegExp"),Dx=gs("Error"),Pd=gs("Symbol"),Bd=gs("ArrayBuffer");var Vd=gs("Function"),Cx=Kf.document&&Kf.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Cx!="function"&&(Vd=function(r){return typeof r=="function"||!1});const Ss=Vd,Gd=gs("Object");var Ud=vx&&(!/\[native code\]/.test(String(DataView))||Gd(new DataView(new ArrayBuffer(8)))),lh=typeof Map<"u"&&Gd(new Map),Px=gs("DataView");function Bx(r){return r!=null&&Ss(r.getInt8)&&Bd(r.buffer)}const Tc=Ud?Bx:Px,zn=Ix||gs("Array");function Mn(r,t){return r!=null&&Sx.call(r,t)}var Sl=gs("Arguments");(function(){Sl(arguments)||(Sl=function(r){return Mn(r,"callee")})})();const hh=Sl;function Vx(r){return!Pd(r)&&Rx(r)&&!isNaN(parseFloat(r))}function kd(r){return Cd(r)&&xx(r)}function Fd(r){return function(){return r}}function Hd(r){return function(t){var e=r(t);return typeof e=="number"&&e>=0&&e<=Ox}}function zd(r){return function(t){return t?.[r]}}const Sc=zd("byteLength"),Gx=Hd(Sc);var Ux=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function kx(r){return Qf?Qf(r)&&!Tc(r):Gx(r)&&Ux.test(Ca.call(r))}const Wd=Ld?kx:Fd(!1),ws=zd("length");function Fx(r){for(var t={},e=r.length,i=0;i<e;++i)t[r[i]]=!0;return{contains:function(n){return t[n]===!0},push:function(n){return t[n]=!0,r.push(n)}}}function Yd(r,t){t=Fx(t);var e=Zf.length,i=r.constructor,n=Ss(i)&&i.prototype||ch,a="constructor";for(Mn(r,a)&&!t.contains(a)&&t.push(a);e--;)a=Zf[e],a in r&&r[a]!==n[a]&&!t.contains(a)&&t.push(a)}function ns(r){if(!Hn(r))return[];if(Xf)return Xf(r);var t=[];for(var e in r)Mn(r,e)&&t.push(e);return Nd&&Yd(r,t),t}function Hx(r){if(r==null)return!0;var t=ws(r);return typeof t=="number"&&(zn(r)||_h(r)||hh(r))?t===0:ws(ns(r))===0}function Kd(r,t){var e=ns(t),i=e.length;if(r==null)return!i;for(var n=Object(r),a=0;a<i;a++){var o=e[a];if(t[o]!==n[o]||!(o in n))return!1}return!0}function Re(r){if(r instanceof Re)return r;if(!(this instanceof Re))return new Re(r);this._wrapped=r}Re.VERSION=wd;Re.prototype.value=function(){return this._wrapped};Re.prototype.valueOf=Re.prototype.toJSON=Re.prototype.value;Re.prototype.toString=function(){return String(this._wrapped)};function $f(r){return new Uint8Array(r.buffer||r,r.byteOffset||0,Sc(r))}var Jf="[object DataView]";function vl(r,t,e,i){if(r===t)return r!==0||1/r===1/t;if(r==null||t==null)return!1;if(r!==r)return t!==t;var n=typeof r;return n!=="function"&&n!=="object"&&typeof t!="object"?!1:qd(r,t,e,i)}function qd(r,t,e,i){r instanceof Re&&(r=r._wrapped),t instanceof Re&&(t=t._wrapped);var n=Ca.call(r);if(n!==Ca.call(t))return!1;if(Ud&&n=="[object Object]"&&Tc(r)){if(!Tc(t))return!1;n=Jf}switch(n){case"[object RegExp]":case"[object String]":return""+r==""+t;case"[object Number]":return+r!=+r?+t!=+t:+r==0?1/+r===1/t:+r==+t;case"[object Date]":case"[object Boolean]":return+r==+t;case"[object Symbol]":return qf.valueOf.call(r)===qf.valueOf.call(t);case"[object ArrayBuffer]":case Jf:return qd($f(r),$f(t),e,i)}var a=n==="[object Array]";if(!a&&Wd(r)){var o=Sc(r);if(o!==Sc(t))return!1;if(r.buffer===t.buffer&&r.byteOffset===t.byteOffset)return!0;a=!0}if(!a){if(typeof r!="object"||typeof t!="object")return!1;var c=r.constructor,_=t.constructor;if(c!==_&&!(Ss(c)&&c instanceof c&&Ss(_)&&_ instanceof _)&&"constructor"in r&&"constructor"in t)return!1}e=e||[],i=i||[];for(var l=e.length;l--;)if(e[l]===r)return i[l]===t;if(e.push(r),i.push(t),a){if(l=r.length,l!==t.length)return!1;for(;l--;)if(!vl(r[l],t[l],e,i))return!1}else{var u=ns(r),p;if(l=u.length,ns(t).length!==l)return!1;for(;l--;)if(p=u[l],!(Mn(t,p)&&vl(r[p],t[p],e,i)))return!1}return e.pop(),i.pop(),!0}function zx(r,t){return vl(r,t)}function Qa(r){if(!Hn(r))return[];var t=[];for(var e in r)t.push(e);return Nd&&Yd(r,t),t}function uh(r){var t=ws(r);return function(e){if(e==null)return!1;var i=Qa(e);if(ws(i))return!1;for(var n=0;n<t;n++)if(!Ss(e[r[n]]))return!1;return r!==Qd||!Ss(e[fh])}}var fh="forEach",Xd="has",ph=["clear","delete"],jd=["get",Xd,"set"],Wx=ph.concat(fh,jd),Qd=ph.concat(jd),Yx=["add"].concat(ph,fh,Xd);const Kx=lh?uh(Wx):gs("Map"),qx=lh?uh(Qd):gs("WeakMap"),Xx=lh?uh(Yx):gs("Set"),jx=gs("WeakSet");function Wr(r){for(var t=ns(r),e=t.length,i=Array(e),n=0;n<e;n++)i[n]=r[t[n]];return i}function Qx(r){for(var t=ns(r),e=t.length,i=Array(e),n=0;n<e;n++)i[n]=[t[n],r[t[n]]];return i}function Zd(r){for(var t={},e=ns(r),i=0,n=e.length;i<n;i++)t[r[e[i]]]=e[i];return t}function Il(r){var t=[];for(var e in r)Ss(r[e])&&t.push(e);return t.sort()}function dh(r,t){return function(e){var i=arguments.length;if(t&&(e=Object(e)),i<2||e==null)return e;for(var n=1;n<i;n++)for(var a=arguments[n],o=r(a),c=o.length,_=0;_<c;_++){var l=o[_];(!t||e[l]===void 0)&&(e[l]=a[l])}return e}}const $d=dh(Qa),vc=dh(ns),Jd=dh(Qa,!0);function Zx(){return function(){}}function tm(r){if(!Hn(r))return{};if(jf)return jf(r);var t=Zx();t.prototype=r;var e=new t;return t.prototype=null,e}function $x(r,t){var e=tm(r);return t&&vc(e,t),e}function Jx(r){return Hn(r)?zn(r)?r.slice():$d({},r):r}function t1(r,t){return t(r),r}function em(r){return zn(r)?r:[r]}Re.toPath=em;function Za(r){return Re.toPath(r)}function mh(r,t){for(var e=t.length,i=0;i<e;i++){if(r==null)return;r=r[t[i]]}return e?r:void 0}function sm(r,t,e){var i=mh(r,Za(t));return bd(i)?e:i}function e1(r,t){t=Za(t);for(var e=t.length,i=0;i<e;i++){var n=t[i];if(!Mn(r,n))return!1;r=r[n]}return!!e}function gh(r){return r}function Pa(r){return r=vc({},r),function(t){return Kd(t,r)}}function Ah(r){return r=Za(r),function(t){return mh(t,r)}}function $a(r,t,e){if(t===void 0)return r;switch(e??3){case 1:return function(i){return r.call(t,i)};case 3:return function(i,n,a){return r.call(t,i,n,a)};case 4:return function(i,n,a,o){return r.call(t,i,n,a,o)}}return function(){return r.apply(t,arguments)}}function im(r,t,e){return r==null?gh:Ss(r)?$a(r,t,e):Hn(r)&&!zn(r)?Pa(r):Ah(r)}function yh(r,t){return im(r,t,1/0)}Re.iteratee=yh;function Ls(r,t,e){return Re.iteratee!==yh?Re.iteratee(r,t):im(r,t,e)}function s1(r,t,e){t=Ls(t,e);for(var i=ns(r),n=i.length,a={},o=0;o<n;o++){var c=i[o];a[c]=t(r[c],c,r)}return a}function nm(){}function i1(r){return r==null?nm:function(t){return sm(r,t)}}function n1(r,t,e){var i=Array(Math.max(0,r));t=$a(t,e,1);for(var n=0;n<r;n++)i[n]=t(n);return i}function xl(r,t){return t==null&&(t=r,r=0),r+Math.floor(Math.random()*(t-r+1))}const Ba=Date.now||function(){return new Date().getTime()};function rm(r){var t=function(a){return r[a]},e="(?:"+ns(r).join("|")+")",i=RegExp(e),n=RegExp(e,"g");return function(a){return a=a==null?"":""+a,i.test(a)?a.replace(n,t):a}}const am={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r1=rm(am),a1=Zd(am),o1=rm(a1),c1=Re.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var nl=/(.)^/,_1={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},l1=/\\|'|\r|\n|\u2028|\u2029/g;function h1(r){return"\\"+_1[r]}var u1=/^\s*(\w|\$)+\s*$/;function f1(r,t,e){!t&&e&&(t=e),t=Jd({},t,Re.templateSettings);var i=RegExp([(t.escape||nl).source,(t.interpolate||nl).source,(t.evaluate||nl).source].join("|")+"|$","g"),n=0,a="__p+='";r.replace(i,function(l,u,p,f,d){return a+=r.slice(n,d).replace(l1,h1),n=d+l.length,u?a+=`'+
((__t=(`+u+`))==null?'':_.escape(__t))+
'`:p?a+=`'+
((__t=(`+p+`))==null?'':__t)+
'`:f&&(a+=`';
`+f+`
__p+='`),l}),a+=`';
`;var o=t.variable;if(o){if(!u1.test(o))throw new Error("variable is not a bare identifier: "+o)}else a=`with(obj||{}){
`+a+`}
`,o="obj";a=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+a+`return __p;
`;var c;try{c=new Function(o,"_",a)}catch(l){throw l.source=a,l}var _=function(l){return c.call(this,l,Re)};return _.source="function("+o+`){
`+a+"}",_}function p1(r,t,e){t=Za(t);var i=t.length;if(!i)return Ss(e)?e.call(r):e;for(var n=0;n<i;n++){var a=r?.[t[n]];a===void 0&&(a=e,n=i),r=Ss(a)?a.call(r):a}return r}var d1=0;function m1(r){var t=++d1+"";return r?r+t:t}function g1(r){var t=Re(r);return t._chain=!0,t}function om(r,t,e,i,n){if(!(i instanceof t))return r.apply(e,n);var a=tm(r.prototype),o=r.apply(a,n);return Hn(o)?o:a}var Yr=Os(function(r,t){var e=Yr.placeholder,i=function(){for(var n=0,a=t.length,o=Array(a),c=0;c<a;c++)o[c]=t[c]===e?arguments[n++]:t[c];for(;n<arguments.length;)o.push(arguments[n++]);return om(r,i,this,this,o)};return i});Yr.placeholder=Re;const cm=Os(function(r,t,e){if(!Ss(r))throw new TypeError("Bind must be called on a function");var i=Os(function(n){return om(r,i,t,this,e.concat(n))});return i}),Gs=Hd(ws);function Wn(r,t,e,i){if(i=i||[],!t&&t!==0)t=1/0;else if(t<=0)return i.concat(r);for(var n=i.length,a=0,o=ws(r);a<o;a++){var c=r[a];if(Gs(c)&&(zn(c)||hh(c)))if(t>1)Wn(c,t-1,e,i),n=i.length;else for(var _=0,l=c.length;_<l;)i[n++]=c[_++];else e||(i[n++]=c)}return i}const A1=Os(function(r,t){t=Wn(t,!1,!1);var e=t.length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var i=t[e];r[i]=cm(r[i],r)}return r});function y1(r,t){var e=function(i){var n=e.cache,a=""+(t?t.apply(this,arguments):i);return Mn(n,a)||(n[a]=r.apply(this,arguments)),n[a]};return e.cache={},e}const _m=Os(function(r,t,e){return setTimeout(function(){return r.apply(null,e)},t)}),E1=Yr(_m,Re,1);function M1(r,t,e){var i,n,a,o,c=0;e||(e={});var _=function(){c=e.leading===!1?0:Ba(),i=null,o=r.apply(n,a),i||(n=a=null)},l=function(){var u=Ba();!c&&e.leading===!1&&(c=u);var p=t-(u-c);return n=this,a=arguments,p<=0||p>t?(i&&(clearTimeout(i),i=null),c=u,o=r.apply(n,a),i||(n=a=null)):!i&&e.trailing!==!1&&(i=setTimeout(_,p)),o};return l.cancel=function(){clearTimeout(i),c=0,i=n=a=null},l}function T1(r,t,e){var i,n,a,o,c,_=function(){var u=Ba()-n;t>u?i=setTimeout(_,t-u):(i=null,e||(o=r.apply(c,a)),i||(a=c=null))},l=Os(function(u){return c=this,a=u,n=Ba(),i||(i=setTimeout(_,t),e&&(o=r.apply(c,a))),o});return l.cancel=function(){clearTimeout(i),i=a=c=null},l}function S1(r,t){return Yr(t,r)}function Eh(r){return function(){return!r.apply(this,arguments)}}function v1(){var r=arguments,t=r.length-1;return function(){for(var e=t,i=r[t].apply(this,arguments);e--;)i=r[e].call(this,i);return i}}function I1(r,t){return function(){if(--r<1)return t.apply(this,arguments)}}function lm(r,t){var e;return function(){return--r>0&&(e=t.apply(this,arguments)),r<=1&&(t=null),e}}const x1=Yr(lm,2);function hm(r,t,e){t=Ls(t,e);for(var i=ns(r),n,a=0,o=i.length;a<o;a++)if(n=i[a],t(r[n],n,r))return n}function um(r){return function(t,e,i){e=Ls(e,i);for(var n=ws(t),a=r>0?0:n-1;a>=0&&a<n;a+=r)if(e(t[a],a,t))return a;return-1}}const Mh=um(1),fm=um(-1);function pm(r,t,e,i){e=Ls(e,i,1);for(var n=e(t),a=0,o=ws(r);a<o;){var c=Math.floor((a+o)/2);e(r[c])<n?a=c+1:o=c}return a}function dm(r,t,e){return function(i,n,a){var o=0,c=ws(i);if(typeof a=="number")r>0?o=a>=0?a:Math.max(a+c,o):c=a>=0?Math.min(a+1,c):a+c+1;else if(e&&a&&c)return a=e(i,n),i[a]===n?a:-1;if(n!==n)return a=t(ja.call(i,o,c),kd),a>=0?a+o:-1;for(a=r>0?o:c-1;a>=0&&a<c;a+=r)if(i[a]===n)return a;return-1}}const mm=dm(1,Mh,pm),R1=dm(-1,fm);function Rl(r,t,e){var i=Gs(r)?Mh:hm,n=i(r,t,e);if(n!==void 0&&n!==-1)return r[n]}function O1(r,t){return Rl(r,Pa(t))}function Fi(r,t,e){t=$a(t,e);var i,n;if(Gs(r))for(i=0,n=r.length;i<n;i++)t(r[i],i,r);else{var a=ns(r);for(i=0,n=a.length;i<n;i++)t(r[a[i]],a[i],r)}return r}function Vn(r,t,e){t=Ls(t,e);for(var i=!Gs(r)&&ns(r),n=(i||r).length,a=Array(n),o=0;o<n;o++){var c=i?i[o]:o;a[o]=t(r[c],c,r)}return a}function gm(r){var t=function(e,i,n,a){var o=!Gs(e)&&ns(e),c=(o||e).length,_=r>0?0:c-1;for(a||(n=e[o?o[_]:_],_+=r);_>=0&&_<c;_+=r){var l=o?o[_]:_;n=i(n,e[l],l,e)}return n};return function(e,i,n,a){var o=arguments.length>=3;return t(e,$a(i,a,4),n,o)}}const rl=gm(1),tp=gm(-1);function Cr(r,t,e){var i=[];return t=Ls(t,e),Fi(r,function(n,a,o){t(n,a,o)&&i.push(n)}),i}function w1(r,t,e){return Cr(r,Eh(Ls(t)),e)}function ep(r,t,e){t=Ls(t,e);for(var i=!Gs(r)&&ns(r),n=(i||r).length,a=0;a<n;a++){var o=i?i[a]:a;if(!t(r[o],o,r))return!1}return!0}function sp(r,t,e){t=Ls(t,e);for(var i=!Gs(r)&&ns(r),n=(i||r).length,a=0;a<n;a++){var o=i?i[a]:a;if(t(r[o],o,r))return!0}return!1}function Ui(r,t,e,i){return Gs(r)||(r=Wr(r)),(typeof e!="number"||i)&&(e=0),mm(r,t,e)>=0}const L1=Os(function(r,t,e){var i,n;return Ss(t)?n=t:(t=Za(t),i=t.slice(0,-1),t=t[t.length-1]),Vn(r,function(a){var o=n;if(!o){if(i&&i.length&&(a=mh(a,i)),a==null)return;o=a[t]}return o==null?o:o.apply(a,e)})});function Th(r,t){return Vn(r,Ah(t))}function N1(r,t){return Cr(r,Pa(t))}function Am(r,t,e){var i=-1/0,n=-1/0,a,o;if(t==null||typeof t=="number"&&typeof r[0]!="object"&&r!=null){r=Gs(r)?r:Wr(r);for(var c=0,_=r.length;c<_;c++)a=r[c],a!=null&&a>i&&(i=a)}else t=Ls(t,e),Fi(r,function(l,u,p){o=t(l,u,p),(o>n||o===-1/0&&i===-1/0)&&(i=l,n=o)});return i}function b1(r,t,e){var i=1/0,n=1/0,a,o;if(t==null||typeof t=="number"&&typeof r[0]!="object"&&r!=null){r=Gs(r)?r:Wr(r);for(var c=0,_=r.length;c<_;c++)a=r[c],a!=null&&a<i&&(i=a)}else t=Ls(t,e),Fi(r,function(l,u,p){o=t(l,u,p),(o<n||o===1/0&&i===1/0)&&(i=l,n=o)});return i}var D1=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ym(r){return r?zn(r)?ja.call(r):_h(r)?r.match(D1):Gs(r)?Vn(r,gh):Wr(r):[]}function Em(r,t,e){if(t==null||e)return Gs(r)||(r=Wr(r)),r[xl(r.length-1)];var i=ym(r),n=ws(i);t=Math.max(Math.min(t,n),0);for(var a=n-1,o=0;o<t;o++){var c=xl(o,a),_=i[o];i[o]=i[c],i[c]=_}return i.slice(0,t)}function C1(r){return Em(r,1/0)}function P1(r,t,e){var i=0;return t=Ls(t,e),Th(Vn(r,function(n,a,o){return{value:n,index:i++,criteria:t(n,a,o)}}).sort(function(n,a){var o=n.criteria,c=a.criteria;if(o!==c){if(o>c||o===void 0)return 1;if(o<c||c===void 0)return-1}return n.index-a.index}),"value")}function Yc(r,t){return function(e,i,n){var a=t?[[],[]]:{};return i=Ls(i,n),Fi(e,function(o,c){var _=i(o,c,e);r(a,o,_)}),a}}const B1=Yc(function(r,t,e){Mn(r,e)?r[e].push(t):r[e]=[t]}),V1=Yc(function(r,t,e){r[e]=t}),G1=Yc(function(r,t,e){Mn(r,e)?r[e]++:r[e]=1}),U1=Yc(function(r,t,e){r[e?0:1].push(t)},!0);function k1(r){return r==null?0:Gs(r)?r.length:ns(r).length}function F1(r,t,e){return t in e}const Mm=Os(function(r,t){var e={},i=t[0];if(r==null)return e;Ss(i)?(t.length>1&&(i=$a(i,t[1])),t=Qa(r)):(i=F1,t=Wn(t,!1,!1),r=Object(r));for(var n=0,a=t.length;n<a;n++){var o=t[n],c=r[o];i(c,o,r)&&(e[o]=c)}return e}),H1=Os(function(r,t){var e=t[0],i;return Ss(e)?(e=Eh(e),t.length>1&&(i=t[1])):(t=Vn(Wn(t,!1,!1),String),e=function(n,a){return!Ui(t,a)}),Mm(r,e,i)});function Tm(r,t,e){return ja.call(r,0,Math.max(0,r.length-(t==null||e?1:t)))}function al(r,t,e){return r==null||r.length<1?t==null||e?void 0:[]:t==null||e?r[0]:Tm(r,r.length-t)}function Zo(r,t,e){return ja.call(r,t==null||e?1:t)}function z1(r,t,e){return r==null||r.length<1?t==null||e?void 0:[]:t==null||e?r[r.length-1]:Zo(r,Math.max(0,r.length-t))}function W1(r){return Cr(r,Boolean)}function Y1(r,t){return Wn(r,t,!1)}const Sm=Os(function(r,t){return t=Wn(t,!0,!0),Cr(r,function(e){return!Ui(t,e)})}),K1=Os(function(r,t){return Sm(r,t)});function Ol(r,t,e,i){Dd(t)||(i=e,e=t,t=!1),e!=null&&(e=Ls(e,i));for(var n=[],a=[],o=0,c=ws(r);o<c;o++){var _=r[o],l=e?e(_,o,r):_;t&&!e?((!o||a!==l)&&n.push(_),a=l):e?Ui(a,l)||(a.push(l),n.push(_)):Ui(n,_)||n.push(_)}return n}const q1=Os(function(r){return Ol(Wn(r,!0,!0))});function X1(r){for(var t=[],e=arguments.length,i=0,n=ws(r);i<n;i++){var a=r[i];if(!Ui(t,a)){var o;for(o=1;o<e&&Ui(arguments[o],a);o++);o===e&&t.push(a)}}return t}function wl(r){for(var t=r&&Am(r,ws).length||0,e=Array(t),i=0;i<t;i++)e[i]=Th(r,i);return e}const j1=Os(wl);function Q1(r,t){for(var e={},i=0,n=ws(r);i<n;i++)t?e[r[i]]=t[i]:e[r[i][0]]=r[i][1];return e}function Z1(r,t,e){t==null&&(t=r||0,r=0),e||(e=t<r?-1:1);for(var i=Math.max(Math.ceil((t-r)/e),0),n=Array(i),a=0;a<i;a++,r+=e)n[a]=r;return n}function $1(r,t){if(t==null||t<1)return[];for(var e=[],i=0,n=r.length;i<n;)e.push(ja.call(r,i,i+=t));return e}function Sh(r,t){return r._chain?Re(t).chain():t}function vm(r){return Fi(Il(r),function(t){var e=Re[t]=r[t];Re.prototype[t]=function(){var i=[this._wrapped];return Tx.apply(i,arguments),Sh(this,e.apply(Re,i))}}),Re}Fi(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var t=Wc[r];Re.prototype[r]=function(){var e=this._wrapped;return e!=null&&(t.apply(e,arguments),(r==="shift"||r==="splice")&&e.length===0&&delete e[0]),Sh(this,e)}});Fi(["concat","join","slice"],function(r){var t=Wc[r];Re.prototype[r]=function(){var e=this._wrapped;return e!=null&&(e=t.apply(e,arguments)),Sh(this,e)}});const J1=Object.freeze(Object.defineProperty({__proto__:null,VERSION:wd,after:I1,all:ep,allKeys:Qa,any:sp,assign:vc,before:lm,bind:cm,bindAll:A1,chain:g1,chunk:$1,clone:Jx,collect:Vn,compact:W1,compose:v1,constant:Fd,contains:Ui,countBy:G1,create:$x,debounce:T1,default:Re,defaults:Jd,defer:E1,delay:_m,detect:Rl,difference:Sm,drop:Zo,each:Fi,escape:r1,every:ep,extend:$d,extendOwn:vc,filter:Cr,find:Rl,findIndex:Mh,findKey:hm,findLastIndex:fm,findWhere:O1,first:al,flatten:Y1,foldl:rl,foldr:tp,forEach:Fi,functions:Il,get:sm,groupBy:B1,has:e1,head:al,identity:gh,include:Ui,includes:Ui,indexBy:V1,indexOf:mm,initial:Tm,inject:rl,intersection:X1,invert:Zd,invoke:L1,isArguments:hh,isArray:zn,isArrayBuffer:Bd,isBoolean:Dd,isDataView:Tc,isDate:Nx,isElement:Lx,isEmpty:Hx,isEqual:zx,isError:Dx,isFinite:Vx,isFunction:Ss,isMap:Kx,isMatch:Kd,isNaN:kd,isNull:wx,isNumber:Cd,isObject:Hn,isRegExp:bx,isSet:Xx,isString:_h,isSymbol:Pd,isTypedArray:Wd,isUndefined:bd,isWeakMap:qx,isWeakSet:jx,iteratee:yh,keys:ns,last:z1,lastIndexOf:R1,map:Vn,mapObject:s1,matcher:Pa,matches:Pa,max:Am,memoize:y1,methods:Il,min:b1,mixin:vm,negate:Eh,noop:nm,now:Ba,object:Q1,omit:H1,once:x1,pairs:Qx,partial:Yr,partition:U1,pick:Mm,pluck:Th,property:Ah,propertyOf:i1,random:xl,range:Z1,reduce:rl,reduceRight:tp,reject:w1,rest:Zo,restArguments:Os,result:p1,sample:Em,select:Cr,shuffle:C1,size:k1,some:sp,sortBy:P1,sortedIndex:pm,tail:Zo,take:al,tap:t1,template:f1,templateSettings:c1,throttle:M1,times:n1,toArray:ym,toPath:em,transpose:wl,unescape:o1,union:q1,uniq:Ol,unique:Ol,uniqueId:m1,unzip:wl,values:Wr,where:N1,without:K1,wrap:S1,zip:j1},Symbol.toStringTag,{value:"Module"}));var Cn=vm(J1);Cn._=Cn;var s=function(){};s.x25Crc=function(r,t){let e=r,i=t===void 0?65535:t;return Cn.each(e,function(n){let a=n^i&255;a=(a^a<<4)&255,i=i>>8^a<<8^a<<3^a>>4,i=i&65535}),i};s.WIRE_PROTOCOL_VERSION="2.0";s.HEADER_LEN=10;s.MAVLINK_TYPE_CHAR=0;s.MAVLINK_TYPE_UINT8_T=1;s.MAVLINK_TYPE_INT8_T=2;s.MAVLINK_TYPE_UINT16_T=3;s.MAVLINK_TYPE_INT16_T=4;s.MAVLINK_TYPE_UINT32_T=5;s.MAVLINK_TYPE_INT32_T=6;s.MAVLINK_TYPE_UINT64_T=7;s.MAVLINK_TYPE_INT64_T=8;s.MAVLINK_TYPE_FLOAT=9;s.MAVLINK_TYPE_DOUBLE=10;s.MAVLINK_IFLAG_SIGNED=1;s.header=function(r,t,e,i,n,a=0,o=0){this.mlen=typeof t>"u"?0:t,this.seq=typeof e>"u"?0:e,this.srcSystem=typeof i>"u"?0:i,this.srcComponent=typeof n>"u"?0:n,this.msgId=r,this.incompat_flags=a,this.compat_flags=o};s.header.prototype.pack=function(){return b.jspack.Pack("BBBBBBBHB",[253,this.mlen,this.incompat_flags,this.compat_flags,this.seq,this.srcSystem,this.srcComponent,(this.msgId&255)<<8|this.msgId>>8&255,this.msgId>>16])};s.message=function(){};s.message.prototype.set=function(r){Cn.each(this.fieldnames,function(t,e){this[t]=r[e]},this)};s.message.prototype.pack=function(r,t,e){this.payload=e;let i=this.payload.length;for(;i>1&&this.payload[i-1]===0;)i=i-1;this.payload=this.payload.slice(0,i);var n=0;this.header=new s.header(this.id,this.payload.length,r.seq,r.srcSystem,r.srcComponent,n,0),this.msgbuf=this.header.pack().concat(this.payload);let a=s.x25Crc(this.msgbuf.slice(1));return a=s.x25Crc([t],a),this.msgbuf=this.msgbuf.concat(b.jspack.Pack("<H",[a])),this.msgbuf};s.ACCELCAL_VEHICLE_POS_LEVEL=1;s.ACCELCAL_VEHICLE_POS_LEFT=2;s.ACCELCAL_VEHICLE_POS_RIGHT=3;s.ACCELCAL_VEHICLE_POS_NOSEDOWN=4;s.ACCELCAL_VEHICLE_POS_NOSEUP=5;s.ACCELCAL_VEHICLE_POS_BACK=6;s.ACCELCAL_VEHICLE_POS_SUCCESS=16777215;s.ACCELCAL_VEHICLE_POS_FAILED=16777216;s.ACCELCAL_VEHICLE_POS_ENUM_END=16777217;s.HEADING_TYPE_COURSE_OVER_GROUND=0;s.HEADING_TYPE_HEADING=1;s.HEADING_TYPE_ENUM_END=2;s.MAV_CMD_NAV_WAYPOINT=16;s.MAV_CMD_NAV_LOITER_UNLIM=17;s.MAV_CMD_NAV_LOITER_TURNS=18;s.MAV_CMD_NAV_LOITER_TIME=19;s.MAV_CMD_NAV_RETURN_TO_LAUNCH=20;s.MAV_CMD_NAV_LAND=21;s.MAV_CMD_NAV_TAKEOFF=22;s.MAV_CMD_NAV_LAND_LOCAL=23;s.MAV_CMD_NAV_TAKEOFF_LOCAL=24;s.MAV_CMD_NAV_FOLLOW=25;s.MAV_CMD_NAV_CONTINUE_AND_CHANGE_ALT=30;s.MAV_CMD_NAV_LOITER_TO_ALT=31;s.MAV_CMD_DO_FOLLOW=32;s.MAV_CMD_DO_FOLLOW_REPOSITION=33;s.MAV_CMD_NAV_ROI=80;s.MAV_CMD_NAV_PATHPLANNING=81;s.MAV_CMD_NAV_SPLINE_WAYPOINT=82;s.MAV_CMD_NAV_ALTITUDE_WAIT=83;s.MAV_CMD_NAV_VTOL_TAKEOFF=84;s.MAV_CMD_NAV_VTOL_LAND=85;s.MAV_CMD_NAV_GUIDED_ENABLE=92;s.MAV_CMD_NAV_DELAY=93;s.MAV_CMD_NAV_PAYLOAD_PLACE=94;s.MAV_CMD_NAV_LAST=95;s.MAV_CMD_CONDITION_DELAY=112;s.MAV_CMD_CONDITION_CHANGE_ALT=113;s.MAV_CMD_CONDITION_DISTANCE=114;s.MAV_CMD_CONDITION_YAW=115;s.MAV_CMD_CONDITION_LAST=159;s.MAV_CMD_DO_SET_MODE=176;s.MAV_CMD_DO_JUMP=177;s.MAV_CMD_DO_CHANGE_SPEED=178;s.MAV_CMD_DO_SET_HOME=179;s.MAV_CMD_DO_SET_PARAMETER=180;s.MAV_CMD_DO_SET_RELAY=181;s.MAV_CMD_DO_REPEAT_RELAY=182;s.MAV_CMD_DO_SET_SERVO=183;s.MAV_CMD_DO_REPEAT_SERVO=184;s.MAV_CMD_DO_FLIGHTTERMINATION=185;s.MAV_CMD_DO_CHANGE_ALTITUDE=186;s.MAV_CMD_DO_RETURN_PATH_START=188;s.MAV_CMD_DO_LAND_START=189;s.MAV_CMD_DO_RALLY_LAND=190;s.MAV_CMD_DO_GO_AROUND=191;s.MAV_CMD_DO_REPOSITION=192;s.MAV_CMD_DO_PAUSE_CONTINUE=193;s.MAV_CMD_DO_SET_REVERSE=194;s.MAV_CMD_DO_SET_ROI_LOCATION=195;s.MAV_CMD_DO_SET_ROI_WPNEXT_OFFSET=196;s.MAV_CMD_DO_SET_ROI_NONE=197;s.MAV_CMD_DO_SET_ROI_SYSID=198;s.MAV_CMD_DO_CONTROL_VIDEO=200;s.MAV_CMD_DO_SET_ROI=201;s.MAV_CMD_DO_DIGICAM_CONFIGURE=202;s.MAV_CMD_DO_DIGICAM_CONTROL=203;s.MAV_CMD_DO_MOUNT_CONFIGURE=204;s.MAV_CMD_DO_MOUNT_CONTROL=205;s.MAV_CMD_DO_SET_CAM_TRIGG_DIST=206;s.MAV_CMD_DO_FENCE_ENABLE=207;s.MAV_CMD_DO_PARACHUTE=208;s.MAV_CMD_DO_MOTOR_TEST=209;s.MAV_CMD_DO_INVERTED_FLIGHT=210;s.MAV_CMD_DO_GRIPPER=211;s.MAV_CMD_DO_AUTOTUNE_ENABLE=212;s.MAV_CMD_NAV_SET_YAW_SPEED=213;s.MAV_CMD_DO_SET_CAM_TRIGG_INTERVAL=214;s.MAV_CMD_DO_SET_RESUME_REPEAT_DIST=215;s.MAV_CMD_DO_SPRAYER=216;s.MAV_CMD_DO_SEND_SCRIPT_MESSAGE=217;s.MAV_CMD_DO_AUX_FUNCTION=218;s.MAV_CMD_DO_MOUNT_CONTROL_QUAT=220;s.MAV_CMD_DO_GUIDED_MASTER=221;s.MAV_CMD_DO_GUIDED_LIMITS=222;s.MAV_CMD_DO_ENGINE_CONTROL=223;s.MAV_CMD_DO_SET_MISSION_CURRENT=224;s.MAV_CMD_DO_LAST=240;s.MAV_CMD_PREFLIGHT_CALIBRATION=241;s.MAV_CMD_PREFLIGHT_SET_SENSOR_OFFSETS=242;s.MAV_CMD_PREFLIGHT_UAVCAN=243;s.MAV_CMD_PREFLIGHT_STORAGE=245;s.MAV_CMD_PREFLIGHT_REBOOT_SHUTDOWN=246;s.MAV_CMD_OVERRIDE_GOTO=252;s.MAV_CMD_OBLIQUE_SURVEY=260;s.MAV_CMD_MISSION_START=300;s.MAV_CMD_COMPONENT_ARM_DISARM=400;s.MAV_CMD_RUN_PREARM_CHECKS=401;s.MAV_CMD_GET_HOME_POSITION=410;s.MAV_CMD_START_RX_PAIR=500;s.MAV_CMD_GET_MESSAGE_INTERVAL=510;s.MAV_CMD_SET_MESSAGE_INTERVAL=511;s.MAV_CMD_REQUEST_MESSAGE=512;s.MAV_CMD_REQUEST_PROTOCOL_VERSION=519;s.MAV_CMD_REQUEST_AUTOPILOT_CAPABILITIES=520;s.MAV_CMD_REQUEST_CAMERA_INFORMATION=521;s.MAV_CMD_REQUEST_CAMERA_SETTINGS=522;s.MAV_CMD_REQUEST_STORAGE_INFORMATION=525;s.MAV_CMD_STORAGE_FORMAT=526;s.MAV_CMD_REQUEST_CAMERA_CAPTURE_STATUS=527;s.MAV_CMD_REQUEST_FLIGHT_INFORMATION=528;s.MAV_CMD_RESET_CAMERA_SETTINGS=529;s.MAV_CMD_SET_CAMERA_MODE=530;s.MAV_CMD_SET_CAMERA_ZOOM=531;s.MAV_CMD_SET_CAMERA_FOCUS=532;s.MAV_CMD_SET_STORAGE_USAGE=533;s.MAV_CMD_SET_CAMERA_SOURCE=534;s.MAV_CMD_JUMP_TAG=600;s.MAV_CMD_DO_JUMP_TAG=601;s.MAV_CMD_DO_SET_SYS_CMP_ID=610;s.MAV_CMD_DO_GIMBAL_MANAGER_PITCHYAW=1e3;s.MAV_CMD_DO_GIMBAL_MANAGER_CONFIGURE=1001;s.MAV_CMD_IMAGE_START_CAPTURE=2e3;s.MAV_CMD_IMAGE_STOP_CAPTURE=2001;s.MAV_CMD_DO_TRIGGER_CONTROL=2003;s.MAV_CMD_CAMERA_TRACK_POINT=2004;s.MAV_CMD_CAMERA_TRACK_RECTANGLE=2005;s.MAV_CMD_CAMERA_STOP_TRACKING=2010;s.MAV_CMD_VIDEO_START_CAPTURE=2500;s.MAV_CMD_VIDEO_STOP_CAPTURE=2501;s.MAV_CMD_VIDEO_START_STREAMING=2502;s.MAV_CMD_VIDEO_STOP_STREAMING=2503;s.MAV_CMD_REQUEST_VIDEO_STREAM_INFORMATION=2504;s.MAV_CMD_REQUEST_VIDEO_STREAM_STATUS=2505;s.MAV_CMD_LOGGING_START=2510;s.MAV_CMD_LOGGING_STOP=2511;s.MAV_CMD_AIRFRAME_CONFIGURATION=2520;s.MAV_CMD_CONTROL_HIGH_LATENCY=2600;s.MAV_CMD_PANORAMA_CREATE=2800;s.MAV_CMD_DO_VTOL_TRANSITION=3e3;s.MAV_CMD_ARM_AUTHORIZATION_REQUEST=3001;s.MAV_CMD_SET_GUIDED_SUBMODE_STANDARD=4e3;s.MAV_CMD_SET_GUIDED_SUBMODE_CIRCLE=4001;s.MAV_CMD_NAV_FENCE_RETURN_POINT=5e3;s.MAV_CMD_NAV_FENCE_POLYGON_VERTEX_INCLUSION=5001;s.MAV_CMD_NAV_FENCE_POLYGON_VERTEX_EXCLUSION=5002;s.MAV_CMD_NAV_FENCE_CIRCLE_INCLUSION=5003;s.MAV_CMD_NAV_FENCE_CIRCLE_EXCLUSION=5004;s.MAV_CMD_NAV_RALLY_POINT=5100;s.MAV_CMD_UAVCAN_GET_NODE_INFO=5200;s.MAV_CMD_DO_SET_SAFETY_SWITCH_STATE=5300;s.MAV_CMD_DO_ADSB_OUT_IDENT=10001;s.MAV_CMD_LOWEHEISER_SET_STATE=10151;s.MAV_CMD_PAYLOAD_PREPARE_DEPLOY=30001;s.MAV_CMD_PAYLOAD_CONTROL_DEPLOY=30002;s.MAV_CMD_WAYPOINT_USER_1=31e3;s.MAV_CMD_WAYPOINT_USER_2=31001;s.MAV_CMD_WAYPOINT_USER_3=31002;s.MAV_CMD_WAYPOINT_USER_4=31003;s.MAV_CMD_WAYPOINT_USER_5=31004;s.MAV_CMD_SPATIAL_USER_1=31005;s.MAV_CMD_SPATIAL_USER_2=31006;s.MAV_CMD_SPATIAL_USER_3=31007;s.MAV_CMD_SPATIAL_USER_4=31008;s.MAV_CMD_SPATIAL_USER_5=31009;s.MAV_CMD_USER_1=31010;s.MAV_CMD_USER_2=31011;s.MAV_CMD_USER_3=31012;s.MAV_CMD_USER_4=31013;s.MAV_CMD_USER_5=31014;s.MAV_CMD_CAN_FORWARD=32e3;s.MAV_CMD_RESET_MPPT=40001;s.MAV_CMD_PAYLOAD_CONTROL=40002;s.MAV_CMD_POWER_OFF_INITIATED=42e3;s.MAV_CMD_SOLO_BTN_FLY_CLICK=42001;s.MAV_CMD_SOLO_BTN_FLY_HOLD=42002;s.MAV_CMD_SOLO_BTN_PAUSE_CLICK=42003;s.MAV_CMD_FIXED_MAG_CAL=42004;s.MAV_CMD_FIXED_MAG_CAL_FIELD=42005;s.MAV_CMD_FIXED_MAG_CAL_YAW=42006;s.MAV_CMD_SET_EKF_SOURCE_SET=42007;s.MAV_CMD_DO_START_MAG_CAL=42424;s.MAV_CMD_DO_ACCEPT_MAG_CAL=42425;s.MAV_CMD_DO_CANCEL_MAG_CAL=42426;s.MAV_CMD_SET_FACTORY_TEST_MODE=42427;s.MAV_CMD_DO_SEND_BANNER=42428;s.MAV_CMD_ACCELCAL_VEHICLE_POS=42429;s.MAV_CMD_GIMBAL_RESET=42501;s.MAV_CMD_GIMBAL_AXIS_CALIBRATION_STATUS=42502;s.MAV_CMD_GIMBAL_REQUEST_AXIS_CALIBRATION=42503;s.MAV_CMD_GIMBAL_FULL_RESET=42505;s.MAV_CMD_DO_WINCH=42600;s.MAV_CMD_FLASH_BOOTLOADER=42650;s.MAV_CMD_BATTERY_RESET=42651;s.MAV_CMD_DEBUG_TRAP=42700;s.MAV_CMD_SCRIPTING=42701;s.MAV_CMD_NAV_SCRIPT_TIME=42702;s.MAV_CMD_NAV_ATTITUDE_TIME=42703;s.MAV_CMD_GUIDED_CHANGE_SPEED=43e3;s.MAV_CMD_GUIDED_CHANGE_ALTITUDE=43001;s.MAV_CMD_GUIDED_CHANGE_HEADING=43002;s.MAV_CMD_EXTERNAL_POSITION_ESTIMATE=43003;s.MAV_CMD_STORM32_DO_GIMBAL_MANAGER_CONTROL_PITCHYAW=60002;s.MAV_CMD_STORM32_DO_GIMBAL_MANAGER_SETUP=60010;s.MAV_CMD_STORM32_DO_GIMBAL_ACTION=60011;s.MAV_CMD_QSHOT_DO_CONFIGURE=60020;s.MAV_CMD_PRS_SET_ARM=60050;s.MAV_CMD_PRS_GET_ARM=60051;s.MAV_CMD_PRS_GET_BATTERY=60052;s.MAV_CMD_PRS_GET_ERR=60053;s.MAV_CMD_PRS_SET_ARM_ALTI=60070;s.MAV_CMD_PRS_GET_ARM_ALTI=60071;s.MAV_CMD_PRS_SHUTDOWN=60072;s.MAV_CMD_ENUM_END=60073;s.SCRIPTING_CMD_REPL_START=0;s.SCRIPTING_CMD_REPL_STOP=1;s.SCRIPTING_CMD_STOP=2;s.SCRIPTING_CMD_STOP_AND_RESTART=3;s.SCRIPTING_CMD_ENUM_END=4;s.SECURE_COMMAND_GET_SESSION_KEY=0;s.SECURE_COMMAND_GET_REMOTEID_SESSION_KEY=1;s.SECURE_COMMAND_REMOVE_PUBLIC_KEYS=2;s.SECURE_COMMAND_GET_PUBLIC_KEYS=3;s.SECURE_COMMAND_SET_PUBLIC_KEYS=4;s.SECURE_COMMAND_GET_REMOTEID_CONFIG=5;s.SECURE_COMMAND_SET_REMOTEID_CONFIG=6;s.SECURE_COMMAND_FLASH_BOOTLOADER=7;s.SECURE_COMMAND_OP_ENUM_END=8;s.LIMITS_INIT=0;s.LIMITS_DISABLED=1;s.LIMITS_ENABLED=2;s.LIMITS_TRIGGERED=3;s.LIMITS_RECOVERING=4;s.LIMITS_RECOVERED=5;s.LIMITS_STATE_ENUM_END=6;s.LIMIT_GPSLOCK=1;s.LIMIT_GEOFENCE=2;s.LIMIT_ALTITUDE=4;s.LIMIT_MODULE_ENUM_END=5;s.FAVORABLE_WIND=1;s.LAND_IMMEDIATELY=2;s.ALT_FRAME_VALID=4;s.ALT_FRAME=24;s.RALLY_FLAGS_ENUM_END=25;s.CAMERA_STATUS_TYPE_HEARTBEAT=0;s.CAMERA_STATUS_TYPE_TRIGGER=1;s.CAMERA_STATUS_TYPE_DISCONNECT=2;s.CAMERA_STATUS_TYPE_ERROR=3;s.CAMERA_STATUS_TYPE_LOWBATT=4;s.CAMERA_STATUS_TYPE_LOWSTORE=5;s.CAMERA_STATUS_TYPE_LOWSTOREV=6;s.CAMERA_STATUS_TYPES_ENUM_END=7;s.CAMERA_FEEDBACK_PHOTO=0;s.CAMERA_FEEDBACK_VIDEO=1;s.CAMERA_FEEDBACK_BADEXPOSURE=2;s.CAMERA_FEEDBACK_CLOSEDLOOP=3;s.CAMERA_FEEDBACK_OPENLOOP=4;s.CAMERA_FEEDBACK_FLAGS_ENUM_END=5;s.MAV_MODE_GIMBAL_UNINITIALIZED=0;s.MAV_MODE_GIMBAL_CALIBRATING_PITCH=1;s.MAV_MODE_GIMBAL_CALIBRATING_ROLL=2;s.MAV_MODE_GIMBAL_CALIBRATING_YAW=3;s.MAV_MODE_GIMBAL_INITIALIZED=4;s.MAV_MODE_GIMBAL_ACTIVE=5;s.MAV_MODE_GIMBAL_RATE_CMD_TIMEOUT=6;s.MAV_MODE_GIMBAL_ENUM_END=7;s.GIMBAL_AXIS_YAW=0;s.GIMBAL_AXIS_PITCH=1;s.GIMBAL_AXIS_ROLL=2;s.GIMBAL_AXIS_ENUM_END=3;s.GIMBAL_AXIS_CALIBRATION_STATUS_IN_PROGRESS=0;s.GIMBAL_AXIS_CALIBRATION_STATUS_SUCCEEDED=1;s.GIMBAL_AXIS_CALIBRATION_STATUS_FAILED=2;s.GIMBAL_AXIS_CALIBRATION_STATUS_ENUM_END=3;s.GIMBAL_AXIS_CALIBRATION_REQUIRED_UNKNOWN=0;s.GIMBAL_AXIS_CALIBRATION_REQUIRED_TRUE=1;s.GIMBAL_AXIS_CALIBRATION_REQUIRED_FALSE=2;s.GIMBAL_AXIS_CALIBRATION_REQUIRED_ENUM_END=3;s.GOPRO_HEARTBEAT_STATUS_DISCONNECTED=0;s.GOPRO_HEARTBEAT_STATUS_INCOMPATIBLE=1;s.GOPRO_HEARTBEAT_STATUS_CONNECTED=2;s.GOPRO_HEARTBEAT_STATUS_ERROR=3;s.GOPRO_HEARTBEAT_STATUS_ENUM_END=4;s.GOPRO_FLAG_RECORDING=1;s.GOPRO_HEARTBEAT_FLAGS_ENUM_END=2;s.GOPRO_REQUEST_SUCCESS=0;s.GOPRO_REQUEST_FAILED=1;s.GOPRO_REQUEST_STATUS_ENUM_END=2;s.GOPRO_COMMAND_POWER=0;s.GOPRO_COMMAND_CAPTURE_MODE=1;s.GOPRO_COMMAND_SHUTTER=2;s.GOPRO_COMMAND_BATTERY=3;s.GOPRO_COMMAND_MODEL=4;s.GOPRO_COMMAND_VIDEO_SETTINGS=5;s.GOPRO_COMMAND_LOW_LIGHT=6;s.GOPRO_COMMAND_PHOTO_RESOLUTION=7;s.GOPRO_COMMAND_PHOTO_BURST_RATE=8;s.GOPRO_COMMAND_PROTUNE=9;s.GOPRO_COMMAND_PROTUNE_WHITE_BALANCE=10;s.GOPRO_COMMAND_PROTUNE_COLOUR=11;s.GOPRO_COMMAND_PROTUNE_GAIN=12;s.GOPRO_COMMAND_PROTUNE_SHARPNESS=13;s.GOPRO_COMMAND_PROTUNE_EXPOSURE=14;s.GOPRO_COMMAND_TIME=15;s.GOPRO_COMMAND_CHARGING=16;s.GOPRO_COMMAND_ENUM_END=17;s.GOPRO_CAPTURE_MODE_VIDEO=0;s.GOPRO_CAPTURE_MODE_PHOTO=1;s.GOPRO_CAPTURE_MODE_BURST=2;s.GOPRO_CAPTURE_MODE_TIME_LAPSE=3;s.GOPRO_CAPTURE_MODE_MULTI_SHOT=4;s.GOPRO_CAPTURE_MODE_PLAYBACK=5;s.GOPRO_CAPTURE_MODE_SETUP=6;s.GOPRO_CAPTURE_MODE_UNKNOWN=255;s.GOPRO_CAPTURE_MODE_ENUM_END=256;s.GOPRO_RESOLUTION_480p=0;s.GOPRO_RESOLUTION_720p=1;s.GOPRO_RESOLUTION_960p=2;s.GOPRO_RESOLUTION_1080p=3;s.GOPRO_RESOLUTION_1440p=4;s.GOPRO_RESOLUTION_2_7k_17_9=5;s.GOPRO_RESOLUTION_2_7k_16_9=6;s.GOPRO_RESOLUTION_2_7k_4_3=7;s.GOPRO_RESOLUTION_4k_16_9=8;s.GOPRO_RESOLUTION_4k_17_9=9;s.GOPRO_RESOLUTION_720p_SUPERVIEW=10;s.GOPRO_RESOLUTION_1080p_SUPERVIEW=11;s.GOPRO_RESOLUTION_2_7k_SUPERVIEW=12;s.GOPRO_RESOLUTION_4k_SUPERVIEW=13;s.GOPRO_RESOLUTION_ENUM_END=14;s.GOPRO_FRAME_RATE_12=0;s.GOPRO_FRAME_RATE_15=1;s.GOPRO_FRAME_RATE_24=2;s.GOPRO_FRAME_RATE_25=3;s.GOPRO_FRAME_RATE_30=4;s.GOPRO_FRAME_RATE_48=5;s.GOPRO_FRAME_RATE_50=6;s.GOPRO_FRAME_RATE_60=7;s.GOPRO_FRAME_RATE_80=8;s.GOPRO_FRAME_RATE_90=9;s.GOPRO_FRAME_RATE_100=10;s.GOPRO_FRAME_RATE_120=11;s.GOPRO_FRAME_RATE_240=12;s.GOPRO_FRAME_RATE_12_5=13;s.GOPRO_FRAME_RATE_ENUM_END=14;s.GOPRO_FIELD_OF_VIEW_WIDE=0;s.GOPRO_FIELD_OF_VIEW_MEDIUM=1;s.GOPRO_FIELD_OF_VIEW_NARROW=2;s.GOPRO_FIELD_OF_VIEW_ENUM_END=3;s.GOPRO_VIDEO_SETTINGS_TV_MODE=1;s.GOPRO_VIDEO_SETTINGS_FLAGS_ENUM_END=2;s.GOPRO_PHOTO_RESOLUTION_5MP_MEDIUM=0;s.GOPRO_PHOTO_RESOLUTION_7MP_MEDIUM=1;s.GOPRO_PHOTO_RESOLUTION_7MP_WIDE=2;s.GOPRO_PHOTO_RESOLUTION_10MP_WIDE=3;s.GOPRO_PHOTO_RESOLUTION_12MP_WIDE=4;s.GOPRO_PHOTO_RESOLUTION_ENUM_END=5;s.GOPRO_PROTUNE_WHITE_BALANCE_AUTO=0;s.GOPRO_PROTUNE_WHITE_BALANCE_3000K=1;s.GOPRO_PROTUNE_WHITE_BALANCE_5500K=2;s.GOPRO_PROTUNE_WHITE_BALANCE_6500K=3;s.GOPRO_PROTUNE_WHITE_BALANCE_RAW=4;s.GOPRO_PROTUNE_WHITE_BALANCE_ENUM_END=5;s.GOPRO_PROTUNE_COLOUR_STANDARD=0;s.GOPRO_PROTUNE_COLOUR_NEUTRAL=1;s.GOPRO_PROTUNE_COLOUR_ENUM_END=2;s.GOPRO_PROTUNE_GAIN_400=0;s.GOPRO_PROTUNE_GAIN_800=1;s.GOPRO_PROTUNE_GAIN_1600=2;s.GOPRO_PROTUNE_GAIN_3200=3;s.GOPRO_PROTUNE_GAIN_6400=4;s.GOPRO_PROTUNE_GAIN_ENUM_END=5;s.GOPRO_PROTUNE_SHARPNESS_LOW=0;s.GOPRO_PROTUNE_SHARPNESS_MEDIUM=1;s.GOPRO_PROTUNE_SHARPNESS_HIGH=2;s.GOPRO_PROTUNE_SHARPNESS_ENUM_END=3;s.GOPRO_PROTUNE_EXPOSURE_NEG_5_0=0;s.GOPRO_PROTUNE_EXPOSURE_NEG_4_5=1;s.GOPRO_PROTUNE_EXPOSURE_NEG_4_0=2;s.GOPRO_PROTUNE_EXPOSURE_NEG_3_5=3;s.GOPRO_PROTUNE_EXPOSURE_NEG_3_0=4;s.GOPRO_PROTUNE_EXPOSURE_NEG_2_5=5;s.GOPRO_PROTUNE_EXPOSURE_NEG_2_0=6;s.GOPRO_PROTUNE_EXPOSURE_NEG_1_5=7;s.GOPRO_PROTUNE_EXPOSURE_NEG_1_0=8;s.GOPRO_PROTUNE_EXPOSURE_NEG_0_5=9;s.GOPRO_PROTUNE_EXPOSURE_ZERO=10;s.GOPRO_PROTUNE_EXPOSURE_POS_0_5=11;s.GOPRO_PROTUNE_EXPOSURE_POS_1_0=12;s.GOPRO_PROTUNE_EXPOSURE_POS_1_5=13;s.GOPRO_PROTUNE_EXPOSURE_POS_2_0=14;s.GOPRO_PROTUNE_EXPOSURE_POS_2_5=15;s.GOPRO_PROTUNE_EXPOSURE_POS_3_0=16;s.GOPRO_PROTUNE_EXPOSURE_POS_3_5=17;s.GOPRO_PROTUNE_EXPOSURE_POS_4_0=18;s.GOPRO_PROTUNE_EXPOSURE_POS_4_5=19;s.GOPRO_PROTUNE_EXPOSURE_POS_5_0=20;s.GOPRO_PROTUNE_EXPOSURE_ENUM_END=21;s.GOPRO_CHARGING_DISABLED=0;s.GOPRO_CHARGING_ENABLED=1;s.GOPRO_CHARGING_ENUM_END=2;s.GOPRO_MODEL_UNKNOWN=0;s.GOPRO_MODEL_HERO_3_PLUS_SILVER=1;s.GOPRO_MODEL_HERO_3_PLUS_BLACK=2;s.GOPRO_MODEL_HERO_4_SILVER=3;s.GOPRO_MODEL_HERO_4_BLACK=4;s.GOPRO_MODEL_ENUM_END=5;s.GOPRO_BURST_RATE_3_IN_1_SECOND=0;s.GOPRO_BURST_RATE_5_IN_1_SECOND=1;s.GOPRO_BURST_RATE_10_IN_1_SECOND=2;s.GOPRO_BURST_RATE_10_IN_2_SECOND=3;s.GOPRO_BURST_RATE_10_IN_3_SECOND=4;s.GOPRO_BURST_RATE_30_IN_1_SECOND=5;s.GOPRO_BURST_RATE_30_IN_2_SECOND=6;s.GOPRO_BURST_RATE_30_IN_3_SECOND=7;s.GOPRO_BURST_RATE_30_IN_6_SECOND=8;s.GOPRO_BURST_RATE_ENUM_END=9;s.MAV_CMD_DO_AUX_FUNCTION_SWITCH_LEVEL_LOW=0;s.MAV_CMD_DO_AUX_FUNCTION_SWITCH_LEVEL_MIDDLE=1;s.MAV_CMD_DO_AUX_FUNCTION_SWITCH_LEVEL_HIGH=2;s.MAV_CMD_DO_AUX_FUNCTION_SWITCH_LEVEL_ENUM_END=3;s.LED_CONTROL_PATTERN_OFF=0;s.LED_CONTROL_PATTERN_FIRMWAREUPDATE=1;s.LED_CONTROL_PATTERN_CUSTOM=255;s.LED_CONTROL_PATTERN_ENUM_END=256;s.EKF_ATTITUDE=1;s.EKF_VELOCITY_HORIZ=2;s.EKF_VELOCITY_VERT=4;s.EKF_POS_HORIZ_REL=8;s.EKF_POS_HORIZ_ABS=16;s.EKF_POS_VERT_ABS=32;s.EKF_POS_VERT_AGL=64;s.EKF_CONST_POS_MODE=128;s.EKF_PRED_POS_HORIZ_REL=256;s.EKF_PRED_POS_HORIZ_ABS=512;s.EKF_UNINITIALIZED=1024;s.EKF_STATUS_FLAGS_ENUM_END=1025;s.PID_TUNING_ROLL=1;s.PID_TUNING_PITCH=2;s.PID_TUNING_YAW=3;s.PID_TUNING_ACCZ=4;s.PID_TUNING_STEER=5;s.PID_TUNING_LANDING=6;s.PID_TUNING_AXIS_ENUM_END=7;s.MAV_REMOTE_LOG_DATA_BLOCK_STOP=2147483645;s.MAV_REMOTE_LOG_DATA_BLOCK_START=2147483646;s.MAV_REMOTE_LOG_DATA_BLOCK_COMMANDS_ENUM_END=2147483647;s.MAV_REMOTE_LOG_DATA_BLOCK_NACK=0;s.MAV_REMOTE_LOG_DATA_BLOCK_ACK=1;s.MAV_REMOTE_LOG_DATA_BLOCK_STATUSES_ENUM_END=2;s.DEVICE_OP_BUSTYPE_I2C=0;s.DEVICE_OP_BUSTYPE_SPI=1;s.DEVICE_OP_BUSTYPE_ENUM_END=2;s.DEEPSTALL_STAGE_FLY_TO_LANDING=0;s.DEEPSTALL_STAGE_ESTIMATE_WIND=1;s.DEEPSTALL_STAGE_WAIT_FOR_BREAKOUT=2;s.DEEPSTALL_STAGE_FLY_TO_ARC=3;s.DEEPSTALL_STAGE_ARC=4;s.DEEPSTALL_STAGE_APPROACH=5;s.DEEPSTALL_STAGE_LAND=6;s.DEEPSTALL_STAGE_ENUM_END=7;s.PLANE_MODE_MANUAL=0;s.PLANE_MODE_CIRCLE=1;s.PLANE_MODE_STABILIZE=2;s.PLANE_MODE_TRAINING=3;s.PLANE_MODE_ACRO=4;s.PLANE_MODE_FLY_BY_WIRE_A=5;s.PLANE_MODE_FLY_BY_WIRE_B=6;s.PLANE_MODE_CRUISE=7;s.PLANE_MODE_AUTOTUNE=8;s.PLANE_MODE_AUTO=10;s.PLANE_MODE_RTL=11;s.PLANE_MODE_LOITER=12;s.PLANE_MODE_TAKEOFF=13;s.PLANE_MODE_AVOID_ADSB=14;s.PLANE_MODE_GUIDED=15;s.PLANE_MODE_INITIALIZING=16;s.PLANE_MODE_QSTABILIZE=17;s.PLANE_MODE_QHOVER=18;s.PLANE_MODE_QLOITER=19;s.PLANE_MODE_QLAND=20;s.PLANE_MODE_QRTL=21;s.PLANE_MODE_QAUTOTUNE=22;s.PLANE_MODE_QACRO=23;s.PLANE_MODE_THERMAL=24;s.PLANE_MODE_ENUM_END=25;s.COPTER_MODE_STABILIZE=0;s.COPTER_MODE_ACRO=1;s.COPTER_MODE_ALT_HOLD=2;s.COPTER_MODE_AUTO=3;s.COPTER_MODE_GUIDED=4;s.COPTER_MODE_LOITER=5;s.COPTER_MODE_RTL=6;s.COPTER_MODE_CIRCLE=7;s.COPTER_MODE_LAND=9;s.COPTER_MODE_DRIFT=11;s.COPTER_MODE_SPORT=13;s.COPTER_MODE_FLIP=14;s.COPTER_MODE_AUTOTUNE=15;s.COPTER_MODE_POSHOLD=16;s.COPTER_MODE_BRAKE=17;s.COPTER_MODE_THROW=18;s.COPTER_MODE_AVOID_ADSB=19;s.COPTER_MODE_GUIDED_NOGPS=20;s.COPTER_MODE_SMART_RTL=21;s.COPTER_MODE_FLOWHOLD=22;s.COPTER_MODE_FOLLOW=23;s.COPTER_MODE_ZIGZAG=24;s.COPTER_MODE_SYSTEMID=25;s.COPTER_MODE_AUTOROTATE=26;s.COPTER_MODE_AUTO_RTL=27;s.COPTER_MODE_ENUM_END=28;s.SUB_MODE_STABILIZE=0;s.SUB_MODE_ACRO=1;s.SUB_MODE_ALT_HOLD=2;s.SUB_MODE_AUTO=3;s.SUB_MODE_GUIDED=4;s.SUB_MODE_CIRCLE=7;s.SUB_MODE_SURFACE=9;s.SUB_MODE_POSHOLD=16;s.SUB_MODE_MANUAL=19;s.SUB_MODE_ENUM_END=20;s.ROVER_MODE_MANUAL=0;s.ROVER_MODE_ACRO=1;s.ROVER_MODE_STEERING=3;s.ROVER_MODE_HOLD=4;s.ROVER_MODE_LOITER=5;s.ROVER_MODE_FOLLOW=6;s.ROVER_MODE_SIMPLE=7;s.ROVER_MODE_AUTO=10;s.ROVER_MODE_RTL=11;s.ROVER_MODE_SMART_RTL=12;s.ROVER_MODE_GUIDED=15;s.ROVER_MODE_INITIALIZING=16;s.ROVER_MODE_ENUM_END=17;s.TRACKER_MODE_MANUAL=0;s.TRACKER_MODE_STOP=1;s.TRACKER_MODE_SCAN=2;s.TRACKER_MODE_SERVO_TEST=3;s.TRACKER_MODE_AUTO=10;s.TRACKER_MODE_INITIALIZING=16;s.TRACKER_MODE_ENUM_END=17;s.OSD_PARAM_NONE=0;s.OSD_PARAM_SERIAL_PROTOCOL=1;s.OSD_PARAM_SERVO_FUNCTION=2;s.OSD_PARAM_AUX_FUNCTION=3;s.OSD_PARAM_FLIGHT_MODE=4;s.OSD_PARAM_FAILSAFE_ACTION=5;s.OSD_PARAM_FAILSAFE_ACTION_1=6;s.OSD_PARAM_FAILSAFE_ACTION_2=7;s.OSD_PARAM_NUM_TYPES=8;s.OSD_PARAM_CONFIG_TYPE_ENUM_END=9;s.OSD_PARAM_SUCCESS=0;s.OSD_PARAM_INVALID_SCREEN=1;s.OSD_PARAM_INVALID_PARAMETER_INDEX=2;s.OSD_PARAM_INVALID_PARAMETER=3;s.OSD_PARAM_CONFIG_ERROR_ENUM_END=4;s.GSM_LINK_TYPE_NONE=0;s.GSM_LINK_TYPE_UNKNOWN=1;s.GSM_LINK_TYPE_2G=2;s.GSM_LINK_TYPE_3G=3;s.GSM_LINK_TYPE_4G=4;s.GSM_LINK_TYPE_ENUM_END=5;s.GSM_MODEM_TYPE_UNKNOWN=0;s.GSM_MODEM_TYPE_HUAWEI_E3372=1;s.GSM_MODEM_TYPE_ENUM_END=2;s.FIRMWARE_VERSION_TYPE_DEV=0;s.FIRMWARE_VERSION_TYPE_ALPHA=64;s.FIRMWARE_VERSION_TYPE_BETA=128;s.FIRMWARE_VERSION_TYPE_RC=192;s.FIRMWARE_VERSION_TYPE_OFFICIAL=255;s.FIRMWARE_VERSION_TYPE_ENUM_END=256;s.HL_FAILURE_FLAG_GPS=1;s.HL_FAILURE_FLAG_DIFFERENTIAL_PRESSURE=2;s.HL_FAILURE_FLAG_ABSOLUTE_PRESSURE=4;s.HL_FAILURE_FLAG_3D_ACCEL=8;s.HL_FAILURE_FLAG_3D_GYRO=16;s.HL_FAILURE_FLAG_3D_MAG=32;s.HL_FAILURE_FLAG_TERRAIN=64;s.HL_FAILURE_FLAG_BATTERY=128;s.HL_FAILURE_FLAG_RC_RECEIVER=256;s.HL_FAILURE_FLAG_OFFBOARD_LINK=512;s.HL_FAILURE_FLAG_ENGINE=1024;s.HL_FAILURE_FLAG_GEOFENCE=2048;s.HL_FAILURE_FLAG_ESTIMATOR=4096;s.HL_FAILURE_FLAG_MISSION=8192;s.HL_FAILURE_FLAG_ENUM_END=8193;s.MAV_GOTO_DO_HOLD=0;s.MAV_GOTO_DO_CONTINUE=1;s.MAV_GOTO_HOLD_AT_CURRENT_POSITION=2;s.MAV_GOTO_HOLD_AT_SPECIFIED_POSITION=3;s.MAV_GOTO_ENUM_END=4;s.MAV_MODE_PREFLIGHT=0;s.MAV_MODE_MANUAL_DISARMED=64;s.MAV_MODE_TEST_DISARMED=66;s.MAV_MODE_STABILIZE_DISARMED=80;s.MAV_MODE_GUIDED_DISARMED=88;s.MAV_MODE_AUTO_DISARMED=92;s.MAV_MODE_MANUAL_ARMED=192;s.MAV_MODE_TEST_ARMED=194;s.MAV_MODE_STABILIZE_ARMED=208;s.MAV_MODE_GUIDED_ARMED=216;s.MAV_MODE_AUTO_ARMED=220;s.MAV_MODE_ENUM_END=221;s.MAV_SYS_STATUS_SENSOR_3D_GYRO=1;s.MAV_SYS_STATUS_SENSOR_3D_ACCEL=2;s.MAV_SYS_STATUS_SENSOR_3D_MAG=4;s.MAV_SYS_STATUS_SENSOR_ABSOLUTE_PRESSURE=8;s.MAV_SYS_STATUS_SENSOR_DIFFERENTIAL_PRESSURE=16;s.MAV_SYS_STATUS_SENSOR_GPS=32;s.MAV_SYS_STATUS_SENSOR_OPTICAL_FLOW=64;s.MAV_SYS_STATUS_SENSOR_VISION_POSITION=128;s.MAV_SYS_STATUS_SENSOR_LASER_POSITION=256;s.MAV_SYS_STATUS_SENSOR_EXTERNAL_GROUND_TRUTH=512;s.MAV_SYS_STATUS_SENSOR_ANGULAR_RATE_CONTROL=1024;s.MAV_SYS_STATUS_SENSOR_ATTITUDE_STABILIZATION=2048;s.MAV_SYS_STATUS_SENSOR_YAW_POSITION=4096;s.MAV_SYS_STATUS_SENSOR_Z_ALTITUDE_CONTROL=8192;s.MAV_SYS_STATUS_SENSOR_XY_POSITION_CONTROL=16384;s.MAV_SYS_STATUS_SENSOR_MOTOR_OUTPUTS=32768;s.MAV_SYS_STATUS_SENSOR_RC_RECEIVER=65536;s.MAV_SYS_STATUS_SENSOR_3D_GYRO2=131072;s.MAV_SYS_STATUS_SENSOR_3D_ACCEL2=262144;s.MAV_SYS_STATUS_SENSOR_3D_MAG2=524288;s.MAV_SYS_STATUS_GEOFENCE=1048576;s.MAV_SYS_STATUS_AHRS=2097152;s.MAV_SYS_STATUS_TERRAIN=4194304;s.MAV_SYS_STATUS_REVERSE_MOTOR=8388608;s.MAV_SYS_STATUS_LOGGING=16777216;s.MAV_SYS_STATUS_SENSOR_BATTERY=33554432;s.MAV_SYS_STATUS_SENSOR_PROXIMITY=67108864;s.MAV_SYS_STATUS_SENSOR_SATCOM=134217728;s.MAV_SYS_STATUS_PREARM_CHECK=268435456;s.MAV_SYS_STATUS_OBSTACLE_AVOIDANCE=536870912;s.MAV_SYS_STATUS_SENSOR_PROPULSION=1073741824;s.MAV_SYS_STATUS_SENSOR_ENUM_END=1073741825;s.MAV_FRAME_GLOBAL=0;s.MAV_FRAME_LOCAL_NED=1;s.MAV_FRAME_MISSION=2;s.MAV_FRAME_GLOBAL_RELATIVE_ALT=3;s.MAV_FRAME_LOCAL_ENU=4;s.MAV_FRAME_GLOBAL_INT=5;s.MAV_FRAME_GLOBAL_RELATIVE_ALT_INT=6;s.MAV_FRAME_LOCAL_OFFSET_NED=7;s.MAV_FRAME_BODY_NED=8;s.MAV_FRAME_BODY_OFFSET_NED=9;s.MAV_FRAME_GLOBAL_TERRAIN_ALT=10;s.MAV_FRAME_GLOBAL_TERRAIN_ALT_INT=11;s.MAV_FRAME_BODY_FRD=12;s.MAV_FRAME_RESERVED_13=13;s.MAV_FRAME_RESERVED_14=14;s.MAV_FRAME_RESERVED_15=15;s.MAV_FRAME_RESERVED_16=16;s.MAV_FRAME_RESERVED_17=17;s.MAV_FRAME_RESERVED_18=18;s.MAV_FRAME_RESERVED_19=19;s.MAV_FRAME_LOCAL_FRD=20;s.MAV_FRAME_LOCAL_FLU=21;s.MAV_FRAME_ENUM_END=22;s.MAVLINK_DATA_STREAM_IMG_JPEG=0;s.MAVLINK_DATA_STREAM_IMG_BMP=1;s.MAVLINK_DATA_STREAM_IMG_RAW8U=2;s.MAVLINK_DATA_STREAM_IMG_RAW32U=3;s.MAVLINK_DATA_STREAM_IMG_PGM=4;s.MAVLINK_DATA_STREAM_IMG_PNG=5;s.MAVLINK_DATA_STREAM_TYPE_ENUM_END=6;s.FENCE_ACTION_NONE=0;s.FENCE_ACTION_GUIDED=1;s.FENCE_ACTION_REPORT=2;s.FENCE_ACTION_GUIDED_THR_PASS=3;s.FENCE_ACTION_RTL=4;s.FENCE_ACTION_ENUM_END=5;s.FENCE_BREACH_NONE=0;s.FENCE_BREACH_MINALT=1;s.FENCE_BREACH_MAXALT=2;s.FENCE_BREACH_BOUNDARY=3;s.FENCE_BREACH_ENUM_END=4;s.FENCE_MITIGATE_UNKNOWN=0;s.FENCE_MITIGATE_NONE=1;s.FENCE_MITIGATE_VEL_LIMIT=2;s.FENCE_MITIGATE_ENUM_END=3;s.FENCE_TYPE_ALL=0;s.FENCE_TYPE_ALT_MAX=1;s.FENCE_TYPE_CIRCLE=2;s.FENCE_TYPE_POLYGON=4;s.FENCE_TYPE_ALT_MIN=8;s.FENCE_TYPE_ENUM_END=9;s.MAV_MOUNT_MODE_RETRACT=0;s.MAV_MOUNT_MODE_NEUTRAL=1;s.MAV_MOUNT_MODE_MAVLINK_TARGETING=2;s.MAV_MOUNT_MODE_RC_TARGETING=3;s.MAV_MOUNT_MODE_GPS_POINT=4;s.MAV_MOUNT_MODE_SYSID_TARGET=5;s.MAV_MOUNT_MODE_HOME_LOCATION=6;s.MAV_MOUNT_MODE_ENUM_END=7;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_RETRACT=1;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_NEUTRAL=2;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_ROLL_AXIS=4;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_ROLL_FOLLOW=8;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_ROLL_LOCK=16;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_PITCH_AXIS=32;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_PITCH_FOLLOW=64;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_PITCH_LOCK=128;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_YAW_AXIS=256;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_YAW_FOLLOW=512;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_YAW_LOCK=1024;s.GIMBAL_DEVICE_CAP_FLAGS_SUPPORTS_INFINITE_YAW=2048;s.GIMBAL_DEVICE_CAP_FLAGS_SUPPORTS_YAW_IN_EARTH_FRAME=4096;s.GIMBAL_DEVICE_CAP_FLAGS_HAS_RC_INPUTS=8192;s.GIMBAL_DEVICE_CAP_FLAGS_ENUM_END=8193;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_RETRACT=1;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_NEUTRAL=2;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_ROLL_AXIS=4;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_ROLL_FOLLOW=8;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_ROLL_LOCK=16;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_PITCH_AXIS=32;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_PITCH_FOLLOW=64;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_PITCH_LOCK=128;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_YAW_AXIS=256;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_YAW_FOLLOW=512;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_YAW_LOCK=1024;s.GIMBAL_MANAGER_CAP_FLAGS_SUPPORTS_INFINITE_YAW=2048;s.GIMBAL_MANAGER_CAP_FLAGS_SUPPORTS_YAW_IN_EARTH_FRAME=4096;s.GIMBAL_MANAGER_CAP_FLAGS_HAS_RC_INPUTS=8192;s.GIMBAL_MANAGER_CAP_FLAGS_CAN_POINT_LOCATION_LOCAL=65536;s.GIMBAL_MANAGER_CAP_FLAGS_CAN_POINT_LOCATION_GLOBAL=131072;s.GIMBAL_MANAGER_CAP_FLAGS_ENUM_END=131073;s.GIMBAL_DEVICE_FLAGS_RETRACT=1;s.GIMBAL_DEVICE_FLAGS_NEUTRAL=2;s.GIMBAL_DEVICE_FLAGS_ROLL_LOCK=4;s.GIMBAL_DEVICE_FLAGS_PITCH_LOCK=8;s.GIMBAL_DEVICE_FLAGS_YAW_LOCK=16;s.GIMBAL_DEVICE_FLAGS_YAW_IN_VEHICLE_FRAME=32;s.GIMBAL_DEVICE_FLAGS_YAW_IN_EARTH_FRAME=64;s.GIMBAL_DEVICE_FLAGS_ACCEPTS_YAW_IN_EARTH_FRAME=128;s.GIMBAL_DEVICE_FLAGS_RC_EXCLUSIVE=256;s.GIMBAL_DEVICE_FLAGS_RC_MIXED=512;s.GIMBAL_DEVICE_FLAGS_ENUM_END=513;s.GIMBAL_MANAGER_FLAGS_RETRACT=1;s.GIMBAL_MANAGER_FLAGS_NEUTRAL=2;s.GIMBAL_MANAGER_FLAGS_ROLL_LOCK=4;s.GIMBAL_MANAGER_FLAGS_PITCH_LOCK=8;s.GIMBAL_MANAGER_FLAGS_YAW_LOCK=16;s.GIMBAL_MANAGER_FLAGS_YAW_IN_VEHICLE_FRAME=32;s.GIMBAL_MANAGER_FLAGS_YAW_IN_EARTH_FRAME=64;s.GIMBAL_MANAGER_FLAGS_ACCEPTS_YAW_IN_EARTH_FRAME=128;s.GIMBAL_MANAGER_FLAGS_RC_EXCLUSIVE=256;s.GIMBAL_MANAGER_FLAGS_RC_MIXED=512;s.GIMBAL_MANAGER_FLAGS_ENUM_END=513;s.GIMBAL_DEVICE_ERROR_FLAGS_AT_ROLL_LIMIT=1;s.GIMBAL_DEVICE_ERROR_FLAGS_AT_PITCH_LIMIT=2;s.GIMBAL_DEVICE_ERROR_FLAGS_AT_YAW_LIMIT=4;s.GIMBAL_DEVICE_ERROR_FLAGS_ENCODER_ERROR=8;s.GIMBAL_DEVICE_ERROR_FLAGS_POWER_ERROR=16;s.GIMBAL_DEVICE_ERROR_FLAGS_MOTOR_ERROR=32;s.GIMBAL_DEVICE_ERROR_FLAGS_SOFTWARE_ERROR=64;s.GIMBAL_DEVICE_ERROR_FLAGS_COMMS_ERROR=128;s.GIMBAL_DEVICE_ERROR_FLAGS_CALIBRATION_RUNNING=256;s.GIMBAL_DEVICE_ERROR_FLAGS_NO_MANAGER=512;s.GIMBAL_DEVICE_ERROR_FLAGS_ENUM_END=513;s.GRIPPER_ACTION_RELEASE=0;s.GRIPPER_ACTION_GRAB=1;s.GRIPPER_ACTIONS_ENUM_END=2;s.WINCH_RELAXED=0;s.WINCH_RELATIVE_LENGTH_CONTROL=1;s.WINCH_RATE_CONTROL=2;s.WINCH_LOCK=3;s.WINCH_DELIVER=4;s.WINCH_HOLD=5;s.WINCH_RETRACT=6;s.WINCH_LOAD_LINE=7;s.WINCH_ABANDON_LINE=8;s.WINCH_ACTIONS_ENUM_END=9;s.UAVCAN_NODE_HEALTH_OK=0;s.UAVCAN_NODE_HEALTH_WARNING=1;s.UAVCAN_NODE_HEALTH_ERROR=2;s.UAVCAN_NODE_HEALTH_CRITICAL=3;s.UAVCAN_NODE_HEALTH_ENUM_END=4;s.UAVCAN_NODE_MODE_OPERATIONAL=0;s.UAVCAN_NODE_MODE_INITIALIZATION=1;s.UAVCAN_NODE_MODE_MAINTENANCE=2;s.UAVCAN_NODE_MODE_SOFTWARE_UPDATE=3;s.UAVCAN_NODE_MODE_OFFLINE=7;s.UAVCAN_NODE_MODE_ENUM_END=8;s.STORAGE_STATUS_EMPTY=0;s.STORAGE_STATUS_UNFORMATTED=1;s.STORAGE_STATUS_READY=2;s.STORAGE_STATUS_NOT_SUPPORTED=3;s.STORAGE_STATUS_ENUM_END=4;s.STORAGE_TYPE_UNKNOWN=0;s.STORAGE_TYPE_USB_STICK=1;s.STORAGE_TYPE_SD=2;s.STORAGE_TYPE_MICROSD=3;s.STORAGE_TYPE_CF=4;s.STORAGE_TYPE_CFE=5;s.STORAGE_TYPE_XQD=6;s.STORAGE_TYPE_HD=7;s.STORAGE_TYPE_OTHER=254;s.STORAGE_TYPE_ENUM_END=255;s.STORAGE_USAGE_FLAG_SET=1;s.STORAGE_USAGE_FLAG_PHOTO=2;s.STORAGE_USAGE_FLAG_VIDEO=4;s.STORAGE_USAGE_FLAG_LOGS=8;s.STORAGE_USAGE_FLAG_ENUM_END=9;s.AUTOTUNE_AXIS_DEFAULT=0;s.AUTOTUNE_AXIS_ROLL=1;s.AUTOTUNE_AXIS_PITCH=2;s.AUTOTUNE_AXIS_YAW=4;s.AUTOTUNE_AXIS_ENUM_END=5;s.MAV_DATA_STREAM_ALL=0;s.MAV_DATA_STREAM_RAW_SENSORS=1;s.MAV_DATA_STREAM_EXTENDED_STATUS=2;s.MAV_DATA_STREAM_RC_CHANNELS=3;s.MAV_DATA_STREAM_RAW_CONTROLLER=4;s.MAV_DATA_STREAM_POSITION=6;s.MAV_DATA_STREAM_EXTRA1=10;s.MAV_DATA_STREAM_EXTRA2=11;s.MAV_DATA_STREAM_EXTRA3=12;s.MAV_DATA_STREAM_ENUM_END=13;s.MAV_ROI_NONE=0;s.MAV_ROI_WPNEXT=1;s.MAV_ROI_WPINDEX=2;s.MAV_ROI_LOCATION=3;s.MAV_ROI_TARGET=4;s.MAV_ROI_ENUM_END=5;s.MAV_PARAM_TYPE_UINT8=1;s.MAV_PARAM_TYPE_INT8=2;s.MAV_PARAM_TYPE_UINT16=3;s.MAV_PARAM_TYPE_INT16=4;s.MAV_PARAM_TYPE_UINT32=5;s.MAV_PARAM_TYPE_INT32=6;s.MAV_PARAM_TYPE_UINT64=7;s.MAV_PARAM_TYPE_INT64=8;s.MAV_PARAM_TYPE_REAL32=9;s.MAV_PARAM_TYPE_REAL64=10;s.MAV_PARAM_TYPE_ENUM_END=11;s.MAV_PARAM_EXT_TYPE_UINT8=1;s.MAV_PARAM_EXT_TYPE_INT8=2;s.MAV_PARAM_EXT_TYPE_UINT16=3;s.MAV_PARAM_EXT_TYPE_INT16=4;s.MAV_PARAM_EXT_TYPE_UINT32=5;s.MAV_PARAM_EXT_TYPE_INT32=6;s.MAV_PARAM_EXT_TYPE_UINT64=7;s.MAV_PARAM_EXT_TYPE_INT64=8;s.MAV_PARAM_EXT_TYPE_REAL32=9;s.MAV_PARAM_EXT_TYPE_REAL64=10;s.MAV_PARAM_EXT_TYPE_CUSTOM=11;s.MAV_PARAM_EXT_TYPE_ENUM_END=12;s.MAV_RESULT_ACCEPTED=0;s.MAV_RESULT_TEMPORARILY_REJECTED=1;s.MAV_RESULT_DENIED=2;s.MAV_RESULT_UNSUPPORTED=3;s.MAV_RESULT_FAILED=4;s.MAV_RESULT_IN_PROGRESS=5;s.MAV_RESULT_COMMAND_LONG_ONLY=7;s.MAV_RESULT_COMMAND_INT_ONLY=8;s.MAV_RESULT_ENUM_END=9;s.MAV_MISSION_ACCEPTED=0;s.MAV_MISSION_ERROR=1;s.MAV_MISSION_UNSUPPORTED_FRAME=2;s.MAV_MISSION_UNSUPPORTED=3;s.MAV_MISSION_NO_SPACE=4;s.MAV_MISSION_INVALID=5;s.MAV_MISSION_INVALID_PARAM1=6;s.MAV_MISSION_INVALID_PARAM2=7;s.MAV_MISSION_INVALID_PARAM3=8;s.MAV_MISSION_INVALID_PARAM4=9;s.MAV_MISSION_INVALID_PARAM5_X=10;s.MAV_MISSION_INVALID_PARAM6_Y=11;s.MAV_MISSION_INVALID_PARAM7=12;s.MAV_MISSION_INVALID_SEQUENCE=13;s.MAV_MISSION_DENIED=14;s.MAV_MISSION_OPERATION_CANCELLED=15;s.MAV_MISSION_RESULT_ENUM_END=16;s.MAV_SEVERITY_EMERGENCY=0;s.MAV_SEVERITY_ALERT=1;s.MAV_SEVERITY_CRITICAL=2;s.MAV_SEVERITY_ERROR=3;s.MAV_SEVERITY_WARNING=4;s.MAV_SEVERITY_NOTICE=5;s.MAV_SEVERITY_INFO=6;s.MAV_SEVERITY_DEBUG=7;s.MAV_SEVERITY_ENUM_END=8;s.MAV_POWER_STATUS_BRICK_VALID=1;s.MAV_POWER_STATUS_SERVO_VALID=2;s.MAV_POWER_STATUS_USB_CONNECTED=4;s.MAV_POWER_STATUS_PERIPH_OVERCURRENT=8;s.MAV_POWER_STATUS_PERIPH_HIPOWER_OVERCURRENT=16;s.MAV_POWER_STATUS_CHANGED=32;s.MAV_POWER_STATUS_ENUM_END=33;s.SERIAL_CONTROL_DEV_TELEM1=0;s.SERIAL_CONTROL_DEV_TELEM2=1;s.SERIAL_CONTROL_DEV_GPS1=2;s.SERIAL_CONTROL_DEV_GPS2=3;s.SERIAL_CONTROL_DEV_SHELL=10;s.SERIAL_CONTROL_SERIAL0=100;s.SERIAL_CONTROL_SERIAL1=101;s.SERIAL_CONTROL_SERIAL2=102;s.SERIAL_CONTROL_SERIAL3=103;s.SERIAL_CONTROL_SERIAL4=104;s.SERIAL_CONTROL_SERIAL5=105;s.SERIAL_CONTROL_SERIAL6=106;s.SERIAL_CONTROL_SERIAL7=107;s.SERIAL_CONTROL_SERIAL8=108;s.SERIAL_CONTROL_SERIAL9=109;s.SERIAL_CONTROL_DEV_ENUM_END=110;s.SERIAL_CONTROL_FLAG_REPLY=1;s.SERIAL_CONTROL_FLAG_RESPOND=2;s.SERIAL_CONTROL_FLAG_EXCLUSIVE=4;s.SERIAL_CONTROL_FLAG_BLOCKING=8;s.SERIAL_CONTROL_FLAG_MULTI=16;s.SERIAL_CONTROL_FLAG_ENUM_END=17;s.MAV_DISTANCE_SENSOR_LASER=0;s.MAV_DISTANCE_SENSOR_ULTRASOUND=1;s.MAV_DISTANCE_SENSOR_INFRARED=2;s.MAV_DISTANCE_SENSOR_RADAR=3;s.MAV_DISTANCE_SENSOR_UNKNOWN=4;s.MAV_DISTANCE_SENSOR_ENUM_END=5;s.MAV_SENSOR_ROTATION_NONE=0;s.MAV_SENSOR_ROTATION_YAW_45=1;s.MAV_SENSOR_ROTATION_YAW_90=2;s.MAV_SENSOR_ROTATION_YAW_135=3;s.MAV_SENSOR_ROTATION_YAW_180=4;s.MAV_SENSOR_ROTATION_YAW_225=5;s.MAV_SENSOR_ROTATION_YAW_270=6;s.MAV_SENSOR_ROTATION_YAW_315=7;s.MAV_SENSOR_ROTATION_ROLL_180=8;s.MAV_SENSOR_ROTATION_ROLL_180_YAW_45=9;s.MAV_SENSOR_ROTATION_ROLL_180_YAW_90=10;s.MAV_SENSOR_ROTATION_ROLL_180_YAW_135=11;s.MAV_SENSOR_ROTATION_PITCH_180=12;s.MAV_SENSOR_ROTATION_ROLL_180_YAW_225=13;s.MAV_SENSOR_ROTATION_ROLL_180_YAW_270=14;s.MAV_SENSOR_ROTATION_ROLL_180_YAW_315=15;s.MAV_SENSOR_ROTATION_ROLL_90=16;s.MAV_SENSOR_ROTATION_ROLL_90_YAW_45=17;s.MAV_SENSOR_ROTATION_ROLL_90_YAW_90=18;s.MAV_SENSOR_ROTATION_ROLL_90_YAW_135=19;s.MAV_SENSOR_ROTATION_ROLL_270=20;s.MAV_SENSOR_ROTATION_ROLL_270_YAW_45=21;s.MAV_SENSOR_ROTATION_ROLL_270_YAW_90=22;s.MAV_SENSOR_ROTATION_ROLL_270_YAW_135=23;s.MAV_SENSOR_ROTATION_PITCH_90=24;s.MAV_SENSOR_ROTATION_PITCH_270=25;s.MAV_SENSOR_ROTATION_PITCH_180_YAW_90=26;s.MAV_SENSOR_ROTATION_PITCH_180_YAW_270=27;s.MAV_SENSOR_ROTATION_ROLL_90_PITCH_90=28;s.MAV_SENSOR_ROTATION_ROLL_180_PITCH_90=29;s.MAV_SENSOR_ROTATION_ROLL_270_PITCH_90=30;s.MAV_SENSOR_ROTATION_ROLL_90_PITCH_180=31;s.MAV_SENSOR_ROTATION_ROLL_270_PITCH_180=32;s.MAV_SENSOR_ROTATION_ROLL_90_PITCH_270=33;s.MAV_SENSOR_ROTATION_ROLL_180_PITCH_270=34;s.MAV_SENSOR_ROTATION_ROLL_270_PITCH_270=35;s.MAV_SENSOR_ROTATION_ROLL_90_PITCH_180_YAW_90=36;s.MAV_SENSOR_ROTATION_ROLL_90_YAW_270=37;s.MAV_SENSOR_ROTATION_ROLL_90_PITCH_68_YAW_293=38;s.MAV_SENSOR_ROTATION_PITCH_315=39;s.MAV_SENSOR_ROTATION_ROLL_90_PITCH_315=40;s.MAV_SENSOR_ROTATION_CUSTOM=100;s.MAV_SENSOR_ORIENTATION_ENUM_END=101;s.MAV_PROTOCOL_CAPABILITY_MISSION_FLOAT=1;s.MAV_PROTOCOL_CAPABILITY_PARAM_FLOAT=2;s.MAV_PROTOCOL_CAPABILITY_MISSION_INT=4;s.MAV_PROTOCOL_CAPABILITY_COMMAND_INT=8;s.MAV_PROTOCOL_CAPABILITY_PARAM_UNION=16;s.MAV_PROTOCOL_CAPABILITY_FTP=32;s.MAV_PROTOCOL_CAPABILITY_SET_ATTITUDE_TARGET=64;s.MAV_PROTOCOL_CAPABILITY_SET_POSITION_TARGET_LOCAL_NED=128;s.MAV_PROTOCOL_CAPABILITY_SET_POSITION_TARGET_GLOBAL_INT=256;s.MAV_PROTOCOL_CAPABILITY_TERRAIN=512;s.MAV_PROTOCOL_CAPABILITY_SET_ACTUATOR_TARGET=1024;s.MAV_PROTOCOL_CAPABILITY_FLIGHT_TERMINATION=2048;s.MAV_PROTOCOL_CAPABILITY_COMPASS_CALIBRATION=4096;s.MAV_PROTOCOL_CAPABILITY_MAVLINK2=8192;s.MAV_PROTOCOL_CAPABILITY_MISSION_FENCE=16384;s.MAV_PROTOCOL_CAPABILITY_MISSION_RALLY=32768;s.MAV_PROTOCOL_CAPABILITY_FLIGHT_INFORMATION=65536;s.MAV_PROTOCOL_CAPABILITY_ENUM_END=65537;s.MAV_MISSION_TYPE_MISSION=0;s.MAV_MISSION_TYPE_FENCE=1;s.MAV_MISSION_TYPE_RALLY=2;s.MAV_MISSION_TYPE_ALL=255;s.MAV_MISSION_TYPE_ENUM_END=256;s.MAV_ESTIMATOR_TYPE_UNKNOWN=0;s.MAV_ESTIMATOR_TYPE_NAIVE=1;s.MAV_ESTIMATOR_TYPE_VISION=2;s.MAV_ESTIMATOR_TYPE_VIO=3;s.MAV_ESTIMATOR_TYPE_GPS=4;s.MAV_ESTIMATOR_TYPE_GPS_INS=5;s.MAV_ESTIMATOR_TYPE_MOCAP=6;s.MAV_ESTIMATOR_TYPE_LIDAR=7;s.MAV_ESTIMATOR_TYPE_AUTOPILOT=8;s.MAV_ESTIMATOR_TYPE_ENUM_END=9;s.MAV_BATTERY_TYPE_UNKNOWN=0;s.MAV_BATTERY_TYPE_LIPO=1;s.MAV_BATTERY_TYPE_LIFE=2;s.MAV_BATTERY_TYPE_LION=3;s.MAV_BATTERY_TYPE_NIMH=4;s.MAV_BATTERY_TYPE_ENUM_END=5;s.MAV_BATTERY_FUNCTION_UNKNOWN=0;s.MAV_BATTERY_FUNCTION_ALL=1;s.MAV_BATTERY_FUNCTION_PROPULSION=2;s.MAV_BATTERY_FUNCTION_AVIONICS=3;s.MAV_BATTERY_TYPE_PAYLOAD=4;s.MAV_BATTERY_FUNCTION_ENUM_END=5;s.MAV_BATTERY_CHARGE_STATE_UNDEFINED=0;s.MAV_BATTERY_CHARGE_STATE_OK=1;s.MAV_BATTERY_CHARGE_STATE_LOW=2;s.MAV_BATTERY_CHARGE_STATE_CRITICAL=3;s.MAV_BATTERY_CHARGE_STATE_EMERGENCY=4;s.MAV_BATTERY_CHARGE_STATE_FAILED=5;s.MAV_BATTERY_CHARGE_STATE_UNHEALTHY=6;s.MAV_BATTERY_CHARGE_STATE_CHARGING=7;s.MAV_BATTERY_CHARGE_STATE_ENUM_END=8;s.MAV_BATTERY_MODE_UNKNOWN=0;s.MAV_BATTERY_MODE_AUTO_DISCHARGING=1;s.MAV_BATTERY_MODE_HOT_SWAP=2;s.MAV_BATTERY_MODE_ENUM_END=3;s.MAV_BATTERY_FAULT_DEEP_DISCHARGE=1;s.MAV_BATTERY_FAULT_SPIKES=2;s.MAV_BATTERY_FAULT_CELL_FAIL=4;s.MAV_BATTERY_FAULT_OVER_CURRENT=8;s.MAV_BATTERY_FAULT_OVER_TEMPERATURE=16;s.MAV_BATTERY_FAULT_UNDER_TEMPERATURE=32;s.MAV_BATTERY_FAULT_INCOMPATIBLE_VOLTAGE=64;s.MAV_BATTERY_FAULT_INCOMPATIBLE_FIRMWARE=128;s.BATTERY_FAULT_INCOMPATIBLE_CELLS_CONFIGURATION=256;s.MAV_BATTERY_FAULT_ENUM_END=257;s.MAV_GENERATOR_STATUS_FLAG_OFF=1;s.MAV_GENERATOR_STATUS_FLAG_READY=2;s.MAV_GENERATOR_STATUS_FLAG_GENERATING=4;s.MAV_GENERATOR_STATUS_FLAG_CHARGING=8;s.MAV_GENERATOR_STATUS_FLAG_REDUCED_POWER=16;s.MAV_GENERATOR_STATUS_FLAG_MAXPOWER=32;s.MAV_GENERATOR_STATUS_FLAG_OVERTEMP_WARNING=64;s.MAV_GENERATOR_STATUS_FLAG_OVERTEMP_FAULT=128;s.MAV_GENERATOR_STATUS_FLAG_ELECTRONICS_OVERTEMP_WARNING=256;s.MAV_GENERATOR_STATUS_FLAG_ELECTRONICS_OVERTEMP_FAULT=512;s.MAV_GENERATOR_STATUS_FLAG_ELECTRONICS_FAULT=1024;s.MAV_GENERATOR_STATUS_FLAG_POWERSOURCE_FAULT=2048;s.MAV_GENERATOR_STATUS_FLAG_COMMUNICATION_WARNING=4096;s.MAV_GENERATOR_STATUS_FLAG_COOLING_WARNING=8192;s.MAV_GENERATOR_STATUS_FLAG_POWER_RAIL_FAULT=16384;s.MAV_GENERATOR_STATUS_FLAG_OVERCURRENT_FAULT=32768;s.MAV_GENERATOR_STATUS_FLAG_BATTERY_OVERCHARGE_CURRENT_FAULT=65536;s.MAV_GENERATOR_STATUS_FLAG_OVERVOLTAGE_FAULT=131072;s.MAV_GENERATOR_STATUS_FLAG_BATTERY_UNDERVOLT_FAULT=262144;s.MAV_GENERATOR_STATUS_FLAG_START_INHIBITED=524288;s.MAV_GENERATOR_STATUS_FLAG_MAINTENANCE_REQUIRED=1048576;s.MAV_GENERATOR_STATUS_FLAG_WARMING_UP=2097152;s.MAV_GENERATOR_STATUS_FLAG_IDLE=4194304;s.MAV_GENERATOR_STATUS_FLAG_ENUM_END=4194305;s.MAV_VTOL_STATE_UNDEFINED=0;s.MAV_VTOL_STATE_TRANSITION_TO_FW=1;s.MAV_VTOL_STATE_TRANSITION_TO_MC=2;s.MAV_VTOL_STATE_MC=3;s.MAV_VTOL_STATE_FW=4;s.MAV_VTOL_STATE_ENUM_END=5;s.MAV_LANDED_STATE_UNDEFINED=0;s.MAV_LANDED_STATE_ON_GROUND=1;s.MAV_LANDED_STATE_IN_AIR=2;s.MAV_LANDED_STATE_TAKEOFF=3;s.MAV_LANDED_STATE_LANDING=4;s.MAV_LANDED_STATE_ENUM_END=5;s.ADSB_ALTITUDE_TYPE_PRESSURE_QNH=0;s.ADSB_ALTITUDE_TYPE_GEOMETRIC=1;s.ADSB_ALTITUDE_TYPE_ENUM_END=2;s.ADSB_EMITTER_TYPE_NO_INFO=0;s.ADSB_EMITTER_TYPE_LIGHT=1;s.ADSB_EMITTER_TYPE_SMALL=2;s.ADSB_EMITTER_TYPE_LARGE=3;s.ADSB_EMITTER_TYPE_HIGH_VORTEX_LARGE=4;s.ADSB_EMITTER_TYPE_HEAVY=5;s.ADSB_EMITTER_TYPE_HIGHLY_MANUV=6;s.ADSB_EMITTER_TYPE_ROTOCRAFT=7;s.ADSB_EMITTER_TYPE_UNASSIGNED=8;s.ADSB_EMITTER_TYPE_GLIDER=9;s.ADSB_EMITTER_TYPE_LIGHTER_AIR=10;s.ADSB_EMITTER_TYPE_PARACHUTE=11;s.ADSB_EMITTER_TYPE_ULTRA_LIGHT=12;s.ADSB_EMITTER_TYPE_UNASSIGNED2=13;s.ADSB_EMITTER_TYPE_UAV=14;s.ADSB_EMITTER_TYPE_SPACE=15;s.ADSB_EMITTER_TYPE_UNASSGINED3=16;s.ADSB_EMITTER_TYPE_EMERGENCY_SURFACE=17;s.ADSB_EMITTER_TYPE_SERVICE_SURFACE=18;s.ADSB_EMITTER_TYPE_POINT_OBSTACLE=19;s.ADSB_EMITTER_TYPE_ENUM_END=20;s.ADSB_FLAGS_VALID_COORDS=1;s.ADSB_FLAGS_VALID_ALTITUDE=2;s.ADSB_FLAGS_VALID_HEADING=4;s.ADSB_FLAGS_VALID_VELOCITY=8;s.ADSB_FLAGS_VALID_CALLSIGN=16;s.ADSB_FLAGS_VALID_SQUAWK=32;s.ADSB_FLAGS_SIMULATED=64;s.ADSB_FLAGS_VERTICAL_VELOCITY_VALID=128;s.ADSB_FLAGS_BARO_VALID=256;s.ADSB_FLAGS_SOURCE_UAT=32768;s.ADSB_FLAGS_ENUM_END=32769;s.MAV_DO_REPOSITION_FLAGS_CHANGE_MODE=1;s.MAV_DO_REPOSITION_FLAGS_ENUM_END=2;s.SPEED_TYPE_AIRSPEED=0;s.SPEED_TYPE_GROUNDSPEED=1;s.SPEED_TYPE_CLIMB_SPEED=2;s.SPEED_TYPE_DESCENT_SPEED=3;s.SPEED_TYPE_ENUM_END=4;s.ESTIMATOR_ATTITUDE=1;s.ESTIMATOR_VELOCITY_HORIZ=2;s.ESTIMATOR_VELOCITY_VERT=4;s.ESTIMATOR_POS_HORIZ_REL=8;s.ESTIMATOR_POS_HORIZ_ABS=16;s.ESTIMATOR_POS_VERT_ABS=32;s.ESTIMATOR_POS_VERT_AGL=64;s.ESTIMATOR_CONST_POS_MODE=128;s.ESTIMATOR_PRED_POS_HORIZ_REL=256;s.ESTIMATOR_PRED_POS_HORIZ_ABS=512;s.ESTIMATOR_GPS_GLITCH=1024;s.ESTIMATOR_ACCEL_ERROR=2048;s.ESTIMATOR_STATUS_FLAGS_ENUM_END=2049;s.MOTOR_TEST_ORDER_DEFAULT=0;s.MOTOR_TEST_ORDER_SEQUENCE=1;s.MOTOR_TEST_ORDER_BOARD=2;s.MOTOR_TEST_ORDER_ENUM_END=3;s.MOTOR_TEST_THROTTLE_PERCENT=0;s.MOTOR_TEST_THROTTLE_PWM=1;s.MOTOR_TEST_THROTTLE_PILOT=2;s.MOTOR_TEST_COMPASS_CAL=3;s.MOTOR_TEST_THROTTLE_TYPE_ENUM_END=4;s.GPS_INPUT_IGNORE_FLAG_ALT=1;s.GPS_INPUT_IGNORE_FLAG_HDOP=2;s.GPS_INPUT_IGNORE_FLAG_VDOP=4;s.GPS_INPUT_IGNORE_FLAG_VEL_HORIZ=8;s.GPS_INPUT_IGNORE_FLAG_VEL_VERT=16;s.GPS_INPUT_IGNORE_FLAG_SPEED_ACCURACY=32;s.GPS_INPUT_IGNORE_FLAG_HORIZONTAL_ACCURACY=64;s.GPS_INPUT_IGNORE_FLAG_VERTICAL_ACCURACY=128;s.GPS_INPUT_IGNORE_FLAGS_ENUM_END=129;s.MAV_COLLISION_ACTION_NONE=0;s.MAV_COLLISION_ACTION_REPORT=1;s.MAV_COLLISION_ACTION_ASCEND_OR_DESCEND=2;s.MAV_COLLISION_ACTION_MOVE_HORIZONTALLY=3;s.MAV_COLLISION_ACTION_MOVE_PERPENDICULAR=4;s.MAV_COLLISION_ACTION_RTL=5;s.MAV_COLLISION_ACTION_HOVER=6;s.MAV_COLLISION_ACTION_ENUM_END=7;s.MAV_COLLISION_THREAT_LEVEL_NONE=0;s.MAV_COLLISION_THREAT_LEVEL_LOW=1;s.MAV_COLLISION_THREAT_LEVEL_HIGH=2;s.MAV_COLLISION_THREAT_LEVEL_ENUM_END=3;s.MAV_COLLISION_SRC_ADSB=0;s.MAV_COLLISION_SRC_MAVLINK_GPS_GLOBAL_INT=1;s.MAV_COLLISION_SRC_ENUM_END=2;s.GPS_FIX_TYPE_NO_GPS=0;s.GPS_FIX_TYPE_NO_FIX=1;s.GPS_FIX_TYPE_2D_FIX=2;s.GPS_FIX_TYPE_3D_FIX=3;s.GPS_FIX_TYPE_DGPS=4;s.GPS_FIX_TYPE_RTK_FLOAT=5;s.GPS_FIX_TYPE_RTK_FIXED=6;s.GPS_FIX_TYPE_STATIC=7;s.GPS_FIX_TYPE_PPP=8;s.GPS_FIX_TYPE_ENUM_END=9;s.RTK_BASELINE_COORDINATE_SYSTEM_ECEF=0;s.RTK_BASELINE_COORDINATE_SYSTEM_NED=1;s.RTK_BASELINE_COORDINATE_SYSTEM_ENUM_END=2;s.LANDING_TARGET_TYPE_LIGHT_BEACON=0;s.LANDING_TARGET_TYPE_RADIO_BEACON=1;s.LANDING_TARGET_TYPE_VISION_FIDUCIAL=2;s.LANDING_TARGET_TYPE_VISION_OTHER=3;s.LANDING_TARGET_TYPE_ENUM_END=4;s.VTOL_TRANSITION_HEADING_VEHICLE_DEFAULT=0;s.VTOL_TRANSITION_HEADING_NEXT_WAYPOINT=1;s.VTOL_TRANSITION_HEADING_TAKEOFF=2;s.VTOL_TRANSITION_HEADING_SPECIFIED=3;s.VTOL_TRANSITION_HEADING_ANY=4;s.VTOL_TRANSITION_HEADING_ENUM_END=5;s.CAMERA_CAP_FLAGS_CAPTURE_VIDEO=1;s.CAMERA_CAP_FLAGS_CAPTURE_IMAGE=2;s.CAMERA_CAP_FLAGS_HAS_MODES=4;s.CAMERA_CAP_FLAGS_CAN_CAPTURE_IMAGE_IN_VIDEO_MODE=8;s.CAMERA_CAP_FLAGS_CAN_CAPTURE_VIDEO_IN_IMAGE_MODE=16;s.CAMERA_CAP_FLAGS_HAS_IMAGE_SURVEY_MODE=32;s.CAMERA_CAP_FLAGS_HAS_BASIC_ZOOM=64;s.CAMERA_CAP_FLAGS_HAS_BASIC_FOCUS=128;s.CAMERA_CAP_FLAGS_HAS_VIDEO_STREAM=256;s.CAMERA_CAP_FLAGS_HAS_TRACKING_POINT=512;s.CAMERA_CAP_FLAGS_HAS_TRACKING_RECTANGLE=1024;s.CAMERA_CAP_FLAGS_HAS_TRACKING_GEO_STATUS=2048;s.CAMERA_CAP_FLAGS_ENUM_END=2049;s.VIDEO_STREAM_STATUS_FLAGS_RUNNING=1;s.VIDEO_STREAM_STATUS_FLAGS_THERMAL=2;s.VIDEO_STREAM_STATUS_FLAGS_ENUM_END=3;s.VIDEO_STREAM_TYPE_RTSP=0;s.VIDEO_STREAM_TYPE_RTPUDP=1;s.VIDEO_STREAM_TYPE_TCP_MPEG=2;s.VIDEO_STREAM_TYPE_MPEG_TS_H264=3;s.VIDEO_STREAM_TYPE_ENUM_END=4;s.CAMERA_TRACKING_STATUS_FLAGS_IDLE=0;s.CAMERA_TRACKING_STATUS_FLAGS_ACTIVE=1;s.CAMERA_TRACKING_STATUS_FLAGS_ERROR=2;s.CAMERA_TRACKING_STATUS_FLAGS_ENUM_END=3;s.CAMERA_TRACKING_MODE_NONE=0;s.CAMERA_TRACKING_MODE_POINT=1;s.CAMERA_TRACKING_MODE_RECTANGLE=2;s.CAMERA_TRACKING_MODE_ENUM_END=3;s.CAMERA_TRACKING_TARGET_DATA_NONE=0;s.CAMERA_TRACKING_TARGET_DATA_EMBEDDED=1;s.CAMERA_TRACKING_TARGET_DATA_RENDERED=2;s.CAMERA_TRACKING_TARGET_DATA_IN_STATUS=4;s.CAMERA_TRACKING_TARGET_DATA_ENUM_END=5;s.ZOOM_TYPE_STEP=0;s.ZOOM_TYPE_CONTINUOUS=1;s.ZOOM_TYPE_RANGE=2;s.ZOOM_TYPE_FOCAL_LENGTH=3;s.CAMERA_ZOOM_TYPE_ENUM_END=4;s.FOCUS_TYPE_STEP=0;s.FOCUS_TYPE_CONTINUOUS=1;s.FOCUS_TYPE_RANGE=2;s.FOCUS_TYPE_METERS=3;s.FOCUS_TYPE_AUTO=4;s.FOCUS_TYPE_AUTO_SINGLE=5;s.FOCUS_TYPE_AUTO_CONTINUOUS=6;s.SET_FOCUS_TYPE_ENUM_END=7;s.CAMERA_SOURCE_DEFAULT=0;s.CAMERA_SOURCE_RGB=1;s.CAMERA_SOURCE_IR=2;s.CAMERA_SOURCE_NDVI=3;s.CAMERA_SOURCE_ENUM_END=4;s.PARAM_ACK_ACCEPTED=0;s.PARAM_ACK_VALUE_UNSUPPORTED=1;s.PARAM_ACK_FAILED=2;s.PARAM_ACK_IN_PROGRESS=3;s.PARAM_ACK_ENUM_END=4;s.CAMERA_MODE_IMAGE=0;s.CAMERA_MODE_VIDEO=1;s.CAMERA_MODE_IMAGE_SURVEY=2;s.CAMERA_MODE_ENUM_END=3;s.MAV_ARM_AUTH_DENIED_REASON_GENERIC=0;s.MAV_ARM_AUTH_DENIED_REASON_NONE=1;s.MAV_ARM_AUTH_DENIED_REASON_INVALID_WAYPOINT=2;s.MAV_ARM_AUTH_DENIED_REASON_TIMEOUT=3;s.MAV_ARM_AUTH_DENIED_REASON_AIRSPACE_IN_USE=4;s.MAV_ARM_AUTH_DENIED_REASON_BAD_WEATHER=5;s.MAV_ARM_AUTH_DENIED_REASON_ENUM_END=6;s.RC_TYPE_SPEKTRUM_DSM2=0;s.RC_TYPE_SPEKTRUM_DSMX=1;s.RC_TYPE_ENUM_END=2;s.ENGINE_CONTROL_OPTIONS_ALLOW_START_WHILE_DISARMED=1;s.ENGINE_CONTROL_OPTIONS_ENUM_END=2;s.POSITION_TARGET_TYPEMASK_X_IGNORE=1;s.POSITION_TARGET_TYPEMASK_Y_IGNORE=2;s.POSITION_TARGET_TYPEMASK_Z_IGNORE=4;s.POSITION_TARGET_TYPEMASK_VX_IGNORE=8;s.POSITION_TARGET_TYPEMASK_VY_IGNORE=16;s.POSITION_TARGET_TYPEMASK_VZ_IGNORE=32;s.POSITION_TARGET_TYPEMASK_AX_IGNORE=64;s.POSITION_TARGET_TYPEMASK_AY_IGNORE=128;s.POSITION_TARGET_TYPEMASK_AZ_IGNORE=256;s.POSITION_TARGET_TYPEMASK_FORCE_SET=512;s.POSITION_TARGET_TYPEMASK_YAW_IGNORE=1024;s.POSITION_TARGET_TYPEMASK_YAW_RATE_IGNORE=2048;s.POSITION_TARGET_TYPEMASK_ENUM_END=2049;s.ATTITUDE_TARGET_TYPEMASK_BODY_ROLL_RATE_IGNORE=1;s.ATTITUDE_TARGET_TYPEMASK_BODY_PITCH_RATE_IGNORE=2;s.ATTITUDE_TARGET_TYPEMASK_BODY_YAW_RATE_IGNORE=4;s.ATTITUDE_TARGET_TYPEMASK_THROTTLE_IGNORE=64;s.ATTITUDE_TARGET_TYPEMASK_ATTITUDE_IGNORE=128;s.ATTITUDE_TARGET_TYPEMASK_ENUM_END=129;s.UTM_FLIGHT_STATE_UNKNOWN=1;s.UTM_FLIGHT_STATE_GROUND=2;s.UTM_FLIGHT_STATE_AIRBORNE=3;s.UTM_FLIGHT_STATE_EMERGENCY=16;s.UTM_FLIGHT_STATE_NOCTRL=32;s.UTM_FLIGHT_STATE_ENUM_END=33;s.UTM_DATA_AVAIL_FLAGS_TIME_VALID=1;s.UTM_DATA_AVAIL_FLAGS_UAS_ID_AVAILABLE=2;s.UTM_DATA_AVAIL_FLAGS_POSITION_AVAILABLE=4;s.UTM_DATA_AVAIL_FLAGS_ALTITUDE_AVAILABLE=8;s.UTM_DATA_AVAIL_FLAGS_RELATIVE_ALTITUDE_AVAILABLE=16;s.UTM_DATA_AVAIL_FLAGS_HORIZONTAL_VELO_AVAILABLE=32;s.UTM_DATA_AVAIL_FLAGS_VERTICAL_VELO_AVAILABLE=64;s.UTM_DATA_AVAIL_FLAGS_NEXT_WAYPOINT_AVAILABLE=128;s.UTM_DATA_AVAIL_FLAGS_ENUM_END=129;s.PRECISION_LAND_MODE_DISABLED=0;s.PRECISION_LAND_MODE_OPPORTUNISTIC=1;s.PRECISION_LAND_MODE_REQUIRED=2;s.PRECISION_LAND_MODE_ENUM_END=3;s.PARACHUTE_DISABLE=0;s.PARACHUTE_ENABLE=1;s.PARACHUTE_RELEASE=2;s.PARACHUTE_ACTION_ENUM_END=3;s.MAV_TUNNEL_PAYLOAD_TYPE_UNKNOWN=0;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED0=200;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED1=201;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED2=202;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED3=203;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED4=204;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED5=205;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED6=206;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED7=207;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED8=208;s.MAV_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED9=209;s.MAV_TUNNEL_PAYLOAD_TYPE_ENUM_END=210;s.MAV_ODID_ID_TYPE_NONE=0;s.MAV_ODID_ID_TYPE_SERIAL_NUMBER=1;s.MAV_ODID_ID_TYPE_CAA_REGISTRATION_ID=2;s.MAV_ODID_ID_TYPE_UTM_ASSIGNED_UUID=3;s.MAV_ODID_ID_TYPE_SPECIFIC_SESSION_ID=4;s.MAV_ODID_ID_TYPE_ENUM_END=5;s.MAV_ODID_UA_TYPE_NONE=0;s.MAV_ODID_UA_TYPE_AEROPLANE=1;s.MAV_ODID_UA_TYPE_HELICOPTER_OR_MULTIROTOR=2;s.MAV_ODID_UA_TYPE_GYROPLANE=3;s.MAV_ODID_UA_TYPE_HYBRID_LIFT=4;s.MAV_ODID_UA_TYPE_ORNITHOPTER=5;s.MAV_ODID_UA_TYPE_GLIDER=6;s.MAV_ODID_UA_TYPE_KITE=7;s.MAV_ODID_UA_TYPE_FREE_BALLOON=8;s.MAV_ODID_UA_TYPE_CAPTIVE_BALLOON=9;s.MAV_ODID_UA_TYPE_AIRSHIP=10;s.MAV_ODID_UA_TYPE_FREE_FALL_PARACHUTE=11;s.MAV_ODID_UA_TYPE_ROCKET=12;s.MAV_ODID_UA_TYPE_TETHERED_POWERED_AIRCRAFT=13;s.MAV_ODID_UA_TYPE_GROUND_OBSTACLE=14;s.MAV_ODID_UA_TYPE_OTHER=15;s.MAV_ODID_UA_TYPE_ENUM_END=16;s.MAV_ODID_STATUS_UNDECLARED=0;s.MAV_ODID_STATUS_GROUND=1;s.MAV_ODID_STATUS_AIRBORNE=2;s.MAV_ODID_STATUS_EMERGENCY=3;s.MAV_ODID_STATUS_REMOTE_ID_SYSTEM_FAILURE=4;s.MAV_ODID_STATUS_ENUM_END=5;s.MAV_ODID_HEIGHT_REF_OVER_TAKEOFF=0;s.MAV_ODID_HEIGHT_REF_OVER_GROUND=1;s.MAV_ODID_HEIGHT_REF_ENUM_END=2;s.MAV_ODID_HOR_ACC_UNKNOWN=0;s.MAV_ODID_HOR_ACC_10NM=1;s.MAV_ODID_HOR_ACC_4NM=2;s.MAV_ODID_HOR_ACC_2NM=3;s.MAV_ODID_HOR_ACC_1NM=4;s.MAV_ODID_HOR_ACC_0_5NM=5;s.MAV_ODID_HOR_ACC_0_3NM=6;s.MAV_ODID_HOR_ACC_0_1NM=7;s.MAV_ODID_HOR_ACC_0_05NM=8;s.MAV_ODID_HOR_ACC_30_METER=9;s.MAV_ODID_HOR_ACC_10_METER=10;s.MAV_ODID_HOR_ACC_3_METER=11;s.MAV_ODID_HOR_ACC_1_METER=12;s.MAV_ODID_HOR_ACC_ENUM_END=13;s.MAV_ODID_VER_ACC_UNKNOWN=0;s.MAV_ODID_VER_ACC_150_METER=1;s.MAV_ODID_VER_ACC_45_METER=2;s.MAV_ODID_VER_ACC_25_METER=3;s.MAV_ODID_VER_ACC_10_METER=4;s.MAV_ODID_VER_ACC_3_METER=5;s.MAV_ODID_VER_ACC_1_METER=6;s.MAV_ODID_VER_ACC_ENUM_END=7;s.MAV_ODID_SPEED_ACC_UNKNOWN=0;s.MAV_ODID_SPEED_ACC_10_METERS_PER_SECOND=1;s.MAV_ODID_SPEED_ACC_3_METERS_PER_SECOND=2;s.MAV_ODID_SPEED_ACC_1_METERS_PER_SECOND=3;s.MAV_ODID_SPEED_ACC_0_3_METERS_PER_SECOND=4;s.MAV_ODID_SPEED_ACC_ENUM_END=5;s.MAV_ODID_TIME_ACC_UNKNOWN=0;s.MAV_ODID_TIME_ACC_0_1_SECOND=1;s.MAV_ODID_TIME_ACC_0_2_SECOND=2;s.MAV_ODID_TIME_ACC_0_3_SECOND=3;s.MAV_ODID_TIME_ACC_0_4_SECOND=4;s.MAV_ODID_TIME_ACC_0_5_SECOND=5;s.MAV_ODID_TIME_ACC_0_6_SECOND=6;s.MAV_ODID_TIME_ACC_0_7_SECOND=7;s.MAV_ODID_TIME_ACC_0_8_SECOND=8;s.MAV_ODID_TIME_ACC_0_9_SECOND=9;s.MAV_ODID_TIME_ACC_1_0_SECOND=10;s.MAV_ODID_TIME_ACC_1_1_SECOND=11;s.MAV_ODID_TIME_ACC_1_2_SECOND=12;s.MAV_ODID_TIME_ACC_1_3_SECOND=13;s.MAV_ODID_TIME_ACC_1_4_SECOND=14;s.MAV_ODID_TIME_ACC_1_5_SECOND=15;s.MAV_ODID_TIME_ACC_ENUM_END=16;s.MAV_ODID_AUTH_TYPE_NONE=0;s.MAV_ODID_AUTH_TYPE_UAS_ID_SIGNATURE=1;s.MAV_ODID_AUTH_TYPE_OPERATOR_ID_SIGNATURE=2;s.MAV_ODID_AUTH_TYPE_MESSAGE_SET_SIGNATURE=3;s.MAV_ODID_AUTH_TYPE_NETWORK_REMOTE_ID=4;s.MAV_ODID_AUTH_TYPE_SPECIFIC_AUTHENTICATION=5;s.MAV_ODID_AUTH_TYPE_ENUM_END=6;s.MAV_ODID_DESC_TYPE_TEXT=0;s.MAV_ODID_DESC_TYPE_EMERGENCY=1;s.MAV_ODID_DESC_TYPE_EXTENDED_STATUS=2;s.MAV_ODID_DESC_TYPE_ENUM_END=3;s.MAV_ODID_OPERATOR_LOCATION_TYPE_TAKEOFF=0;s.MAV_ODID_OPERATOR_LOCATION_TYPE_LIVE_GNSS=1;s.MAV_ODID_OPERATOR_LOCATION_TYPE_FIXED=2;s.MAV_ODID_OPERATOR_LOCATION_TYPE_ENUM_END=3;s.MAV_ODID_CLASSIFICATION_TYPE_UNDECLARED=0;s.MAV_ODID_CLASSIFICATION_TYPE_EU=1;s.MAV_ODID_CLASSIFICATION_TYPE_ENUM_END=2;s.MAV_ODID_CATEGORY_EU_UNDECLARED=0;s.MAV_ODID_CATEGORY_EU_OPEN=1;s.MAV_ODID_CATEGORY_EU_SPECIFIC=2;s.MAV_ODID_CATEGORY_EU_CERTIFIED=3;s.MAV_ODID_CATEGORY_EU_ENUM_END=4;s.MAV_ODID_CLASS_EU_UNDECLARED=0;s.MAV_ODID_CLASS_EU_CLASS_0=1;s.MAV_ODID_CLASS_EU_CLASS_1=2;s.MAV_ODID_CLASS_EU_CLASS_2=3;s.MAV_ODID_CLASS_EU_CLASS_3=4;s.MAV_ODID_CLASS_EU_CLASS_4=5;s.MAV_ODID_CLASS_EU_CLASS_5=6;s.MAV_ODID_CLASS_EU_CLASS_6=7;s.MAV_ODID_CLASS_EU_ENUM_END=8;s.MAV_ODID_OPERATOR_ID_TYPE_CAA=0;s.MAV_ODID_OPERATOR_ID_TYPE_ENUM_END=1;s.MAV_ODID_ARM_STATUS_GOOD_TO_ARM=0;s.MAV_ODID_ARM_STATUS_PRE_ARM_FAIL_GENERIC=1;s.MAV_ODID_ARM_STATUS_ENUM_END=2;s.AIS_TYPE_UNKNOWN=0;s.AIS_TYPE_RESERVED_1=1;s.AIS_TYPE_RESERVED_2=2;s.AIS_TYPE_RESERVED_3=3;s.AIS_TYPE_RESERVED_4=4;s.AIS_TYPE_RESERVED_5=5;s.AIS_TYPE_RESERVED_6=6;s.AIS_TYPE_RESERVED_7=7;s.AIS_TYPE_RESERVED_8=8;s.AIS_TYPE_RESERVED_9=9;s.AIS_TYPE_RESERVED_10=10;s.AIS_TYPE_RESERVED_11=11;s.AIS_TYPE_RESERVED_12=12;s.AIS_TYPE_RESERVED_13=13;s.AIS_TYPE_RESERVED_14=14;s.AIS_TYPE_RESERVED_15=15;s.AIS_TYPE_RESERVED_16=16;s.AIS_TYPE_RESERVED_17=17;s.AIS_TYPE_RESERVED_18=18;s.AIS_TYPE_RESERVED_19=19;s.AIS_TYPE_WIG=20;s.AIS_TYPE_WIG_HAZARDOUS_A=21;s.AIS_TYPE_WIG_HAZARDOUS_B=22;s.AIS_TYPE_WIG_HAZARDOUS_C=23;s.AIS_TYPE_WIG_HAZARDOUS_D=24;s.AIS_TYPE_WIG_RESERVED_1=25;s.AIS_TYPE_WIG_RESERVED_2=26;s.AIS_TYPE_WIG_RESERVED_3=27;s.AIS_TYPE_WIG_RESERVED_4=28;s.AIS_TYPE_WIG_RESERVED_5=29;s.AIS_TYPE_FISHING=30;s.AIS_TYPE_TOWING=31;s.AIS_TYPE_TOWING_LARGE=32;s.AIS_TYPE_DREDGING=33;s.AIS_TYPE_DIVING=34;s.AIS_TYPE_MILITARY=35;s.AIS_TYPE_SAILING=36;s.AIS_TYPE_PLEASURE=37;s.AIS_TYPE_RESERVED_20=38;s.AIS_TYPE_RESERVED_21=39;s.AIS_TYPE_HSC=40;s.AIS_TYPE_HSC_HAZARDOUS_A=41;s.AIS_TYPE_HSC_HAZARDOUS_B=42;s.AIS_TYPE_HSC_HAZARDOUS_C=43;s.AIS_TYPE_HSC_HAZARDOUS_D=44;s.AIS_TYPE_HSC_RESERVED_1=45;s.AIS_TYPE_HSC_RESERVED_2=46;s.AIS_TYPE_HSC_RESERVED_3=47;s.AIS_TYPE_HSC_RESERVED_4=48;s.AIS_TYPE_HSC_UNKNOWN=49;s.AIS_TYPE_PILOT=50;s.AIS_TYPE_SAR=51;s.AIS_TYPE_TUG=52;s.AIS_TYPE_PORT_TENDER=53;s.AIS_TYPE_ANTI_POLLUTION=54;s.AIS_TYPE_LAW_ENFORCEMENT=55;s.AIS_TYPE_SPARE_LOCAL_1=56;s.AIS_TYPE_SPARE_LOCAL_2=57;s.AIS_TYPE_MEDICAL_TRANSPORT=58;s.AIS_TYPE_NONECOMBATANT=59;s.AIS_TYPE_PASSENGER=60;s.AIS_TYPE_PASSENGER_HAZARDOUS_A=61;s.AIS_TYPE_PASSENGER_HAZARDOUS_B=62;s.AIS_TYPE_AIS_TYPE_PASSENGER_HAZARDOUS_C=63;s.AIS_TYPE_PASSENGER_HAZARDOUS_D=64;s.AIS_TYPE_PASSENGER_RESERVED_1=65;s.AIS_TYPE_PASSENGER_RESERVED_2=66;s.AIS_TYPE_PASSENGER_RESERVED_3=67;s.AIS_TYPE_AIS_TYPE_PASSENGER_RESERVED_4=68;s.AIS_TYPE_PASSENGER_UNKNOWN=69;s.AIS_TYPE_CARGO=70;s.AIS_TYPE_CARGO_HAZARDOUS_A=71;s.AIS_TYPE_CARGO_HAZARDOUS_B=72;s.AIS_TYPE_CARGO_HAZARDOUS_C=73;s.AIS_TYPE_CARGO_HAZARDOUS_D=74;s.AIS_TYPE_CARGO_RESERVED_1=75;s.AIS_TYPE_CARGO_RESERVED_2=76;s.AIS_TYPE_CARGO_RESERVED_3=77;s.AIS_TYPE_CARGO_RESERVED_4=78;s.AIS_TYPE_CARGO_UNKNOWN=79;s.AIS_TYPE_TANKER=80;s.AIS_TYPE_TANKER_HAZARDOUS_A=81;s.AIS_TYPE_TANKER_HAZARDOUS_B=82;s.AIS_TYPE_TANKER_HAZARDOUS_C=83;s.AIS_TYPE_TANKER_HAZARDOUS_D=84;s.AIS_TYPE_TANKER_RESERVED_1=85;s.AIS_TYPE_TANKER_RESERVED_2=86;s.AIS_TYPE_TANKER_RESERVED_3=87;s.AIS_TYPE_TANKER_RESERVED_4=88;s.AIS_TYPE_TANKER_UNKNOWN=89;s.AIS_TYPE_OTHER=90;s.AIS_TYPE_OTHER_HAZARDOUS_A=91;s.AIS_TYPE_OTHER_HAZARDOUS_B=92;s.AIS_TYPE_OTHER_HAZARDOUS_C=93;s.AIS_TYPE_OTHER_HAZARDOUS_D=94;s.AIS_TYPE_OTHER_RESERVED_1=95;s.AIS_TYPE_OTHER_RESERVED_2=96;s.AIS_TYPE_OTHER_RESERVED_3=97;s.AIS_TYPE_OTHER_RESERVED_4=98;s.AIS_TYPE_OTHER_UNKNOWN=99;s.AIS_TYPE_ENUM_END=100;s.UNDER_WAY=0;s.AIS_NAV_ANCHORED=1;s.AIS_NAV_UN_COMMANDED=2;s.AIS_NAV_RESTRICTED_MANOEUVERABILITY=3;s.AIS_NAV_DRAUGHT_CONSTRAINED=4;s.AIS_NAV_MOORED=5;s.AIS_NAV_AGROUND=6;s.AIS_NAV_FISHING=7;s.AIS_NAV_SAILING=8;s.AIS_NAV_RESERVED_HSC=9;s.AIS_NAV_RESERVED_WIG=10;s.AIS_NAV_RESERVED_1=11;s.AIS_NAV_RESERVED_2=12;s.AIS_NAV_RESERVED_3=13;s.AIS_NAV_AIS_SART=14;s.AIS_NAV_UNKNOWN=15;s.AIS_NAV_STATUS_ENUM_END=16;s.AIS_FLAGS_POSITION_ACCURACY=1;s.AIS_FLAGS_VALID_COG=2;s.AIS_FLAGS_VALID_VELOCITY=4;s.AIS_FLAGS_HIGH_VELOCITY=8;s.AIS_FLAGS_VALID_TURN_RATE=16;s.AIS_FLAGS_TURN_RATE_SIGN_ONLY=32;s.AIS_FLAGS_VALID_DIMENSIONS=64;s.AIS_FLAGS_LARGE_BOW_DIMENSION=128;s.AIS_FLAGS_LARGE_STERN_DIMENSION=256;s.AIS_FLAGS_LARGE_PORT_DIMENSION=512;s.AIS_FLAGS_LARGE_STARBOARD_DIMENSION=1024;s.AIS_FLAGS_VALID_CALLSIGN=2048;s.AIS_FLAGS_VALID_NAME=4096;s.AIS_FLAGS_ENUM_END=4097;s.MAV_WINCH_STATUS_HEALTHY=1;s.MAV_WINCH_STATUS_FULLY_RETRACTED=2;s.MAV_WINCH_STATUS_MOVING=4;s.MAV_WINCH_STATUS_CLUTCH_ENGAGED=8;s.MAV_WINCH_STATUS_FLAG_ENUM_END=9;s.MAG_CAL_NOT_STARTED=0;s.MAG_CAL_WAITING_TO_START=1;s.MAG_CAL_RUNNING_STEP_ONE=2;s.MAG_CAL_RUNNING_STEP_TWO=3;s.MAG_CAL_SUCCESS=4;s.MAG_CAL_FAILED=5;s.MAG_CAL_BAD_ORIENTATION=6;s.MAG_CAL_BAD_RADIUS=7;s.MAG_CAL_STATUS_ENUM_END=8;s.CAN_FILTER_REPLACE=0;s.CAN_FILTER_ADD=1;s.CAN_FILTER_REMOVE=2;s.CAN_FILTER_OP_ENUM_END=3;s.NAV_VTOL_LAND_OPTIONS_DEFAULT=0;s.NAV_VTOL_LAND_OPTIONS_FW_SPIRAL_APPROACH=1;s.NAV_VTOL_LAND_OPTIONS_FW_APPROACH=2;s.NAV_VTOL_LAND_OPTIONS_ENUM_END=3;s.MISSION_STATE_UNKNOWN=0;s.MISSION_STATE_NO_MISSION=1;s.MISSION_STATE_NOT_STARTED=2;s.MISSION_STATE_ACTIVE=3;s.MISSION_STATE_PAUSED=4;s.MISSION_STATE_COMPLETE=5;s.MISSION_STATE_ENUM_END=6;s.SAFETY_SWITCH_STATE_SAFE=0;s.SAFETY_SWITCH_STATE_DANGEROUS=1;s.SAFETY_SWITCH_STATE_ENUM_END=2;s.AIRSPEED_SENSOR_UNHEALTHY=0;s.AIRSPEED_SENSOR_USING=1;s.AIRSPEED_SENSOR_FLAGS_ENUM_END=2;s.RADIO_RC_CHANNELS_FLAGS_FAILSAFE=1;s.RADIO_RC_CHANNELS_FLAGS_OUTDATED=2;s.RADIO_RC_CHANNELS_FLAGS_ENUM_END=3;s.ICAROUS_TRACK_BAND_TYPE_NONE=0;s.ICAROUS_TRACK_BAND_TYPE_NEAR=1;s.ICAROUS_TRACK_BAND_TYPE_RECOVERY=2;s.ICAROUS_TRACK_BAND_TYPES_ENUM_END=3;s.ICAROUS_FMS_STATE_IDLE=0;s.ICAROUS_FMS_STATE_TAKEOFF=1;s.ICAROUS_FMS_STATE_CLIMB=2;s.ICAROUS_FMS_STATE_CRUISE=3;s.ICAROUS_FMS_STATE_APPROACH=4;s.ICAROUS_FMS_STATE_LAND=5;s.ICAROUS_FMS_STATE_ENUM_END=6;s.MAV_AUTOPILOT_GENERIC=0;s.MAV_AUTOPILOT_RESERVED=1;s.MAV_AUTOPILOT_SLUGS=2;s.MAV_AUTOPILOT_ARDUPILOTMEGA=3;s.MAV_AUTOPILOT_OPENPILOT=4;s.MAV_AUTOPILOT_GENERIC_WAYPOINTS_ONLY=5;s.MAV_AUTOPILOT_GENERIC_WAYPOINTS_AND_SIMPLE_NAVIGATION_ONLY=6;s.MAV_AUTOPILOT_GENERIC_MISSION_FULL=7;s.MAV_AUTOPILOT_INVALID=8;s.MAV_AUTOPILOT_PPZ=9;s.MAV_AUTOPILOT_UDB=10;s.MAV_AUTOPILOT_FP=11;s.MAV_AUTOPILOT_PX4=12;s.MAV_AUTOPILOT_SMACCMPILOT=13;s.MAV_AUTOPILOT_AUTOQUAD=14;s.MAV_AUTOPILOT_ARMAZILA=15;s.MAV_AUTOPILOT_AEROB=16;s.MAV_AUTOPILOT_ASLUAV=17;s.MAV_AUTOPILOT_SMARTAP=18;s.MAV_AUTOPILOT_AIRRAILS=19;s.MAV_AUTOPILOT_REFLEX=20;s.MAV_AUTOPILOT_ENUM_END=21;s.MAV_TYPE_GENERIC=0;s.MAV_TYPE_FIXED_WING=1;s.MAV_TYPE_QUADROTOR=2;s.MAV_TYPE_COAXIAL=3;s.MAV_TYPE_HELICOPTER=4;s.MAV_TYPE_ANTENNA_TRACKER=5;s.MAV_TYPE_GCS=6;s.MAV_TYPE_AIRSHIP=7;s.MAV_TYPE_FREE_BALLOON=8;s.MAV_TYPE_ROCKET=9;s.MAV_TYPE_GROUND_ROVER=10;s.MAV_TYPE_SURFACE_BOAT=11;s.MAV_TYPE_SUBMARINE=12;s.MAV_TYPE_HEXAROTOR=13;s.MAV_TYPE_OCTOROTOR=14;s.MAV_TYPE_TRICOPTER=15;s.MAV_TYPE_FLAPPING_WING=16;s.MAV_TYPE_KITE=17;s.MAV_TYPE_ONBOARD_CONTROLLER=18;s.MAV_TYPE_VTOL_DUOROTOR=19;s.MAV_TYPE_VTOL_QUADROTOR=20;s.MAV_TYPE_VTOL_TILTROTOR=21;s.MAV_TYPE_VTOL_RESERVED2=22;s.MAV_TYPE_VTOL_RESERVED3=23;s.MAV_TYPE_VTOL_RESERVED4=24;s.MAV_TYPE_VTOL_RESERVED5=25;s.MAV_TYPE_GIMBAL=26;s.MAV_TYPE_ADSB=27;s.MAV_TYPE_PARAFOIL=28;s.MAV_TYPE_DODECAROTOR=29;s.MAV_TYPE_CAMERA=30;s.MAV_TYPE_CHARGING_STATION=31;s.MAV_TYPE_FLARM=32;s.MAV_TYPE_SERVO=33;s.MAV_TYPE_ODID=34;s.MAV_TYPE_DECAROTOR=35;s.MAV_TYPE_BATTERY=36;s.MAV_TYPE_PARACHUTE=37;s.MAV_TYPE_LOG=38;s.MAV_TYPE_OSD=39;s.MAV_TYPE_IMU=40;s.MAV_TYPE_GPS=41;s.MAV_TYPE_WINCH=42;s.MAV_TYPE_ENUM_END=43;s.MAV_MODE_FLAG_CUSTOM_MODE_ENABLED=1;s.MAV_MODE_FLAG_TEST_ENABLED=2;s.MAV_MODE_FLAG_AUTO_ENABLED=4;s.MAV_MODE_FLAG_GUIDED_ENABLED=8;s.MAV_MODE_FLAG_STABILIZE_ENABLED=16;s.MAV_MODE_FLAG_HIL_ENABLED=32;s.MAV_MODE_FLAG_MANUAL_INPUT_ENABLED=64;s.MAV_MODE_FLAG_SAFETY_ARMED=128;s.MAV_MODE_FLAG_ENUM_END=129;s.MAV_MODE_FLAG_DECODE_POSITION_CUSTOM_MODE=1;s.MAV_MODE_FLAG_DECODE_POSITION_TEST=2;s.MAV_MODE_FLAG_DECODE_POSITION_AUTO=4;s.MAV_MODE_FLAG_DECODE_POSITION_GUIDED=8;s.MAV_MODE_FLAG_DECODE_POSITION_STABILIZE=16;s.MAV_MODE_FLAG_DECODE_POSITION_HIL=32;s.MAV_MODE_FLAG_DECODE_POSITION_MANUAL=64;s.MAV_MODE_FLAG_DECODE_POSITION_SAFETY=128;s.MAV_MODE_FLAG_DECODE_POSITION_ENUM_END=129;s.MAV_STATE_UNINIT=0;s.MAV_STATE_BOOT=1;s.MAV_STATE_CALIBRATING=2;s.MAV_STATE_STANDBY=3;s.MAV_STATE_ACTIVE=4;s.MAV_STATE_CRITICAL=5;s.MAV_STATE_EMERGENCY=6;s.MAV_STATE_POWEROFF=7;s.MAV_STATE_FLIGHT_TERMINATION=8;s.MAV_STATE_ENUM_END=9;s.MAV_COMP_ID_ALL=0;s.MAV_COMP_ID_AUTOPILOT1=1;s.MAV_COMP_ID_USER1=25;s.MAV_COMP_ID_USER2=26;s.MAV_COMP_ID_USER3=27;s.MAV_COMP_ID_USER4=28;s.MAV_COMP_ID_USER5=29;s.MAV_COMP_ID_USER6=30;s.MAV_COMP_ID_USER7=31;s.MAV_COMP_ID_USER8=32;s.MAV_COMP_ID_USER9=33;s.MAV_COMP_ID_USER10=34;s.MAV_COMP_ID_USER11=35;s.MAV_COMP_ID_USER12=36;s.MAV_COMP_ID_USER13=37;s.MAV_COMP_ID_USER14=38;s.MAV_COMP_ID_USER15=39;s.MAV_COMP_ID_USER16=40;s.MAV_COMP_ID_USER17=41;s.MAV_COMP_ID_USER18=42;s.MAV_COMP_ID_USER19=43;s.MAV_COMP_ID_USER20=44;s.MAV_COMP_ID_USER21=45;s.MAV_COMP_ID_USER22=46;s.MAV_COMP_ID_USER23=47;s.MAV_COMP_ID_USER24=48;s.MAV_COMP_ID_USER25=49;s.MAV_COMP_ID_USER26=50;s.MAV_COMP_ID_USER27=51;s.MAV_COMP_ID_USER28=52;s.MAV_COMP_ID_USER29=53;s.MAV_COMP_ID_USER30=54;s.MAV_COMP_ID_USER31=55;s.MAV_COMP_ID_USER32=56;s.MAV_COMP_ID_USER33=57;s.MAV_COMP_ID_USER34=58;s.MAV_COMP_ID_USER35=59;s.MAV_COMP_ID_USER36=60;s.MAV_COMP_ID_USER37=61;s.MAV_COMP_ID_USER38=62;s.MAV_COMP_ID_USER39=63;s.MAV_COMP_ID_USER40=64;s.MAV_COMP_ID_USER41=65;s.MAV_COMP_ID_USER42=66;s.MAV_COMP_ID_USER43=67;s.MAV_COMP_ID_TELEMETRY_RADIO=68;s.MAV_COMP_ID_USER45=69;s.MAV_COMP_ID_USER46=70;s.MAV_COMP_ID_USER47=71;s.MAV_COMP_ID_USER48=72;s.MAV_COMP_ID_USER49=73;s.MAV_COMP_ID_USER50=74;s.MAV_COMP_ID_USER51=75;s.MAV_COMP_ID_USER52=76;s.MAV_COMP_ID_USER53=77;s.MAV_COMP_ID_USER54=78;s.MAV_COMP_ID_USER55=79;s.MAV_COMP_ID_USER56=80;s.MAV_COMP_ID_USER57=81;s.MAV_COMP_ID_USER58=82;s.MAV_COMP_ID_USER59=83;s.MAV_COMP_ID_USER60=84;s.MAV_COMP_ID_USER61=85;s.MAV_COMP_ID_USER62=86;s.MAV_COMP_ID_USER63=87;s.MAV_COMP_ID_USER64=88;s.MAV_COMP_ID_USER65=89;s.MAV_COMP_ID_USER66=90;s.MAV_COMP_ID_USER67=91;s.MAV_COMP_ID_USER68=92;s.MAV_COMP_ID_USER69=93;s.MAV_COMP_ID_USER70=94;s.MAV_COMP_ID_USER71=95;s.MAV_COMP_ID_USER72=96;s.MAV_COMP_ID_USER73=97;s.MAV_COMP_ID_USER74=98;s.MAV_COMP_ID_USER75=99;s.MAV_COMP_ID_CAMERA=100;s.MAV_COMP_ID_CAMERA2=101;s.MAV_COMP_ID_CAMERA3=102;s.MAV_COMP_ID_CAMERA4=103;s.MAV_COMP_ID_CAMERA5=104;s.MAV_COMP_ID_CAMERA6=105;s.MAV_COMP_ID_SERVO1=140;s.MAV_COMP_ID_SERVO2=141;s.MAV_COMP_ID_SERVO3=142;s.MAV_COMP_ID_SERVO4=143;s.MAV_COMP_ID_SERVO5=144;s.MAV_COMP_ID_SERVO6=145;s.MAV_COMP_ID_SERVO7=146;s.MAV_COMP_ID_SERVO8=147;s.MAV_COMP_ID_SERVO9=148;s.MAV_COMP_ID_SERVO10=149;s.MAV_COMP_ID_SERVO11=150;s.MAV_COMP_ID_SERVO12=151;s.MAV_COMP_ID_SERVO13=152;s.MAV_COMP_ID_SERVO14=153;s.MAV_COMP_ID_GIMBAL=154;s.MAV_COMP_ID_LOG=155;s.MAV_COMP_ID_ADSB=156;s.MAV_COMP_ID_OSD=157;s.MAV_COMP_ID_PERIPHERAL=158;s.MAV_COMP_ID_QX1_GIMBAL=159;s.MAV_COMP_ID_FLARM=160;s.MAV_COMP_ID_PARACHUTE=161;s.MAV_COMP_ID_GIMBAL2=171;s.MAV_COMP_ID_GIMBAL3=172;s.MAV_COMP_ID_GIMBAL4=173;s.MAV_COMP_ID_GIMBAL5=174;s.MAV_COMP_ID_GIMBAL6=175;s.MAV_COMP_ID_BATTERY=180;s.MAV_COMP_ID_BATTERY2=181;s.MAV_COMP_ID_MAVCAN=189;s.MAV_COMP_ID_MISSIONPLANNER=190;s.MAV_COMP_ID_ONBOARD_COMPUTER=191;s.MAV_COMP_ID_ONBOARD_COMPUTER2=192;s.MAV_COMP_ID_ONBOARD_COMPUTER3=193;s.MAV_COMP_ID_ONBOARD_COMPUTER4=194;s.MAV_COMP_ID_PATHPLANNER=195;s.MAV_COMP_ID_OBSTACLE_AVOIDANCE=196;s.MAV_COMP_ID_VISUAL_INERTIAL_ODOMETRY=197;s.MAV_COMP_ID_PAIRING_MANAGER=198;s.MAV_COMP_ID_IMU=200;s.MAV_COMP_ID_IMU_2=201;s.MAV_COMP_ID_IMU_3=202;s.MAV_COMP_ID_GPS=220;s.MAV_COMP_ID_GPS2=221;s.MAV_COMP_ID_ODID_TXRX_1=236;s.MAV_COMP_ID_ODID_TXRX_2=237;s.MAV_COMP_ID_ODID_TXRX_3=238;s.MAV_COMP_ID_UDP_BRIDGE=240;s.MAV_COMP_ID_UART_BRIDGE=241;s.MAV_COMP_ID_TUNNEL_NODE=242;s.MAV_COMP_ID_SYSTEM_CONTROL=250;s.MAV_COMPONENT_ENUM_END=251;s.MODE_MANUAL_DIRECT=1;s.MODE_MANUAL_SCALED=2;s.MODE_AUTO_PID_ATT=3;s.MODE_AUTO_PID_VEL=4;s.MODE_AUTO_PID_POS=5;s.UALBERTA_AUTOPILOT_MODE_ENUM_END=6;s.NAV_AHRS_INIT=1;s.NAV_AHRS=2;s.NAV_INS_GPS_INIT=3;s.NAV_INS_GPS=4;s.UALBERTA_NAV_MODE_ENUM_END=5;s.PILOT_MANUAL=1;s.PILOT_AUTO=2;s.PILOT_ROTO=3;s.UALBERTA_PILOT_MODE_ENUM_END=4;s.UAVIONIX_ADSB_OUT_DYNAMIC_STATE_INTENT_CHANGE=1;s.UAVIONIX_ADSB_OUT_DYNAMIC_STATE_AUTOPILOT_ENABLED=2;s.UAVIONIX_ADSB_OUT_DYNAMIC_STATE_NICBARO_CROSSCHECKED=4;s.UAVIONIX_ADSB_OUT_DYNAMIC_STATE_ON_GROUND=8;s.UAVIONIX_ADSB_OUT_DYNAMIC_STATE_IDENT=16;s.UAVIONIX_ADSB_OUT_DYNAMIC_STATE_ENUM_END=17;s.UAVIONIX_ADSB_OUT_RF_SELECT_STANDBY=0;s.UAVIONIX_ADSB_OUT_RF_SELECT_RX_ENABLED=1;s.UAVIONIX_ADSB_OUT_RF_SELECT_TX_ENABLED=2;s.UAVIONIX_ADSB_OUT_RF_SELECT_ENUM_END=3;s.UAVIONIX_ADSB_OUT_DYNAMIC_GPS_FIX_NONE_0=0;s.UAVIONIX_ADSB_OUT_DYNAMIC_GPS_FIX_NONE_1=1;s.UAVIONIX_ADSB_OUT_DYNAMIC_GPS_FIX_2D=2;s.UAVIONIX_ADSB_OUT_DYNAMIC_GPS_FIX_3D=3;s.UAVIONIX_ADSB_OUT_DYNAMIC_GPS_FIX_DGPS=4;s.UAVIONIX_ADSB_OUT_DYNAMIC_GPS_FIX_RTK=5;s.UAVIONIX_ADSB_OUT_DYNAMIC_GPS_FIX_ENUM_END=6;s.UAVIONIX_ADSB_RF_HEALTH_INITIALIZING=0;s.UAVIONIX_ADSB_RF_HEALTH_OK=1;s.UAVIONIX_ADSB_RF_HEALTH_FAIL_TX=2;s.UAVIONIX_ADSB_RF_HEALTH_FAIL_RX=16;s.UAVIONIX_ADSB_RF_HEALTH_ENUM_END=17;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_NO_DATA=0;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L15M_W23M=1;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L25M_W28P5M=2;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L25_34M=3;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L35_33M=4;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L35_38M=5;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L45_39P5M=6;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L45_45M=7;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L55_45M=8;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L55_52M=9;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L65_59P5M=10;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L65_67M=11;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L75_W72P5M=12;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L75_W80M=13;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L85_W80M=14;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_L85_W90M=15;s.UAVIONIX_ADSB_OUT_CFG_AIRCRAFT_SIZE_ENUM_END=16;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LAT_NO_DATA=0;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LAT_LEFT_2M=1;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LAT_LEFT_4M=2;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LAT_LEFT_6M=3;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LAT_RIGHT_0M=4;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LAT_RIGHT_2M=5;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LAT_RIGHT_4M=6;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LAT_RIGHT_6M=7;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LAT_ENUM_END=8;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LON_NO_DATA=0;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LON_APPLIED_BY_SENSOR=1;s.UAVIONIX_ADSB_OUT_CFG_GPS_OFFSET_LON_ENUM_END=2;s.UAVIONIX_ADSB_OUT_NO_EMERGENCY=0;s.UAVIONIX_ADSB_OUT_GENERAL_EMERGENCY=1;s.UAVIONIX_ADSB_OUT_LIFEGUARD_EMERGENCY=2;s.UAVIONIX_ADSB_OUT_MINIMUM_FUEL_EMERGENCY=3;s.UAVIONIX_ADSB_OUT_NO_COMM_EMERGENCY=4;s.UAVIONIX_ADSB_OUT_UNLAWFUL_INTERFERANCE_EMERGENCY=5;s.UAVIONIX_ADSB_OUT_DOWNED_AIRCRAFT_EMERGENCY=6;s.UAVIONIX_ADSB_OUT_RESERVED=7;s.UAVIONIX_ADSB_EMERGENCY_STATUS_ENUM_END=8;s.UAVIONIX_ADSB_OUT_CONTROL_STATE_EXTERNAL_BARO_CROSSCHECKED=1;s.UAVIONIX_ADSB_OUT_CONTROL_STATE_ON_GROUND=4;s.UAVIONIX_ADSB_OUT_CONTROL_STATE_IDENT_BUTTON_ACTIVE=8;s.UAVIONIX_ADSB_OUT_CONTROL_STATE_MODE_A_ENABLED=16;s.UAVIONIX_ADSB_OUT_CONTROL_STATE_MODE_C_ENABLED=32;s.UAVIONIX_ADSB_OUT_CONTROL_STATE_MODE_S_ENABLED=64;s.UAVIONIX_ADSB_OUT_CONTROL_STATE_1090ES_TX_ENABLED=128;s.UAVIONIX_ADSB_OUT_CONTROL_STATE_ENUM_END=129;s.UAVIONIX_ADSB_XBIT_ENABLED=128;s.UAVIONIX_ADSB_XBIT_ENUM_END=129;s.UAVIONIX_ADSB_OUT_STATUS_STATE_ON_GROUND=1;s.UAVIONIX_ADSB_OUT_STATUS_STATE_INTERROGATED_SINCE_LAST=2;s.UAVIONIX_ADSB_OUT_STATUS_STATE_XBIT_ENABLED=4;s.UAVIONIX_ADSB_OUT_STATUS_STATE_IDENT_ACTIVE=8;s.UAVIONIX_ADSB_OUT_STATUS_STATE_MODE_A_ENABLED=16;s.UAVIONIX_ADSB_OUT_STATUS_STATE_MODE_C_ENABLED=32;s.UAVIONIX_ADSB_OUT_STATUS_STATE_MODE_S_ENABLED=64;s.UAVIONIX_ADSB_OUT_STATUS_STATE_1090ES_TX_ENABLED=128;s.UAVIONIX_ADSB_OUT_STATUS_STATE_ENUM_END=129;s.UAVIONIX_ADSB_NIC_CR_20_NM=1;s.UAVIONIX_ADSB_NIC_CR_8_NM=2;s.UAVIONIX_ADSB_NIC_CR_4_NM=3;s.UAVIONIX_ADSB_NIC_CR_2_NM=4;s.UAVIONIX_ADSB_NIC_CR_1_NM=5;s.UAVIONIX_ADSB_NIC_CR_0_3_NM=6;s.UAVIONIX_ADSB_NIC_CR_0_2_NM=7;s.UAVIONIX_ADSB_NIC_CR_0_1_NM=8;s.UAVIONIX_ADSB_NIC_CR_75_M=9;s.UAVIONIX_ADSB_NIC_CR_25_M=10;s.UAVIONIX_ADSB_NIC_CR_7_5_M=11;s.UAVIONIX_ADSB_NACP_EPU_10_NM=16;s.UAVIONIX_ADSB_NACP_EPU_4_NM=32;s.UAVIONIX_ADSB_NACP_EPU_2_NM=48;s.UAVIONIX_ADSB_NACP_EPU_1_NM=64;s.UAVIONIX_ADSB_NACP_EPU_0_5_NM=80;s.UAVIONIX_ADSB_NACP_EPU_0_3_NM=96;s.UAVIONIX_ADSB_NACP_EPU_0_1_NM=112;s.UAVIONIX_ADSB_NACP_EPU_0_05_NM=128;s.UAVIONIX_ADSB_NACP_EPU_30_M=144;s.UAVIONIX_ADSB_NACP_EPU_10_M=160;s.UAVIONIX_ADSB_NACP_EPU_3_M=176;s.UAVIONIX_ADSB_OUT_STATUS_NIC_NACP_ENUM_END=177;s.UAVIONIX_ADSB_OUT_STATUS_FAULT_STATUS_MESSAGE_UNAVAIL=8;s.UAVIONIX_ADSB_OUT_STATUS_FAULT_GPS_NO_POS=16;s.UAVIONIX_ADSB_OUT_STATUS_FAULT_GPS_UNAVAIL=32;s.UAVIONIX_ADSB_OUT_STATUS_FAULT_TX_SYSTEM_FAIL=64;s.UAVIONIX_ADSB_OUT_STATUS_FAULT_MAINT_REQ=128;s.UAVIONIX_ADSB_OUT_STATUS_FAULT_ENUM_END=129;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_CH1_IN=200;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_CH1_OUT=201;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_CH2_IN=202;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_CH2_OUT=203;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_CH3_IN=204;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_CH3_OUT=205;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED6=206;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED7=207;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED8=208;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_STORM32_RESERVED9=209;s.MAV_STORM32_TUNNEL_PAYLOAD_TYPE_ENUM_END=210;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_IS_NORMAL=1;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_IMUS_WORKING=2;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_MOTORS_WORKING=4;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_ENCODERS_WORKING=8;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_VOLTAGE_OK=16;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_VIRTUALCHANNELS_RECEIVING=32;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_MAVLINK_RECEIVING=64;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_STORM32LINK_QFIX=128;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_STORM32LINK_WORKING=256;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_CAMERA_CONNECTED=512;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_AUX0_LOW=1024;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_AUX1_LOW=2048;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_NTLOGGER_WORKING=4096;s.MAV_STORM32_GIMBAL_PREARM_FLAGS_ENUM_END=4097;s.MAV_STORM32_CAMERA_PREARM_FLAGS_CONNECTED=1;s.MAV_STORM32_CAMERA_PREARM_FLAGS_ENUM_END=2;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_RETRACT=1;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_NEUTRAL=2;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_ROLL_AXIS=4;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_ROLL_FOLLOW=8;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_ROLL_LOCK=16;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_PITCH_AXIS=32;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_PITCH_FOLLOW=64;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_PITCH_LOCK=128;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_YAW_AXIS=256;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_YAW_FOLLOW=512;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_YAW_LOCK=1024;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_INFINITE_YAW=2048;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_ABSOLUTE_YAW=65536;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_HAS_RC=131072;s.MAV_STORM32_GIMBAL_DEVICE_CAP_FLAGS_ENUM_END=131073;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_RETRACT=1;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_NEUTRAL=2;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_ROLL_LOCK=4;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_PITCH_LOCK=8;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_YAW_LOCK=16;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_CAN_ACCEPT_YAW_ABSOLUTE=256;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_YAW_ABSOLUTE=512;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_RC_EXCLUSIVE=1024;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_RC_MIXED=2048;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_NONE=65535;s.MAV_STORM32_GIMBAL_DEVICE_FLAGS_ENUM_END=65536;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_AT_ROLL_LIMIT=1;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_AT_PITCH_LIMIT=2;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_AT_YAW_LIMIT=4;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_ENCODER_ERROR=8;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_POWER_ERROR=16;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_MOTOR_ERROR=32;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_SOFTWARE_ERROR=64;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_COMMS_ERROR=128;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_CALIBRATION_RUNNING=256;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_NO_MANAGER=32768;s.MAV_STORM32_GIMBAL_DEVICE_ERROR_FLAGS_ENUM_END=32769;s.MAV_STORM32_GIMBAL_MANAGER_CAP_FLAGS_HAS_PROFILES=1;s.MAV_STORM32_GIMBAL_MANAGER_CAP_FLAGS_SUPPORTS_CHANGE=2;s.MAV_STORM32_GIMBAL_MANAGER_CAP_FLAGS_ENUM_END=3;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_NONE=0;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_RC_ACTIVE=1;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_CLIENT_ONBOARD_ACTIVE=2;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_CLIENT_AUTOPILOT_ACTIVE=4;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_CLIENT_GCS_ACTIVE=8;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_CLIENT_CAMERA_ACTIVE=16;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_CLIENT_GCS2_ACTIVE=32;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_CLIENT_CAMERA2_ACTIVE=64;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_CLIENT_CUSTOM_ACTIVE=128;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_CLIENT_CUSTOM2_ACTIVE=256;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_SET_SUPERVISON=512;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_SET_RELEASE=1024;s.MAV_STORM32_GIMBAL_MANAGER_FLAGS_ENUM_END=1025;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_NONE=0;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_ONBOARD=1;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_AUTOPILOT=2;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_GCS=3;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_CAMERA=4;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_GCS2=5;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_CAMERA2=6;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_CUSTOM=7;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_CUSTOM2=8;s.MAV_STORM32_GIMBAL_MANAGER_CLIENT_ENUM_END=9;s.MAV_STORM32_GIMBAL_MANAGER_SETUP_FLAGS_ENABLE=16384;s.MAV_STORM32_GIMBAL_MANAGER_SETUP_FLAGS_DISABLE=32768;s.MAV_STORM32_GIMBAL_MANAGER_SETUP_FLAGS_ENUM_END=32769;s.MAV_STORM32_GIMBAL_MANAGER_PROFILE_DEFAULT=0;s.MAV_STORM32_GIMBAL_MANAGER_PROFILE_CUSTOM=1;s.MAV_STORM32_GIMBAL_MANAGER_PROFILE_COOPERATIVE=2;s.MAV_STORM32_GIMBAL_MANAGER_PROFILE_EXCLUSIVE=3;s.MAV_STORM32_GIMBAL_MANAGER_PROFILE_PRIORITY_COOPERATIVE=4;s.MAV_STORM32_GIMBAL_MANAGER_PROFILE_PRIORITY_EXCLUSIVE=5;s.MAV_STORM32_GIMBAL_MANAGER_PROFILE_ENUM_END=6;s.MAV_STORM32_GIMBAL_ACTION_RECENTER=1;s.MAV_STORM32_GIMBAL_ACTION_CALIBRATION=2;s.MAV_STORM32_GIMBAL_ACTION_DISCOVER_MANAGER=3;s.MAV_STORM32_GIMBAL_ACTION_ENUM_END=4;s.MAV_QSHOT_MODE_UNDEFINED=0;s.MAV_QSHOT_MODE_DEFAULT=1;s.MAV_QSHOT_MODE_GIMBAL_RETRACT=2;s.MAV_QSHOT_MODE_GIMBAL_NEUTRAL=3;s.MAV_QSHOT_MODE_GIMBAL_MISSION=4;s.MAV_QSHOT_MODE_GIMBAL_RC_CONTROL=5;s.MAV_QSHOT_MODE_POI_TARGETING=6;s.MAV_QSHOT_MODE_SYSID_TARGETING=7;s.MAV_QSHOT_MODE_CABLECAM_2POINT=8;s.MAV_QSHOT_MODE_HOME_TARGETING=9;s.MAV_QSHOT_MODE_ENUM_END=10;s.PRS_NOT_STEADY=1;s.PRS_DTM_NOT_ARMED=2;s.PRS_OTM_NOT_ARMED=3;s.MAV_AVSS_COMMAND_FAILURE_REASON_ENUM_END=4;s.MODE_M300_MANUAL_CTRL=0;s.MODE_M300_ATTITUDE=1;s.MODE_M300_P_GPS=6;s.MODE_M300_HOTPOINT_MODE=9;s.MODE_M300_ASSISTED_TAKEOFF=10;s.MODE_M300_AUTO_TAKEOFF=11;s.MODE_M300_AUTO_LANDING=12;s.MODE_M300_NAVI_GO_HOME=15;s.MODE_M300_NAVI_SDK_CTRL=17;s.MODE_M300_S_SPORT=31;s.MODE_M300_FORCE_AUTO_LANDING=33;s.MODE_M300_T_TRIPOD=38;s.MODE_M300_SEARCH_MODE=40;s.MODE_M300_ENGINE_START=41;s.AVSS_M300_OPERATION_MODE_ENUM_END=42;s.MODE_HORSEFLY_MANUAL_CTRL=0;s.MODE_HORSEFLY_AUTO_TAKEOFF=1;s.MODE_HORSEFLY_AUTO_LANDING=2;s.MODE_HORSEFLY_NAVI_GO_HOME=3;s.MODE_HORSEFLY_DROP=4;s.AVSS_HORSEFLY_OPERATION_MODE_ENUM_END=5;s.AIRLINK_ERROR_LOGIN_OR_PASS=0;s.AIRLINK_AUTH_OK=1;s.AIRLINK_AUTH_RESPONSE_TYPE_ENUM_END=2;s.MAVLINK_MSG_ID_BAD_DATA=-1;s.MAVLINK_MSG_ID_SENSOR_OFFSETS=150;s.MAVLINK_MSG_ID_SET_MAG_OFFSETS=151;s.MAVLINK_MSG_ID_MEMINFO=152;s.MAVLINK_MSG_ID_AP_ADC=153;s.MAVLINK_MSG_ID_DIGICAM_CONFIGURE=154;s.MAVLINK_MSG_ID_DIGICAM_CONTROL=155;s.MAVLINK_MSG_ID_MOUNT_CONFIGURE=156;s.MAVLINK_MSG_ID_MOUNT_CONTROL=157;s.MAVLINK_MSG_ID_MOUNT_STATUS=158;s.MAVLINK_MSG_ID_FENCE_POINT=160;s.MAVLINK_MSG_ID_FENCE_FETCH_POINT=161;s.MAVLINK_MSG_ID_AHRS=163;s.MAVLINK_MSG_ID_SIMSTATE=164;s.MAVLINK_MSG_ID_HWSTATUS=165;s.MAVLINK_MSG_ID_RADIO=166;s.MAVLINK_MSG_ID_LIMITS_STATUS=167;s.MAVLINK_MSG_ID_WIND=168;s.MAVLINK_MSG_ID_DATA16=169;s.MAVLINK_MSG_ID_DATA32=170;s.MAVLINK_MSG_ID_DATA64=171;s.MAVLINK_MSG_ID_DATA96=172;s.MAVLINK_MSG_ID_RANGEFINDER=173;s.MAVLINK_MSG_ID_AIRSPEED_AUTOCAL=174;s.MAVLINK_MSG_ID_RALLY_POINT=175;s.MAVLINK_MSG_ID_RALLY_FETCH_POINT=176;s.MAVLINK_MSG_ID_COMPASSMOT_STATUS=177;s.MAVLINK_MSG_ID_AHRS2=178;s.MAVLINK_MSG_ID_CAMERA_STATUS=179;s.MAVLINK_MSG_ID_CAMERA_FEEDBACK=180;s.MAVLINK_MSG_ID_BATTERY2=181;s.MAVLINK_MSG_ID_AHRS3=182;s.MAVLINK_MSG_ID_AUTOPILOT_VERSION_REQUEST=183;s.MAVLINK_MSG_ID_REMOTE_LOG_DATA_BLOCK=184;s.MAVLINK_MSG_ID_REMOTE_LOG_BLOCK_STATUS=185;s.MAVLINK_MSG_ID_LED_CONTROL=186;s.MAVLINK_MSG_ID_MAG_CAL_PROGRESS=191;s.MAVLINK_MSG_ID_EKF_STATUS_REPORT=193;s.MAVLINK_MSG_ID_PID_TUNING=194;s.MAVLINK_MSG_ID_DEEPSTALL=195;s.MAVLINK_MSG_ID_GIMBAL_REPORT=200;s.MAVLINK_MSG_ID_GIMBAL_CONTROL=201;s.MAVLINK_MSG_ID_GIMBAL_TORQUE_CMD_REPORT=214;s.MAVLINK_MSG_ID_GOPRO_HEARTBEAT=215;s.MAVLINK_MSG_ID_GOPRO_GET_REQUEST=216;s.MAVLINK_MSG_ID_GOPRO_GET_RESPONSE=217;s.MAVLINK_MSG_ID_GOPRO_SET_REQUEST=218;s.MAVLINK_MSG_ID_GOPRO_SET_RESPONSE=219;s.MAVLINK_MSG_ID_RPM=226;s.MAVLINK_MSG_ID_DEVICE_OP_READ=11e3;s.MAVLINK_MSG_ID_DEVICE_OP_READ_REPLY=11001;s.MAVLINK_MSG_ID_DEVICE_OP_WRITE=11002;s.MAVLINK_MSG_ID_DEVICE_OP_WRITE_REPLY=11003;s.MAVLINK_MSG_ID_SECURE_COMMAND=11004;s.MAVLINK_MSG_ID_SECURE_COMMAND_REPLY=11005;s.MAVLINK_MSG_ID_ADAP_TUNING=11010;s.MAVLINK_MSG_ID_VISION_POSITION_DELTA=11011;s.MAVLINK_MSG_ID_AOA_SSA=11020;s.MAVLINK_MSG_ID_ESC_TELEMETRY_1_TO_4=11030;s.MAVLINK_MSG_ID_ESC_TELEMETRY_5_TO_8=11031;s.MAVLINK_MSG_ID_ESC_TELEMETRY_9_TO_12=11032;s.MAVLINK_MSG_ID_OSD_PARAM_CONFIG=11033;s.MAVLINK_MSG_ID_OSD_PARAM_CONFIG_REPLY=11034;s.MAVLINK_MSG_ID_OSD_PARAM_SHOW_CONFIG=11035;s.MAVLINK_MSG_ID_OSD_PARAM_SHOW_CONFIG_REPLY=11036;s.MAVLINK_MSG_ID_OBSTACLE_DISTANCE_3D=11037;s.MAVLINK_MSG_ID_WATER_DEPTH=11038;s.MAVLINK_MSG_ID_MCU_STATUS=11039;s.MAVLINK_MSG_ID_ESC_TELEMETRY_13_TO_16=11040;s.MAVLINK_MSG_ID_ESC_TELEMETRY_17_TO_20=11041;s.MAVLINK_MSG_ID_ESC_TELEMETRY_21_TO_24=11042;s.MAVLINK_MSG_ID_ESC_TELEMETRY_25_TO_28=11043;s.MAVLINK_MSG_ID_ESC_TELEMETRY_29_TO_32=11044;s.MAVLINK_MSG_ID_COMMAND_INT_STAMPED=223;s.MAVLINK_MSG_ID_COMMAND_LONG_STAMPED=224;s.MAVLINK_MSG_ID_SENS_POWER=8002;s.MAVLINK_MSG_ID_SENS_MPPT=8003;s.MAVLINK_MSG_ID_ASLCTRL_DATA=8004;s.MAVLINK_MSG_ID_ASLCTRL_DEBUG=8005;s.MAVLINK_MSG_ID_ASLUAV_STATUS=8006;s.MAVLINK_MSG_ID_EKF_EXT=8007;s.MAVLINK_MSG_ID_ASL_OBCTRL=8008;s.MAVLINK_MSG_ID_SENS_ATMOS=8009;s.MAVLINK_MSG_ID_SENS_BATMON=8010;s.MAVLINK_MSG_ID_FW_SOARING_DATA=8011;s.MAVLINK_MSG_ID_SENSORPOD_STATUS=8012;s.MAVLINK_MSG_ID_SENS_POWER_BOARD=8013;s.MAVLINK_MSG_ID_GSM_LINK_STATUS=8014;s.MAVLINK_MSG_ID_SATCOM_LINK_STATUS=8015;s.MAVLINK_MSG_ID_SENSOR_AIRFLOW_ANGLES=8016;s.MAVLINK_MSG_ID_SYS_STATUS=1;s.MAVLINK_MSG_ID_SYSTEM_TIME=2;s.MAVLINK_MSG_ID_PING=4;s.MAVLINK_MSG_ID_CHANGE_OPERATOR_CONTROL=5;s.MAVLINK_MSG_ID_CHANGE_OPERATOR_CONTROL_ACK=6;s.MAVLINK_MSG_ID_AUTH_KEY=7;s.MAVLINK_MSG_ID_SET_MODE=11;s.MAVLINK_MSG_ID_PARAM_REQUEST_READ=20;s.MAVLINK_MSG_ID_PARAM_REQUEST_LIST=21;s.MAVLINK_MSG_ID_PARAM_VALUE=22;s.MAVLINK_MSG_ID_PARAM_SET=23;s.MAVLINK_MSG_ID_GPS_RAW_INT=24;s.MAVLINK_MSG_ID_GPS_STATUS=25;s.MAVLINK_MSG_ID_SCALED_IMU=26;s.MAVLINK_MSG_ID_RAW_IMU=27;s.MAVLINK_MSG_ID_RAW_PRESSURE=28;s.MAVLINK_MSG_ID_SCALED_PRESSURE=29;s.MAVLINK_MSG_ID_ATTITUDE=30;s.MAVLINK_MSG_ID_ATTITUDE_QUATERNION=31;s.MAVLINK_MSG_ID_LOCAL_POSITION_NED=32;s.MAVLINK_MSG_ID_GLOBAL_POSITION_INT=33;s.MAVLINK_MSG_ID_RC_CHANNELS_SCALED=34;s.MAVLINK_MSG_ID_RC_CHANNELS_RAW=35;s.MAVLINK_MSG_ID_SERVO_OUTPUT_RAW=36;s.MAVLINK_MSG_ID_MISSION_REQUEST_PARTIAL_LIST=37;s.MAVLINK_MSG_ID_MISSION_WRITE_PARTIAL_LIST=38;s.MAVLINK_MSG_ID_MISSION_ITEM=39;s.MAVLINK_MSG_ID_MISSION_REQUEST=40;s.MAVLINK_MSG_ID_MISSION_SET_CURRENT=41;s.MAVLINK_MSG_ID_MISSION_CURRENT=42;s.MAVLINK_MSG_ID_MISSION_REQUEST_LIST=43;s.MAVLINK_MSG_ID_MISSION_COUNT=44;s.MAVLINK_MSG_ID_MISSION_CLEAR_ALL=45;s.MAVLINK_MSG_ID_MISSION_ITEM_REACHED=46;s.MAVLINK_MSG_ID_MISSION_ACK=47;s.MAVLINK_MSG_ID_SET_GPS_GLOBAL_ORIGIN=48;s.MAVLINK_MSG_ID_GPS_GLOBAL_ORIGIN=49;s.MAVLINK_MSG_ID_PARAM_MAP_RC=50;s.MAVLINK_MSG_ID_MISSION_REQUEST_INT=51;s.MAVLINK_MSG_ID_SAFETY_SET_ALLOWED_AREA=54;s.MAVLINK_MSG_ID_SAFETY_ALLOWED_AREA=55;s.MAVLINK_MSG_ID_ATTITUDE_QUATERNION_COV=61;s.MAVLINK_MSG_ID_NAV_CONTROLLER_OUTPUT=62;s.MAVLINK_MSG_ID_GLOBAL_POSITION_INT_COV=63;s.MAVLINK_MSG_ID_LOCAL_POSITION_NED_COV=64;s.MAVLINK_MSG_ID_RC_CHANNELS=65;s.MAVLINK_MSG_ID_REQUEST_DATA_STREAM=66;s.MAVLINK_MSG_ID_DATA_STREAM=67;s.MAVLINK_MSG_ID_MANUAL_CONTROL=69;s.MAVLINK_MSG_ID_RC_CHANNELS_OVERRIDE=70;s.MAVLINK_MSG_ID_MISSION_ITEM_INT=73;s.MAVLINK_MSG_ID_VFR_HUD=74;s.MAVLINK_MSG_ID_COMMAND_INT=75;s.MAVLINK_MSG_ID_COMMAND_LONG=76;s.MAVLINK_MSG_ID_COMMAND_ACK=77;s.MAVLINK_MSG_ID_MANUAL_SETPOINT=81;s.MAVLINK_MSG_ID_SET_ATTITUDE_TARGET=82;s.MAVLINK_MSG_ID_ATTITUDE_TARGET=83;s.MAVLINK_MSG_ID_SET_POSITION_TARGET_LOCAL_NED=84;s.MAVLINK_MSG_ID_POSITION_TARGET_LOCAL_NED=85;s.MAVLINK_MSG_ID_SET_POSITION_TARGET_GLOBAL_INT=86;s.MAVLINK_MSG_ID_POSITION_TARGET_GLOBAL_INT=87;s.MAVLINK_MSG_ID_LOCAL_POSITION_NED_SYSTEM_GLOBAL_OFFSET=89;s.MAVLINK_MSG_ID_HIL_STATE=90;s.MAVLINK_MSG_ID_HIL_CONTROLS=91;s.MAVLINK_MSG_ID_HIL_RC_INPUTS_RAW=92;s.MAVLINK_MSG_ID_HIL_ACTUATOR_CONTROLS=93;s.MAVLINK_MSG_ID_OPTICAL_FLOW=100;s.MAVLINK_MSG_ID_GLOBAL_VISION_POSITION_ESTIMATE=101;s.MAVLINK_MSG_ID_VISION_POSITION_ESTIMATE=102;s.MAVLINK_MSG_ID_VISION_SPEED_ESTIMATE=103;s.MAVLINK_MSG_ID_VICON_POSITION_ESTIMATE=104;s.MAVLINK_MSG_ID_HIGHRES_IMU=105;s.MAVLINK_MSG_ID_OPTICAL_FLOW_RAD=106;s.MAVLINK_MSG_ID_HIL_SENSOR=107;s.MAVLINK_MSG_ID_SIM_STATE=108;s.MAVLINK_MSG_ID_RADIO_STATUS=109;s.MAVLINK_MSG_ID_FILE_TRANSFER_PROTOCOL=110;s.MAVLINK_MSG_ID_TIMESYNC=111;s.MAVLINK_MSG_ID_CAMERA_TRIGGER=112;s.MAVLINK_MSG_ID_HIL_GPS=113;s.MAVLINK_MSG_ID_HIL_OPTICAL_FLOW=114;s.MAVLINK_MSG_ID_HIL_STATE_QUATERNION=115;s.MAVLINK_MSG_ID_SCALED_IMU2=116;s.MAVLINK_MSG_ID_LOG_REQUEST_LIST=117;s.MAVLINK_MSG_ID_LOG_ENTRY=118;s.MAVLINK_MSG_ID_LOG_REQUEST_DATA=119;s.MAVLINK_MSG_ID_LOG_DATA=120;s.MAVLINK_MSG_ID_LOG_ERASE=121;s.MAVLINK_MSG_ID_LOG_REQUEST_END=122;s.MAVLINK_MSG_ID_GPS_INJECT_DATA=123;s.MAVLINK_MSG_ID_GPS2_RAW=124;s.MAVLINK_MSG_ID_POWER_STATUS=125;s.MAVLINK_MSG_ID_SERIAL_CONTROL=126;s.MAVLINK_MSG_ID_GPS_RTK=127;s.MAVLINK_MSG_ID_GPS2_RTK=128;s.MAVLINK_MSG_ID_SCALED_IMU3=129;s.MAVLINK_MSG_ID_DATA_TRANSMISSION_HANDSHAKE=130;s.MAVLINK_MSG_ID_ENCAPSULATED_DATA=131;s.MAVLINK_MSG_ID_DISTANCE_SENSOR=132;s.MAVLINK_MSG_ID_TERRAIN_REQUEST=133;s.MAVLINK_MSG_ID_TERRAIN_DATA=134;s.MAVLINK_MSG_ID_TERRAIN_CHECK=135;s.MAVLINK_MSG_ID_TERRAIN_REPORT=136;s.MAVLINK_MSG_ID_SCALED_PRESSURE2=137;s.MAVLINK_MSG_ID_ATT_POS_MOCAP=138;s.MAVLINK_MSG_ID_SET_ACTUATOR_CONTROL_TARGET=139;s.MAVLINK_MSG_ID_ACTUATOR_CONTROL_TARGET=140;s.MAVLINK_MSG_ID_ALTITUDE=141;s.MAVLINK_MSG_ID_RESOURCE_REQUEST=142;s.MAVLINK_MSG_ID_SCALED_PRESSURE3=143;s.MAVLINK_MSG_ID_FOLLOW_TARGET=144;s.MAVLINK_MSG_ID_CONTROL_SYSTEM_STATE=146;s.MAVLINK_MSG_ID_BATTERY_STATUS=147;s.MAVLINK_MSG_ID_AUTOPILOT_VERSION=148;s.MAVLINK_MSG_ID_LANDING_TARGET=149;s.MAVLINK_MSG_ID_FENCE_STATUS=162;s.MAVLINK_MSG_ID_MAG_CAL_REPORT=192;s.MAVLINK_MSG_ID_EFI_STATUS=225;s.MAVLINK_MSG_ID_ESTIMATOR_STATUS=230;s.MAVLINK_MSG_ID_WIND_COV=231;s.MAVLINK_MSG_ID_GPS_INPUT=232;s.MAVLINK_MSG_ID_GPS_RTCM_DATA=233;s.MAVLINK_MSG_ID_HIGH_LATENCY=234;s.MAVLINK_MSG_ID_HIGH_LATENCY2=235;s.MAVLINK_MSG_ID_VIBRATION=241;s.MAVLINK_MSG_ID_HOME_POSITION=242;s.MAVLINK_MSG_ID_SET_HOME_POSITION=243;s.MAVLINK_MSG_ID_MESSAGE_INTERVAL=244;s.MAVLINK_MSG_ID_EXTENDED_SYS_STATE=245;s.MAVLINK_MSG_ID_ADSB_VEHICLE=246;s.MAVLINK_MSG_ID_COLLISION=247;s.MAVLINK_MSG_ID_V2_EXTENSION=248;s.MAVLINK_MSG_ID_MEMORY_VECT=249;s.MAVLINK_MSG_ID_DEBUG_VECT=250;s.MAVLINK_MSG_ID_NAMED_VALUE_FLOAT=251;s.MAVLINK_MSG_ID_NAMED_VALUE_INT=252;s.MAVLINK_MSG_ID_STATUSTEXT=253;s.MAVLINK_MSG_ID_DEBUG=254;s.MAVLINK_MSG_ID_SETUP_SIGNING=256;s.MAVLINK_MSG_ID_BUTTON_CHANGE=257;s.MAVLINK_MSG_ID_PLAY_TUNE=258;s.MAVLINK_MSG_ID_CAMERA_INFORMATION=259;s.MAVLINK_MSG_ID_CAMERA_SETTINGS=260;s.MAVLINK_MSG_ID_STORAGE_INFORMATION=261;s.MAVLINK_MSG_ID_CAMERA_CAPTURE_STATUS=262;s.MAVLINK_MSG_ID_CAMERA_IMAGE_CAPTURED=263;s.MAVLINK_MSG_ID_FLIGHT_INFORMATION=264;s.MAVLINK_MSG_ID_MOUNT_ORIENTATION=265;s.MAVLINK_MSG_ID_LOGGING_DATA=266;s.MAVLINK_MSG_ID_LOGGING_DATA_ACKED=267;s.MAVLINK_MSG_ID_LOGGING_ACK=268;s.MAVLINK_MSG_ID_VIDEO_STREAM_INFORMATION=269;s.MAVLINK_MSG_ID_VIDEO_STREAM_STATUS=270;s.MAVLINK_MSG_ID_CAMERA_FOV_STATUS=271;s.MAVLINK_MSG_ID_CAMERA_TRACKING_IMAGE_STATUS=275;s.MAVLINK_MSG_ID_CAMERA_TRACKING_GEO_STATUS=276;s.MAVLINK_MSG_ID_GIMBAL_MANAGER_INFORMATION=280;s.MAVLINK_MSG_ID_GIMBAL_MANAGER_STATUS=281;s.MAVLINK_MSG_ID_GIMBAL_MANAGER_SET_ATTITUDE=282;s.MAVLINK_MSG_ID_GIMBAL_DEVICE_INFORMATION=283;s.MAVLINK_MSG_ID_GIMBAL_DEVICE_SET_ATTITUDE=284;s.MAVLINK_MSG_ID_GIMBAL_DEVICE_ATTITUDE_STATUS=285;s.MAVLINK_MSG_ID_AUTOPILOT_STATE_FOR_GIMBAL_DEVICE=286;s.MAVLINK_MSG_ID_GIMBAL_MANAGER_SET_PITCHYAW=287;s.MAVLINK_MSG_ID_GIMBAL_MANAGER_SET_MANUAL_CONTROL=288;s.MAVLINK_MSG_ID_WIFI_CONFIG_AP=299;s.MAVLINK_MSG_ID_AIS_VESSEL=301;s.MAVLINK_MSG_ID_UAVCAN_NODE_STATUS=310;s.MAVLINK_MSG_ID_UAVCAN_NODE_INFO=311;s.MAVLINK_MSG_ID_PARAM_EXT_REQUEST_READ=320;s.MAVLINK_MSG_ID_PARAM_EXT_REQUEST_LIST=321;s.MAVLINK_MSG_ID_PARAM_EXT_VALUE=322;s.MAVLINK_MSG_ID_PARAM_EXT_SET=323;s.MAVLINK_MSG_ID_PARAM_EXT_ACK=324;s.MAVLINK_MSG_ID_OBSTACLE_DISTANCE=330;s.MAVLINK_MSG_ID_ODOMETRY=331;s.MAVLINK_MSG_ID_ISBD_LINK_STATUS=335;s.MAVLINK_MSG_ID_RAW_RPM=339;s.MAVLINK_MSG_ID_UTM_GLOBAL_POSITION=340;s.MAVLINK_MSG_ID_DEBUG_FLOAT_ARRAY=350;s.MAVLINK_MSG_ID_SMART_BATTERY_INFO=370;s.MAVLINK_MSG_ID_GENERATOR_STATUS=373;s.MAVLINK_MSG_ID_ACTUATOR_OUTPUT_STATUS=375;s.MAVLINK_MSG_ID_RELAY_STATUS=376;s.MAVLINK_MSG_ID_TUNNEL=385;s.MAVLINK_MSG_ID_CAN_FRAME=386;s.MAVLINK_MSG_ID_CANFD_FRAME=387;s.MAVLINK_MSG_ID_CAN_FILTER_MODIFY=388;s.MAVLINK_MSG_ID_WHEEL_DISTANCE=9e3;s.MAVLINK_MSG_ID_WINCH_STATUS=9005;s.MAVLINK_MSG_ID_OPEN_DRONE_ID_BASIC_ID=12900;s.MAVLINK_MSG_ID_OPEN_DRONE_ID_LOCATION=12901;s.MAVLINK_MSG_ID_OPEN_DRONE_ID_AUTHENTICATION=12902;s.MAVLINK_MSG_ID_OPEN_DRONE_ID_SELF_ID=12903;s.MAVLINK_MSG_ID_OPEN_DRONE_ID_SYSTEM=12904;s.MAVLINK_MSG_ID_OPEN_DRONE_ID_OPERATOR_ID=12905;s.MAVLINK_MSG_ID_OPEN_DRONE_ID_ARM_STATUS=12918;s.MAVLINK_MSG_ID_OPEN_DRONE_ID_MESSAGE_PACK=12915;s.MAVLINK_MSG_ID_OPEN_DRONE_ID_SYSTEM_UPDATE=12919;s.MAVLINK_MSG_ID_HYGROMETER_SENSOR=12920;s.MAVLINK_MSG_ID_MISSION_CHECKSUM=53;s.MAVLINK_MSG_ID_AIRSPEED=295;s.MAVLINK_MSG_ID_RADIO_RC_CHANNELS=420;s.MAVLINK_MSG_ID_ICAROUS_HEARTBEAT=42e3;s.MAVLINK_MSG_ID_ICAROUS_KINEMATIC_BANDS=42001;s.MAVLINK_MSG_ID_HEARTBEAT=0;s.MAVLINK_MSG_ID_ARRAY_TEST_0=17150;s.MAVLINK_MSG_ID_ARRAY_TEST_1=17151;s.MAVLINK_MSG_ID_ARRAY_TEST_3=17153;s.MAVLINK_MSG_ID_ARRAY_TEST_4=17154;s.MAVLINK_MSG_ID_ARRAY_TEST_5=17155;s.MAVLINK_MSG_ID_ARRAY_TEST_6=17156;s.MAVLINK_MSG_ID_ARRAY_TEST_7=17157;s.MAVLINK_MSG_ID_ARRAY_TEST_8=17158;s.MAVLINK_MSG_ID_TEST_TYPES=17e3;s.MAVLINK_MSG_ID_NAV_FILTER_BIAS=220;s.MAVLINK_MSG_ID_RADIO_CALIBRATION=221;s.MAVLINK_MSG_ID_UALBERTA_SYS_STATUS=222;s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_CFG=10001;s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_DYNAMIC=10002;s.MAVLINK_MSG_ID_UAVIONIX_ADSB_TRANSCEIVER_HEALTH_REPORT=10003;s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_CFG_REGISTRATION=10004;s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_CFG_FLIGHTID=10005;s.MAVLINK_MSG_ID_UAVIONIX_ADSB_GET=10006;s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_CONTROL=10007;s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_STATUS=10008;s.MAVLINK_MSG_ID_LOWEHEISER_GOV_EFI=10151;s.MAVLINK_MSG_ID_STORM32_GIMBAL_DEVICE_STATUS=60001;s.MAVLINK_MSG_ID_STORM32_GIMBAL_DEVICE_CONTROL=60002;s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_INFORMATION=60010;s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_STATUS=60011;s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_CONTROL=60012;s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_CONTROL_PITCHYAW=60013;s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_CORRECT_ROLL=60014;s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_PROFILE=60015;s.MAVLINK_MSG_ID_QSHOT_STATUS=60020;s.MAVLINK_MSG_ID_COMPONENT_PREARM_STATUS=60025;s.MAVLINK_MSG_ID_AVSS_PRS_SYS_STATUS=60050;s.MAVLINK_MSG_ID_AVSS_DRONE_POSITION=60051;s.MAVLINK_MSG_ID_AVSS_DRONE_IMU=60052;s.MAVLINK_MSG_ID_AVSS_DRONE_OPERATION_MODE=60053;s.MAVLINK_MSG_ID_CUBEPILOT_RAW_RC=50001;s.MAVLINK_MSG_ID_HERELINK_VIDEO_STREAM_INFORMATION=50002;s.MAVLINK_MSG_ID_HERELINK_TELEM=50003;s.MAVLINK_MSG_ID_CUBEPILOT_FIRMWARE_UPDATE_START=50004;s.MAVLINK_MSG_ID_CUBEPILOT_FIRMWARE_UPDATE_RESP=50005;s.MAVLINK_MSG_ID_AIRLINK_AUTH=52e3;s.MAVLINK_MSG_ID_AIRLINK_AUTH_RESPONSE=52001;s.messages={};s.messages.sensor_offsets=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<fiiffffffhhh",this.id=s.MAVLINK_MSG_ID_SENSOR_OFFSETS,this.order_map=[9,10,11,0,1,2,3,4,5,6,7,8],this.crc_extra=134,this.name="SENSOR_OFFSETS",this.fieldnames=["mag_ofs_x","mag_ofs_y","mag_ofs_z","mag_declination","raw_press","raw_temp","gyro_cal_x","gyro_cal_y","gyro_cal_z","accel_cal_x","accel_cal_y","accel_cal_z"],this.set(arguments)};s.messages.sensor_offsets.prototype=new s.message;s.messages.sensor_offsets.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.mag_declination,this.raw_press,this.raw_temp,this.gyro_cal_x,this.gyro_cal_y,this.gyro_cal_z,this.accel_cal_x,this.accel_cal_y,this.accel_cal_z,this.mag_ofs_x,this.mag_ofs_y,this.mag_ofs_z]))};s.messages.set_mag_offsets=function(r,t,e,i,n){this.format="<hhhBB",this.id=s.MAVLINK_MSG_ID_SET_MAG_OFFSETS,this.order_map=[3,4,0,1,2],this.crc_extra=219,this.name="SET_MAG_OFFSETS",this.fieldnames=["target_system","target_component","mag_ofs_x","mag_ofs_y","mag_ofs_z"],this.set(arguments)};s.messages.set_mag_offsets.prototype=new s.message;s.messages.set_mag_offsets.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.mag_ofs_x,this.mag_ofs_y,this.mag_ofs_z,this.target_system,this.target_component]))};s.messages.meminfo=function(r,t,e){this.format="<HHI",this.id=s.MAVLINK_MSG_ID_MEMINFO,this.order_map=[0,1,2],this.crc_extra=208,this.name="MEMINFO",this.fieldnames=["brkval","freemem","freemem32"],this.set(arguments)};s.messages.meminfo.prototype=new s.message;s.messages.meminfo.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.brkval,this.freemem,this.freemem32]))};s.messages.ap_adc=function(r,t,e,i,n,a){this.format="<HHHHHH",this.id=s.MAVLINK_MSG_ID_AP_ADC,this.order_map=[0,1,2,3,4,5],this.crc_extra=188,this.name="AP_ADC",this.fieldnames=["adc1","adc2","adc3","adc4","adc5","adc6"],this.set(arguments)};s.messages.ap_adc.prototype=new s.message;s.messages.ap_adc.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.adc1,this.adc2,this.adc3,this.adc4,this.adc5,this.adc6]))};s.messages.digicam_configure=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<fHBBBBBBBBB",this.id=s.MAVLINK_MSG_ID_DIGICAM_CONFIGURE,this.order_map=[2,3,4,1,5,6,7,8,9,10,0],this.crc_extra=84,this.name="DIGICAM_CONFIGURE",this.fieldnames=["target_system","target_component","mode","shutter_speed","aperture","iso","exposure_type","command_id","engine_cut_off","extra_param","extra_value"],this.set(arguments)};s.messages.digicam_configure.prototype=new s.message;s.messages.digicam_configure.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.extra_value,this.shutter_speed,this.target_system,this.target_component,this.mode,this.aperture,this.iso,this.exposure_type,this.command_id,this.engine_cut_off,this.extra_param]))};s.messages.digicam_control=function(r,t,e,i,n,a,o,c,_,l){this.format="<fBBBBbBBBB",this.id=s.MAVLINK_MSG_ID_DIGICAM_CONTROL,this.order_map=[1,2,3,4,5,6,7,8,9,0],this.crc_extra=22,this.name="DIGICAM_CONTROL",this.fieldnames=["target_system","target_component","session","zoom_pos","zoom_step","focus_lock","shot","command_id","extra_param","extra_value"],this.set(arguments)};s.messages.digicam_control.prototype=new s.message;s.messages.digicam_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.extra_value,this.target_system,this.target_component,this.session,this.zoom_pos,this.zoom_step,this.focus_lock,this.shot,this.command_id,this.extra_param]))};s.messages.mount_configure=function(r,t,e,i,n,a){this.format="<BBBBBB",this.id=s.MAVLINK_MSG_ID_MOUNT_CONFIGURE,this.order_map=[0,1,2,3,4,5],this.crc_extra=19,this.name="MOUNT_CONFIGURE",this.fieldnames=["target_system","target_component","mount_mode","stab_roll","stab_pitch","stab_yaw"],this.set(arguments)};s.messages.mount_configure.prototype=new s.message;s.messages.mount_configure.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.mount_mode,this.stab_roll,this.stab_pitch,this.stab_yaw]))};s.messages.mount_control=function(r,t,e,i,n,a){this.format="<iiiBBB",this.id=s.MAVLINK_MSG_ID_MOUNT_CONTROL,this.order_map=[3,4,0,1,2,5],this.crc_extra=21,this.name="MOUNT_CONTROL",this.fieldnames=["target_system","target_component","input_a","input_b","input_c","save_position"],this.set(arguments)};s.messages.mount_control.prototype=new s.message;s.messages.mount_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.input_a,this.input_b,this.input_c,this.target_system,this.target_component,this.save_position]))};s.messages.mount_status=function(r,t,e,i,n,a){this.format="<iiiBBB",this.id=s.MAVLINK_MSG_ID_MOUNT_STATUS,this.order_map=[3,4,0,1,2,5],this.crc_extra=134,this.name="MOUNT_STATUS",this.fieldnames=["target_system","target_component","pointing_a","pointing_b","pointing_c","mount_mode"],this.set(arguments)};s.messages.mount_status.prototype=new s.message;s.messages.mount_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.pointing_a,this.pointing_b,this.pointing_c,this.target_system,this.target_component,this.mount_mode]))};s.messages.fence_point=function(r,t,e,i,n,a){this.format="<ffBBBB",this.id=s.MAVLINK_MSG_ID_FENCE_POINT,this.order_map=[2,3,4,5,0,1],this.crc_extra=78,this.name="FENCE_POINT",this.fieldnames=["target_system","target_component","idx","count","lat","lng"],this.set(arguments)};s.messages.fence_point.prototype=new s.message;s.messages.fence_point.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.lat,this.lng,this.target_system,this.target_component,this.idx,this.count]))};s.messages.fence_fetch_point=function(r,t,e){this.format="<BBB",this.id=s.MAVLINK_MSG_ID_FENCE_FETCH_POINT,this.order_map=[0,1,2],this.crc_extra=68,this.name="FENCE_FETCH_POINT",this.fieldnames=["target_system","target_component","idx"],this.set(arguments)};s.messages.fence_fetch_point.prototype=new s.message;s.messages.fence_fetch_point.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.idx]))};s.messages.ahrs=function(r,t,e,i,n,a,o){this.format="<fffffff",this.id=s.MAVLINK_MSG_ID_AHRS,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=127,this.name="AHRS",this.fieldnames=["omegaIx","omegaIy","omegaIz","accel_weight","renorm_val","error_rp","error_yaw"],this.set(arguments)};s.messages.ahrs.prototype=new s.message;s.messages.ahrs.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.omegaIx,this.omegaIy,this.omegaIz,this.accel_weight,this.renorm_val,this.error_rp,this.error_yaw]))};s.messages.simstate=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<fffffffffii",this.id=s.MAVLINK_MSG_ID_SIMSTATE,this.order_map=[0,1,2,3,4,5,6,7,8,9,10],this.crc_extra=154,this.name="SIMSTATE",this.fieldnames=["roll","pitch","yaw","xacc","yacc","zacc","xgyro","ygyro","zgyro","lat","lng"],this.set(arguments)};s.messages.simstate.prototype=new s.message;s.messages.simstate.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.roll,this.pitch,this.yaw,this.xacc,this.yacc,this.zacc,this.xgyro,this.ygyro,this.zgyro,this.lat,this.lng]))};s.messages.hwstatus=function(r,t){this.format="<HB",this.id=s.MAVLINK_MSG_ID_HWSTATUS,this.order_map=[0,1],this.crc_extra=21,this.name="HWSTATUS",this.fieldnames=["Vcc","I2Cerr"],this.set(arguments)};s.messages.hwstatus.prototype=new s.message;s.messages.hwstatus.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.Vcc,this.I2Cerr]))};s.messages.radio=function(r,t,e,i,n,a,o){this.format="<HHBBBBB",this.id=s.MAVLINK_MSG_ID_RADIO,this.order_map=[2,3,4,5,6,0,1],this.crc_extra=21,this.name="RADIO",this.fieldnames=["rssi","remrssi","txbuf","noise","remnoise","rxerrors","fixed"],this.set(arguments)};s.messages.radio.prototype=new s.message;s.messages.radio.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.rxerrors,this.fixed,this.rssi,this.remrssi,this.txbuf,this.noise,this.remnoise]))};s.messages.limits_status=function(r,t,e,i,n,a,o,c,_){this.format="<IIIIHBBBB",this.id=s.MAVLINK_MSG_ID_LIMITS_STATUS,this.order_map=[5,0,1,2,3,4,6,7,8],this.crc_extra=144,this.name="LIMITS_STATUS",this.fieldnames=["limits_state","last_trigger","last_action","last_recovery","last_clear","breach_count","mods_enabled","mods_required","mods_triggered"],this.set(arguments)};s.messages.limits_status.prototype=new s.message;s.messages.limits_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.last_trigger,this.last_action,this.last_recovery,this.last_clear,this.breach_count,this.limits_state,this.mods_enabled,this.mods_required,this.mods_triggered]))};s.messages.wind=function(r,t,e){this.format="<fff",this.id=s.MAVLINK_MSG_ID_WIND,this.order_map=[0,1,2],this.crc_extra=1,this.name="WIND",this.fieldnames=["direction","speed","speed_z"],this.set(arguments)};s.messages.wind.prototype=new s.message;s.messages.wind.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.direction,this.speed,this.speed_z]))};s.messages.data16=function(r,t,e){this.format="<BB16s",this.id=s.MAVLINK_MSG_ID_DATA16,this.order_map=[0,1,2],this.crc_extra=234,this.name="DATA16",this.fieldnames=["type","len","data"],this.set(arguments)};s.messages.data16.prototype=new s.message;s.messages.data16.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.type,this.len,this.data]))};s.messages.data32=function(r,t,e){this.format="<BB32s",this.id=s.MAVLINK_MSG_ID_DATA32,this.order_map=[0,1,2],this.crc_extra=73,this.name="DATA32",this.fieldnames=["type","len","data"],this.set(arguments)};s.messages.data32.prototype=new s.message;s.messages.data32.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.type,this.len,this.data]))};s.messages.data64=function(r,t,e){this.format="<BB64s",this.id=s.MAVLINK_MSG_ID_DATA64,this.order_map=[0,1,2],this.crc_extra=181,this.name="DATA64",this.fieldnames=["type","len","data"],this.set(arguments)};s.messages.data64.prototype=new s.message;s.messages.data64.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.type,this.len,this.data]))};s.messages.data96=function(r,t,e){this.format="<BB96s",this.id=s.MAVLINK_MSG_ID_DATA96,this.order_map=[0,1,2],this.crc_extra=22,this.name="DATA96",this.fieldnames=["type","len","data"],this.set(arguments)};s.messages.data96.prototype=new s.message;s.messages.data96.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.type,this.len,this.data]))};s.messages.rangefinder=function(r,t){this.format="<ff",this.id=s.MAVLINK_MSG_ID_RANGEFINDER,this.order_map=[0,1],this.crc_extra=83,this.name="RANGEFINDER",this.fieldnames=["distance","voltage"],this.set(arguments)};s.messages.rangefinder.prototype=new s.message;s.messages.rangefinder.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.distance,this.voltage]))};s.messages.airspeed_autocal=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<ffffffffffff",this.id=s.MAVLINK_MSG_ID_AIRSPEED_AUTOCAL,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11],this.crc_extra=167,this.name="AIRSPEED_AUTOCAL",this.fieldnames=["vx","vy","vz","diff_pressure","EAS2TAS","ratio","state_x","state_y","state_z","Pax","Pby","Pcz"],this.set(arguments)};s.messages.airspeed_autocal.prototype=new s.message;s.messages.airspeed_autocal.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.vx,this.vy,this.vz,this.diff_pressure,this.EAS2TAS,this.ratio,this.state_x,this.state_y,this.state_z,this.Pax,this.Pby,this.Pcz]))};s.messages.rally_point=function(r,t,e,i,n,a,o,c,_,l){this.format="<iihhHBBBBB",this.id=s.MAVLINK_MSG_ID_RALLY_POINT,this.order_map=[5,6,7,8,0,1,2,3,4,9],this.crc_extra=138,this.name="RALLY_POINT",this.fieldnames=["target_system","target_component","idx","count","lat","lng","alt","break_alt","land_dir","flags"],this.set(arguments)};s.messages.rally_point.prototype=new s.message;s.messages.rally_point.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.lat,this.lng,this.alt,this.break_alt,this.land_dir,this.target_system,this.target_component,this.idx,this.count,this.flags]))};s.messages.rally_fetch_point=function(r,t,e){this.format="<BBB",this.id=s.MAVLINK_MSG_ID_RALLY_FETCH_POINT,this.order_map=[0,1,2],this.crc_extra=234,this.name="RALLY_FETCH_POINT",this.fieldnames=["target_system","target_component","idx"],this.set(arguments)};s.messages.rally_fetch_point.prototype=new s.message;s.messages.rally_fetch_point.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.idx]))};s.messages.compassmot_status=function(r,t,e,i,n,a){this.format="<ffffHH",this.id=s.MAVLINK_MSG_ID_COMPASSMOT_STATUS,this.order_map=[4,0,5,1,2,3],this.crc_extra=240,this.name="COMPASSMOT_STATUS",this.fieldnames=["throttle","current","interference","CompensationX","CompensationY","CompensationZ"],this.set(arguments)};s.messages.compassmot_status.prototype=new s.message;s.messages.compassmot_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.current,this.CompensationX,this.CompensationY,this.CompensationZ,this.throttle,this.interference]))};s.messages.ahrs2=function(r,t,e,i,n,a){this.format="<ffffii",this.id=s.MAVLINK_MSG_ID_AHRS2,this.order_map=[0,1,2,3,4,5],this.crc_extra=47,this.name="AHRS2",this.fieldnames=["roll","pitch","yaw","altitude","lat","lng"],this.set(arguments)};s.messages.ahrs2.prototype=new s.message;s.messages.ahrs2.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.roll,this.pitch,this.yaw,this.altitude,this.lat,this.lng]))};s.messages.camera_status=function(r,t,e,i,n,a,o,c,_){this.format="<QffffHBBB",this.id=s.MAVLINK_MSG_ID_CAMERA_STATUS,this.order_map=[0,6,7,5,8,1,2,3,4],this.crc_extra=189,this.name="CAMERA_STATUS",this.fieldnames=["time_usec","target_system","cam_idx","img_idx","event_id","p1","p2","p3","p4"],this.set(arguments)};s.messages.camera_status.prototype=new s.message;s.messages.camera_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.p1,this.p2,this.p3,this.p4,this.img_idx,this.target_system,this.cam_idx,this.event_id]))};s.messages.camera_feedback=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d){this.format="<QiiffffffHBBBH",this.id=s.MAVLINK_MSG_ID_CAMERA_FEEDBACK,this.order_map=[0,10,11,9,1,2,3,4,5,6,7,8,12,13],this.crc_extra=52,this.name="CAMERA_FEEDBACK",this.fieldnames=["time_usec","target_system","cam_idx","img_idx","lat","lng","alt_msl","alt_rel","roll","pitch","yaw","foc_len","flags","completed_captures"],this.set(arguments)};s.messages.camera_feedback.prototype=new s.message;s.messages.camera_feedback.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.lat,this.lng,this.alt_msl,this.alt_rel,this.roll,this.pitch,this.yaw,this.foc_len,this.img_idx,this.target_system,this.cam_idx,this.flags,this.completed_captures]))};s.messages.battery2=function(r,t){this.format="<Hh",this.id=s.MAVLINK_MSG_ID_BATTERY2,this.order_map=[0,1],this.crc_extra=174,this.name="BATTERY2",this.fieldnames=["voltage","current_battery"],this.set(arguments)};s.messages.battery2.prototype=new s.message;s.messages.battery2.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.voltage,this.current_battery]))};s.messages.ahrs3=function(r,t,e,i,n,a,o,c,_,l){this.format="<ffffiiffff",this.id=s.MAVLINK_MSG_ID_AHRS3,this.order_map=[0,1,2,3,4,5,6,7,8,9],this.crc_extra=229,this.name="AHRS3",this.fieldnames=["roll","pitch","yaw","altitude","lat","lng","v1","v2","v3","v4"],this.set(arguments)};s.messages.ahrs3.prototype=new s.message;s.messages.ahrs3.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.roll,this.pitch,this.yaw,this.altitude,this.lat,this.lng,this.v1,this.v2,this.v3,this.v4]))};s.messages.autopilot_version_request=function(r,t){this.format="<BB",this.id=s.MAVLINK_MSG_ID_AUTOPILOT_VERSION_REQUEST,this.order_map=[0,1],this.crc_extra=85,this.name="AUTOPILOT_VERSION_REQUEST",this.fieldnames=["target_system","target_component"],this.set(arguments)};s.messages.autopilot_version_request.prototype=new s.message;s.messages.autopilot_version_request.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component]))};s.messages.remote_log_data_block=function(r,t,e,i){this.format="<IBB200s",this.id=s.MAVLINK_MSG_ID_REMOTE_LOG_DATA_BLOCK,this.order_map=[1,2,0,3],this.crc_extra=159,this.name="REMOTE_LOG_DATA_BLOCK",this.fieldnames=["target_system","target_component","seqno","data"],this.set(arguments)};s.messages.remote_log_data_block.prototype=new s.message;s.messages.remote_log_data_block.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.seqno,this.target_system,this.target_component,this.data]))};s.messages.remote_log_block_status=function(r,t,e,i){this.format="<IBBB",this.id=s.MAVLINK_MSG_ID_REMOTE_LOG_BLOCK_STATUS,this.order_map=[1,2,0,3],this.crc_extra=186,this.name="REMOTE_LOG_BLOCK_STATUS",this.fieldnames=["target_system","target_component","seqno","status"],this.set(arguments)};s.messages.remote_log_block_status.prototype=new s.message;s.messages.remote_log_block_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.seqno,this.target_system,this.target_component,this.status]))};s.messages.led_control=function(r,t,e,i,n,a){this.format="<BBBBB24s",this.id=s.MAVLINK_MSG_ID_LED_CONTROL,this.order_map=[0,1,2,3,4,5],this.crc_extra=72,this.name="LED_CONTROL",this.fieldnames=["target_system","target_component","instance","pattern","custom_len","custom_bytes"],this.set(arguments)};s.messages.led_control.prototype=new s.message;s.messages.led_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.instance,this.pattern,this.custom_len,this.custom_bytes]))};s.messages.mag_cal_progress=function(r,t,e,i,n,a,o,c,_){this.format="<fffBBBBB10s",this.id=s.MAVLINK_MSG_ID_MAG_CAL_PROGRESS,this.order_map=[3,4,5,6,7,8,0,1,2],this.crc_extra=92,this.name="MAG_CAL_PROGRESS",this.fieldnames=["compass_id","cal_mask","cal_status","attempt","completion_pct","completion_mask","direction_x","direction_y","direction_z"],this.set(arguments)};s.messages.mag_cal_progress.prototype=new s.message;s.messages.mag_cal_progress.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.direction_x,this.direction_y,this.direction_z,this.compass_id,this.cal_mask,this.cal_status,this.attempt,this.completion_pct,this.completion_mask]))};s.messages.ekf_status_report=function(r,t,e,i,n,a,o){this.format="<fffffHf",this.id=s.MAVLINK_MSG_ID_EKF_STATUS_REPORT,this.order_map=[5,0,1,2,3,4,6],this.crc_extra=71,this.name="EKF_STATUS_REPORT",this.fieldnames=["flags","velocity_variance","pos_horiz_variance","pos_vert_variance","compass_variance","terrain_alt_variance","airspeed_variance"],this.set(arguments)};s.messages.ekf_status_report.prototype=new s.message;s.messages.ekf_status_report.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.velocity_variance,this.pos_horiz_variance,this.pos_vert_variance,this.compass_variance,this.terrain_alt_variance,this.flags,this.airspeed_variance]))};s.messages.pid_tuning=function(r,t,e,i,n,a,o,c,_){this.format="<ffffffBff",this.id=s.MAVLINK_MSG_ID_PID_TUNING,this.order_map=[6,0,1,2,3,4,5,7,8],this.crc_extra=98,this.name="PID_TUNING",this.fieldnames=["axis","desired","achieved","FF","P","I","D","SRate","PDmod"],this.set(arguments)};s.messages.pid_tuning.prototype=new s.message;s.messages.pid_tuning.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.desired,this.achieved,this.FF,this.P,this.I,this.D,this.axis,this.SRate,this.PDmod]))};s.messages.deepstall=function(r,t,e,i,n,a,o,c,_,l){this.format="<iiiiiifffB",this.id=s.MAVLINK_MSG_ID_DEEPSTALL,this.order_map=[0,1,2,3,4,5,6,7,8,9],this.crc_extra=120,this.name="DEEPSTALL",this.fieldnames=["landing_lat","landing_lon","path_lat","path_lon","arc_entry_lat","arc_entry_lon","altitude","expected_travel_distance","cross_track_error","stage"],this.set(arguments)};s.messages.deepstall.prototype=new s.message;s.messages.deepstall.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.landing_lat,this.landing_lon,this.path_lat,this.path_lon,this.arc_entry_lat,this.arc_entry_lon,this.altitude,this.expected_travel_distance,this.cross_track_error,this.stage]))};s.messages.gimbal_report=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<ffffffffffBB",this.id=s.MAVLINK_MSG_ID_GIMBAL_REPORT,this.order_map=[10,11,0,1,2,3,4,5,6,7,8,9],this.crc_extra=134,this.name="GIMBAL_REPORT",this.fieldnames=["target_system","target_component","delta_time","delta_angle_x","delta_angle_y","delta_angle_z","delta_velocity_x","delta_velocity_y","delta_velocity_z","joint_roll","joint_el","joint_az"],this.set(arguments)};s.messages.gimbal_report.prototype=new s.message;s.messages.gimbal_report.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.delta_time,this.delta_angle_x,this.delta_angle_y,this.delta_angle_z,this.delta_velocity_x,this.delta_velocity_y,this.delta_velocity_z,this.joint_roll,this.joint_el,this.joint_az,this.target_system,this.target_component]))};s.messages.gimbal_control=function(r,t,e,i,n){this.format="<fffBB",this.id=s.MAVLINK_MSG_ID_GIMBAL_CONTROL,this.order_map=[3,4,0,1,2],this.crc_extra=205,this.name="GIMBAL_CONTROL",this.fieldnames=["target_system","target_component","demanded_rate_x","demanded_rate_y","demanded_rate_z"],this.set(arguments)};s.messages.gimbal_control.prototype=new s.message;s.messages.gimbal_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.demanded_rate_x,this.demanded_rate_y,this.demanded_rate_z,this.target_system,this.target_component]))};s.messages.gimbal_torque_cmd_report=function(r,t,e,i,n){this.format="<hhhBB",this.id=s.MAVLINK_MSG_ID_GIMBAL_TORQUE_CMD_REPORT,this.order_map=[3,4,0,1,2],this.crc_extra=69,this.name="GIMBAL_TORQUE_CMD_REPORT",this.fieldnames=["target_system","target_component","rl_torque_cmd","el_torque_cmd","az_torque_cmd"],this.set(arguments)};s.messages.gimbal_torque_cmd_report.prototype=new s.message;s.messages.gimbal_torque_cmd_report.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.rl_torque_cmd,this.el_torque_cmd,this.az_torque_cmd,this.target_system,this.target_component]))};s.messages.gopro_heartbeat=function(r,t,e){this.format="<BBB",this.id=s.MAVLINK_MSG_ID_GOPRO_HEARTBEAT,this.order_map=[0,1,2],this.crc_extra=101,this.name="GOPRO_HEARTBEAT",this.fieldnames=["status","capture_mode","flags"],this.set(arguments)};s.messages.gopro_heartbeat.prototype=new s.message;s.messages.gopro_heartbeat.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.status,this.capture_mode,this.flags]))};s.messages.gopro_get_request=function(r,t,e){this.format="<BBB",this.id=s.MAVLINK_MSG_ID_GOPRO_GET_REQUEST,this.order_map=[0,1,2],this.crc_extra=50,this.name="GOPRO_GET_REQUEST",this.fieldnames=["target_system","target_component","cmd_id"],this.set(arguments)};s.messages.gopro_get_request.prototype=new s.message;s.messages.gopro_get_request.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.cmd_id]))};s.messages.gopro_get_response=function(r,t,e){this.format="<BB4s",this.id=s.MAVLINK_MSG_ID_GOPRO_GET_RESPONSE,this.order_map=[0,1,2],this.crc_extra=202,this.name="GOPRO_GET_RESPONSE",this.fieldnames=["cmd_id","status","value"],this.set(arguments)};s.messages.gopro_get_response.prototype=new s.message;s.messages.gopro_get_response.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.cmd_id,this.status,this.value]))};s.messages.gopro_set_request=function(r,t,e,i){this.format="<BBB4s",this.id=s.MAVLINK_MSG_ID_GOPRO_SET_REQUEST,this.order_map=[0,1,2,3],this.crc_extra=17,this.name="GOPRO_SET_REQUEST",this.fieldnames=["target_system","target_component","cmd_id","value"],this.set(arguments)};s.messages.gopro_set_request.prototype=new s.message;s.messages.gopro_set_request.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.cmd_id,this.value]))};s.messages.gopro_set_response=function(r,t){this.format="<BB",this.id=s.MAVLINK_MSG_ID_GOPRO_SET_RESPONSE,this.order_map=[0,1],this.crc_extra=162,this.name="GOPRO_SET_RESPONSE",this.fieldnames=["cmd_id","status"],this.set(arguments)};s.messages.gopro_set_response.prototype=new s.message;s.messages.gopro_set_response.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.cmd_id,this.status]))};s.messages.rpm=function(r,t){this.format="<ff",this.id=s.MAVLINK_MSG_ID_RPM,this.order_map=[0,1],this.crc_extra=207,this.name="RPM",this.fieldnames=["rpm1","rpm2"],this.set(arguments)};s.messages.rpm.prototype=new s.message;s.messages.rpm.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.rpm1,this.rpm2]))};s.messages.device_op_read=function(r,t,e,i,n,a,o,c,_,l){this.format="<IBBBBB40sBBB",this.id=s.MAVLINK_MSG_ID_DEVICE_OP_READ,this.order_map=[1,2,0,3,4,5,6,7,8,9],this.crc_extra=134,this.name="DEVICE_OP_READ",this.fieldnames=["target_system","target_component","request_id","bustype","bus","address","busname","regstart","count","bank"],this.set(arguments)};s.messages.device_op_read.prototype=new s.message;s.messages.device_op_read.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.request_id,this.target_system,this.target_component,this.bustype,this.bus,this.address,this.busname,this.regstart,this.count,this.bank]))};s.messages.device_op_read_reply=function(r,t,e,i,n,a){this.format="<IBBB128sB",this.id=s.MAVLINK_MSG_ID_DEVICE_OP_READ_REPLY,this.order_map=[0,1,2,3,4,5],this.crc_extra=15,this.name="DEVICE_OP_READ_REPLY",this.fieldnames=["request_id","result","regstart","count","data","bank"],this.set(arguments)};s.messages.device_op_read_reply.prototype=new s.message;s.messages.device_op_read_reply.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.request_id,this.result,this.regstart,this.count,this.data,this.bank]))};s.messages.device_op_write=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<IBBBBB40sBB128sB",this.id=s.MAVLINK_MSG_ID_DEVICE_OP_WRITE,this.order_map=[1,2,0,3,4,5,6,7,8,9,10],this.crc_extra=234,this.name="DEVICE_OP_WRITE",this.fieldnames=["target_system","target_component","request_id","bustype","bus","address","busname","regstart","count","data","bank"],this.set(arguments)};s.messages.device_op_write.prototype=new s.message;s.messages.device_op_write.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.request_id,this.target_system,this.target_component,this.bustype,this.bus,this.address,this.busname,this.regstart,this.count,this.data,this.bank]))};s.messages.device_op_write_reply=function(r,t){this.format="<IB",this.id=s.MAVLINK_MSG_ID_DEVICE_OP_WRITE_REPLY,this.order_map=[0,1],this.crc_extra=64,this.name="DEVICE_OP_WRITE_REPLY",this.fieldnames=["request_id","result"],this.set(arguments)};s.messages.device_op_write_reply.prototype=new s.message;s.messages.device_op_write_reply.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.request_id,this.result]))};s.messages.secure_command=function(r,t,e,i,n,a,o){this.format="<IIBBBB220s",this.id=s.MAVLINK_MSG_ID_SECURE_COMMAND,this.order_map=[2,3,0,1,4,5,6],this.crc_extra=11,this.name="SECURE_COMMAND",this.fieldnames=["target_system","target_component","sequence","operation","data_length","sig_length","data"],this.set(arguments)};s.messages.secure_command.prototype=new s.message;s.messages.secure_command.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.sequence,this.operation,this.target_system,this.target_component,this.data_length,this.sig_length,this.data]))};s.messages.secure_command_reply=function(r,t,e,i,n){this.format="<IIBB220s",this.id=s.MAVLINK_MSG_ID_SECURE_COMMAND_REPLY,this.order_map=[0,1,2,3,4],this.crc_extra=93,this.name="SECURE_COMMAND_REPLY",this.fieldnames=["sequence","operation","result","data_length","data"],this.set(arguments)};s.messages.secure_command_reply.prototype=new s.message;s.messages.secure_command_reply.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.sequence,this.operation,this.result,this.data_length,this.data]))};s.messages.adap_tuning=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<ffffffffffffB",this.id=s.MAVLINK_MSG_ID_ADAP_TUNING,this.order_map=[12,0,1,2,3,4,5,6,7,8,9,10,11],this.crc_extra=46,this.name="ADAP_TUNING",this.fieldnames=["axis","desired","achieved","error","theta","omega","sigma","theta_dot","omega_dot","sigma_dot","f","f_dot","u"],this.set(arguments)};s.messages.adap_tuning.prototype=new s.message;s.messages.adap_tuning.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.desired,this.achieved,this.error,this.theta,this.omega,this.sigma,this.theta_dot,this.omega_dot,this.sigma_dot,this.f,this.f_dot,this.u,this.axis]))};s.messages.vision_position_delta=function(r,t,e,i,n){this.format="<QQ3f3ff",this.id=s.MAVLINK_MSG_ID_VISION_POSITION_DELTA,this.order_map=[0,1,2,3,4],this.crc_extra=106,this.name="VISION_POSITION_DELTA",this.fieldnames=["time_usec","time_delta_usec","angle_delta","position_delta","confidence"],this.set(arguments)};s.messages.vision_position_delta.prototype=new s.message;s.messages.vision_position_delta.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.time_delta_usec,this.angle_delta,this.position_delta,this.confidence]))};s.messages.aoa_ssa=function(r,t,e){this.format="<Qff",this.id=s.MAVLINK_MSG_ID_AOA_SSA,this.order_map=[0,1,2],this.crc_extra=205,this.name="AOA_SSA",this.fieldnames=["time_usec","AOA","SSA"],this.set(arguments)};s.messages.aoa_ssa.prototype=new s.message;s.messages.aoa_ssa.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.AOA,this.SSA]))};s.messages.esc_telemetry_1_to_4=function(r,t,e,i,n,a){this.format="<4H4H4H4H4H4s",this.id=s.MAVLINK_MSG_ID_ESC_TELEMETRY_1_TO_4,this.order_map=[5,0,1,2,3,4],this.crc_extra=144,this.name="ESC_TELEMETRY_1_TO_4",this.fieldnames=["temperature","voltage","current","totalcurrent","rpm","count"],this.set(arguments)};s.messages.esc_telemetry_1_to_4.prototype=new s.message;s.messages.esc_telemetry_1_to_4.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.voltage,this.current,this.totalcurrent,this.rpm,this.count,this.temperature]))};s.messages.esc_telemetry_5_to_8=function(r,t,e,i,n,a){this.format="<4H4H4H4H4H4s",this.id=s.MAVLINK_MSG_ID_ESC_TELEMETRY_5_TO_8,this.order_map=[5,0,1,2,3,4],this.crc_extra=133,this.name="ESC_TELEMETRY_5_TO_8",this.fieldnames=["temperature","voltage","current","totalcurrent","rpm","count"],this.set(arguments)};s.messages.esc_telemetry_5_to_8.prototype=new s.message;s.messages.esc_telemetry_5_to_8.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.voltage,this.current,this.totalcurrent,this.rpm,this.count,this.temperature]))};s.messages.esc_telemetry_9_to_12=function(r,t,e,i,n,a){this.format="<4H4H4H4H4H4s",this.id=s.MAVLINK_MSG_ID_ESC_TELEMETRY_9_TO_12,this.order_map=[5,0,1,2,3,4],this.crc_extra=85,this.name="ESC_TELEMETRY_9_TO_12",this.fieldnames=["temperature","voltage","current","totalcurrent","rpm","count"],this.set(arguments)};s.messages.esc_telemetry_9_to_12.prototype=new s.message;s.messages.esc_telemetry_9_to_12.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.voltage,this.current,this.totalcurrent,this.rpm,this.count,this.temperature]))};s.messages.osd_param_config=function(r,t,e,i,n,a,o,c,_,l){this.format="<IfffBBBB16sB",this.id=s.MAVLINK_MSG_ID_OSD_PARAM_CONFIG,this.order_map=[4,5,0,6,7,8,9,1,2,3],this.crc_extra=195,this.name="OSD_PARAM_CONFIG",this.fieldnames=["target_system","target_component","request_id","osd_screen","osd_index","param_id","config_type","min_value","max_value","increment"],this.set(arguments)};s.messages.osd_param_config.prototype=new s.message;s.messages.osd_param_config.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.request_id,this.min_value,this.max_value,this.increment,this.target_system,this.target_component,this.osd_screen,this.osd_index,this.param_id,this.config_type]))};s.messages.osd_param_config_reply=function(r,t){this.format="<IB",this.id=s.MAVLINK_MSG_ID_OSD_PARAM_CONFIG_REPLY,this.order_map=[0,1],this.crc_extra=79,this.name="OSD_PARAM_CONFIG_REPLY",this.fieldnames=["request_id","result"],this.set(arguments)};s.messages.osd_param_config_reply.prototype=new s.message;s.messages.osd_param_config_reply.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.request_id,this.result]))};s.messages.osd_param_show_config=function(r,t,e,i,n){this.format="<IBBBB",this.id=s.MAVLINK_MSG_ID_OSD_PARAM_SHOW_CONFIG,this.order_map=[1,2,0,3,4],this.crc_extra=128,this.name="OSD_PARAM_SHOW_CONFIG",this.fieldnames=["target_system","target_component","request_id","osd_screen","osd_index"],this.set(arguments)};s.messages.osd_param_show_config.prototype=new s.message;s.messages.osd_param_show_config.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.request_id,this.target_system,this.target_component,this.osd_screen,this.osd_index]))};s.messages.osd_param_show_config_reply=function(r,t,e,i,n,a,o){this.format="<IfffB16sB",this.id=s.MAVLINK_MSG_ID_OSD_PARAM_SHOW_CONFIG_REPLY,this.order_map=[0,4,5,6,1,2,3],this.crc_extra=177,this.name="OSD_PARAM_SHOW_CONFIG_REPLY",this.fieldnames=["request_id","result","param_id","config_type","min_value","max_value","increment"],this.set(arguments)};s.messages.osd_param_show_config_reply.prototype=new s.message;s.messages.osd_param_show_config_reply.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.request_id,this.min_value,this.max_value,this.increment,this.result,this.param_id,this.config_type]))};s.messages.obstacle_distance_3d=function(r,t,e,i,n,a,o,c,_){this.format="<IfffffHBB",this.id=s.MAVLINK_MSG_ID_OBSTACLE_DISTANCE_3D,this.order_map=[0,7,8,6,1,2,3,4,5],this.crc_extra=130,this.name="OBSTACLE_DISTANCE_3D",this.fieldnames=["time_boot_ms","sensor_type","frame","obstacle_id","x","y","z","min_distance","max_distance"],this.set(arguments)};s.messages.obstacle_distance_3d.prototype=new s.message;s.messages.obstacle_distance_3d.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.x,this.y,this.z,this.min_distance,this.max_distance,this.obstacle_id,this.sensor_type,this.frame]))};s.messages.water_depth=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<IiiffffffBB",this.id=s.MAVLINK_MSG_ID_WATER_DEPTH,this.order_map=[0,9,10,1,2,3,4,5,6,7,8],this.crc_extra=47,this.name="WATER_DEPTH",this.fieldnames=["time_boot_ms","id","healthy","lat","lng","alt","roll","pitch","yaw","distance","temperature"],this.set(arguments)};s.messages.water_depth.prototype=new s.message;s.messages.water_depth.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.lat,this.lng,this.alt,this.roll,this.pitch,this.yaw,this.distance,this.temperature,this.id,this.healthy]))};s.messages.mcu_status=function(r,t,e,i,n){this.format="<hHHHB",this.id=s.MAVLINK_MSG_ID_MCU_STATUS,this.order_map=[4,0,1,2,3],this.crc_extra=142,this.name="MCU_STATUS",this.fieldnames=["id","MCU_temperature","MCU_voltage","MCU_voltage_min","MCU_voltage_max"],this.set(arguments)};s.messages.mcu_status.prototype=new s.message;s.messages.mcu_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.MCU_temperature,this.MCU_voltage,this.MCU_voltage_min,this.MCU_voltage_max,this.id]))};s.messages.esc_telemetry_13_to_16=function(r,t,e,i,n,a){this.format="<4H4H4H4H4H4s",this.id=s.MAVLINK_MSG_ID_ESC_TELEMETRY_13_TO_16,this.order_map=[5,0,1,2,3,4],this.crc_extra=132,this.name="ESC_TELEMETRY_13_TO_16",this.fieldnames=["temperature","voltage","current","totalcurrent","rpm","count"],this.set(arguments)};s.messages.esc_telemetry_13_to_16.prototype=new s.message;s.messages.esc_telemetry_13_to_16.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.voltage,this.current,this.totalcurrent,this.rpm,this.count,this.temperature]))};s.messages.esc_telemetry_17_to_20=function(r,t,e,i,n,a){this.format="<4H4H4H4H4H4s",this.id=s.MAVLINK_MSG_ID_ESC_TELEMETRY_17_TO_20,this.order_map=[5,0,1,2,3,4],this.crc_extra=208,this.name="ESC_TELEMETRY_17_TO_20",this.fieldnames=["temperature","voltage","current","totalcurrent","rpm","count"],this.set(arguments)};s.messages.esc_telemetry_17_to_20.prototype=new s.message;s.messages.esc_telemetry_17_to_20.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.voltage,this.current,this.totalcurrent,this.rpm,this.count,this.temperature]))};s.messages.esc_telemetry_21_to_24=function(r,t,e,i,n,a){this.format="<4H4H4H4H4H4s",this.id=s.MAVLINK_MSG_ID_ESC_TELEMETRY_21_TO_24,this.order_map=[5,0,1,2,3,4],this.crc_extra=201,this.name="ESC_TELEMETRY_21_TO_24",this.fieldnames=["temperature","voltage","current","totalcurrent","rpm","count"],this.set(arguments)};s.messages.esc_telemetry_21_to_24.prototype=new s.message;s.messages.esc_telemetry_21_to_24.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.voltage,this.current,this.totalcurrent,this.rpm,this.count,this.temperature]))};s.messages.esc_telemetry_25_to_28=function(r,t,e,i,n,a){this.format="<4H4H4H4H4H4s",this.id=s.MAVLINK_MSG_ID_ESC_TELEMETRY_25_TO_28,this.order_map=[5,0,1,2,3,4],this.crc_extra=193,this.name="ESC_TELEMETRY_25_TO_28",this.fieldnames=["temperature","voltage","current","totalcurrent","rpm","count"],this.set(arguments)};s.messages.esc_telemetry_25_to_28.prototype=new s.message;s.messages.esc_telemetry_25_to_28.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.voltage,this.current,this.totalcurrent,this.rpm,this.count,this.temperature]))};s.messages.esc_telemetry_29_to_32=function(r,t,e,i,n,a){this.format="<4H4H4H4H4H4s",this.id=s.MAVLINK_MSG_ID_ESC_TELEMETRY_29_TO_32,this.order_map=[5,0,1,2,3,4],this.crc_extra=189,this.name="ESC_TELEMETRY_29_TO_32",this.fieldnames=["temperature","voltage","current","totalcurrent","rpm","count"],this.set(arguments)};s.messages.esc_telemetry_29_to_32.prototype=new s.message;s.messages.esc_telemetry_29_to_32.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.voltage,this.current,this.totalcurrent,this.rpm,this.count,this.temperature]))};s.messages.command_int_stamped=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A){this.format="<QIffffiifHBBBBB",this.id=s.MAVLINK_MSG_ID_COMMAND_INT_STAMPED,this.order_map=[1,0,10,11,12,9,13,14,2,3,4,5,6,7,8],this.crc_extra=119,this.name="COMMAND_INT_STAMPED",this.fieldnames=["utc_time","vehicle_timestamp","target_system","target_component","frame","command","current","autocontinue","param1","param2","param3","param4","x","y","z"],this.set(arguments)};s.messages.command_int_stamped.prototype=new s.message;s.messages.command_int_stamped.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.vehicle_timestamp,this.utc_time,this.param1,this.param2,this.param3,this.param4,this.x,this.y,this.z,this.command,this.target_system,this.target_component,this.frame,this.current,this.autocontinue]))};s.messages.command_long_stamped=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<QIfffffffHBBB",this.id=s.MAVLINK_MSG_ID_COMMAND_LONG_STAMPED,this.order_map=[1,0,10,11,9,12,2,3,4,5,6,7,8],this.crc_extra=102,this.name="COMMAND_LONG_STAMPED",this.fieldnames=["utc_time","vehicle_timestamp","target_system","target_component","command","confirmation","param1","param2","param3","param4","param5","param6","param7"],this.set(arguments)};s.messages.command_long_stamped.prototype=new s.message;s.messages.command_long_stamped.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.vehicle_timestamp,this.utc_time,this.param1,this.param2,this.param3,this.param4,this.param5,this.param6,this.param7,this.command,this.target_system,this.target_component,this.confirmation]))};s.messages.sens_power=function(r,t,e,i){this.format="<ffff",this.id=s.MAVLINK_MSG_ID_SENS_POWER,this.order_map=[0,1,2,3],this.crc_extra=218,this.name="SENS_POWER",this.fieldnames=["adc121_vspb_volt","adc121_cspb_amp","adc121_cs1_amp","adc121_cs2_amp"],this.set(arguments)};s.messages.sens_power.prototype=new s.message;s.messages.sens_power.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.adc121_vspb_volt,this.adc121_cspb_amp,this.adc121_cs1_amp,this.adc121_cs2_amp]))};s.messages.sens_mppt=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<QffffffHHHBBB",this.id=s.MAVLINK_MSG_ID_SENS_MPPT,this.order_map=[0,1,2,7,10,3,4,8,11,5,6,9,12],this.crc_extra=231,this.name="SENS_MPPT",this.fieldnames=["mppt_timestamp","mppt1_volt","mppt1_amp","mppt1_pwm","mppt1_status","mppt2_volt","mppt2_amp","mppt2_pwm","mppt2_status","mppt3_volt","mppt3_amp","mppt3_pwm","mppt3_status"],this.set(arguments)};s.messages.sens_mppt.prototype=new s.message;s.messages.sens_mppt.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.mppt_timestamp,this.mppt1_volt,this.mppt1_amp,this.mppt2_volt,this.mppt2_amp,this.mppt3_volt,this.mppt3_amp,this.mppt1_pwm,this.mppt2_pwm,this.mppt3_pwm,this.mppt1_status,this.mppt2_status,this.mppt3_status]))};s.messages.aslctrl_data=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M,x,I,w,D,m,U){this.format="<QffffffffffffffffffffffBB",this.id=s.MAVLINK_MSG_ID_ASLCTRL_DATA,this.order_map=[0,23,1,2,3,4,5,6,7,8,9,10,11,12,24,13,14,15,16,17,18,19,20,21,22],this.crc_extra=172,this.name="ASLCTRL_DATA",this.fieldnames=["timestamp","aslctrl_mode","h","hRef","hRef_t","PitchAngle","PitchAngleRef","q","qRef","uElev","uThrot","uThrot2","nZ","AirspeedRef","SpoilersEngaged","YawAngle","YawAngleRef","RollAngle","RollAngleRef","p","pRef","r","rRef","uAil","uRud"],this.set(arguments)};s.messages.aslctrl_data.prototype=new s.message;s.messages.aslctrl_data.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.h,this.hRef,this.hRef_t,this.PitchAngle,this.PitchAngleRef,this.q,this.qRef,this.uElev,this.uThrot,this.uThrot2,this.nZ,this.AirspeedRef,this.YawAngle,this.YawAngleRef,this.RollAngle,this.RollAngleRef,this.p,this.pRef,this.r,this.rRef,this.uAil,this.uRud,this.aslctrl_mode,this.SpoilersEngaged]))};s.messages.aslctrl_debug=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<IffffffffBB",this.id=s.MAVLINK_MSG_ID_ASLCTRL_DEBUG,this.order_map=[0,9,10,1,2,3,4,5,6,7,8],this.crc_extra=251,this.name="ASLCTRL_DEBUG",this.fieldnames=["i32_1","i8_1","i8_2","f_1","f_2","f_3","f_4","f_5","f_6","f_7","f_8"],this.set(arguments)};s.messages.aslctrl_debug.prototype=new s.message;s.messages.aslctrl_debug.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.i32_1,this.f_1,this.f_2,this.f_3,this.f_4,this.f_5,this.f_6,this.f_7,this.f_8,this.i8_1,this.i8_2]))};s.messages.asluav_status=function(r,t,e,i){this.format="<fBB8s",this.id=s.MAVLINK_MSG_ID_ASLUAV_STATUS,this.order_map=[1,2,3,0],this.crc_extra=97,this.name="ASLUAV_STATUS",this.fieldnames=["LED_status","SATCOM_status","Servo_status","Motor_rpm"],this.set(arguments)};s.messages.asluav_status.prototype=new s.message;s.messages.asluav_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.Motor_rpm,this.LED_status,this.SATCOM_status,this.Servo_status]))};s.messages.ekf_ext=function(r,t,e,i,n,a,o){this.format="<Qffffff",this.id=s.MAVLINK_MSG_ID_EKF_EXT,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=64,this.name="EKF_EXT",this.fieldnames=["timestamp","Windspeed","WindDir","WindZ","Airspeed","beta","alpha"],this.set(arguments)};s.messages.ekf_ext.prototype=new s.message;s.messages.ekf_ext.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.Windspeed,this.WindDir,this.WindZ,this.Airspeed,this.beta,this.alpha]))};s.messages.asl_obctrl=function(r,t,e,i,n,a,o,c){this.format="<QffffffB",this.id=s.MAVLINK_MSG_ID_ASL_OBCTRL,this.order_map=[0,1,2,3,4,5,6,7],this.crc_extra=234,this.name="ASL_OBCTRL",this.fieldnames=["timestamp","uElev","uThrot","uThrot2","uAilL","uAilR","uRud","obctrl_status"],this.set(arguments)};s.messages.asl_obctrl.prototype=new s.message;s.messages.asl_obctrl.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.uElev,this.uThrot,this.uThrot2,this.uAilL,this.uAilR,this.uRud,this.obctrl_status]))};s.messages.sens_atmos=function(r,t,e){this.format="<Qff",this.id=s.MAVLINK_MSG_ID_SENS_ATMOS,this.order_map=[0,1,2],this.crc_extra=144,this.name="SENS_ATMOS",this.fieldnames=["timestamp","TempAmbient","Humidity"],this.set(arguments)};s.messages.sens_atmos.prototype=new s.message;s.messages.sens_atmos.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.TempAmbient,this.Humidity]))};s.messages.sens_batmon=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A){this.format="<QfIIHhHHHHHHHHB",this.id=s.MAVLINK_MSG_ID_SENS_BATMON,this.order_map=[0,1,4,5,14,6,7,2,3,8,9,10,11,12,13],this.crc_extra=155,this.name="SENS_BATMON",this.fieldnames=["batmon_timestamp","temperature","voltage","current","SoC","batterystatus","serialnumber","safetystatus","operationstatus","cellvoltage1","cellvoltage2","cellvoltage3","cellvoltage4","cellvoltage5","cellvoltage6"],this.set(arguments)};s.messages.sens_batmon.prototype=new s.message;s.messages.sens_batmon.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.batmon_timestamp,this.temperature,this.safetystatus,this.operationstatus,this.voltage,this.current,this.batterystatus,this.serialnumber,this.cellvoltage1,this.cellvoltage2,this.cellvoltage3,this.cellvoltage4,this.cellvoltage5,this.cellvoltage6,this.SoC]))};s.messages.fw_soaring_data=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M,x,I,w,D,m,U){this.format="<QQfffffffffffffffffffffBB",this.id=s.MAVLINK_MSG_ID_FW_SOARING_DATA,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],this.crc_extra=20,this.name="FW_SOARING_DATA",this.fieldnames=["timestamp","timestampModeChanged","xW","xR","xLat","xLon","VarW","VarR","VarLat","VarLon","LoiterRadius","LoiterDirection","DistToSoarPoint","vSinkExp","z1_LocalUpdraftSpeed","z2_DeltaRoll","z1_exp","z2_exp","ThermalGSNorth","ThermalGSEast","TSE_dot","DebugVar1","DebugVar2","ControlMode","valid"],this.set(arguments)};s.messages.fw_soaring_data.prototype=new s.message;s.messages.fw_soaring_data.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.timestampModeChanged,this.xW,this.xR,this.xLat,this.xLon,this.VarW,this.VarR,this.VarLat,this.VarLon,this.LoiterRadius,this.LoiterDirection,this.DistToSoarPoint,this.vSinkExp,this.z1_LocalUpdraftSpeed,this.z2_DeltaRoll,this.z1_exp,this.z2_exp,this.ThermalGSNorth,this.ThermalGSEast,this.TSE_dot,this.DebugVar1,this.DebugVar2,this.ControlMode,this.valid]))};s.messages.sensorpod_status=function(r,t,e,i,n,a,o,c){this.format="<QHBBBBBB",this.id=s.MAVLINK_MSG_ID_SENSORPOD_STATUS,this.order_map=[0,2,3,4,5,6,7,1],this.crc_extra=54,this.name="SENSORPOD_STATUS",this.fieldnames=["timestamp","visensor_rate_1","visensor_rate_2","visensor_rate_3","visensor_rate_4","recording_nodes_count","cpu_temp","free_space"],this.set(arguments)};s.messages.sensorpod_status.prototype=new s.message;s.messages.sensorpod_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.free_space,this.visensor_rate_1,this.visensor_rate_2,this.visensor_rate_3,this.visensor_rate_4,this.recording_nodes_count,this.cpu_temp]))};s.messages.sens_power_board=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<QfffffffffBB",this.id=s.MAVLINK_MSG_ID_SENS_POWER_BOARD,this.order_map=[0,10,11,1,2,3,4,5,6,7,8,9],this.crc_extra=222,this.name="SENS_POWER_BOARD",this.fieldnames=["timestamp","pwr_brd_status","pwr_brd_led_status","pwr_brd_system_volt","pwr_brd_servo_volt","pwr_brd_digital_volt","pwr_brd_mot_l_amp","pwr_brd_mot_r_amp","pwr_brd_analog_amp","pwr_brd_digital_amp","pwr_brd_ext_amp","pwr_brd_aux_amp"],this.set(arguments)};s.messages.sens_power_board.prototype=new s.message;s.messages.sens_power_board.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.pwr_brd_system_volt,this.pwr_brd_servo_volt,this.pwr_brd_digital_volt,this.pwr_brd_mot_l_amp,this.pwr_brd_mot_r_amp,this.pwr_brd_analog_amp,this.pwr_brd_digital_amp,this.pwr_brd_ext_amp,this.pwr_brd_aux_amp,this.pwr_brd_status,this.pwr_brd_led_status]))};s.messages.gsm_link_status=function(r,t,e,i,n,a,o){this.format="<QBBBBBB",this.id=s.MAVLINK_MSG_ID_GSM_LINK_STATUS,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=200,this.name="GSM_LINK_STATUS",this.fieldnames=["timestamp","gsm_modem_type","gsm_link_type","rssi","rsrp_rscp","sinr_ecio","rsrq"],this.set(arguments)};s.messages.gsm_link_status.prototype=new s.message;s.messages.gsm_link_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.gsm_modem_type,this.gsm_link_type,this.rssi,this.rsrp_rscp,this.sinr_ecio,this.rsrq]))};s.messages.satcom_link_status=function(r,t,e,i,n,a,o,c){this.format="<QQHHBBBB",this.id=s.MAVLINK_MSG_ID_SATCOM_LINK_STATUS,this.order_map=[0,1,2,3,4,5,6,7],this.crc_extra=23,this.name="SATCOM_LINK_STATUS",this.fieldnames=["timestamp","last_heartbeat","failed_sessions","successful_sessions","signal_quality","ring_pending","tx_session_pending","rx_session_pending"],this.set(arguments)};s.messages.satcom_link_status.prototype=new s.message;s.messages.satcom_link_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.last_heartbeat,this.failed_sessions,this.successful_sessions,this.signal_quality,this.ring_pending,this.tx_session_pending,this.rx_session_pending]))};s.messages.sensor_airflow_angles=function(r,t,e,i,n){this.format="<QffBB",this.id=s.MAVLINK_MSG_ID_SENSOR_AIRFLOW_ANGLES,this.order_map=[0,1,3,2,4],this.crc_extra=149,this.name="SENSOR_AIRFLOW_ANGLES",this.fieldnames=["timestamp","angleofattack","angleofattack_valid","sideslip","sideslip_valid"],this.set(arguments)};s.messages.sensor_airflow_angles.prototype=new s.message;s.messages.sensor_airflow_angles.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.angleofattack,this.sideslip,this.angleofattack_valid,this.sideslip_valid]))};s.messages.sys_status=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<IIIHHhHHHHHHb",this.id=s.MAVLINK_MSG_ID_SYS_STATUS,this.order_map=[0,1,2,3,4,5,12,6,7,8,9,10,11],this.crc_extra=124,this.name="SYS_STATUS",this.fieldnames=["onboard_control_sensors_present","onboard_control_sensors_enabled","onboard_control_sensors_health","load","voltage_battery","current_battery","battery_remaining","drop_rate_comm","errors_comm","errors_count1","errors_count2","errors_count3","errors_count4"],this.set(arguments)};s.messages.sys_status.prototype=new s.message;s.messages.sys_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.onboard_control_sensors_present,this.onboard_control_sensors_enabled,this.onboard_control_sensors_health,this.load,this.voltage_battery,this.current_battery,this.drop_rate_comm,this.errors_comm,this.errors_count1,this.errors_count2,this.errors_count3,this.errors_count4,this.battery_remaining]))};s.messages.system_time=function(r,t){this.format="<QI",this.id=s.MAVLINK_MSG_ID_SYSTEM_TIME,this.order_map=[0,1],this.crc_extra=137,this.name="SYSTEM_TIME",this.fieldnames=["time_unix_usec","time_boot_ms"],this.set(arguments)};s.messages.system_time.prototype=new s.message;s.messages.system_time.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_unix_usec,this.time_boot_ms]))};s.messages.ping=function(r,t,e,i){this.format="<QIBB",this.id=s.MAVLINK_MSG_ID_PING,this.order_map=[0,1,2,3],this.crc_extra=237,this.name="PING",this.fieldnames=["time_usec","seq","target_system","target_component"],this.set(arguments)};s.messages.ping.prototype=new s.message;s.messages.ping.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.seq,this.target_system,this.target_component]))};s.messages.change_operator_control=function(r,t,e,i){this.format="<BBB25s",this.id=s.MAVLINK_MSG_ID_CHANGE_OPERATOR_CONTROL,this.order_map=[0,1,2,3],this.crc_extra=217,this.name="CHANGE_OPERATOR_CONTROL",this.fieldnames=["target_system","control_request","version","passkey"],this.set(arguments)};s.messages.change_operator_control.prototype=new s.message;s.messages.change_operator_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.control_request,this.version,this.passkey]))};s.messages.change_operator_control_ack=function(r,t,e){this.format="<BBB",this.id=s.MAVLINK_MSG_ID_CHANGE_OPERATOR_CONTROL_ACK,this.order_map=[0,1,2],this.crc_extra=104,this.name="CHANGE_OPERATOR_CONTROL_ACK",this.fieldnames=["gcs_system_id","control_request","ack"],this.set(arguments)};s.messages.change_operator_control_ack.prototype=new s.message;s.messages.change_operator_control_ack.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.gcs_system_id,this.control_request,this.ack]))};s.messages.auth_key=function(r){this.format="<32s",this.id=s.MAVLINK_MSG_ID_AUTH_KEY,this.order_map=[0],this.crc_extra=119,this.name="AUTH_KEY",this.fieldnames=["key"],this.set(arguments)};s.messages.auth_key.prototype=new s.message;s.messages.auth_key.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.key]))};s.messages.set_mode=function(r,t,e){this.format="<IBB",this.id=s.MAVLINK_MSG_ID_SET_MODE,this.order_map=[1,2,0],this.crc_extra=89,this.name="SET_MODE",this.fieldnames=["target_system","base_mode","custom_mode"],this.set(arguments)};s.messages.set_mode.prototype=new s.message;s.messages.set_mode.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.custom_mode,this.target_system,this.base_mode]))};s.messages.param_request_read=function(r,t,e,i){this.format="<hBB16s",this.id=s.MAVLINK_MSG_ID_PARAM_REQUEST_READ,this.order_map=[1,2,3,0],this.crc_extra=214,this.name="PARAM_REQUEST_READ",this.fieldnames=["target_system","target_component","param_id","param_index"],this.set(arguments)};s.messages.param_request_read.prototype=new s.message;s.messages.param_request_read.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param_index,this.target_system,this.target_component,this.param_id]))};s.messages.param_request_list=function(r,t){this.format="<BB",this.id=s.MAVLINK_MSG_ID_PARAM_REQUEST_LIST,this.order_map=[0,1],this.crc_extra=159,this.name="PARAM_REQUEST_LIST",this.fieldnames=["target_system","target_component"],this.set(arguments)};s.messages.param_request_list.prototype=new s.message;s.messages.param_request_list.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component]))};s.messages.param_value=function(r,t,e,i,n){this.format="<fHH16sB",this.id=s.MAVLINK_MSG_ID_PARAM_VALUE,this.order_map=[3,0,4,1,2],this.crc_extra=220,this.name="PARAM_VALUE",this.fieldnames=["param_id","param_value","param_type","param_count","param_index"],this.set(arguments)};s.messages.param_value.prototype=new s.message;s.messages.param_value.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param_value,this.param_count,this.param_index,this.param_id,this.param_type]))};s.messages.param_set=function(r,t,e,i,n){this.format="<fBB16sB",this.id=s.MAVLINK_MSG_ID_PARAM_SET,this.order_map=[1,2,3,0,4],this.crc_extra=168,this.name="PARAM_SET",this.fieldnames=["target_system","target_component","param_id","param_value","param_type"],this.set(arguments)};s.messages.param_set.prototype=new s.message;s.messages.param_set.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param_value,this.target_system,this.target_component,this.param_id,this.param_type]))};s.messages.gps_raw_int=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<QiiiHHHHBBiIIIIH",this.id=s.MAVLINK_MSG_ID_GPS_RAW_INT,this.order_map=[0,8,1,2,3,4,5,6,7,9,10,11,12,13,14,15],this.crc_extra=24,this.name="GPS_RAW_INT",this.fieldnames=["time_usec","fix_type","lat","lon","alt","eph","epv","vel","cog","satellites_visible","alt_ellipsoid","h_acc","v_acc","vel_acc","hdg_acc","yaw"],this.set(arguments)};s.messages.gps_raw_int.prototype=new s.message;s.messages.gps_raw_int.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.lat,this.lon,this.alt,this.eph,this.epv,this.vel,this.cog,this.fix_type,this.satellites_visible,this.alt_ellipsoid,this.h_acc,this.v_acc,this.vel_acc,this.hdg_acc,this.yaw]))};s.messages.gps_status=function(r,t,e,i,n,a){this.format="<B20s20s20s20s20s",this.id=s.MAVLINK_MSG_ID_GPS_STATUS,this.order_map=[0,1,2,3,4,5],this.crc_extra=23,this.name="GPS_STATUS",this.fieldnames=["satellites_visible","satellite_prn","satellite_used","satellite_elevation","satellite_azimuth","satellite_snr"],this.set(arguments)};s.messages.gps_status.prototype=new s.message;s.messages.gps_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.satellites_visible,this.satellite_prn,this.satellite_used,this.satellite_elevation,this.satellite_azimuth,this.satellite_snr]))};s.messages.scaled_imu=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<Ihhhhhhhhhh",this.id=s.MAVLINK_MSG_ID_SCALED_IMU,this.order_map=[0,1,2,3,4,5,6,7,8,9,10],this.crc_extra=170,this.name="SCALED_IMU",this.fieldnames=["time_boot_ms","xacc","yacc","zacc","xgyro","ygyro","zgyro","xmag","ymag","zmag","temperature"],this.set(arguments)};s.messages.scaled_imu.prototype=new s.message;s.messages.scaled_imu.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.xacc,this.yacc,this.zacc,this.xgyro,this.ygyro,this.zgyro,this.xmag,this.ymag,this.zmag,this.temperature]))};s.messages.raw_imu=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<QhhhhhhhhhBh",this.id=s.MAVLINK_MSG_ID_RAW_IMU,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11],this.crc_extra=144,this.name="RAW_IMU",this.fieldnames=["time_usec","xacc","yacc","zacc","xgyro","ygyro","zgyro","xmag","ymag","zmag","id","temperature"],this.set(arguments)};s.messages.raw_imu.prototype=new s.message;s.messages.raw_imu.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.xacc,this.yacc,this.zacc,this.xgyro,this.ygyro,this.zgyro,this.xmag,this.ymag,this.zmag,this.id,this.temperature]))};s.messages.raw_pressure=function(r,t,e,i,n){this.format="<Qhhhh",this.id=s.MAVLINK_MSG_ID_RAW_PRESSURE,this.order_map=[0,1,2,3,4],this.crc_extra=67,this.name="RAW_PRESSURE",this.fieldnames=["time_usec","press_abs","press_diff1","press_diff2","temperature"],this.set(arguments)};s.messages.raw_pressure.prototype=new s.message;s.messages.raw_pressure.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.press_abs,this.press_diff1,this.press_diff2,this.temperature]))};s.messages.scaled_pressure=function(r,t,e,i,n){this.format="<Iffhh",this.id=s.MAVLINK_MSG_ID_SCALED_PRESSURE,this.order_map=[0,1,2,3,4],this.crc_extra=115,this.name="SCALED_PRESSURE",this.fieldnames=["time_boot_ms","press_abs","press_diff","temperature","temperature_press_diff"],this.set(arguments)};s.messages.scaled_pressure.prototype=new s.message;s.messages.scaled_pressure.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.press_abs,this.press_diff,this.temperature,this.temperature_press_diff]))};s.messages.attitude=function(r,t,e,i,n,a,o){this.format="<Iffffff",this.id=s.MAVLINK_MSG_ID_ATTITUDE,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=39,this.name="ATTITUDE",this.fieldnames=["time_boot_ms","roll","pitch","yaw","rollspeed","pitchspeed","yawspeed"],this.set(arguments)};s.messages.attitude.prototype=new s.message;s.messages.attitude.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.roll,this.pitch,this.yaw,this.rollspeed,this.pitchspeed,this.yawspeed]))};s.messages.attitude_quaternion=function(r,t,e,i,n,a,o,c,_){this.format="<Ifffffff4f",this.id=s.MAVLINK_MSG_ID_ATTITUDE_QUATERNION,this.order_map=[0,1,2,3,4,5,6,7,8],this.crc_extra=246,this.name="ATTITUDE_QUATERNION",this.fieldnames=["time_boot_ms","q1","q2","q3","q4","rollspeed","pitchspeed","yawspeed","repr_offset_q"],this.set(arguments)};s.messages.attitude_quaternion.prototype=new s.message;s.messages.attitude_quaternion.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.q1,this.q2,this.q3,this.q4,this.rollspeed,this.pitchspeed,this.yawspeed,this.repr_offset_q]))};s.messages.local_position_ned=function(r,t,e,i,n,a,o){this.format="<Iffffff",this.id=s.MAVLINK_MSG_ID_LOCAL_POSITION_NED,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=185,this.name="LOCAL_POSITION_NED",this.fieldnames=["time_boot_ms","x","y","z","vx","vy","vz"],this.set(arguments)};s.messages.local_position_ned.prototype=new s.message;s.messages.local_position_ned.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.x,this.y,this.z,this.vx,this.vy,this.vz]))};s.messages.global_position_int=function(r,t,e,i,n,a,o,c,_){this.format="<IiiiihhhH",this.id=s.MAVLINK_MSG_ID_GLOBAL_POSITION_INT,this.order_map=[0,1,2,3,4,5,6,7,8],this.crc_extra=104,this.name="GLOBAL_POSITION_INT",this.fieldnames=["time_boot_ms","lat","lon","alt","relative_alt","vx","vy","vz","hdg"],this.set(arguments)};s.messages.global_position_int.prototype=new s.message;s.messages.global_position_int.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.lat,this.lon,this.alt,this.relative_alt,this.vx,this.vy,this.vz,this.hdg]))};s.messages.rc_channels_scaled=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<IhhhhhhhhBB",this.id=s.MAVLINK_MSG_ID_RC_CHANNELS_SCALED,this.order_map=[0,9,1,2,3,4,5,6,7,8,10],this.crc_extra=237,this.name="RC_CHANNELS_SCALED",this.fieldnames=["time_boot_ms","port","chan1_scaled","chan2_scaled","chan3_scaled","chan4_scaled","chan5_scaled","chan6_scaled","chan7_scaled","chan8_scaled","rssi"],this.set(arguments)};s.messages.rc_channels_scaled.prototype=new s.message;s.messages.rc_channels_scaled.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.chan1_scaled,this.chan2_scaled,this.chan3_scaled,this.chan4_scaled,this.chan5_scaled,this.chan6_scaled,this.chan7_scaled,this.chan8_scaled,this.port,this.rssi]))};s.messages.rc_channels_raw=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<IHHHHHHHHBB",this.id=s.MAVLINK_MSG_ID_RC_CHANNELS_RAW,this.order_map=[0,9,1,2,3,4,5,6,7,8,10],this.crc_extra=244,this.name="RC_CHANNELS_RAW",this.fieldnames=["time_boot_ms","port","chan1_raw","chan2_raw","chan3_raw","chan4_raw","chan5_raw","chan6_raw","chan7_raw","chan8_raw","rssi"],this.set(arguments)};s.messages.rc_channels_raw.prototype=new s.message;s.messages.rc_channels_raw.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.chan1_raw,this.chan2_raw,this.chan3_raw,this.chan4_raw,this.chan5_raw,this.chan6_raw,this.chan7_raw,this.chan8_raw,this.port,this.rssi]))};s.messages.servo_output_raw=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y){this.format="<IHHHHHHHHBHHHHHHHH",this.id=s.MAVLINK_MSG_ID_SERVO_OUTPUT_RAW,this.order_map=[0,9,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,17],this.crc_extra=222,this.name="SERVO_OUTPUT_RAW",this.fieldnames=["time_usec","port","servo1_raw","servo2_raw","servo3_raw","servo4_raw","servo5_raw","servo6_raw","servo7_raw","servo8_raw","servo9_raw","servo10_raw","servo11_raw","servo12_raw","servo13_raw","servo14_raw","servo15_raw","servo16_raw"],this.set(arguments)};s.messages.servo_output_raw.prototype=new s.message;s.messages.servo_output_raw.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.servo1_raw,this.servo2_raw,this.servo3_raw,this.servo4_raw,this.servo5_raw,this.servo6_raw,this.servo7_raw,this.servo8_raw,this.port,this.servo9_raw,this.servo10_raw,this.servo11_raw,this.servo12_raw,this.servo13_raw,this.servo14_raw,this.servo15_raw,this.servo16_raw]))};s.messages.mission_request_partial_list=function(r,t,e,i,n){this.format="<hhBBB",this.id=s.MAVLINK_MSG_ID_MISSION_REQUEST_PARTIAL_LIST,this.order_map=[2,3,0,1,4],this.crc_extra=212,this.name="MISSION_REQUEST_PARTIAL_LIST",this.fieldnames=["target_system","target_component","start_index","end_index","mission_type"],this.set(arguments)};s.messages.mission_request_partial_list.prototype=new s.message;s.messages.mission_request_partial_list.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.start_index,this.end_index,this.target_system,this.target_component,this.mission_type]))};s.messages.mission_write_partial_list=function(r,t,e,i,n){this.format="<hhBBB",this.id=s.MAVLINK_MSG_ID_MISSION_WRITE_PARTIAL_LIST,this.order_map=[2,3,0,1,4],this.crc_extra=9,this.name="MISSION_WRITE_PARTIAL_LIST",this.fieldnames=["target_system","target_component","start_index","end_index","mission_type"],this.set(arguments)};s.messages.mission_write_partial_list.prototype=new s.message;s.messages.mission_write_partial_list.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.start_index,this.end_index,this.target_system,this.target_component,this.mission_type]))};s.messages.mission_item=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A){this.format="<fffffffHHBBBBBB",this.id=s.MAVLINK_MSG_ID_MISSION_ITEM,this.order_map=[9,10,7,11,8,12,13,0,1,2,3,4,5,6,14],this.crc_extra=254,this.name="MISSION_ITEM",this.fieldnames=["target_system","target_component","seq","frame","command","current","autocontinue","param1","param2","param3","param4","x","y","z","mission_type"],this.set(arguments)};s.messages.mission_item.prototype=new s.message;s.messages.mission_item.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param1,this.param2,this.param3,this.param4,this.x,this.y,this.z,this.seq,this.command,this.target_system,this.target_component,this.frame,this.current,this.autocontinue,this.mission_type]))};s.messages.mission_request=function(r,t,e,i){this.format="<HBBB",this.id=s.MAVLINK_MSG_ID_MISSION_REQUEST,this.order_map=[1,2,0,3],this.crc_extra=230,this.name="MISSION_REQUEST",this.fieldnames=["target_system","target_component","seq","mission_type"],this.set(arguments)};s.messages.mission_request.prototype=new s.message;s.messages.mission_request.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.seq,this.target_system,this.target_component,this.mission_type]))};s.messages.mission_set_current=function(r,t,e){this.format="<HBB",this.id=s.MAVLINK_MSG_ID_MISSION_SET_CURRENT,this.order_map=[1,2,0],this.crc_extra=28,this.name="MISSION_SET_CURRENT",this.fieldnames=["target_system","target_component","seq"],this.set(arguments)};s.messages.mission_set_current.prototype=new s.message;s.messages.mission_set_current.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.seq,this.target_system,this.target_component]))};s.messages.mission_current=function(r,t,e,i){this.format="<HHBB",this.id=s.MAVLINK_MSG_ID_MISSION_CURRENT,this.order_map=[0,1,2,3],this.crc_extra=28,this.name="MISSION_CURRENT",this.fieldnames=["seq","total","mission_state","mission_mode"],this.set(arguments)};s.messages.mission_current.prototype=new s.message;s.messages.mission_current.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.seq,this.total,this.mission_state,this.mission_mode]))};s.messages.mission_request_list=function(r,t,e){this.format="<BBB",this.id=s.MAVLINK_MSG_ID_MISSION_REQUEST_LIST,this.order_map=[0,1,2],this.crc_extra=132,this.name="MISSION_REQUEST_LIST",this.fieldnames=["target_system","target_component","mission_type"],this.set(arguments)};s.messages.mission_request_list.prototype=new s.message;s.messages.mission_request_list.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.mission_type]))};s.messages.mission_count=function(r,t,e,i){this.format="<HBBB",this.id=s.MAVLINK_MSG_ID_MISSION_COUNT,this.order_map=[1,2,0,3],this.crc_extra=221,this.name="MISSION_COUNT",this.fieldnames=["target_system","target_component","count","mission_type"],this.set(arguments)};s.messages.mission_count.prototype=new s.message;s.messages.mission_count.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.count,this.target_system,this.target_component,this.mission_type]))};s.messages.mission_clear_all=function(r,t,e){this.format="<BBB",this.id=s.MAVLINK_MSG_ID_MISSION_CLEAR_ALL,this.order_map=[0,1,2],this.crc_extra=232,this.name="MISSION_CLEAR_ALL",this.fieldnames=["target_system","target_component","mission_type"],this.set(arguments)};s.messages.mission_clear_all.prototype=new s.message;s.messages.mission_clear_all.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.mission_type]))};s.messages.mission_item_reached=function(r){this.format="<H",this.id=s.MAVLINK_MSG_ID_MISSION_ITEM_REACHED,this.order_map=[0],this.crc_extra=11,this.name="MISSION_ITEM_REACHED",this.fieldnames=["seq"],this.set(arguments)};s.messages.mission_item_reached.prototype=new s.message;s.messages.mission_item_reached.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.seq]))};s.messages.mission_ack=function(r,t,e,i){this.format="<BBBB",this.id=s.MAVLINK_MSG_ID_MISSION_ACK,this.order_map=[0,1,2,3],this.crc_extra=153,this.name="MISSION_ACK",this.fieldnames=["target_system","target_component","type","mission_type"],this.set(arguments)};s.messages.mission_ack.prototype=new s.message;s.messages.mission_ack.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.type,this.mission_type]))};s.messages.set_gps_global_origin=function(r,t,e,i,n){this.format="<iiiBQ",this.id=s.MAVLINK_MSG_ID_SET_GPS_GLOBAL_ORIGIN,this.order_map=[3,0,1,2,4],this.crc_extra=41,this.name="SET_GPS_GLOBAL_ORIGIN",this.fieldnames=["target_system","latitude","longitude","altitude","time_usec"],this.set(arguments)};s.messages.set_gps_global_origin.prototype=new s.message;s.messages.set_gps_global_origin.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.latitude,this.longitude,this.altitude,this.target_system,this.time_usec]))};s.messages.gps_global_origin=function(r,t,e,i){this.format="<iiiQ",this.id=s.MAVLINK_MSG_ID_GPS_GLOBAL_ORIGIN,this.order_map=[0,1,2,3],this.crc_extra=39,this.name="GPS_GLOBAL_ORIGIN",this.fieldnames=["latitude","longitude","altitude","time_usec"],this.set(arguments)};s.messages.gps_global_origin.prototype=new s.message;s.messages.gps_global_origin.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.latitude,this.longitude,this.altitude,this.time_usec]))};s.messages.param_map_rc=function(r,t,e,i,n,a,o,c,_){this.format="<ffffhBB16sB",this.id=s.MAVLINK_MSG_ID_PARAM_MAP_RC,this.order_map=[5,6,7,4,8,0,1,2,3],this.crc_extra=78,this.name="PARAM_MAP_RC",this.fieldnames=["target_system","target_component","param_id","param_index","parameter_rc_channel_index","param_value0","scale","param_value_min","param_value_max"],this.set(arguments)};s.messages.param_map_rc.prototype=new s.message;s.messages.param_map_rc.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param_value0,this.scale,this.param_value_min,this.param_value_max,this.param_index,this.target_system,this.target_component,this.param_id,this.parameter_rc_channel_index]))};s.messages.mission_request_int=function(r,t,e,i){this.format="<HBBB",this.id=s.MAVLINK_MSG_ID_MISSION_REQUEST_INT,this.order_map=[1,2,0,3],this.crc_extra=196,this.name="MISSION_REQUEST_INT",this.fieldnames=["target_system","target_component","seq","mission_type"],this.set(arguments)};s.messages.mission_request_int.prototype=new s.message;s.messages.mission_request_int.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.seq,this.target_system,this.target_component,this.mission_type]))};s.messages.safety_set_allowed_area=function(r,t,e,i,n,a,o,c,_){this.format="<ffffffBBB",this.id=s.MAVLINK_MSG_ID_SAFETY_SET_ALLOWED_AREA,this.order_map=[6,7,8,0,1,2,3,4,5],this.crc_extra=15,this.name="SAFETY_SET_ALLOWED_AREA",this.fieldnames=["target_system","target_component","frame","p1x","p1y","p1z","p2x","p2y","p2z"],this.set(arguments)};s.messages.safety_set_allowed_area.prototype=new s.message;s.messages.safety_set_allowed_area.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.p1x,this.p1y,this.p1z,this.p2x,this.p2y,this.p2z,this.target_system,this.target_component,this.frame]))};s.messages.safety_allowed_area=function(r,t,e,i,n,a,o){this.format="<ffffffB",this.id=s.MAVLINK_MSG_ID_SAFETY_ALLOWED_AREA,this.order_map=[6,0,1,2,3,4,5],this.crc_extra=3,this.name="SAFETY_ALLOWED_AREA",this.fieldnames=["frame","p1x","p1y","p1z","p2x","p2y","p2z"],this.set(arguments)};s.messages.safety_allowed_area.prototype=new s.message;s.messages.safety_allowed_area.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.p1x,this.p1y,this.p1z,this.p2x,this.p2y,this.p2z,this.frame]))};s.messages.attitude_quaternion_cov=function(r,t,e,i,n,a){this.format="<Q4ffff9f",this.id=s.MAVLINK_MSG_ID_ATTITUDE_QUATERNION_COV,this.order_map=[0,1,2,3,4,5],this.crc_extra=167,this.name="ATTITUDE_QUATERNION_COV",this.fieldnames=["time_usec","q","rollspeed","pitchspeed","yawspeed","covariance"],this.set(arguments)};s.messages.attitude_quaternion_cov.prototype=new s.message;s.messages.attitude_quaternion_cov.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.q,this.rollspeed,this.pitchspeed,this.yawspeed,this.covariance]))};s.messages.nav_controller_output=function(r,t,e,i,n,a,o,c){this.format="<fffffhhH",this.id=s.MAVLINK_MSG_ID_NAV_CONTROLLER_OUTPUT,this.order_map=[0,1,5,6,7,2,3,4],this.crc_extra=183,this.name="NAV_CONTROLLER_OUTPUT",this.fieldnames=["nav_roll","nav_pitch","nav_bearing","target_bearing","wp_dist","alt_error","aspd_error","xtrack_error"],this.set(arguments)};s.messages.nav_controller_output.prototype=new s.message;s.messages.nav_controller_output.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.nav_roll,this.nav_pitch,this.alt_error,this.aspd_error,this.xtrack_error,this.nav_bearing,this.target_bearing,this.wp_dist]))};s.messages.global_position_int_cov=function(r,t,e,i,n,a,o,c,_,l){this.format="<Qiiiifff36fB",this.id=s.MAVLINK_MSG_ID_GLOBAL_POSITION_INT_COV,this.order_map=[0,9,1,2,3,4,5,6,7,8],this.crc_extra=119,this.name="GLOBAL_POSITION_INT_COV",this.fieldnames=["time_usec","estimator_type","lat","lon","alt","relative_alt","vx","vy","vz","covariance"],this.set(arguments)};s.messages.global_position_int_cov.prototype=new s.message;s.messages.global_position_int_cov.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.lat,this.lon,this.alt,this.relative_alt,this.vx,this.vy,this.vz,this.covariance,this.estimator_type]))};s.messages.local_position_ned_cov=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<Qfffffffff45fB",this.id=s.MAVLINK_MSG_ID_LOCAL_POSITION_NED_COV,this.order_map=[0,11,1,2,3,4,5,6,7,8,9,10],this.crc_extra=191,this.name="LOCAL_POSITION_NED_COV",this.fieldnames=["time_usec","estimator_type","x","y","z","vx","vy","vz","ax","ay","az","covariance"],this.set(arguments)};s.messages.local_position_ned_cov.prototype=new s.message;s.messages.local_position_ned_cov.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.x,this.y,this.z,this.vx,this.vy,this.vz,this.ax,this.ay,this.az,this.covariance,this.estimator_type]))};s.messages.rc_channels=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M,x,I){this.format="<IHHHHHHHHHHHHHHHHHHBB",this.id=s.MAVLINK_MSG_ID_RC_CHANNELS,this.order_map=[0,19,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20],this.crc_extra=118,this.name="RC_CHANNELS",this.fieldnames=["time_boot_ms","chancount","chan1_raw","chan2_raw","chan3_raw","chan4_raw","chan5_raw","chan6_raw","chan7_raw","chan8_raw","chan9_raw","chan10_raw","chan11_raw","chan12_raw","chan13_raw","chan14_raw","chan15_raw","chan16_raw","chan17_raw","chan18_raw","rssi"],this.set(arguments)};s.messages.rc_channels.prototype=new s.message;s.messages.rc_channels.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.chan1_raw,this.chan2_raw,this.chan3_raw,this.chan4_raw,this.chan5_raw,this.chan6_raw,this.chan7_raw,this.chan8_raw,this.chan9_raw,this.chan10_raw,this.chan11_raw,this.chan12_raw,this.chan13_raw,this.chan14_raw,this.chan15_raw,this.chan16_raw,this.chan17_raw,this.chan18_raw,this.chancount,this.rssi]))};s.messages.request_data_stream=function(r,t,e,i,n){this.format="<HBBBB",this.id=s.MAVLINK_MSG_ID_REQUEST_DATA_STREAM,this.order_map=[1,2,3,0,4],this.crc_extra=148,this.name="REQUEST_DATA_STREAM",this.fieldnames=["target_system","target_component","req_stream_id","req_message_rate","start_stop"],this.set(arguments)};s.messages.request_data_stream.prototype=new s.message;s.messages.request_data_stream.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.req_message_rate,this.target_system,this.target_component,this.req_stream_id,this.start_stop]))};s.messages.data_stream=function(r,t,e){this.format="<HBB",this.id=s.MAVLINK_MSG_ID_DATA_STREAM,this.order_map=[1,0,2],this.crc_extra=21,this.name="DATA_STREAM",this.fieldnames=["stream_id","message_rate","on_off"],this.set(arguments)};s.messages.data_stream.prototype=new s.message;s.messages.data_stream.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.message_rate,this.stream_id,this.on_off]))};s.messages.manual_control=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<hhhhHBHBhhhhhhhh",this.id=s.MAVLINK_MSG_ID_MANUAL_CONTROL,this.order_map=[5,0,1,2,3,4,6,7,8,9,10,11,12,13,14,15],this.crc_extra=243,this.name="MANUAL_CONTROL",this.fieldnames=["target","x","y","z","r","buttons","buttons2","enabled_extensions","s","t","aux1","aux2","aux3","aux4","aux5","aux6"],this.set(arguments)};s.messages.manual_control.prototype=new s.message;s.messages.manual_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.x,this.y,this.z,this.r,this.buttons,this.target,this.buttons2,this.enabled_extensions,this.s,this.t,this.aux1,this.aux2,this.aux3,this.aux4,this.aux5,this.aux6]))};s.messages.rc_channels_override=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M,x){this.format="<HHHHHHHHBBHHHHHHHHHH",this.id=s.MAVLINK_MSG_ID_RC_CHANNELS_OVERRIDE,this.order_map=[8,9,0,1,2,3,4,5,6,7,10,11,12,13,14,15,16,17,18,19],this.crc_extra=124,this.name="RC_CHANNELS_OVERRIDE",this.fieldnames=["target_system","target_component","chan1_raw","chan2_raw","chan3_raw","chan4_raw","chan5_raw","chan6_raw","chan7_raw","chan8_raw","chan9_raw","chan10_raw","chan11_raw","chan12_raw","chan13_raw","chan14_raw","chan15_raw","chan16_raw","chan17_raw","chan18_raw"],this.set(arguments)};s.messages.rc_channels_override.prototype=new s.message;s.messages.rc_channels_override.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.chan1_raw,this.chan2_raw,this.chan3_raw,this.chan4_raw,this.chan5_raw,this.chan6_raw,this.chan7_raw,this.chan8_raw,this.target_system,this.target_component,this.chan9_raw,this.chan10_raw,this.chan11_raw,this.chan12_raw,this.chan13_raw,this.chan14_raw,this.chan15_raw,this.chan16_raw,this.chan17_raw,this.chan18_raw]))};s.messages.mission_item_int=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A){this.format="<ffffiifHHBBBBBB",this.id=s.MAVLINK_MSG_ID_MISSION_ITEM_INT,this.order_map=[9,10,7,11,8,12,13,0,1,2,3,4,5,6,14],this.crc_extra=38,this.name="MISSION_ITEM_INT",this.fieldnames=["target_system","target_component","seq","frame","command","current","autocontinue","param1","param2","param3","param4","x","y","z","mission_type"],this.set(arguments)};s.messages.mission_item_int.prototype=new s.message;s.messages.mission_item_int.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param1,this.param2,this.param3,this.param4,this.x,this.y,this.z,this.seq,this.command,this.target_system,this.target_component,this.frame,this.current,this.autocontinue,this.mission_type]))};s.messages.vfr_hud=function(r,t,e,i,n,a){this.format="<ffffhH",this.id=s.MAVLINK_MSG_ID_VFR_HUD,this.order_map=[0,1,4,5,2,3],this.crc_extra=20,this.name="VFR_HUD",this.fieldnames=["airspeed","groundspeed","heading","throttle","alt","climb"],this.set(arguments)};s.messages.vfr_hud.prototype=new s.message;s.messages.vfr_hud.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.airspeed,this.groundspeed,this.alt,this.climb,this.heading,this.throttle]))};s.messages.command_int=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<ffffiifHBBBBB",this.id=s.MAVLINK_MSG_ID_COMMAND_INT,this.order_map=[8,9,10,7,11,12,0,1,2,3,4,5,6],this.crc_extra=158,this.name="COMMAND_INT",this.fieldnames=["target_system","target_component","frame","command","current","autocontinue","param1","param2","param3","param4","x","y","z"],this.set(arguments)};s.messages.command_int.prototype=new s.message;s.messages.command_int.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param1,this.param2,this.param3,this.param4,this.x,this.y,this.z,this.command,this.target_system,this.target_component,this.frame,this.current,this.autocontinue]))};s.messages.command_long=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<fffffffHBBB",this.id=s.MAVLINK_MSG_ID_COMMAND_LONG,this.order_map=[8,9,7,10,0,1,2,3,4,5,6],this.crc_extra=152,this.name="COMMAND_LONG",this.fieldnames=["target_system","target_component","command","confirmation","param1","param2","param3","param4","param5","param6","param7"],this.set(arguments)};s.messages.command_long.prototype=new s.message;s.messages.command_long.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param1,this.param2,this.param3,this.param4,this.param5,this.param6,this.param7,this.command,this.target_system,this.target_component,this.confirmation]))};s.messages.command_ack=function(r,t,e,i,n,a){this.format="<HBBiBB",this.id=s.MAVLINK_MSG_ID_COMMAND_ACK,this.order_map=[0,1,2,3,4,5],this.crc_extra=143,this.name="COMMAND_ACK",this.fieldnames=["command","result","progress","result_param2","target_system","target_component"],this.set(arguments)};s.messages.command_ack.prototype=new s.message;s.messages.command_ack.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.command,this.result,this.progress,this.result_param2,this.target_system,this.target_component]))};s.messages.manual_setpoint=function(r,t,e,i,n,a,o){this.format="<IffffBB",this.id=s.MAVLINK_MSG_ID_MANUAL_SETPOINT,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=106,this.name="MANUAL_SETPOINT",this.fieldnames=["time_boot_ms","roll","pitch","yaw","thrust","mode_switch","manual_override_switch"],this.set(arguments)};s.messages.manual_setpoint.prototype=new s.message;s.messages.manual_setpoint.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.roll,this.pitch,this.yaw,this.thrust,this.mode_switch,this.manual_override_switch]))};s.messages.set_attitude_target=function(r,t,e,i,n,a,o,c,_){this.format="<I4fffffBBB",this.id=s.MAVLINK_MSG_ID_SET_ATTITUDE_TARGET,this.order_map=[0,6,7,8,1,2,3,4,5],this.crc_extra=49,this.name="SET_ATTITUDE_TARGET",this.fieldnames=["time_boot_ms","target_system","target_component","type_mask","q","body_roll_rate","body_pitch_rate","body_yaw_rate","thrust"],this.set(arguments)};s.messages.set_attitude_target.prototype=new s.message;s.messages.set_attitude_target.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.q,this.body_roll_rate,this.body_pitch_rate,this.body_yaw_rate,this.thrust,this.target_system,this.target_component,this.type_mask]))};s.messages.attitude_target=function(r,t,e,i,n,a,o){this.format="<I4fffffB",this.id=s.MAVLINK_MSG_ID_ATTITUDE_TARGET,this.order_map=[0,6,1,2,3,4,5],this.crc_extra=22,this.name="ATTITUDE_TARGET",this.fieldnames=["time_boot_ms","type_mask","q","body_roll_rate","body_pitch_rate","body_yaw_rate","thrust"],this.set(arguments)};s.messages.attitude_target.prototype=new s.message;s.messages.attitude_target.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.q,this.body_roll_rate,this.body_pitch_rate,this.body_yaw_rate,this.thrust,this.type_mask]))};s.messages.set_position_target_local_ned=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<IfffffffffffHBBB",this.id=s.MAVLINK_MSG_ID_SET_POSITION_TARGET_LOCAL_NED,this.order_map=[0,13,14,15,12,1,2,3,4,5,6,7,8,9,10,11],this.crc_extra=143,this.name="SET_POSITION_TARGET_LOCAL_NED",this.fieldnames=["time_boot_ms","target_system","target_component","coordinate_frame","type_mask","x","y","z","vx","vy","vz","afx","afy","afz","yaw","yaw_rate"],this.set(arguments)};s.messages.set_position_target_local_ned.prototype=new s.message;s.messages.set_position_target_local_ned.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.x,this.y,this.z,this.vx,this.vy,this.vz,this.afx,this.afy,this.afz,this.yaw,this.yaw_rate,this.type_mask,this.target_system,this.target_component,this.coordinate_frame]))};s.messages.position_target_local_ned=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d){this.format="<IfffffffffffHB",this.id=s.MAVLINK_MSG_ID_POSITION_TARGET_LOCAL_NED,this.order_map=[0,13,12,1,2,3,4,5,6,7,8,9,10,11],this.crc_extra=140,this.name="POSITION_TARGET_LOCAL_NED",this.fieldnames=["time_boot_ms","coordinate_frame","type_mask","x","y","z","vx","vy","vz","afx","afy","afz","yaw","yaw_rate"],this.set(arguments)};s.messages.position_target_local_ned.prototype=new s.message;s.messages.position_target_local_ned.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.x,this.y,this.z,this.vx,this.vy,this.vz,this.afx,this.afy,this.afz,this.yaw,this.yaw_rate,this.type_mask,this.coordinate_frame]))};s.messages.set_position_target_global_int=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<IiifffffffffHBBB",this.id=s.MAVLINK_MSG_ID_SET_POSITION_TARGET_GLOBAL_INT,this.order_map=[0,13,14,15,12,1,2,3,4,5,6,7,8,9,10,11],this.crc_extra=5,this.name="SET_POSITION_TARGET_GLOBAL_INT",this.fieldnames=["time_boot_ms","target_system","target_component","coordinate_frame","type_mask","lat_int","lon_int","alt","vx","vy","vz","afx","afy","afz","yaw","yaw_rate"],this.set(arguments)};s.messages.set_position_target_global_int.prototype=new s.message;s.messages.set_position_target_global_int.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.lat_int,this.lon_int,this.alt,this.vx,this.vy,this.vz,this.afx,this.afy,this.afz,this.yaw,this.yaw_rate,this.type_mask,this.target_system,this.target_component,this.coordinate_frame]))};s.messages.position_target_global_int=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d){this.format="<IiifffffffffHB",this.id=s.MAVLINK_MSG_ID_POSITION_TARGET_GLOBAL_INT,this.order_map=[0,13,12,1,2,3,4,5,6,7,8,9,10,11],this.crc_extra=150,this.name="POSITION_TARGET_GLOBAL_INT",this.fieldnames=["time_boot_ms","coordinate_frame","type_mask","lat_int","lon_int","alt","vx","vy","vz","afx","afy","afz","yaw","yaw_rate"],this.set(arguments)};s.messages.position_target_global_int.prototype=new s.message;s.messages.position_target_global_int.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.lat_int,this.lon_int,this.alt,this.vx,this.vy,this.vz,this.afx,this.afy,this.afz,this.yaw,this.yaw_rate,this.type_mask,this.coordinate_frame]))};s.messages.local_position_ned_system_global_offset=function(r,t,e,i,n,a,o){this.format="<Iffffff",this.id=s.MAVLINK_MSG_ID_LOCAL_POSITION_NED_SYSTEM_GLOBAL_OFFSET,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=231,this.name="LOCAL_POSITION_NED_SYSTEM_GLOBAL_OFFSET",this.fieldnames=["time_boot_ms","x","y","z","roll","pitch","yaw"],this.set(arguments)};s.messages.local_position_ned_system_global_offset.prototype=new s.message;s.messages.local_position_ned_system_global_offset.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.x,this.y,this.z,this.roll,this.pitch,this.yaw]))};s.messages.hil_state=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<Qffffffiiihhhhhh",this.id=s.MAVLINK_MSG_ID_HIL_STATE,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],this.crc_extra=183,this.name="HIL_STATE",this.fieldnames=["time_usec","roll","pitch","yaw","rollspeed","pitchspeed","yawspeed","lat","lon","alt","vx","vy","vz","xacc","yacc","zacc"],this.set(arguments)};s.messages.hil_state.prototype=new s.message;s.messages.hil_state.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.roll,this.pitch,this.yaw,this.rollspeed,this.pitchspeed,this.yawspeed,this.lat,this.lon,this.alt,this.vx,this.vy,this.vz,this.xacc,this.yacc,this.zacc]))};s.messages.hil_controls=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<QffffffffBB",this.id=s.MAVLINK_MSG_ID_HIL_CONTROLS,this.order_map=[0,1,2,3,4,5,6,7,8,9,10],this.crc_extra=63,this.name="HIL_CONTROLS",this.fieldnames=["time_usec","roll_ailerons","pitch_elevator","yaw_rudder","throttle","aux1","aux2","aux3","aux4","mode","nav_mode"],this.set(arguments)};s.messages.hil_controls.prototype=new s.message;s.messages.hil_controls.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.roll_ailerons,this.pitch_elevator,this.yaw_rudder,this.throttle,this.aux1,this.aux2,this.aux3,this.aux4,this.mode,this.nav_mode]))};s.messages.hil_rc_inputs_raw=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d){this.format="<QHHHHHHHHHHHHB",this.id=s.MAVLINK_MSG_ID_HIL_RC_INPUTS_RAW,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13],this.crc_extra=54,this.name="HIL_RC_INPUTS_RAW",this.fieldnames=["time_usec","chan1_raw","chan2_raw","chan3_raw","chan4_raw","chan5_raw","chan6_raw","chan7_raw","chan8_raw","chan9_raw","chan10_raw","chan11_raw","chan12_raw","rssi"],this.set(arguments)};s.messages.hil_rc_inputs_raw.prototype=new s.message;s.messages.hil_rc_inputs_raw.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.chan1_raw,this.chan2_raw,this.chan3_raw,this.chan4_raw,this.chan5_raw,this.chan6_raw,this.chan7_raw,this.chan8_raw,this.chan9_raw,this.chan10_raw,this.chan11_raw,this.chan12_raw,this.rssi]))};s.messages.hil_actuator_controls=function(r,t,e,i){this.format="<QQ16fB",this.id=s.MAVLINK_MSG_ID_HIL_ACTUATOR_CONTROLS,this.order_map=[0,2,3,1],this.crc_extra=47,this.name="HIL_ACTUATOR_CONTROLS",this.fieldnames=["time_usec","controls","mode","flags"],this.set(arguments)};s.messages.hil_actuator_controls.prototype=new s.message;s.messages.hil_actuator_controls.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.flags,this.controls,this.mode]))};s.messages.optical_flow=function(r,t,e,i,n,a,o,c,_,l){this.format="<QfffhhBBff",this.id=s.MAVLINK_MSG_ID_OPTICAL_FLOW,this.order_map=[0,6,4,5,1,2,7,3,8,9],this.crc_extra=175,this.name="OPTICAL_FLOW",this.fieldnames=["time_usec","sensor_id","flow_x","flow_y","flow_comp_m_x","flow_comp_m_y","quality","ground_distance","flow_rate_x","flow_rate_y"],this.set(arguments)};s.messages.optical_flow.prototype=new s.message;s.messages.optical_flow.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.flow_comp_m_x,this.flow_comp_m_y,this.ground_distance,this.flow_x,this.flow_y,this.sensor_id,this.quality,this.flow_rate_x,this.flow_rate_y]))};s.messages.global_vision_position_estimate=function(r,t,e,i,n,a,o,c,_){this.format="<Qffffff21fB",this.id=s.MAVLINK_MSG_ID_GLOBAL_VISION_POSITION_ESTIMATE,this.order_map=[0,1,2,3,4,5,6,7,8],this.crc_extra=102,this.name="GLOBAL_VISION_POSITION_ESTIMATE",this.fieldnames=["usec","x","y","z","roll","pitch","yaw","covariance","reset_counter"],this.set(arguments)};s.messages.global_vision_position_estimate.prototype=new s.message;s.messages.global_vision_position_estimate.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.usec,this.x,this.y,this.z,this.roll,this.pitch,this.yaw,this.covariance,this.reset_counter]))};s.messages.vision_position_estimate=function(r,t,e,i,n,a,o,c,_){this.format="<Qffffff21fB",this.id=s.MAVLINK_MSG_ID_VISION_POSITION_ESTIMATE,this.order_map=[0,1,2,3,4,5,6,7,8],this.crc_extra=158,this.name="VISION_POSITION_ESTIMATE",this.fieldnames=["usec","x","y","z","roll","pitch","yaw","covariance","reset_counter"],this.set(arguments)};s.messages.vision_position_estimate.prototype=new s.message;s.messages.vision_position_estimate.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.usec,this.x,this.y,this.z,this.roll,this.pitch,this.yaw,this.covariance,this.reset_counter]))};s.messages.vision_speed_estimate=function(r,t,e,i,n,a){this.format="<Qfff9fB",this.id=s.MAVLINK_MSG_ID_VISION_SPEED_ESTIMATE,this.order_map=[0,1,2,3,4,5],this.crc_extra=208,this.name="VISION_SPEED_ESTIMATE",this.fieldnames=["usec","x","y","z","covariance","reset_counter"],this.set(arguments)};s.messages.vision_speed_estimate.prototype=new s.message;s.messages.vision_speed_estimate.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.usec,this.x,this.y,this.z,this.covariance,this.reset_counter]))};s.messages.vicon_position_estimate=function(r,t,e,i,n,a,o,c){this.format="<Qffffff21f",this.id=s.MAVLINK_MSG_ID_VICON_POSITION_ESTIMATE,this.order_map=[0,1,2,3,4,5,6,7],this.crc_extra=56,this.name="VICON_POSITION_ESTIMATE",this.fieldnames=["usec","x","y","z","roll","pitch","yaw","covariance"],this.set(arguments)};s.messages.vicon_position_estimate.prototype=new s.message;s.messages.vicon_position_estimate.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.usec,this.x,this.y,this.z,this.roll,this.pitch,this.yaw,this.covariance]))};s.messages.highres_imu=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<QfffffffffffffHB",this.id=s.MAVLINK_MSG_ID_HIGHRES_IMU,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],this.crc_extra=93,this.name="HIGHRES_IMU",this.fieldnames=["time_usec","xacc","yacc","zacc","xgyro","ygyro","zgyro","xmag","ymag","zmag","abs_pressure","diff_pressure","pressure_alt","temperature","fields_updated","id"],this.set(arguments)};s.messages.highres_imu.prototype=new s.message;s.messages.highres_imu.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.xacc,this.yacc,this.zacc,this.xgyro,this.ygyro,this.zgyro,this.xmag,this.ymag,this.zmag,this.abs_pressure,this.diff_pressure,this.pressure_alt,this.temperature,this.fields_updated,this.id]))};s.messages.optical_flow_rad=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<QIfffffIfhBB",this.id=s.MAVLINK_MSG_ID_OPTICAL_FLOW_RAD,this.order_map=[0,10,1,2,3,4,5,6,9,11,7,8],this.crc_extra=138,this.name="OPTICAL_FLOW_RAD",this.fieldnames=["time_usec","sensor_id","integration_time_us","integrated_x","integrated_y","integrated_xgyro","integrated_ygyro","integrated_zgyro","temperature","quality","time_delta_distance_us","distance"],this.set(arguments)};s.messages.optical_flow_rad.prototype=new s.message;s.messages.optical_flow_rad.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.integration_time_us,this.integrated_x,this.integrated_y,this.integrated_xgyro,this.integrated_ygyro,this.integrated_zgyro,this.time_delta_distance_us,this.distance,this.temperature,this.sensor_id,this.quality]))};s.messages.hil_sensor=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<QfffffffffffffIB",this.id=s.MAVLINK_MSG_ID_HIL_SENSOR,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],this.crc_extra=108,this.name="HIL_SENSOR",this.fieldnames=["time_usec","xacc","yacc","zacc","xgyro","ygyro","zgyro","xmag","ymag","zmag","abs_pressure","diff_pressure","pressure_alt","temperature","fields_updated","id"],this.set(arguments)};s.messages.hil_sensor.prototype=new s.message;s.messages.hil_sensor.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.xacc,this.yacc,this.zacc,this.xgyro,this.ygyro,this.zgyro,this.xmag,this.ymag,this.zmag,this.abs_pressure,this.diff_pressure,this.pressure_alt,this.temperature,this.fields_updated,this.id]))};s.messages.sim_state=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M,x,I,w,D){this.format="<fffffffffffffffffffffii",this.id=s.MAVLINK_MSG_ID_SIM_STATE,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],this.crc_extra=32,this.name="SIM_STATE",this.fieldnames=["q1","q2","q3","q4","roll","pitch","yaw","xacc","yacc","zacc","xgyro","ygyro","zgyro","lat","lon","alt","std_dev_horz","std_dev_vert","vn","ve","vd","lat_int","lon_int"],this.set(arguments)};s.messages.sim_state.prototype=new s.message;s.messages.sim_state.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.q1,this.q2,this.q3,this.q4,this.roll,this.pitch,this.yaw,this.xacc,this.yacc,this.zacc,this.xgyro,this.ygyro,this.zgyro,this.lat,this.lon,this.alt,this.std_dev_horz,this.std_dev_vert,this.vn,this.ve,this.vd,this.lat_int,this.lon_int]))};s.messages.radio_status=function(r,t,e,i,n,a,o){this.format="<HHBBBBB",this.id=s.MAVLINK_MSG_ID_RADIO_STATUS,this.order_map=[2,3,4,5,6,0,1],this.crc_extra=185,this.name="RADIO_STATUS",this.fieldnames=["rssi","remrssi","txbuf","noise","remnoise","rxerrors","fixed"],this.set(arguments)};s.messages.radio_status.prototype=new s.message;s.messages.radio_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.rxerrors,this.fixed,this.rssi,this.remrssi,this.txbuf,this.noise,this.remnoise]))};s.messages.file_transfer_protocol=function(r,t,e,i){this.format="<BBB251s",this.id=s.MAVLINK_MSG_ID_FILE_TRANSFER_PROTOCOL,this.order_map=[0,1,2,3],this.crc_extra=84,this.name="FILE_TRANSFER_PROTOCOL",this.fieldnames=["target_network","target_system","target_component","payload"],this.set(arguments)};s.messages.file_transfer_protocol.prototype=new s.message;s.messages.file_transfer_protocol.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_network,this.target_system,this.target_component,this.payload]))};s.messages.timesync=function(r,t){this.format="<qq",this.id=s.MAVLINK_MSG_ID_TIMESYNC,this.order_map=[0,1],this.crc_extra=34,this.name="TIMESYNC",this.fieldnames=["tc1","ts1"],this.set(arguments)};s.messages.timesync.prototype=new s.message;s.messages.timesync.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.tc1,this.ts1]))};s.messages.camera_trigger=function(r,t){this.format="<QI",this.id=s.MAVLINK_MSG_ID_CAMERA_TRIGGER,this.order_map=[0,1],this.crc_extra=174,this.name="CAMERA_TRIGGER",this.fieldnames=["time_usec","seq"],this.set(arguments)};s.messages.camera_trigger.prototype=new s.message;s.messages.camera_trigger.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.seq]))};s.messages.hil_gps=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A){this.format="<QiiiHHHhhhHBBBH",this.id=s.MAVLINK_MSG_ID_HIL_GPS,this.order_map=[0,11,1,2,3,4,5,6,7,8,9,10,12,13,14],this.crc_extra=124,this.name="HIL_GPS",this.fieldnames=["time_usec","fix_type","lat","lon","alt","eph","epv","vel","vn","ve","vd","cog","satellites_visible","id","yaw"],this.set(arguments)};s.messages.hil_gps.prototype=new s.message;s.messages.hil_gps.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.lat,this.lon,this.alt,this.eph,this.epv,this.vel,this.vn,this.ve,this.vd,this.cog,this.fix_type,this.satellites_visible,this.id,this.yaw]))};s.messages.hil_optical_flow=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<QIfffffIfhBB",this.id=s.MAVLINK_MSG_ID_HIL_OPTICAL_FLOW,this.order_map=[0,10,1,2,3,4,5,6,9,11,7,8],this.crc_extra=237,this.name="HIL_OPTICAL_FLOW",this.fieldnames=["time_usec","sensor_id","integration_time_us","integrated_x","integrated_y","integrated_xgyro","integrated_ygyro","integrated_zgyro","temperature","quality","time_delta_distance_us","distance"],this.set(arguments)};s.messages.hil_optical_flow.prototype=new s.message;s.messages.hil_optical_flow.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.integration_time_us,this.integrated_x,this.integrated_y,this.integrated_xgyro,this.integrated_ygyro,this.integrated_zgyro,this.time_delta_distance_us,this.distance,this.temperature,this.sensor_id,this.quality]))};s.messages.hil_state_quaternion=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<Q4ffffiiihhhHHhhh",this.id=s.MAVLINK_MSG_ID_HIL_STATE_QUATERNION,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],this.crc_extra=4,this.name="HIL_STATE_QUATERNION",this.fieldnames=["time_usec","attitude_quaternion","rollspeed","pitchspeed","yawspeed","lat","lon","alt","vx","vy","vz","ind_airspeed","true_airspeed","xacc","yacc","zacc"],this.set(arguments)};s.messages.hil_state_quaternion.prototype=new s.message;s.messages.hil_state_quaternion.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.attitude_quaternion,this.rollspeed,this.pitchspeed,this.yawspeed,this.lat,this.lon,this.alt,this.vx,this.vy,this.vz,this.ind_airspeed,this.true_airspeed,this.xacc,this.yacc,this.zacc]))};s.messages.scaled_imu2=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<Ihhhhhhhhhh",this.id=s.MAVLINK_MSG_ID_SCALED_IMU2,this.order_map=[0,1,2,3,4,5,6,7,8,9,10],this.crc_extra=76,this.name="SCALED_IMU2",this.fieldnames=["time_boot_ms","xacc","yacc","zacc","xgyro","ygyro","zgyro","xmag","ymag","zmag","temperature"],this.set(arguments)};s.messages.scaled_imu2.prototype=new s.message;s.messages.scaled_imu2.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.xacc,this.yacc,this.zacc,this.xgyro,this.ygyro,this.zgyro,this.xmag,this.ymag,this.zmag,this.temperature]))};s.messages.log_request_list=function(r,t,e,i){this.format="<HHBB",this.id=s.MAVLINK_MSG_ID_LOG_REQUEST_LIST,this.order_map=[2,3,0,1],this.crc_extra=128,this.name="LOG_REQUEST_LIST",this.fieldnames=["target_system","target_component","start","end"],this.set(arguments)};s.messages.log_request_list.prototype=new s.message;s.messages.log_request_list.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.start,this.end,this.target_system,this.target_component]))};s.messages.log_entry=function(r,t,e,i,n){this.format="<IIHHH",this.id=s.MAVLINK_MSG_ID_LOG_ENTRY,this.order_map=[2,3,4,0,1],this.crc_extra=56,this.name="LOG_ENTRY",this.fieldnames=["id","num_logs","last_log_num","time_utc","size"],this.set(arguments)};s.messages.log_entry.prototype=new s.message;s.messages.log_entry.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_utc,this.size,this.id,this.num_logs,this.last_log_num]))};s.messages.log_request_data=function(r,t,e,i,n){this.format="<IIHBB",this.id=s.MAVLINK_MSG_ID_LOG_REQUEST_DATA,this.order_map=[3,4,2,0,1],this.crc_extra=116,this.name="LOG_REQUEST_DATA",this.fieldnames=["target_system","target_component","id","ofs","count"],this.set(arguments)};s.messages.log_request_data.prototype=new s.message;s.messages.log_request_data.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ofs,this.count,this.id,this.target_system,this.target_component]))};s.messages.log_data=function(r,t,e,i){this.format="<IHB90s",this.id=s.MAVLINK_MSG_ID_LOG_DATA,this.order_map=[1,0,2,3],this.crc_extra=134,this.name="LOG_DATA",this.fieldnames=["id","ofs","count","data"],this.set(arguments)};s.messages.log_data.prototype=new s.message;s.messages.log_data.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ofs,this.id,this.count,this.data]))};s.messages.log_erase=function(r,t){this.format="<BB",this.id=s.MAVLINK_MSG_ID_LOG_ERASE,this.order_map=[0,1],this.crc_extra=237,this.name="LOG_ERASE",this.fieldnames=["target_system","target_component"],this.set(arguments)};s.messages.log_erase.prototype=new s.message;s.messages.log_erase.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component]))};s.messages.log_request_end=function(r,t){this.format="<BB",this.id=s.MAVLINK_MSG_ID_LOG_REQUEST_END,this.order_map=[0,1],this.crc_extra=203,this.name="LOG_REQUEST_END",this.fieldnames=["target_system","target_component"],this.set(arguments)};s.messages.log_request_end.prototype=new s.message;s.messages.log_request_end.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component]))};s.messages.gps_inject_data=function(r,t,e,i){this.format="<BBB110s",this.id=s.MAVLINK_MSG_ID_GPS_INJECT_DATA,this.order_map=[0,1,2,3],this.crc_extra=250,this.name="GPS_INJECT_DATA",this.fieldnames=["target_system","target_component","len","data"],this.set(arguments)};s.messages.gps_inject_data.prototype=new s.message;s.messages.gps_inject_data.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.len,this.data]))};s.messages.gps2_raw=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y){this.format="<QiiiIHHHHBBBHiIIII",this.id=s.MAVLINK_MSG_ID_GPS2_RAW,this.order_map=[0,9,1,2,3,5,6,7,8,10,11,4,12,13,14,15,16,17],this.crc_extra=87,this.name="GPS2_RAW",this.fieldnames=["time_usec","fix_type","lat","lon","alt","eph","epv","vel","cog","satellites_visible","dgps_numch","dgps_age","yaw","alt_ellipsoid","h_acc","v_acc","vel_acc","hdg_acc"],this.set(arguments)};s.messages.gps2_raw.prototype=new s.message;s.messages.gps2_raw.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.lat,this.lon,this.alt,this.dgps_age,this.eph,this.epv,this.vel,this.cog,this.fix_type,this.satellites_visible,this.dgps_numch,this.yaw,this.alt_ellipsoid,this.h_acc,this.v_acc,this.vel_acc,this.hdg_acc]))};s.messages.power_status=function(r,t,e){this.format="<HHH",this.id=s.MAVLINK_MSG_ID_POWER_STATUS,this.order_map=[0,1,2],this.crc_extra=203,this.name="POWER_STATUS",this.fieldnames=["Vcc","Vservo","flags"],this.set(arguments)};s.messages.power_status.prototype=new s.message;s.messages.power_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.Vcc,this.Vservo,this.flags]))};s.messages.serial_control=function(r,t,e,i,n,a){this.format="<IHBBB70s",this.id=s.MAVLINK_MSG_ID_SERIAL_CONTROL,this.order_map=[2,3,1,0,4,5],this.crc_extra=220,this.name="SERIAL_CONTROL",this.fieldnames=["device","flags","timeout","baudrate","count","data"],this.set(arguments)};s.messages.serial_control.prototype=new s.message;s.messages.serial_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.baudrate,this.timeout,this.device,this.flags,this.count,this.data]))};s.messages.gps_rtk=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<IIiiiIiHBBBBB",this.id=s.MAVLINK_MSG_ID_GPS_RTK,this.order_map=[0,8,7,1,9,10,11,12,2,3,4,5,6],this.crc_extra=25,this.name="GPS_RTK",this.fieldnames=["time_last_baseline_ms","rtk_receiver_id","wn","tow","rtk_health","rtk_rate","nsats","baseline_coords_type","baseline_a_mm","baseline_b_mm","baseline_c_mm","accuracy","iar_num_hypotheses"],this.set(arguments)};s.messages.gps_rtk.prototype=new s.message;s.messages.gps_rtk.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_last_baseline_ms,this.tow,this.baseline_a_mm,this.baseline_b_mm,this.baseline_c_mm,this.accuracy,this.iar_num_hypotheses,this.wn,this.rtk_receiver_id,this.rtk_health,this.rtk_rate,this.nsats,this.baseline_coords_type]))};s.messages.gps2_rtk=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<IIiiiIiHBBBBB",this.id=s.MAVLINK_MSG_ID_GPS2_RTK,this.order_map=[0,8,7,1,9,10,11,12,2,3,4,5,6],this.crc_extra=226,this.name="GPS2_RTK",this.fieldnames=["time_last_baseline_ms","rtk_receiver_id","wn","tow","rtk_health","rtk_rate","nsats","baseline_coords_type","baseline_a_mm","baseline_b_mm","baseline_c_mm","accuracy","iar_num_hypotheses"],this.set(arguments)};s.messages.gps2_rtk.prototype=new s.message;s.messages.gps2_rtk.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_last_baseline_ms,this.tow,this.baseline_a_mm,this.baseline_b_mm,this.baseline_c_mm,this.accuracy,this.iar_num_hypotheses,this.wn,this.rtk_receiver_id,this.rtk_health,this.rtk_rate,this.nsats,this.baseline_coords_type]))};s.messages.scaled_imu3=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<Ihhhhhhhhhh",this.id=s.MAVLINK_MSG_ID_SCALED_IMU3,this.order_map=[0,1,2,3,4,5,6,7,8,9,10],this.crc_extra=46,this.name="SCALED_IMU3",this.fieldnames=["time_boot_ms","xacc","yacc","zacc","xgyro","ygyro","zgyro","xmag","ymag","zmag","temperature"],this.set(arguments)};s.messages.scaled_imu3.prototype=new s.message;s.messages.scaled_imu3.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.xacc,this.yacc,this.zacc,this.xgyro,this.ygyro,this.zgyro,this.xmag,this.ymag,this.zmag,this.temperature]))};s.messages.data_transmission_handshake=function(r,t,e,i,n,a,o){this.format="<IHHHBBB",this.id=s.MAVLINK_MSG_ID_DATA_TRANSMISSION_HANDSHAKE,this.order_map=[4,0,1,2,3,5,6],this.crc_extra=29,this.name="DATA_TRANSMISSION_HANDSHAKE",this.fieldnames=["type","size","width","height","packets","payload","jpg_quality"],this.set(arguments)};s.messages.data_transmission_handshake.prototype=new s.message;s.messages.data_transmission_handshake.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.size,this.width,this.height,this.packets,this.type,this.payload,this.jpg_quality]))};s.messages.encapsulated_data=function(r,t){this.format="<H253s",this.id=s.MAVLINK_MSG_ID_ENCAPSULATED_DATA,this.order_map=[0,1],this.crc_extra=223,this.name="ENCAPSULATED_DATA",this.fieldnames=["seqnr","data"],this.set(arguments)};s.messages.encapsulated_data.prototype=new s.message;s.messages.encapsulated_data.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.seqnr,this.data]))};s.messages.distance_sensor=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<IHHHBBBBff4fB",this.id=s.MAVLINK_MSG_ID_DISTANCE_SENSOR,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11],this.crc_extra=85,this.name="DISTANCE_SENSOR",this.fieldnames=["time_boot_ms","min_distance","max_distance","current_distance","type","id","orientation","covariance","horizontal_fov","vertical_fov","quaternion","signal_quality"],this.set(arguments)};s.messages.distance_sensor.prototype=new s.message;s.messages.distance_sensor.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.min_distance,this.max_distance,this.current_distance,this.type,this.id,this.orientation,this.covariance,this.horizontal_fov,this.vertical_fov,this.quaternion,this.signal_quality]))};s.messages.terrain_request=function(r,t,e,i){this.format="<QiiH",this.id=s.MAVLINK_MSG_ID_TERRAIN_REQUEST,this.order_map=[1,2,3,0],this.crc_extra=6,this.name="TERRAIN_REQUEST",this.fieldnames=["lat","lon","grid_spacing","mask"],this.set(arguments)};s.messages.terrain_request.prototype=new s.message;s.messages.terrain_request.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.mask,this.lat,this.lon,this.grid_spacing]))};s.messages.terrain_data=function(r,t,e,i,n){this.format="<iiH16hB",this.id=s.MAVLINK_MSG_ID_TERRAIN_DATA,this.order_map=[0,1,2,4,3],this.crc_extra=229,this.name="TERRAIN_DATA",this.fieldnames=["lat","lon","grid_spacing","gridbit","data"],this.set(arguments)};s.messages.terrain_data.prototype=new s.message;s.messages.terrain_data.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.lat,this.lon,this.grid_spacing,this.data,this.gridbit]))};s.messages.terrain_check=function(r,t){this.format="<ii",this.id=s.MAVLINK_MSG_ID_TERRAIN_CHECK,this.order_map=[0,1],this.crc_extra=203,this.name="TERRAIN_CHECK",this.fieldnames=["lat","lon"],this.set(arguments)};s.messages.terrain_check.prototype=new s.message;s.messages.terrain_check.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.lat,this.lon]))};s.messages.terrain_report=function(r,t,e,i,n,a,o){this.format="<iiffHHH",this.id=s.MAVLINK_MSG_ID_TERRAIN_REPORT,this.order_map=[0,1,4,2,3,5,6],this.crc_extra=1,this.name="TERRAIN_REPORT",this.fieldnames=["lat","lon","spacing","terrain_height","current_height","pending","loaded"],this.set(arguments)};s.messages.terrain_report.prototype=new s.message;s.messages.terrain_report.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.lat,this.lon,this.terrain_height,this.current_height,this.spacing,this.pending,this.loaded]))};s.messages.scaled_pressure2=function(r,t,e,i,n){this.format="<Iffhh",this.id=s.MAVLINK_MSG_ID_SCALED_PRESSURE2,this.order_map=[0,1,2,3,4],this.crc_extra=195,this.name="SCALED_PRESSURE2",this.fieldnames=["time_boot_ms","press_abs","press_diff","temperature","temperature_press_diff"],this.set(arguments)};s.messages.scaled_pressure2.prototype=new s.message;s.messages.scaled_pressure2.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.press_abs,this.press_diff,this.temperature,this.temperature_press_diff]))};s.messages.att_pos_mocap=function(r,t,e,i,n,a){this.format="<Q4ffff21f",this.id=s.MAVLINK_MSG_ID_ATT_POS_MOCAP,this.order_map=[0,1,2,3,4,5],this.crc_extra=109,this.name="ATT_POS_MOCAP",this.fieldnames=["time_usec","q","x","y","z","covariance"],this.set(arguments)};s.messages.att_pos_mocap.prototype=new s.message;s.messages.att_pos_mocap.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.q,this.x,this.y,this.z,this.covariance]))};s.messages.set_actuator_control_target=function(r,t,e,i,n){this.format="<Q8fBBB",this.id=s.MAVLINK_MSG_ID_SET_ACTUATOR_CONTROL_TARGET,this.order_map=[0,2,3,4,1],this.crc_extra=168,this.name="SET_ACTUATOR_CONTROL_TARGET",this.fieldnames=["time_usec","group_mlx","target_system","target_component","controls"],this.set(arguments)};s.messages.set_actuator_control_target.prototype=new s.message;s.messages.set_actuator_control_target.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.controls,this.group_mlx,this.target_system,this.target_component]))};s.messages.actuator_control_target=function(r,t,e){this.format="<Q8fB",this.id=s.MAVLINK_MSG_ID_ACTUATOR_CONTROL_TARGET,this.order_map=[0,2,1],this.crc_extra=181,this.name="ACTUATOR_CONTROL_TARGET",this.fieldnames=["time_usec","group_mlx","controls"],this.set(arguments)};s.messages.actuator_control_target.prototype=new s.message;s.messages.actuator_control_target.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.controls,this.group_mlx]))};s.messages.altitude=function(r,t,e,i,n,a,o){this.format="<Qffffff",this.id=s.MAVLINK_MSG_ID_ALTITUDE,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=47,this.name="ALTITUDE",this.fieldnames=["time_usec","altitude_monotonic","altitude_amsl","altitude_local","altitude_relative","altitude_terrain","bottom_clearance"],this.set(arguments)};s.messages.altitude.prototype=new s.message;s.messages.altitude.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.altitude_monotonic,this.altitude_amsl,this.altitude_local,this.altitude_relative,this.altitude_terrain,this.bottom_clearance]))};s.messages.resource_request=function(r,t,e,i,n){this.format="<BB120sB120s",this.id=s.MAVLINK_MSG_ID_RESOURCE_REQUEST,this.order_map=[0,1,2,3,4],this.crc_extra=72,this.name="RESOURCE_REQUEST",this.fieldnames=["request_id","uri_type","uri","transfer_type","storage"],this.set(arguments)};s.messages.resource_request.prototype=new s.message;s.messages.resource_request.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.request_id,this.uri_type,this.uri,this.transfer_type,this.storage]))};s.messages.scaled_pressure3=function(r,t,e,i,n){this.format="<Iffhh",this.id=s.MAVLINK_MSG_ID_SCALED_PRESSURE3,this.order_map=[0,1,2,3,4],this.crc_extra=131,this.name="SCALED_PRESSURE3",this.fieldnames=["time_boot_ms","press_abs","press_diff","temperature","temperature_press_diff"],this.set(arguments)};s.messages.scaled_pressure3.prototype=new s.message;s.messages.scaled_pressure3.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.press_abs,this.press_diff,this.temperature,this.temperature_press_diff]))};s.messages.follow_target=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<QQiif3f3f4f3f3fB",this.id=s.MAVLINK_MSG_ID_FOLLOW_TARGET,this.order_map=[0,10,2,3,4,5,6,7,8,9,1],this.crc_extra=127,this.name="FOLLOW_TARGET",this.fieldnames=["timestamp","est_capabilities","lat","lon","alt","vel","acc","attitude_q","rates","position_cov","custom_state"],this.set(arguments)};s.messages.follow_target.prototype=new s.message;s.messages.follow_target.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.custom_state,this.lat,this.lon,this.alt,this.vel,this.acc,this.attitude_q,this.rates,this.position_cov,this.est_capabilities]))};s.messages.control_system_state=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S){this.format="<Qffffffffff3f3f4ffff",this.id=s.MAVLINK_MSG_ID_CONTROL_SYSTEM_STATE,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],this.crc_extra=103,this.name="CONTROL_SYSTEM_STATE",this.fieldnames=["time_usec","x_acc","y_acc","z_acc","x_vel","y_vel","z_vel","x_pos","y_pos","z_pos","airspeed","vel_variance","pos_variance","q","roll_rate","pitch_rate","yaw_rate"],this.set(arguments)};s.messages.control_system_state.prototype=new s.message;s.messages.control_system_state.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.x_acc,this.y_acc,this.z_acc,this.x_vel,this.y_vel,this.z_vel,this.x_pos,this.y_pos,this.z_pos,this.airspeed,this.vel_variance,this.pos_variance,this.q,this.roll_rate,this.pitch_rate,this.yaw_rate]))};s.messages.battery_status=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d){this.format="<iih10HhBBBbiB4HBI",this.id=s.MAVLINK_MSG_ID_BATTERY_STATUS,this.order_map=[5,6,7,2,3,4,0,1,8,9,10,11,12,13],this.crc_extra=154,this.name="BATTERY_STATUS",this.fieldnames=["id","battery_function","type","temperature","voltages","current_battery","current_consumed","energy_consumed","battery_remaining","time_remaining","charge_state","voltages_ext","mode","fault_bitmask"],this.set(arguments)};s.messages.battery_status.prototype=new s.message;s.messages.battery_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.current_consumed,this.energy_consumed,this.temperature,this.voltages,this.current_battery,this.id,this.battery_function,this.type,this.battery_remaining,this.time_remaining,this.charge_state,this.voltages_ext,this.mode,this.fault_bitmask]))};s.messages.autopilot_version=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<QQIIIIHH8s8s8s18s",this.id=s.MAVLINK_MSG_ID_AUTOPILOT_VERSION,this.order_map=[0,2,3,4,5,8,9,10,6,7,1,11],this.crc_extra=178,this.name="AUTOPILOT_VERSION",this.fieldnames=["capabilities","flight_sw_version","middleware_sw_version","os_sw_version","board_version","flight_custom_version","middleware_custom_version","os_custom_version","vendor_id","product_id","uid","uid2"],this.set(arguments)};s.messages.autopilot_version.prototype=new s.message;s.messages.autopilot_version.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.capabilities,this.uid,this.flight_sw_version,this.middleware_sw_version,this.os_sw_version,this.board_version,this.vendor_id,this.product_id,this.flight_custom_version,this.middleware_custom_version,this.os_custom_version,this.uid2]))};s.messages.landing_target=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d){this.format="<QfffffBBfff4fBB",this.id=s.MAVLINK_MSG_ID_LANDING_TARGET,this.order_map=[0,6,7,1,2,3,4,5,8,9,10,11,12,13],this.crc_extra=200,this.name="LANDING_TARGET",this.fieldnames=["time_usec","target_num","frame","angle_x","angle_y","distance","size_x","size_y","x","y","z","q","type","position_valid"],this.set(arguments)};s.messages.landing_target.prototype=new s.message;s.messages.landing_target.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.angle_x,this.angle_y,this.distance,this.size_x,this.size_y,this.target_num,this.frame,this.x,this.y,this.z,this.q,this.type,this.position_valid]))};s.messages.fence_status=function(r,t,e,i,n){this.format="<IHBBB",this.id=s.MAVLINK_MSG_ID_FENCE_STATUS,this.order_map=[2,1,3,0,4],this.crc_extra=189,this.name="FENCE_STATUS",this.fieldnames=["breach_status","breach_count","breach_type","breach_time","breach_mitigation"],this.set(arguments)};s.messages.fence_status.prototype=new s.message;s.messages.fence_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.breach_time,this.breach_count,this.breach_status,this.breach_type,this.breach_mitigation]))};s.messages.mag_cal_report=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y){this.format="<ffffffffffBBBBfBBf",this.id=s.MAVLINK_MSG_ID_MAG_CAL_REPORT,this.order_map=[10,11,12,13,0,1,2,3,4,5,6,7,8,9,14,15,16,17],this.crc_extra=36,this.name="MAG_CAL_REPORT",this.fieldnames=["compass_id","cal_mask","cal_status","autosaved","fitness","ofs_x","ofs_y","ofs_z","diag_x","diag_y","diag_z","offdiag_x","offdiag_y","offdiag_z","orientation_confidence","old_orientation","new_orientation","scale_factor"],this.set(arguments)};s.messages.mag_cal_report.prototype=new s.message;s.messages.mag_cal_report.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.fitness,this.ofs_x,this.ofs_y,this.ofs_z,this.diag_x,this.diag_y,this.diag_z,this.offdiag_x,this.offdiag_y,this.offdiag_z,this.compass_id,this.cal_mask,this.cal_status,this.autosaved,this.orientation_confidence,this.old_orientation,this.new_orientation,this.scale_factor]))};s.messages.efi_status=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M){this.format="<ffffffffffffffffBff",this.id=s.MAVLINK_MSG_ID_EFI_STATUS,this.order_map=[16,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18],this.crc_extra=208,this.name="EFI_STATUS",this.fieldnames=["health","ecu_index","rpm","fuel_consumed","fuel_flow","engine_load","throttle_position","spark_dwell_time","barometric_pressure","intake_manifold_pressure","intake_manifold_temperature","cylinder_head_temperature","ignition_timing","injection_time","exhaust_gas_temperature","throttle_out","pt_compensation","ignition_voltage","fuel_pressure"],this.set(arguments)};s.messages.efi_status.prototype=new s.message;s.messages.efi_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ecu_index,this.rpm,this.fuel_consumed,this.fuel_flow,this.engine_load,this.throttle_position,this.spark_dwell_time,this.barometric_pressure,this.intake_manifold_pressure,this.intake_manifold_temperature,this.cylinder_head_temperature,this.ignition_timing,this.injection_time,this.exhaust_gas_temperature,this.throttle_out,this.pt_compensation,this.health,this.ignition_voltage,this.fuel_pressure]))};s.messages.estimator_status=function(r,t,e,i,n,a,o,c,_,l){this.format="<QffffffffH",this.id=s.MAVLINK_MSG_ID_ESTIMATOR_STATUS,this.order_map=[0,9,1,2,3,4,5,6,7,8],this.crc_extra=163,this.name="ESTIMATOR_STATUS",this.fieldnames=["time_usec","flags","vel_ratio","pos_horiz_ratio","pos_vert_ratio","mag_ratio","hagl_ratio","tas_ratio","pos_horiz_accuracy","pos_vert_accuracy"],this.set(arguments)};s.messages.estimator_status.prototype=new s.message;s.messages.estimator_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.vel_ratio,this.pos_horiz_ratio,this.pos_vert_ratio,this.mag_ratio,this.hagl_ratio,this.tas_ratio,this.pos_horiz_accuracy,this.pos_vert_accuracy,this.flags]))};s.messages.wind_cov=function(r,t,e,i,n,a,o,c,_){this.format="<Qffffffff",this.id=s.MAVLINK_MSG_ID_WIND_COV,this.order_map=[0,1,2,3,4,5,6,7,8],this.crc_extra=105,this.name="WIND_COV",this.fieldnames=["time_usec","wind_x","wind_y","wind_z","var_horiz","var_vert","wind_alt","horiz_accuracy","vert_accuracy"],this.set(arguments)};s.messages.wind_cov.prototype=new s.message;s.messages.wind_cov.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.wind_x,this.wind_y,this.wind_z,this.var_horiz,this.var_vert,this.wind_alt,this.horiz_accuracy,this.vert_accuracy]))};s.messages.gps_input=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M){this.format="<QIiifffffffffHHBBBH",this.id=s.MAVLINK_MSG_ID_GPS_INPUT,this.order_map=[0,15,13,1,14,16,2,3,4,5,6,7,8,9,10,11,12,17,18],this.crc_extra=151,this.name="GPS_INPUT",this.fieldnames=["time_usec","gps_id","ignore_flags","time_week_ms","time_week","fix_type","lat","lon","alt","hdop","vdop","vn","ve","vd","speed_accuracy","horiz_accuracy","vert_accuracy","satellites_visible","yaw"],this.set(arguments)};s.messages.gps_input.prototype=new s.message;s.messages.gps_input.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.time_week_ms,this.lat,this.lon,this.alt,this.hdop,this.vdop,this.vn,this.ve,this.vd,this.speed_accuracy,this.horiz_accuracy,this.vert_accuracy,this.ignore_flags,this.time_week,this.gps_id,this.fix_type,this.satellites_visible,this.yaw]))};s.messages.gps_rtcm_data=function(r,t,e){this.format="<BB180s",this.id=s.MAVLINK_MSG_ID_GPS_RTCM_DATA,this.order_map=[0,1,2],this.crc_extra=35,this.name="GPS_RTCM_DATA",this.fieldnames=["flags","len","data"],this.set(arguments)};s.messages.gps_rtcm_data.prototype=new s.message;s.messages.gps_rtcm_data.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.flags,this.len,this.data]))};s.messages.high_latency=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M,x,I,w,D,m){this.format="<IiihhHhhhHBBbBBBbBBBbbBB",this.id=s.MAVLINK_MSG_ID_HIGH_LATENCY,this.order_map=[10,0,11,3,4,5,12,6,1,2,7,8,13,14,15,16,17,18,19,20,21,22,23,9],this.crc_extra=150,this.name="HIGH_LATENCY",this.fieldnames=["base_mode","custom_mode","landed_state","roll","pitch","heading","throttle","heading_sp","latitude","longitude","altitude_amsl","altitude_sp","airspeed","airspeed_sp","groundspeed","climb_rate","gps_nsat","gps_fix_type","battery_remaining","temperature","temperature_air","failsafe","wp_num","wp_distance"],this.set(arguments)};s.messages.high_latency.prototype=new s.message;s.messages.high_latency.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.custom_mode,this.latitude,this.longitude,this.roll,this.pitch,this.heading,this.heading_sp,this.altitude_amsl,this.altitude_sp,this.wp_distance,this.base_mode,this.landed_state,this.throttle,this.airspeed,this.airspeed_sp,this.groundspeed,this.climb_rate,this.gps_nsat,this.gps_fix_type,this.battery_remaining,this.temperature,this.temperature_air,this.failsafe,this.wp_num]))};s.messages.high_latency2=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M,x,I,w,D,m,U,q,Y){this.format="<IiiHhhHHHBBBBBBBBBBBBbbbbbb",this.id=s.MAVLINK_MSG_ID_HIGH_LATENCY2,this.order_map=[0,9,10,3,1,2,4,5,11,12,6,13,14,15,16,17,18,19,20,21,22,23,7,8,24,25,26],this.crc_extra=179,this.name="HIGH_LATENCY2",this.fieldnames=["timestamp","type","autopilot","custom_mode","latitude","longitude","altitude","target_altitude","heading","target_heading","target_distance","throttle","airspeed","airspeed_sp","groundspeed","windspeed","wind_heading","eph","epv","temperature_air","climb_rate","battery","wp_num","failure_flags","custom0","custom1","custom2"],this.set(arguments)};s.messages.high_latency2.prototype=new s.message;s.messages.high_latency2.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.latitude,this.longitude,this.custom_mode,this.altitude,this.target_altitude,this.target_distance,this.wp_num,this.failure_flags,this.type,this.autopilot,this.heading,this.target_heading,this.throttle,this.airspeed,this.airspeed_sp,this.groundspeed,this.windspeed,this.wind_heading,this.eph,this.epv,this.temperature_air,this.climb_rate,this.battery,this.custom0,this.custom1,this.custom2]))};s.messages.vibration=function(r,t,e,i,n,a,o){this.format="<QfffIII",this.id=s.MAVLINK_MSG_ID_VIBRATION,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=90,this.name="VIBRATION",this.fieldnames=["time_usec","vibration_x","vibration_y","vibration_z","clipping_0","clipping_1","clipping_2"],this.set(arguments)};s.messages.vibration.prototype=new s.message;s.messages.vibration.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.vibration_x,this.vibration_y,this.vibration_z,this.clipping_0,this.clipping_1,this.clipping_2]))};s.messages.home_position=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<iiifff4ffffQ",this.id=s.MAVLINK_MSG_ID_HOME_POSITION,this.order_map=[0,1,2,3,4,5,6,7,8,9,10],this.crc_extra=104,this.name="HOME_POSITION",this.fieldnames=["latitude","longitude","altitude","x","y","z","q","approach_x","approach_y","approach_z","time_usec"],this.set(arguments)};s.messages.home_position.prototype=new s.message;s.messages.home_position.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.latitude,this.longitude,this.altitude,this.x,this.y,this.z,this.q,this.approach_x,this.approach_y,this.approach_z,this.time_usec]))};s.messages.set_home_position=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<iiifff4ffffBQ",this.id=s.MAVLINK_MSG_ID_SET_HOME_POSITION,this.order_map=[10,0,1,2,3,4,5,6,7,8,9,11],this.crc_extra=85,this.name="SET_HOME_POSITION",this.fieldnames=["target_system","latitude","longitude","altitude","x","y","z","q","approach_x","approach_y","approach_z","time_usec"],this.set(arguments)};s.messages.set_home_position.prototype=new s.message;s.messages.set_home_position.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.latitude,this.longitude,this.altitude,this.x,this.y,this.z,this.q,this.approach_x,this.approach_y,this.approach_z,this.target_system,this.time_usec]))};s.messages.message_interval=function(r,t){this.format="<iH",this.id=s.MAVLINK_MSG_ID_MESSAGE_INTERVAL,this.order_map=[1,0],this.crc_extra=95,this.name="MESSAGE_INTERVAL",this.fieldnames=["message_id","interval_us"],this.set(arguments)};s.messages.message_interval.prototype=new s.message;s.messages.message_interval.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.interval_us,this.message_id]))};s.messages.extended_sys_state=function(r,t){this.format="<BB",this.id=s.MAVLINK_MSG_ID_EXTENDED_SYS_STATE,this.order_map=[0,1],this.crc_extra=130,this.name="EXTENDED_SYS_STATE",this.fieldnames=["vtol_state","landed_state"],this.set(arguments)};s.messages.extended_sys_state.prototype=new s.message;s.messages.extended_sys_state.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.vtol_state,this.landed_state]))};s.messages.adsb_vehicle=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<IiiiHHhHHB9sBB",this.id=s.MAVLINK_MSG_ID_ADSB_VEHICLE,this.order_map=[0,1,2,9,3,4,5,6,10,11,12,7,8],this.crc_extra=184,this.name="ADSB_VEHICLE",this.fieldnames=["ICAO_address","lat","lon","altitude_type","altitude","heading","hor_velocity","ver_velocity","callsign","emitter_type","tslc","flags","squawk"],this.set(arguments)};s.messages.adsb_vehicle.prototype=new s.message;s.messages.adsb_vehicle.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ICAO_address,this.lat,this.lon,this.altitude,this.heading,this.hor_velocity,this.ver_velocity,this.flags,this.squawk,this.altitude_type,this.callsign,this.emitter_type,this.tslc]))};s.messages.collision=function(r,t,e,i,n,a,o){this.format="<IfffBBB",this.id=s.MAVLINK_MSG_ID_COLLISION,this.order_map=[4,0,5,6,1,2,3],this.crc_extra=81,this.name="COLLISION",this.fieldnames=["src","id","action","threat_level","time_to_minimum_delta","altitude_minimum_delta","horizontal_minimum_delta"],this.set(arguments)};s.messages.collision.prototype=new s.message;s.messages.collision.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.id,this.time_to_minimum_delta,this.altitude_minimum_delta,this.horizontal_minimum_delta,this.src,this.action,this.threat_level]))};s.messages.v2_extension=function(r,t,e,i,n){this.format="<HBBB249s",this.id=s.MAVLINK_MSG_ID_V2_EXTENSION,this.order_map=[1,2,3,0,4],this.crc_extra=8,this.name="V2_EXTENSION",this.fieldnames=["target_network","target_system","target_component","message_type","payload"],this.set(arguments)};s.messages.v2_extension.prototype=new s.message;s.messages.v2_extension.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.message_type,this.target_network,this.target_system,this.target_component,this.payload]))};s.messages.memory_vect=function(r,t,e,i){this.format="<HBB32s",this.id=s.MAVLINK_MSG_ID_MEMORY_VECT,this.order_map=[0,1,2,3],this.crc_extra=204,this.name="MEMORY_VECT",this.fieldnames=["address","ver","type","value"],this.set(arguments)};s.messages.memory_vect.prototype=new s.message;s.messages.memory_vect.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.address,this.ver,this.type,this.value]))};s.messages.debug_vect=function(r,t,e,i,n){this.format="<Qfff10s",this.id=s.MAVLINK_MSG_ID_DEBUG_VECT,this.order_map=[4,0,1,2,3],this.crc_extra=49,this.name="DEBUG_VECT",this.fieldnames=["name","time_usec","x","y","z"],this.set(arguments)};s.messages.debug_vect.prototype=new s.message;s.messages.debug_vect.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.x,this.y,this.z,this.name]))};s.messages.named_value_float=function(r,t,e){this.format="<If10s",this.id=s.MAVLINK_MSG_ID_NAMED_VALUE_FLOAT,this.order_map=[0,2,1],this.crc_extra=170,this.name="NAMED_VALUE_FLOAT",this.fieldnames=["time_boot_ms","name","value"],this.set(arguments)};s.messages.named_value_float.prototype=new s.message;s.messages.named_value_float.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.value,this.name]))};s.messages.named_value_int=function(r,t,e){this.format="<Ii10s",this.id=s.MAVLINK_MSG_ID_NAMED_VALUE_INT,this.order_map=[0,2,1],this.crc_extra=44,this.name="NAMED_VALUE_INT",this.fieldnames=["time_boot_ms","name","value"],this.set(arguments)};s.messages.named_value_int.prototype=new s.message;s.messages.named_value_int.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.value,this.name]))};s.messages.statustext=function(r,t,e,i){this.format="<B50sHB",this.id=s.MAVLINK_MSG_ID_STATUSTEXT,this.order_map=[0,1,2,3],this.crc_extra=83,this.name="STATUSTEXT",this.fieldnames=["severity","text","id","chunk_seq"],this.set(arguments)};s.messages.statustext.prototype=new s.message;s.messages.statustext.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.severity,this.text,this.id,this.chunk_seq]))};s.messages.debug=function(r,t,e){this.format="<IfB",this.id=s.MAVLINK_MSG_ID_DEBUG,this.order_map=[0,2,1],this.crc_extra=46,this.name="DEBUG",this.fieldnames=["time_boot_ms","ind","value"],this.set(arguments)};s.messages.debug.prototype=new s.message;s.messages.debug.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.value,this.ind]))};s.messages.setup_signing=function(r,t,e,i){this.format="<QBB32s",this.id=s.MAVLINK_MSG_ID_SETUP_SIGNING,this.order_map=[1,2,3,0],this.crc_extra=71,this.name="SETUP_SIGNING",this.fieldnames=["target_system","target_component","secret_key","initial_timestamp"],this.set(arguments)};s.messages.setup_signing.prototype=new s.message;s.messages.setup_signing.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.initial_timestamp,this.target_system,this.target_component,this.secret_key]))};s.messages.button_change=function(r,t,e){this.format="<IIB",this.id=s.MAVLINK_MSG_ID_BUTTON_CHANGE,this.order_map=[0,1,2],this.crc_extra=131,this.name="BUTTON_CHANGE",this.fieldnames=["time_boot_ms","last_change_ms","state"],this.set(arguments)};s.messages.button_change.prototype=new s.message;s.messages.button_change.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.last_change_ms,this.state]))};s.messages.play_tune=function(r,t,e,i){this.format="<BB30s200s",this.id=s.MAVLINK_MSG_ID_PLAY_TUNE,this.order_map=[0,1,2,3],this.crc_extra=187,this.name="PLAY_TUNE",this.fieldnames=["target_system","target_component","tune","tune2"],this.set(arguments)};s.messages.play_tune.prototype=new s.message;s.messages.play_tune.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.tune,this.tune2]))};s.messages.camera_information=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d){this.format="<IIfffIHHH32s32sB140sB",this.id=s.MAVLINK_MSG_ID_CAMERA_INFORMATION,this.order_map=[0,9,10,1,2,3,4,6,7,11,5,8,12,13],this.crc_extra=92,this.name="CAMERA_INFORMATION",this.fieldnames=["time_boot_ms","vendor_name","model_name","firmware_version","focal_length","sensor_size_h","sensor_size_v","resolution_h","resolution_v","lens_id","flags","cam_definition_version","cam_definition_uri","gimbal_device_id"],this.set(arguments)};s.messages.camera_information.prototype=new s.message;s.messages.camera_information.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.firmware_version,this.focal_length,this.sensor_size_h,this.sensor_size_v,this.flags,this.resolution_h,this.resolution_v,this.cam_definition_version,this.vendor_name,this.model_name,this.lens_id,this.cam_definition_uri,this.gimbal_device_id]))};s.messages.camera_settings=function(r,t,e,i){this.format="<IBff",this.id=s.MAVLINK_MSG_ID_CAMERA_SETTINGS,this.order_map=[0,1,2,3],this.crc_extra=146,this.name="CAMERA_SETTINGS",this.fieldnames=["time_boot_ms","mode_id","zoomLevel","focusLevel"],this.set(arguments)};s.messages.camera_settings.prototype=new s.message;s.messages.camera_settings.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.mode_id,this.zoomLevel,this.focusLevel]))};s.messages.storage_information=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<IfffffBBBB32s",this.id=s.MAVLINK_MSG_ID_STORAGE_INFORMATION,this.order_map=[0,6,7,8,1,2,3,4,5,9,10],this.crc_extra=179,this.name="STORAGE_INFORMATION",this.fieldnames=["time_boot_ms","storage_id","storage_count","status","total_capacity","used_capacity","available_capacity","read_speed","write_speed","type","name"],this.set(arguments)};s.messages.storage_information.prototype=new s.message;s.messages.storage_information.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.total_capacity,this.used_capacity,this.available_capacity,this.read_speed,this.write_speed,this.storage_id,this.storage_count,this.status,this.type,this.name]))};s.messages.camera_capture_status=function(r,t,e,i,n,a,o){this.format="<IfIfBBi",this.id=s.MAVLINK_MSG_ID_CAMERA_CAPTURE_STATUS,this.order_map=[0,4,5,1,2,3,6],this.crc_extra=12,this.name="CAMERA_CAPTURE_STATUS",this.fieldnames=["time_boot_ms","image_status","video_status","image_interval","recording_time_ms","available_capacity","image_count"],this.set(arguments)};s.messages.camera_capture_status.prototype=new s.message;s.messages.camera_capture_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.image_interval,this.recording_time_ms,this.available_capacity,this.image_status,this.video_status,this.image_count]))};s.messages.camera_image_captured=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<QIiiii4fiBb205s",this.id=s.MAVLINK_MSG_ID_CAMERA_IMAGE_CAPTURED,this.order_map=[1,0,8,2,3,4,5,6,7,9,10],this.crc_extra=133,this.name="CAMERA_IMAGE_CAPTURED",this.fieldnames=["time_boot_ms","time_utc","camera_id","lat","lon","alt","relative_alt","q","image_index","capture_result","file_url"],this.set(arguments)};s.messages.camera_image_captured.prototype=new s.message;s.messages.camera_image_captured.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_utc,this.time_boot_ms,this.lat,this.lon,this.alt,this.relative_alt,this.q,this.image_index,this.camera_id,this.capture_result,this.file_url]))};s.messages.flight_information=function(r,t,e,i){this.format="<QQQI",this.id=s.MAVLINK_MSG_ID_FLIGHT_INFORMATION,this.order_map=[3,0,1,2],this.crc_extra=49,this.name="FLIGHT_INFORMATION",this.fieldnames=["time_boot_ms","arming_time_utc","takeoff_time_utc","flight_uuid"],this.set(arguments)};s.messages.flight_information.prototype=new s.message;s.messages.flight_information.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.arming_time_utc,this.takeoff_time_utc,this.flight_uuid,this.time_boot_ms]))};s.messages.mount_orientation=function(r,t,e,i,n){this.format="<Iffff",this.id=s.MAVLINK_MSG_ID_MOUNT_ORIENTATION,this.order_map=[0,1,2,3,4],this.crc_extra=26,this.name="MOUNT_ORIENTATION",this.fieldnames=["time_boot_ms","roll","pitch","yaw","yaw_absolute"],this.set(arguments)};s.messages.mount_orientation.prototype=new s.message;s.messages.mount_orientation.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.roll,this.pitch,this.yaw,this.yaw_absolute]))};s.messages.logging_data=function(r,t,e,i,n,a){this.format="<HBBBB249s",this.id=s.MAVLINK_MSG_ID_LOGGING_DATA,this.order_map=[1,2,0,3,4,5],this.crc_extra=193,this.name="LOGGING_DATA",this.fieldnames=["target_system","target_component","sequence","length","first_message_offset","data"],this.set(arguments)};s.messages.logging_data.prototype=new s.message;s.messages.logging_data.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.sequence,this.target_system,this.target_component,this.length,this.first_message_offset,this.data]))};s.messages.logging_data_acked=function(r,t,e,i,n,a){this.format="<HBBBB249s",this.id=s.MAVLINK_MSG_ID_LOGGING_DATA_ACKED,this.order_map=[1,2,0,3,4,5],this.crc_extra=35,this.name="LOGGING_DATA_ACKED",this.fieldnames=["target_system","target_component","sequence","length","first_message_offset","data"],this.set(arguments)};s.messages.logging_data_acked.prototype=new s.message;s.messages.logging_data_acked.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.sequence,this.target_system,this.target_component,this.length,this.first_message_offset,this.data]))};s.messages.logging_ack=function(r,t,e){this.format="<HBB",this.id=s.MAVLINK_MSG_ID_LOGGING_ACK,this.order_map=[1,2,0],this.crc_extra=14,this.name="LOGGING_ACK",this.fieldnames=["target_system","target_component","sequence"],this.set(arguments)};s.messages.logging_ack.prototype=new s.message;s.messages.logging_ack.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.sequence,this.target_system,this.target_component]))};s.messages.video_stream_information=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<fIHHHHHBBB32s160s",this.id=s.MAVLINK_MSG_ID_VIDEO_STREAM_INFORMATION,this.order_map=[7,8,9,2,0,3,4,1,5,6,10,11],this.crc_extra=109,this.name="VIDEO_STREAM_INFORMATION",this.fieldnames=["stream_id","count","type","flags","framerate","resolution_h","resolution_v","bitrate","rotation","hfov","name","uri"],this.set(arguments)};s.messages.video_stream_information.prototype=new s.message;s.messages.video_stream_information.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.framerate,this.bitrate,this.flags,this.resolution_h,this.resolution_v,this.rotation,this.hfov,this.stream_id,this.count,this.type,this.name,this.uri]))};s.messages.video_stream_status=function(r,t,e,i,n,a,o,c){this.format="<fIHHHHHB",this.id=s.MAVLINK_MSG_ID_VIDEO_STREAM_STATUS,this.order_map=[7,2,0,3,4,1,5,6],this.crc_extra=59,this.name="VIDEO_STREAM_STATUS",this.fieldnames=["stream_id","flags","framerate","resolution_h","resolution_v","bitrate","rotation","hfov"],this.set(arguments)};s.messages.video_stream_status.prototype=new s.message;s.messages.video_stream_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.framerate,this.bitrate,this.flags,this.resolution_h,this.resolution_v,this.rotation,this.hfov,this.stream_id]))};s.messages.camera_fov_status=function(r,t,e,i,n,a,o,c,_,l){this.format="<Iiiiiii4fff",this.id=s.MAVLINK_MSG_ID_CAMERA_FOV_STATUS,this.order_map=[0,1,2,3,4,5,6,7,8,9],this.crc_extra=22,this.name="CAMERA_FOV_STATUS",this.fieldnames=["time_boot_ms","lat_camera","lon_camera","alt_camera","lat_image","lon_image","alt_image","q","hfov","vfov"],this.set(arguments)};s.messages.camera_fov_status.prototype=new s.message;s.messages.camera_fov_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.lat_camera,this.lon_camera,this.alt_camera,this.lat_image,this.lon_image,this.alt_image,this.q,this.hfov,this.vfov]))};s.messages.camera_tracking_image_status=function(r,t,e,i,n,a,o,c,_,l){this.format="<fffffffBBB",this.id=s.MAVLINK_MSG_ID_CAMERA_TRACKING_IMAGE_STATUS,this.order_map=[7,8,9,0,1,2,3,4,5,6],this.crc_extra=126,this.name="CAMERA_TRACKING_IMAGE_STATUS",this.fieldnames=["tracking_status","tracking_mode","target_data","point_x","point_y","radius","rec_top_x","rec_top_y","rec_bottom_x","rec_bottom_y"],this.set(arguments)};s.messages.camera_tracking_image_status.prototype=new s.message;s.messages.camera_tracking_image_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.point_x,this.point_y,this.radius,this.rec_top_x,this.rec_top_y,this.rec_bottom_x,this.rec_bottom_y,this.tracking_status,this.tracking_mode,this.target_data]))};s.messages.camera_tracking_geo_status=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<iiffffffffffB",this.id=s.MAVLINK_MSG_ID_CAMERA_TRACKING_GEO_STATUS,this.order_map=[12,0,1,2,3,4,5,6,7,8,9,10,11],this.crc_extra=18,this.name="CAMERA_TRACKING_GEO_STATUS",this.fieldnames=["tracking_status","lat","lon","alt","h_acc","v_acc","vel_n","vel_e","vel_d","vel_acc","dist","hdg","hdg_acc"],this.set(arguments)};s.messages.camera_tracking_geo_status.prototype=new s.message;s.messages.camera_tracking_geo_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.lat,this.lon,this.alt,this.h_acc,this.v_acc,this.vel_n,this.vel_e,this.vel_d,this.vel_acc,this.dist,this.hdg,this.hdg_acc,this.tracking_status]))};s.messages.gimbal_manager_information=function(r,t,e,i,n,a,o,c,_){this.format="<IIffffffB",this.id=s.MAVLINK_MSG_ID_GIMBAL_MANAGER_INFORMATION,this.order_map=[0,1,8,2,3,4,5,6,7],this.crc_extra=70,this.name="GIMBAL_MANAGER_INFORMATION",this.fieldnames=["time_boot_ms","cap_flags","gimbal_device_id","roll_min","roll_max","pitch_min","pitch_max","yaw_min","yaw_max"],this.set(arguments)};s.messages.gimbal_manager_information.prototype=new s.message;s.messages.gimbal_manager_information.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.cap_flags,this.roll_min,this.roll_max,this.pitch_min,this.pitch_max,this.yaw_min,this.yaw_max,this.gimbal_device_id]))};s.messages.gimbal_manager_status=function(r,t,e,i,n,a,o){this.format="<IIBBBBB",this.id=s.MAVLINK_MSG_ID_GIMBAL_MANAGER_STATUS,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=48,this.name="GIMBAL_MANAGER_STATUS",this.fieldnames=["time_boot_ms","flags","gimbal_device_id","primary_control_sysid","primary_control_compid","secondary_control_sysid","secondary_control_compid"],this.set(arguments)};s.messages.gimbal_manager_status.prototype=new s.message;s.messages.gimbal_manager_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.flags,this.gimbal_device_id,this.primary_control_sysid,this.primary_control_compid,this.secondary_control_sysid,this.secondary_control_compid]))};s.messages.gimbal_manager_set_attitude=function(r,t,e,i,n,a,o,c){this.format="<I4ffffBBB",this.id=s.MAVLINK_MSG_ID_GIMBAL_MANAGER_SET_ATTITUDE,this.order_map=[5,6,0,7,1,2,3,4],this.crc_extra=123,this.name="GIMBAL_MANAGER_SET_ATTITUDE",this.fieldnames=["target_system","target_component","flags","gimbal_device_id","q","angular_velocity_x","angular_velocity_y","angular_velocity_z"],this.set(arguments)};s.messages.gimbal_manager_set_attitude.prototype=new s.message;s.messages.gimbal_manager_set_attitude.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.flags,this.q,this.angular_velocity_x,this.angular_velocity_y,this.angular_velocity_z,this.target_system,this.target_component,this.gimbal_device_id]))};s.messages.gimbal_device_information=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<QIIIffffffHH32s32s32sB",this.id=s.MAVLINK_MSG_ID_GIMBAL_DEVICE_INFORMATION,this.order_map=[1,12,13,14,2,3,0,10,11,4,5,6,7,8,9,15],this.crc_extra=74,this.name="GIMBAL_DEVICE_INFORMATION",this.fieldnames=["time_boot_ms","vendor_name","model_name","custom_name","firmware_version","hardware_version","uid","cap_flags","custom_cap_flags","roll_min","roll_max","pitch_min","pitch_max","yaw_min","yaw_max","gimbal_device_id"],this.set(arguments)};s.messages.gimbal_device_information.prototype=new s.message;s.messages.gimbal_device_information.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.uid,this.time_boot_ms,this.firmware_version,this.hardware_version,this.roll_min,this.roll_max,this.pitch_min,this.pitch_max,this.yaw_min,this.yaw_max,this.cap_flags,this.custom_cap_flags,this.vendor_name,this.model_name,this.custom_name,this.gimbal_device_id]))};s.messages.gimbal_device_set_attitude=function(r,t,e,i,n,a,o){this.format="<4ffffHBB",this.id=s.MAVLINK_MSG_ID_GIMBAL_DEVICE_SET_ATTITUDE,this.order_map=[5,6,4,0,1,2,3],this.crc_extra=99,this.name="GIMBAL_DEVICE_SET_ATTITUDE",this.fieldnames=["target_system","target_component","flags","q","angular_velocity_x","angular_velocity_y","angular_velocity_z"],this.set(arguments)};s.messages.gimbal_device_set_attitude.prototype=new s.message;s.messages.gimbal_device_set_attitude.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.q,this.angular_velocity_x,this.angular_velocity_y,this.angular_velocity_z,this.flags,this.target_system,this.target_component]))};s.messages.gimbal_device_attitude_status=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<I4ffffIHBBffB",this.id=s.MAVLINK_MSG_ID_GIMBAL_DEVICE_ATTITUDE_STATUS,this.order_map=[7,8,0,6,1,2,3,4,5,9,10,11],this.crc_extra=137,this.name="GIMBAL_DEVICE_ATTITUDE_STATUS",this.fieldnames=["target_system","target_component","time_boot_ms","flags","q","angular_velocity_x","angular_velocity_y","angular_velocity_z","failure_flags","delta_yaw","delta_yaw_velocity","gimbal_device_id"],this.set(arguments)};s.messages.gimbal_device_attitude_status.prototype=new s.message;s.messages.gimbal_device_attitude_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.q,this.angular_velocity_x,this.angular_velocity_y,this.angular_velocity_z,this.failure_flags,this.flags,this.target_system,this.target_component,this.delta_yaw,this.delta_yaw_velocity,this.gimbal_device_id]))};s.messages.autopilot_state_for_gimbal_device=function(r,t,e,i,n,a,o,c,_,l,u,p,f){this.format="<Q4fIfffIfHBBBf",this.id=s.MAVLINK_MSG_ID_AUTOPILOT_STATE_FOR_GIMBAL_DEVICE,this.order_map=[9,10,0,1,2,3,4,5,6,7,8,11,12],this.crc_extra=210,this.name="AUTOPILOT_STATE_FOR_GIMBAL_DEVICE",this.fieldnames=["target_system","target_component","time_boot_us","q","q_estimated_delay_us","vx","vy","vz","v_estimated_delay_us","feed_forward_angular_velocity_z","estimator_status","landed_state","angular_velocity_z"],this.set(arguments)};s.messages.autopilot_state_for_gimbal_device.prototype=new s.message;s.messages.autopilot_state_for_gimbal_device.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_us,this.q,this.q_estimated_delay_us,this.vx,this.vy,this.vz,this.v_estimated_delay_us,this.feed_forward_angular_velocity_z,this.estimator_status,this.target_system,this.target_component,this.landed_state,this.angular_velocity_z]))};s.messages.gimbal_manager_set_pitchyaw=function(r,t,e,i,n,a,o,c){this.format="<IffffBBB",this.id=s.MAVLINK_MSG_ID_GIMBAL_MANAGER_SET_PITCHYAW,this.order_map=[5,6,0,7,1,2,3,4],this.crc_extra=1,this.name="GIMBAL_MANAGER_SET_PITCHYAW",this.fieldnames=["target_system","target_component","flags","gimbal_device_id","pitch","yaw","pitch_rate","yaw_rate"],this.set(arguments)};s.messages.gimbal_manager_set_pitchyaw.prototype=new s.message;s.messages.gimbal_manager_set_pitchyaw.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.flags,this.pitch,this.yaw,this.pitch_rate,this.yaw_rate,this.target_system,this.target_component,this.gimbal_device_id]))};s.messages.gimbal_manager_set_manual_control=function(r,t,e,i,n,a,o,c){this.format="<IffffBBB",this.id=s.MAVLINK_MSG_ID_GIMBAL_MANAGER_SET_MANUAL_CONTROL,this.order_map=[5,6,0,7,1,2,3,4],this.crc_extra=20,this.name="GIMBAL_MANAGER_SET_MANUAL_CONTROL",this.fieldnames=["target_system","target_component","flags","gimbal_device_id","pitch","yaw","pitch_rate","yaw_rate"],this.set(arguments)};s.messages.gimbal_manager_set_manual_control.prototype=new s.message;s.messages.gimbal_manager_set_manual_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.flags,this.pitch,this.yaw,this.pitch_rate,this.yaw_rate,this.target_system,this.target_component,this.gimbal_device_id]))};s.messages.wifi_config_ap=function(r,t){this.format="<32s64s",this.id=s.MAVLINK_MSG_ID_WIFI_CONFIG_AP,this.order_map=[0,1],this.crc_extra=19,this.name="WIFI_CONFIG_AP",this.fieldnames=["ssid","password"],this.set(arguments)};s.messages.wifi_config_ap.prototype=new s.message;s.messages.wifi_config_ap.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ssid,this.password]))};s.messages.ais_vessel=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S){this.format="<IiiHHHHHHHbBBBB7s20s",this.id=s.MAVLINK_MSG_ID_AIS_VESSEL,this.order_map=[0,1,2,3,4,5,10,11,12,6,7,13,14,15,16,8,9],this.crc_extra=243,this.name="AIS_VESSEL",this.fieldnames=["MMSI","lat","lon","COG","heading","velocity","turn_rate","navigational_status","type","dimension_bow","dimension_stern","dimension_port","dimension_starboard","callsign","name","tslc","flags"],this.set(arguments)};s.messages.ais_vessel.prototype=new s.message;s.messages.ais_vessel.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.MMSI,this.lat,this.lon,this.COG,this.heading,this.velocity,this.dimension_bow,this.dimension_stern,this.tslc,this.flags,this.turn_rate,this.navigational_status,this.type,this.dimension_port,this.dimension_starboard,this.callsign,this.name]))};s.messages.uavcan_node_status=function(r,t,e,i,n,a){this.format="<QIHBBB",this.id=s.MAVLINK_MSG_ID_UAVCAN_NODE_STATUS,this.order_map=[0,1,3,4,5,2],this.crc_extra=28,this.name="UAVCAN_NODE_STATUS",this.fieldnames=["time_usec","uptime_sec","health","mode","sub_mode","vendor_specific_status_code"],this.set(arguments)};s.messages.uavcan_node_status.prototype=new s.message;s.messages.uavcan_node_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.uptime_sec,this.vendor_specific_status_code,this.health,this.mode,this.sub_mode]))};s.messages.uavcan_node_info=function(r,t,e,i,n,a,o,c,_){this.format="<QII80sBB16sBB",this.id=s.MAVLINK_MSG_ID_UAVCAN_NODE_INFO,this.order_map=[0,1,3,4,5,6,7,8,2],this.crc_extra=95,this.name="UAVCAN_NODE_INFO",this.fieldnames=["time_usec","uptime_sec","name","hw_version_major","hw_version_minor","hw_unique_id","sw_version_major","sw_version_minor","sw_vcs_commit"],this.set(arguments)};s.messages.uavcan_node_info.prototype=new s.message;s.messages.uavcan_node_info.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.uptime_sec,this.sw_vcs_commit,this.name,this.hw_version_major,this.hw_version_minor,this.hw_unique_id,this.sw_version_major,this.sw_version_minor]))};s.messages.param_ext_request_read=function(r,t,e,i){this.format="<hBB16s",this.id=s.MAVLINK_MSG_ID_PARAM_EXT_REQUEST_READ,this.order_map=[1,2,3,0],this.crc_extra=243,this.name="PARAM_EXT_REQUEST_READ",this.fieldnames=["target_system","target_component","param_id","param_index"],this.set(arguments)};s.messages.param_ext_request_read.prototype=new s.message;s.messages.param_ext_request_read.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param_index,this.target_system,this.target_component,this.param_id]))};s.messages.param_ext_request_list=function(r,t){this.format="<BB",this.id=s.MAVLINK_MSG_ID_PARAM_EXT_REQUEST_LIST,this.order_map=[0,1],this.crc_extra=88,this.name="PARAM_EXT_REQUEST_LIST",this.fieldnames=["target_system","target_component"],this.set(arguments)};s.messages.param_ext_request_list.prototype=new s.message;s.messages.param_ext_request_list.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component]))};s.messages.param_ext_value=function(r,t,e,i,n){this.format="<HH16s128sB",this.id=s.MAVLINK_MSG_ID_PARAM_EXT_VALUE,this.order_map=[2,3,4,0,1],this.crc_extra=243,this.name="PARAM_EXT_VALUE",this.fieldnames=["param_id","param_value","param_type","param_count","param_index"],this.set(arguments)};s.messages.param_ext_value.prototype=new s.message;s.messages.param_ext_value.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param_count,this.param_index,this.param_id,this.param_value,this.param_type]))};s.messages.param_ext_set=function(r,t,e,i,n){this.format="<BB16s128sB",this.id=s.MAVLINK_MSG_ID_PARAM_EXT_SET,this.order_map=[0,1,2,3,4],this.crc_extra=78,this.name="PARAM_EXT_SET",this.fieldnames=["target_system","target_component","param_id","param_value","param_type"],this.set(arguments)};s.messages.param_ext_set.prototype=new s.message;s.messages.param_ext_set.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.param_id,this.param_value,this.param_type]))};s.messages.param_ext_ack=function(r,t,e,i){this.format="<16s128sBB",this.id=s.MAVLINK_MSG_ID_PARAM_EXT_ACK,this.order_map=[0,1,2,3],this.crc_extra=132,this.name="PARAM_EXT_ACK",this.fieldnames=["param_id","param_value","param_type","param_result"],this.set(arguments)};s.messages.param_ext_ack.prototype=new s.message;s.messages.param_ext_ack.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.param_id,this.param_value,this.param_type,this.param_result]))};s.messages.obstacle_distance=function(r,t,e,i,n,a,o,c,_){this.format="<Q72HHHBBffB",this.id=s.MAVLINK_MSG_ID_OBSTACLE_DISTANCE,this.order_map=[0,4,1,5,2,3,6,7,8],this.crc_extra=23,this.name="OBSTACLE_DISTANCE",this.fieldnames=["time_usec","sensor_type","distances","increment","min_distance","max_distance","increment_f","angle_offset","frame"],this.set(arguments)};s.messages.obstacle_distance.prototype=new s.message;s.messages.obstacle_distance.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.distances,this.min_distance,this.max_distance,this.sensor_type,this.increment,this.increment_f,this.angle_offset,this.frame]))};s.messages.odometry=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y){this.format="<Qfff4fffffff21f21fBBBBb",this.id=s.MAVLINK_MSG_ID_ODOMETRY,this.order_map=[0,13,14,1,2,3,4,5,6,7,8,9,10,11,12,15,16,17],this.crc_extra=91,this.name="ODOMETRY",this.fieldnames=["time_usec","frame_id","child_frame_id","x","y","z","q","vx","vy","vz","rollspeed","pitchspeed","yawspeed","pose_covariance","velocity_covariance","reset_counter","estimator_type","quality"],this.set(arguments)};s.messages.odometry.prototype=new s.message;s.messages.odometry.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.x,this.y,this.z,this.q,this.vx,this.vy,this.vz,this.rollspeed,this.pitchspeed,this.yawspeed,this.pose_covariance,this.velocity_covariance,this.frame_id,this.child_frame_id,this.reset_counter,this.estimator_type,this.quality]))};s.messages.isbd_link_status=function(r,t,e,i,n,a,o,c){this.format="<QQHHBBBB",this.id=s.MAVLINK_MSG_ID_ISBD_LINK_STATUS,this.order_map=[0,1,2,3,4,5,6,7],this.crc_extra=225,this.name="ISBD_LINK_STATUS",this.fieldnames=["timestamp","last_heartbeat","failed_sessions","successful_sessions","signal_quality","ring_pending","tx_session_pending","rx_session_pending"],this.set(arguments)};s.messages.isbd_link_status.prototype=new s.message;s.messages.isbd_link_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.last_heartbeat,this.failed_sessions,this.successful_sessions,this.signal_quality,this.ring_pending,this.tx_session_pending,this.rx_session_pending]))};s.messages.raw_rpm=function(r,t){this.format="<fB",this.id=s.MAVLINK_MSG_ID_RAW_RPM,this.order_map=[1,0],this.crc_extra=199,this.name="RAW_RPM",this.fieldnames=["index","frequency"],this.set(arguments)};s.messages.raw_rpm.prototype=new s.message;s.messages.raw_rpm.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.frequency,this.index]))};s.messages.utm_global_position=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y){this.format="<QiiiiiiihhhHHHH18sBB",this.id=s.MAVLINK_MSG_ID_UTM_GLOBAL_POSITION,this.order_map=[0,15,1,2,3,4,8,9,10,11,12,13,5,6,7,14,16,17],this.crc_extra=99,this.name="UTM_GLOBAL_POSITION",this.fieldnames=["time","uas_id","lat","lon","alt","relative_alt","vx","vy","vz","h_acc","v_acc","vel_acc","next_lat","next_lon","next_alt","update_rate","flight_state","flags"],this.set(arguments)};s.messages.utm_global_position.prototype=new s.message;s.messages.utm_global_position.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time,this.lat,this.lon,this.alt,this.relative_alt,this.next_lat,this.next_lon,this.next_alt,this.vx,this.vy,this.vz,this.h_acc,this.v_acc,this.vel_acc,this.update_rate,this.uas_id,this.flight_state,this.flags]))};s.messages.debug_float_array=function(r,t,e,i){this.format="<QH10s58f",this.id=s.MAVLINK_MSG_ID_DEBUG_FLOAT_ARRAY,this.order_map=[0,2,1,3],this.crc_extra=232,this.name="DEBUG_FLOAT_ARRAY",this.fieldnames=["time_usec","name","array_id","data"],this.set(arguments)};s.messages.debug_float_array.prototype=new s.message;s.messages.debug_float_array.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.array_id,this.name,this.data]))};s.messages.smart_battery_info=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S){this.format="<iiHHHHHBBB16s50sHBII11s",this.id=s.MAVLINK_MSG_ID_SMART_BATTERY_INFO,this.order_map=[7,8,9,0,1,2,10,11,3,4,5,6,12,13,14,15,16],this.crc_extra=75,this.name="SMART_BATTERY_INFO",this.fieldnames=["id","battery_function","type","capacity_full_specification","capacity_full","cycle_count","serial_number","device_name","weight","discharge_minimum_voltage","charging_minimum_voltage","resting_minimum_voltage","charging_maximum_voltage","cells_in_series","discharge_maximum_current","discharge_maximum_burst_current","manufacture_date"],this.set(arguments)};s.messages.smart_battery_info.prototype=new s.message;s.messages.smart_battery_info.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.capacity_full_specification,this.capacity_full,this.cycle_count,this.weight,this.discharge_minimum_voltage,this.charging_minimum_voltage,this.resting_minimum_voltage,this.id,this.battery_function,this.type,this.serial_number,this.device_name,this.charging_maximum_voltage,this.cells_in_series,this.discharge_maximum_current,this.discharge_maximum_burst_current,this.manufacture_date]))};s.messages.generator_status=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<QfffffIiHhh",this.id=s.MAVLINK_MSG_ID_GENERATOR_STATUS,this.order_map=[0,8,1,2,3,4,9,5,10,6,7],this.crc_extra=117,this.name="GENERATOR_STATUS",this.fieldnames=["status","generator_speed","battery_current","load_current","power_generated","bus_voltage","rectifier_temperature","bat_current_setpoint","generator_temperature","runtime","time_until_maintenance"],this.set(arguments)};s.messages.generator_status.prototype=new s.message;s.messages.generator_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.status,this.battery_current,this.load_current,this.power_generated,this.bus_voltage,this.bat_current_setpoint,this.runtime,this.time_until_maintenance,this.generator_speed,this.rectifier_temperature,this.generator_temperature]))};s.messages.actuator_output_status=function(r,t,e){this.format="<QI32f",this.id=s.MAVLINK_MSG_ID_ACTUATOR_OUTPUT_STATUS,this.order_map=[0,1,2],this.crc_extra=251,this.name="ACTUATOR_OUTPUT_STATUS",this.fieldnames=["time_usec","active","actuator"],this.set(arguments)};s.messages.actuator_output_status.prototype=new s.message;s.messages.actuator_output_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.active,this.actuator]))};s.messages.relay_status=function(r,t,e){this.format="<IHH",this.id=s.MAVLINK_MSG_ID_RELAY_STATUS,this.order_map=[0,1,2],this.crc_extra=199,this.name="RELAY_STATUS",this.fieldnames=["time_boot_ms","on","present"],this.set(arguments)};s.messages.relay_status.prototype=new s.message;s.messages.relay_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.on,this.present]))};s.messages.tunnel=function(r,t,e,i,n){this.format="<HBBB128s",this.id=s.MAVLINK_MSG_ID_TUNNEL,this.order_map=[1,2,0,3,4],this.crc_extra=147,this.name="TUNNEL",this.fieldnames=["target_system","target_component","payload_type","payload_length","payload"],this.set(arguments)};s.messages.tunnel.prototype=new s.message;s.messages.tunnel.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.payload_type,this.target_system,this.target_component,this.payload_length,this.payload]))};s.messages.can_frame=function(r,t,e,i,n,a){this.format="<IBBBB8s",this.id=s.MAVLINK_MSG_ID_CAN_FRAME,this.order_map=[1,2,3,4,0,5],this.crc_extra=132,this.name="CAN_FRAME",this.fieldnames=["target_system","target_component","bus","len","id","data"],this.set(arguments)};s.messages.can_frame.prototype=new s.message;s.messages.can_frame.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.id,this.target_system,this.target_component,this.bus,this.len,this.data]))};s.messages.canfd_frame=function(r,t,e,i,n,a){this.format="<IBBBB64s",this.id=s.MAVLINK_MSG_ID_CANFD_FRAME,this.order_map=[1,2,3,4,0,5],this.crc_extra=4,this.name="CANFD_FRAME",this.fieldnames=["target_system","target_component","bus","len","id","data"],this.set(arguments)};s.messages.canfd_frame.prototype=new s.message;s.messages.canfd_frame.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.id,this.target_system,this.target_component,this.bus,this.len,this.data]))};s.messages.can_filter_modify=function(r,t,e,i,n,a){this.format="<16HBBBBB",this.id=s.MAVLINK_MSG_ID_CAN_FILTER_MODIFY,this.order_map=[1,2,3,4,5,0],this.crc_extra=8,this.name="CAN_FILTER_MODIFY",this.fieldnames=["target_system","target_component","bus","operation","num_ids","ids"],this.set(arguments)};s.messages.can_filter_modify.prototype=new s.message;s.messages.can_filter_modify.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ids,this.target_system,this.target_component,this.bus,this.operation,this.num_ids]))};s.messages.wheel_distance=function(r,t,e){this.format="<Q16dB",this.id=s.MAVLINK_MSG_ID_WHEEL_DISTANCE,this.order_map=[0,2,1],this.crc_extra=113,this.name="WHEEL_DISTANCE",this.fieldnames=["time_usec","count","distance"],this.set(arguments)};s.messages.wheel_distance.prototype=new s.message;s.messages.wheel_distance.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.distance,this.count]))};s.messages.winch_status=function(r,t,e,i,n,a,o,c){this.format="<QfffffIh",this.id=s.MAVLINK_MSG_ID_WINCH_STATUS,this.order_map=[0,1,2,3,4,5,7,6],this.crc_extra=117,this.name="WINCH_STATUS",this.fieldnames=["time_usec","line_length","speed","tension","voltage","current","temperature","status"],this.set(arguments)};s.messages.winch_status.prototype=new s.message;s.messages.winch_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_usec,this.line_length,this.speed,this.tension,this.voltage,this.current,this.status,this.temperature]))};s.messages.open_drone_id_basic_id=function(r,t,e,i,n,a){this.format="<BB20sBB20s",this.id=s.MAVLINK_MSG_ID_OPEN_DRONE_ID_BASIC_ID,this.order_map=[0,1,2,3,4,5],this.crc_extra=114,this.name="OPEN_DRONE_ID_BASIC_ID",this.fieldnames=["target_system","target_component","id_or_mac","id_type","ua_type","uas_id"],this.set(arguments)};s.messages.open_drone_id_basic_id.prototype=new s.message;s.messages.open_drone_id_basic_id.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.id_or_mac,this.id_type,this.ua_type,this.uas_id]))};s.messages.open_drone_id_location=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M){this.format="<iiffffHHhBB20sBBBBBBB",this.id=s.MAVLINK_MSG_ID_OPEN_DRONE_ID_LOCATION,this.order_map=[9,10,11,12,6,7,8,0,1,2,3,13,4,14,15,16,17,5,18],this.crc_extra=254,this.name="OPEN_DRONE_ID_LOCATION",this.fieldnames=["target_system","target_component","id_or_mac","status","direction","speed_horizontal","speed_vertical","latitude","longitude","altitude_barometric","altitude_geodetic","height_reference","height","horizontal_accuracy","vertical_accuracy","barometer_accuracy","speed_accuracy","timestamp","timestamp_accuracy"],this.set(arguments)};s.messages.open_drone_id_location.prototype=new s.message;s.messages.open_drone_id_location.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.latitude,this.longitude,this.altitude_barometric,this.altitude_geodetic,this.height,this.timestamp,this.direction,this.speed_horizontal,this.speed_vertical,this.target_system,this.target_component,this.id_or_mac,this.status,this.height_reference,this.horizontal_accuracy,this.vertical_accuracy,this.barometer_accuracy,this.speed_accuracy,this.timestamp_accuracy]))};s.messages.open_drone_id_authentication=function(r,t,e,i,n,a,o,c,_){this.format="<IBB20sBBBB23s",this.id=s.MAVLINK_MSG_ID_OPEN_DRONE_ID_AUTHENTICATION,this.order_map=[1,2,3,4,5,6,7,0,8],this.crc_extra=140,this.name="OPEN_DRONE_ID_AUTHENTICATION",this.fieldnames=["target_system","target_component","id_or_mac","authentication_type","data_page","last_page_index","length","timestamp","authentication_data"],this.set(arguments)};s.messages.open_drone_id_authentication.prototype=new s.message;s.messages.open_drone_id_authentication.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.timestamp,this.target_system,this.target_component,this.id_or_mac,this.authentication_type,this.data_page,this.last_page_index,this.length,this.authentication_data]))};s.messages.open_drone_id_self_id=function(r,t,e,i,n){this.format="<BB20sB23s",this.id=s.MAVLINK_MSG_ID_OPEN_DRONE_ID_SELF_ID,this.order_map=[0,1,2,3,4],this.crc_extra=249,this.name="OPEN_DRONE_ID_SELF_ID",this.fieldnames=["target_system","target_component","id_or_mac","description_type","description"],this.set(arguments)};s.messages.open_drone_id_self_id.prototype=new s.message;s.messages.open_drone_id_self_id.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.id_or_mac,this.description_type,this.description]))};s.messages.open_drone_id_system=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A){this.format="<iifffIHHBB20sBBBB",this.id=s.MAVLINK_MSG_ID_OPEN_DRONE_ID_SYSTEM,this.order_map=[8,9,10,11,12,0,1,6,7,2,3,13,14,4,5],this.crc_extra=77,this.name="OPEN_DRONE_ID_SYSTEM",this.fieldnames=["target_system","target_component","id_or_mac","operator_location_type","classification_type","operator_latitude","operator_longitude","area_count","area_radius","area_ceiling","area_floor","category_eu","class_eu","operator_altitude_geo","timestamp"],this.set(arguments)};s.messages.open_drone_id_system.prototype=new s.message;s.messages.open_drone_id_system.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.operator_latitude,this.operator_longitude,this.area_ceiling,this.area_floor,this.operator_altitude_geo,this.timestamp,this.area_count,this.area_radius,this.target_system,this.target_component,this.id_or_mac,this.operator_location_type,this.classification_type,this.category_eu,this.class_eu]))};s.messages.open_drone_id_operator_id=function(r,t,e,i,n){this.format="<BB20sB20s",this.id=s.MAVLINK_MSG_ID_OPEN_DRONE_ID_OPERATOR_ID,this.order_map=[0,1,2,3,4],this.crc_extra=49,this.name="OPEN_DRONE_ID_OPERATOR_ID",this.fieldnames=["target_system","target_component","id_or_mac","operator_id_type","operator_id"],this.set(arguments)};s.messages.open_drone_id_operator_id.prototype=new s.message;s.messages.open_drone_id_operator_id.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.id_or_mac,this.operator_id_type,this.operator_id]))};s.messages.open_drone_id_arm_status=function(r,t){this.format="<B50s",this.id=s.MAVLINK_MSG_ID_OPEN_DRONE_ID_ARM_STATUS,this.order_map=[0,1],this.crc_extra=139,this.name="OPEN_DRONE_ID_ARM_STATUS",this.fieldnames=["status","error"],this.set(arguments)};s.messages.open_drone_id_arm_status.prototype=new s.message;s.messages.open_drone_id_arm_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.status,this.error]))};s.messages.open_drone_id_message_pack=function(r,t,e,i,n,a){this.format="<BB20sBB225s",this.id=s.MAVLINK_MSG_ID_OPEN_DRONE_ID_MESSAGE_PACK,this.order_map=[0,1,2,3,4,5],this.crc_extra=94,this.name="OPEN_DRONE_ID_MESSAGE_PACK",this.fieldnames=["target_system","target_component","id_or_mac","single_message_size","msg_pack_size","messages"],this.set(arguments)};s.messages.open_drone_id_message_pack.prototype=new s.message;s.messages.open_drone_id_message_pack.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.id_or_mac,this.single_message_size,this.msg_pack_size,this.messages]))};s.messages.open_drone_id_system_update=function(r,t,e,i,n,a){this.format="<iifIBB",this.id=s.MAVLINK_MSG_ID_OPEN_DRONE_ID_SYSTEM_UPDATE,this.order_map=[4,5,0,1,2,3],this.crc_extra=7,this.name="OPEN_DRONE_ID_SYSTEM_UPDATE",this.fieldnames=["target_system","target_component","operator_latitude","operator_longitude","operator_altitude_geo","timestamp"],this.set(arguments)};s.messages.open_drone_id_system_update.prototype=new s.message;s.messages.open_drone_id_system_update.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.operator_latitude,this.operator_longitude,this.operator_altitude_geo,this.timestamp,this.target_system,this.target_component]))};s.messages.hygrometer_sensor=function(r,t,e){this.format="<hHB",this.id=s.MAVLINK_MSG_ID_HYGROMETER_SENSOR,this.order_map=[2,0,1],this.crc_extra=20,this.name="HYGROMETER_SENSOR",this.fieldnames=["id","temperature","humidity"],this.set(arguments)};s.messages.hygrometer_sensor.prototype=new s.message;s.messages.hygrometer_sensor.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.temperature,this.humidity,this.id]))};s.messages.mission_checksum=function(r,t){this.format="<IB",this.id=s.MAVLINK_MSG_ID_MISSION_CHECKSUM,this.order_map=[1,0],this.crc_extra=3,this.name="MISSION_CHECKSUM",this.fieldnames=["mission_type","checksum"],this.set(arguments)};s.messages.mission_checksum.prototype=new s.message;s.messages.mission_checksum.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.checksum,this.mission_type]))};s.messages.airspeed=function(r,t,e,i,n){this.format="<ffhBB",this.id=s.MAVLINK_MSG_ID_AIRSPEED,this.order_map=[3,0,2,1,4],this.crc_extra=234,this.name="AIRSPEED",this.fieldnames=["id","airspeed","temperature","raw_press","flags"],this.set(arguments)};s.messages.airspeed.prototype=new s.message;s.messages.airspeed.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.airspeed,this.raw_press,this.temperature,this.id,this.flags]))};s.messages.radio_rc_channels=function(r,t,e,i,n,a){this.format="<IHBBB32h",this.id=s.MAVLINK_MSG_ID_RADIO_RC_CHANNELS,this.order_map=[2,3,0,1,4,5],this.crc_extra=20,this.name="RADIO_RC_CHANNELS",this.fieldnames=["target_system","target_component","time_last_update_ms","flags","count","channels"],this.set(arguments)};s.messages.radio_rc_channels.prototype=new s.message;s.messages.radio_rc_channels.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_last_update_ms,this.flags,this.target_system,this.target_component,this.count,this.channels]))};s.messages.icarous_heartbeat=function(r){this.format="<B",this.id=s.MAVLINK_MSG_ID_ICAROUS_HEARTBEAT,this.order_map=[0],this.crc_extra=227,this.name="ICAROUS_HEARTBEAT",this.fieldnames=["status"],this.set(arguments)};s.messages.icarous_heartbeat.prototype=new s.message;s.messages.icarous_heartbeat.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.status]))};s.messages.icarous_kinematic_bands=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<ffffffffffbBBBBB",this.id=s.MAVLINK_MSG_ID_ICAROUS_KINEMATIC_BANDS,this.order_map=[10,11,0,1,12,2,3,13,4,5,14,6,7,15,8,9],this.crc_extra=239,this.name="ICAROUS_KINEMATIC_BANDS",this.fieldnames=["numBands","type1","min1","max1","type2","min2","max2","type3","min3","max3","type4","min4","max4","type5","min5","max5"],this.set(arguments)};s.messages.icarous_kinematic_bands.prototype=new s.message;s.messages.icarous_kinematic_bands.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.min1,this.max1,this.min2,this.max2,this.min3,this.max3,this.min4,this.max4,this.min5,this.max5,this.numBands,this.type1,this.type2,this.type3,this.type4,this.type5]))};s.messages.heartbeat=function(r,t,e,i,n,a){this.format="<IBBBBB",this.id=s.MAVLINK_MSG_ID_HEARTBEAT,this.order_map=[1,2,3,0,4,5],this.crc_extra=50,this.name="HEARTBEAT",this.fieldnames=["type","autopilot","base_mode","custom_mode","system_status","mavlink_version"],this.set(arguments)};s.messages.heartbeat.prototype=new s.message;s.messages.heartbeat.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.custom_mode,this.type,this.autopilot,this.base_mode,this.system_status,this.mavlink_version]))};s.messages.array_test_0=function(r,t,e,i,n){this.format="<4I4HB4s4s",this.id=s.MAVLINK_MSG_ID_ARRAY_TEST_0,this.order_map=[2,3,4,1,0],this.crc_extra=26,this.name="ARRAY_TEST_0",this.fieldnames=["v1","ar_i8","ar_u8","ar_u16","ar_u32"],this.set(arguments)};s.messages.array_test_0.prototype=new s.message;s.messages.array_test_0.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ar_u32,this.ar_u16,this.v1,this.ar_i8,this.ar_u8]))};s.messages.array_test_1=function(r){this.format="<4I",this.id=s.MAVLINK_MSG_ID_ARRAY_TEST_1,this.order_map=[0],this.crc_extra=72,this.name="ARRAY_TEST_1",this.fieldnames=["ar_u32"],this.set(arguments)};s.messages.array_test_1.prototype=new s.message;s.messages.array_test_1.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ar_u32]))};s.messages.array_test_3=function(r,t){this.format="<4IB",this.id=s.MAVLINK_MSG_ID_ARRAY_TEST_3,this.order_map=[1,0],this.crc_extra=19,this.name="ARRAY_TEST_3",this.fieldnames=["v","ar_u32"],this.set(arguments)};s.messages.array_test_3.prototype=new s.message;s.messages.array_test_3.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ar_u32,this.v]))};s.messages.array_test_4=function(r,t){this.format="<4IB",this.id=s.MAVLINK_MSG_ID_ARRAY_TEST_4,this.order_map=[0,1],this.crc_extra=89,this.name="ARRAY_TEST_4",this.fieldnames=["ar_u32","v"],this.set(arguments)};s.messages.array_test_4.prototype=new s.message;s.messages.array_test_4.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ar_u32,this.v]))};s.messages.array_test_5=function(r,t){this.format="<5s5s",this.id=s.MAVLINK_MSG_ID_ARRAY_TEST_5,this.order_map=[0,1],this.crc_extra=27,this.name="ARRAY_TEST_5",this.fieldnames=["c1","c2"],this.set(arguments)};s.messages.array_test_5.prototype=new s.message;s.messages.array_test_5.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.c1,this.c2]))};s.messages.array_test_6=function(r,t,e,i,n,a,o,c,_,l,u,p){this.format="<2dI2I2i2fH2H2hB2s2s32s",this.id=s.MAVLINK_MSG_ID_ARRAY_TEST_6,this.order_map=[8,5,1,2,3,6,7,9,10,11,0,4],this.crc_extra=14,this.name="ARRAY_TEST_6",this.fieldnames=["v1","v2","v3","ar_u32","ar_i32","ar_u16","ar_i16","ar_u8","ar_i8","ar_c","ar_d","ar_f"],this.set(arguments)};s.messages.array_test_6.prototype=new s.message;s.messages.array_test_6.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ar_d,this.v3,this.ar_u32,this.ar_i32,this.ar_f,this.v2,this.ar_u16,this.ar_i16,this.v1,this.ar_u8,this.ar_i8,this.ar_c]))};s.messages.array_test_7=function(r,t,e,i,n,a,o,c,_){this.format="<2d2f2I2i2H2h2s2s32s",this.id=s.MAVLINK_MSG_ID_ARRAY_TEST_7,this.order_map=[0,1,2,3,4,5,6,7,8],this.crc_extra=187,this.name="ARRAY_TEST_7",this.fieldnames=["ar_d","ar_f","ar_u32","ar_i32","ar_u16","ar_i16","ar_u8","ar_i8","ar_c"],this.set(arguments)};s.messages.array_test_7.prototype=new s.message;s.messages.array_test_7.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ar_d,this.ar_f,this.ar_u32,this.ar_i32,this.ar_u16,this.ar_i16,this.ar_u8,this.ar_i8,this.ar_c]))};s.messages.array_test_8=function(r,t,e){this.format="<2dI2H",this.id=s.MAVLINK_MSG_ID_ARRAY_TEST_8,this.order_map=[1,0,2],this.crc_extra=106,this.name="ARRAY_TEST_8",this.fieldnames=["v3","ar_d","ar_u16"],this.set(arguments)};s.messages.array_test_8.prototype=new s.message;s.messages.array_test_8.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ar_d,this.v3,this.ar_u16]))};s.messages.test_types=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M,x,I,w){this.format="<Qqd3Q3q3dIif3I3i3fHh3H3hc10sBb3s3s",this.id=s.MAVLINK_MSG_ID_TEST_TYPES,this.order_map=[16,17,18,12,6,0,19,13,7,1,8,2,20,14,9,3,21,15,10,4,11,5],this.crc_extra=103,this.name="TEST_TYPES",this.fieldnames=["c","s","u8","u16","u32","u64","s8","s16","s32","s64","f","d","u8_array","u16_array","u32_array","u64_array","s8_array","s16_array","s32_array","s64_array","f_array","d_array"],this.set(arguments)};s.messages.test_types.prototype=new s.message;s.messages.test_types.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.u64,this.s64,this.d,this.u64_array,this.s64_array,this.d_array,this.u32,this.s32,this.f,this.u32_array,this.s32_array,this.f_array,this.u16,this.s16,this.u16_array,this.s16_array,this.c,this.s,this.u8,this.s8,this.u8_array,this.s8_array]))};s.messages.nav_filter_bias=function(r,t,e,i,n,a,o){this.format="<Qffffff",this.id=s.MAVLINK_MSG_ID_NAV_FILTER_BIAS,this.order_map=[0,1,2,3,4,5,6],this.crc_extra=34,this.name="NAV_FILTER_BIAS",this.fieldnames=["usec","accel_0","accel_1","accel_2","gyro_0","gyro_1","gyro_2"],this.set(arguments)};s.messages.nav_filter_bias.prototype=new s.message;s.messages.nav_filter_bias.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.usec,this.accel_0,this.accel_1,this.accel_2,this.gyro_0,this.gyro_1,this.gyro_2]))};s.messages.radio_calibration=function(r,t,e,i,n,a){this.format="<3H3H3H2H5H5H",this.id=s.MAVLINK_MSG_ID_RADIO_CALIBRATION,this.order_map=[0,1,2,3,4,5],this.crc_extra=71,this.name="RADIO_CALIBRATION",this.fieldnames=["aileron","elevator","rudder","gyro","pitch","throttle"],this.set(arguments)};s.messages.radio_calibration.prototype=new s.message;s.messages.radio_calibration.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.aileron,this.elevator,this.rudder,this.gyro,this.pitch,this.throttle]))};s.messages.ualberta_sys_status=function(r,t,e){this.format="<BBB",this.id=s.MAVLINK_MSG_ID_UALBERTA_SYS_STATUS,this.order_map=[0,1,2],this.crc_extra=15,this.name="UALBERTA_SYS_STATUS",this.fieldnames=["mode","nav_mode","pilot"],this.set(arguments)};s.messages.ualberta_sys_status.prototype=new s.message;s.messages.ualberta_sys_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.mode,this.nav_mode,this.pilot]))};s.messages.uavionix_adsb_out_cfg=function(r,t,e,i,n,a,o,c){this.format="<IH9sBBBBB",this.id=s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_CFG,this.order_map=[0,2,3,4,5,6,1,7],this.crc_extra=209,this.name="UAVIONIX_ADSB_OUT_CFG",this.fieldnames=["ICAO","callsign","emitterType","aircraftSize","gpsOffsetLat","gpsOffsetLon","stallSpeed","rfSelect"],this.set(arguments)};s.messages.uavionix_adsb_out_cfg.prototype=new s.message;s.messages.uavionix_adsb_out_cfg.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ICAO,this.stallSpeed,this.callsign,this.emitterType,this.aircraftSize,this.gpsOffsetLat,this.gpsOffsetLon,this.rfSelect]))};s.messages.uavionix_adsb_out_dynamic=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E){this.format="<IiiiiIHHhhhHHBBB",this.id=s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_DYNAMIC,this.order_map=[0,1,2,3,13,14,4,5,6,7,8,9,10,15,11,12],this.crc_extra=186,this.name="UAVIONIX_ADSB_OUT_DYNAMIC",this.fieldnames=["utcTime","gpsLat","gpsLon","gpsAlt","gpsFix","numSats","baroAltMSL","accuracyHor","accuracyVert","accuracyVel","velVert","velNS","VelEW","emergencyStatus","state","squawk"],this.set(arguments)};s.messages.uavionix_adsb_out_dynamic.prototype=new s.message;s.messages.uavionix_adsb_out_dynamic.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.utcTime,this.gpsLat,this.gpsLon,this.gpsAlt,this.baroAltMSL,this.accuracyHor,this.accuracyVert,this.accuracyVel,this.velVert,this.velNS,this.VelEW,this.state,this.squawk,this.gpsFix,this.numSats,this.emergencyStatus]))};s.messages.uavionix_adsb_transceiver_health_report=function(r){this.format="<B",this.id=s.MAVLINK_MSG_ID_UAVIONIX_ADSB_TRANSCEIVER_HEALTH_REPORT,this.order_map=[0],this.crc_extra=4,this.name="UAVIONIX_ADSB_TRANSCEIVER_HEALTH_REPORT",this.fieldnames=["rfHealth"],this.set(arguments)};s.messages.uavionix_adsb_transceiver_health_report.prototype=new s.message;s.messages.uavionix_adsb_transceiver_health_report.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.rfHealth]))};s.messages.uavionix_adsb_out_cfg_registration=function(r){this.format="<9s",this.id=s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_CFG_REGISTRATION,this.order_map=[0],this.crc_extra=133,this.name="UAVIONIX_ADSB_OUT_CFG_REGISTRATION",this.fieldnames=["registration"],this.set(arguments)};s.messages.uavionix_adsb_out_cfg_registration.prototype=new s.message;s.messages.uavionix_adsb_out_cfg_registration.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.registration]))};s.messages.uavionix_adsb_out_cfg_flightid=function(r){this.format="<9s",this.id=s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_CFG_FLIGHTID,this.order_map=[0],this.crc_extra=103,this.name="UAVIONIX_ADSB_OUT_CFG_FLIGHTID",this.fieldnames=["flight_id"],this.set(arguments)};s.messages.uavionix_adsb_out_cfg_flightid.prototype=new s.message;s.messages.uavionix_adsb_out_cfg_flightid.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.flight_id]))};s.messages.uavionix_adsb_get=function(r){this.format="<I",this.id=s.MAVLINK_MSG_ID_UAVIONIX_ADSB_GET,this.order_map=[0],this.crc_extra=193,this.name="UAVIONIX_ADSB_GET",this.fieldnames=["ReqMessageId"],this.set(arguments)};s.messages.uavionix_adsb_get.prototype=new s.message;s.messages.uavionix_adsb_get.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.ReqMessageId]))};s.messages.uavionix_adsb_out_control=function(r,t,e,i,n,a){this.format="<iHBB8sB",this.id=s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_CONTROL,this.order_map=[2,0,1,3,4,5],this.crc_extra=71,this.name="UAVIONIX_ADSB_OUT_CONTROL",this.fieldnames=["state","baroAltMSL","squawk","emergencyStatus","flight_id","x_bit"],this.set(arguments)};s.messages.uavionix_adsb_out_control.prototype=new s.message;s.messages.uavionix_adsb_out_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.baroAltMSL,this.squawk,this.state,this.emergencyStatus,this.flight_id,this.x_bit]))};s.messages.uavionix_adsb_out_status=function(r,t,e,i,n,a){this.format="<HBBBB8s",this.id=s.MAVLINK_MSG_ID_UAVIONIX_ADSB_OUT_STATUS,this.order_map=[1,0,2,3,4,5],this.crc_extra=240,this.name="UAVIONIX_ADSB_OUT_STATUS",this.fieldnames=["state","squawk","NIC_NACp","boardTemp","fault","flight_id"],this.set(arguments)};s.messages.uavionix_adsb_out_status.prototype=new s.message;s.messages.uavionix_adsb_out_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.squawk,this.state,this.NIC_NACp,this.boardTemp,this.fault,this.flight_id]))};s.messages.loweheiser_gov_efi=function(r,t,e,i,n,a,o,c,_,l,u,p,f,d,A,E,S,y,M,x,I,w,D){this.format="<ffffffIiffffffffffffHHB",this.id=s.MAVLINK_MSG_ID_LOWEHEISER_GOV_EFI,this.order_map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,22,20,21],this.crc_extra=195,this.name="LOWEHEISER_GOV_EFI",this.fieldnames=["volt_batt","curr_batt","curr_gen","curr_rot","fuel_level","throttle","runtime","until_maintenance","rectifier_temp","generator_temp","efi_batt","efi_rpm","efi_pw","efi_fuel_flow","efi_fuel_consumed","efi_baro","efi_mat","efi_clt","efi_tps","efi_exhaust_gas_temperature","efi_index","generator_status","efi_status"],this.set(arguments)};s.messages.loweheiser_gov_efi.prototype=new s.message;s.messages.loweheiser_gov_efi.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.volt_batt,this.curr_batt,this.curr_gen,this.curr_rot,this.fuel_level,this.throttle,this.runtime,this.until_maintenance,this.rectifier_temp,this.generator_temp,this.efi_batt,this.efi_rpm,this.efi_pw,this.efi_fuel_flow,this.efi_fuel_consumed,this.efi_baro,this.efi_mat,this.efi_clt,this.efi_tps,this.efi_exhaust_gas_temperature,this.generator_status,this.efi_status,this.efi_index]))};s.messages.storm32_gimbal_device_status=function(r,t,e,i,n,a,o,c,_,l){this.format="<I4fffffHHBB",this.id=s.MAVLINK_MSG_ID_STORM32_GIMBAL_DEVICE_STATUS,this.order_map=[8,9,0,6,1,2,3,4,5,7],this.crc_extra=186,this.name="STORM32_GIMBAL_DEVICE_STATUS",this.fieldnames=["target_system","target_component","time_boot_ms","flags","q","angular_velocity_x","angular_velocity_y","angular_velocity_z","yaw_absolute","failure_flags"],this.set(arguments)};s.messages.storm32_gimbal_device_status.prototype=new s.message;s.messages.storm32_gimbal_device_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.q,this.angular_velocity_x,this.angular_velocity_y,this.angular_velocity_z,this.yaw_absolute,this.flags,this.failure_flags,this.target_system,this.target_component]))};s.messages.storm32_gimbal_device_control=function(r,t,e,i,n,a,o){this.format="<4ffffHBB",this.id=s.MAVLINK_MSG_ID_STORM32_GIMBAL_DEVICE_CONTROL,this.order_map=[5,6,4,0,1,2,3],this.crc_extra=69,this.name="STORM32_GIMBAL_DEVICE_CONTROL",this.fieldnames=["target_system","target_component","flags","q","angular_velocity_x","angular_velocity_y","angular_velocity_z"],this.set(arguments)};s.messages.storm32_gimbal_device_control.prototype=new s.message;s.messages.storm32_gimbal_device_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.q,this.angular_velocity_x,this.angular_velocity_y,this.angular_velocity_z,this.flags,this.target_system,this.target_component]))};s.messages.storm32_gimbal_manager_information=function(r,t,e,i,n,a,o,c,_){this.format="<IIffffffB",this.id=s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_INFORMATION,this.order_map=[8,0,1,2,3,4,5,6,7],this.crc_extra=208,this.name="STORM32_GIMBAL_MANAGER_INFORMATION",this.fieldnames=["gimbal_id","device_cap_flags","manager_cap_flags","roll_min","roll_max","pitch_min","pitch_max","yaw_min","yaw_max"],this.set(arguments)};s.messages.storm32_gimbal_manager_information.prototype=new s.message;s.messages.storm32_gimbal_manager_information.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.device_cap_flags,this.manager_cap_flags,this.roll_min,this.roll_max,this.pitch_min,this.pitch_max,this.yaw_min,this.yaw_max,this.gimbal_id]))};s.messages.storm32_gimbal_manager_status=function(r,t,e,i,n){this.format="<HHBBB",this.id=s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_STATUS,this.order_map=[2,3,0,1,4],this.crc_extra=183,this.name="STORM32_GIMBAL_MANAGER_STATUS",this.fieldnames=["gimbal_id","supervisor","device_flags","manager_flags","profile"],this.set(arguments)};s.messages.storm32_gimbal_manager_status.prototype=new s.message;s.messages.storm32_gimbal_manager_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.device_flags,this.manager_flags,this.gimbal_id,this.supervisor,this.profile]))};s.messages.storm32_gimbal_manager_control=function(r,t,e,i,n,a,o,c,_,l){this.format="<4ffffHHBBBB",this.id=s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_CONTROL,this.order_map=[6,7,8,9,4,5,0,1,2,3],this.crc_extra=99,this.name="STORM32_GIMBAL_MANAGER_CONTROL",this.fieldnames=["target_system","target_component","gimbal_id","client","device_flags","manager_flags","q","angular_velocity_x","angular_velocity_y","angular_velocity_z"],this.set(arguments)};s.messages.storm32_gimbal_manager_control.prototype=new s.message;s.messages.storm32_gimbal_manager_control.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.q,this.angular_velocity_x,this.angular_velocity_y,this.angular_velocity_z,this.device_flags,this.manager_flags,this.target_system,this.target_component,this.gimbal_id,this.client]))};s.messages.storm32_gimbal_manager_control_pitchyaw=function(r,t,e,i,n,a,o,c,_,l){this.format="<ffffHHBBBB",this.id=s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_CONTROL_PITCHYAW,this.order_map=[6,7,8,9,4,5,0,1,2,3],this.crc_extra=129,this.name="STORM32_GIMBAL_MANAGER_CONTROL_PITCHYAW",this.fieldnames=["target_system","target_component","gimbal_id","client","device_flags","manager_flags","pitch","yaw","pitch_rate","yaw_rate"],this.set(arguments)};s.messages.storm32_gimbal_manager_control_pitchyaw.prototype=new s.message;s.messages.storm32_gimbal_manager_control_pitchyaw.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.pitch,this.yaw,this.pitch_rate,this.yaw_rate,this.device_flags,this.manager_flags,this.target_system,this.target_component,this.gimbal_id,this.client]))};s.messages.storm32_gimbal_manager_correct_roll=function(r,t,e,i,n){this.format="<fBBBB",this.id=s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_CORRECT_ROLL,this.order_map=[1,2,3,4,0],this.crc_extra=134,this.name="STORM32_GIMBAL_MANAGER_CORRECT_ROLL",this.fieldnames=["target_system","target_component","gimbal_id","client","roll"],this.set(arguments)};s.messages.storm32_gimbal_manager_correct_roll.prototype=new s.message;s.messages.storm32_gimbal_manager_correct_roll.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.roll,this.target_system,this.target_component,this.gimbal_id,this.client]))};s.messages.storm32_gimbal_manager_profile=function(r,t,e,i,n,a,o,c){this.format="<BBBB8sBB8s",this.id=s.MAVLINK_MSG_ID_STORM32_GIMBAL_MANAGER_PROFILE,this.order_map=[0,1,2,3,4,5,6,7],this.crc_extra=78,this.name="STORM32_GIMBAL_MANAGER_PROFILE",this.fieldnames=["target_system","target_component","gimbal_id","profile","priorities","profile_flags","rc_timeout","timeouts"],this.set(arguments)};s.messages.storm32_gimbal_manager_profile.prototype=new s.message;s.messages.storm32_gimbal_manager_profile.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.target_system,this.target_component,this.gimbal_id,this.profile,this.priorities,this.profile_flags,this.rc_timeout,this.timeouts]))};s.messages.qshot_status=function(r,t){this.format="<HH",this.id=s.MAVLINK_MSG_ID_QSHOT_STATUS,this.order_map=[0,1],this.crc_extra=202,this.name="QSHOT_STATUS",this.fieldnames=["mode","shot_state"],this.set(arguments)};s.messages.qshot_status.prototype=new s.message;s.messages.qshot_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.mode,this.shot_state]))};s.messages.component_prearm_status=function(r,t,e,i){this.format="<IIBB",this.id=s.MAVLINK_MSG_ID_COMPONENT_PREARM_STATUS,this.order_map=[2,3,0,1],this.crc_extra=20,this.name="COMPONENT_PREARM_STATUS",this.fieldnames=["target_system","target_component","enabled_flags","fail_flags"],this.set(arguments)};s.messages.component_prearm_status.prototype=new s.message;s.messages.component_prearm_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.enabled_flags,this.fail_flags,this.target_system,this.target_component]))};s.messages.avss_prs_sys_status=function(r,t,e,i,n){this.format="<IIIBB",this.id=s.MAVLINK_MSG_ID_AVSS_PRS_SYS_STATUS,this.order_map=[0,1,2,3,4],this.crc_extra=220,this.name="AVSS_PRS_SYS_STATUS",this.fieldnames=["time_boot_ms","error_status","battery_status","arm_status","charge_status"],this.set(arguments)};s.messages.avss_prs_sys_status.prototype=new s.message;s.messages.avss_prs_sys_status.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.error_status,this.battery_status,this.arm_status,this.charge_status]))};s.messages.avss_drone_position=function(r,t,e,i,n,a){this.format="<Iiiiff",this.id=s.MAVLINK_MSG_ID_AVSS_DRONE_POSITION,this.order_map=[0,1,2,3,4,5],this.crc_extra=245,this.name="AVSS_DRONE_POSITION",this.fieldnames=["time_boot_ms","lat","lon","alt","ground_alt","barometer_alt"],this.set(arguments)};s.messages.avss_drone_position.prototype=new s.message;s.messages.avss_drone_position.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.lat,this.lon,this.alt,this.ground_alt,this.barometer_alt]))};s.messages.avss_drone_imu=function(r,t,e,i,n,a,o,c,_,l,u){this.format="<Iffffffffff",this.id=s.MAVLINK_MSG_ID_AVSS_DRONE_IMU,this.order_map=[0,1,2,3,4,5,6,7,8,9,10],this.crc_extra=101,this.name="AVSS_DRONE_IMU",this.fieldnames=["time_boot_ms","q1","q2","q3","q4","xacc","yacc","zacc","xgyro","ygyro","zgyro"],this.set(arguments)};s.messages.avss_drone_imu.prototype=new s.message;s.messages.avss_drone_imu.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.q1,this.q2,this.q3,this.q4,this.xacc,this.yacc,this.zacc,this.xgyro,this.ygyro,this.zgyro]))};s.messages.avss_drone_operation_mode=function(r,t,e){this.format="<IBB",this.id=s.MAVLINK_MSG_ID_AVSS_DRONE_OPERATION_MODE,this.order_map=[0,1,2],this.crc_extra=45,this.name="AVSS_DRONE_OPERATION_MODE",this.fieldnames=["time_boot_ms","M300_operation_mode","horsefly_operation_mode"],this.set(arguments)};s.messages.avss_drone_operation_mode.prototype=new s.message;s.messages.avss_drone_operation_mode.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.time_boot_ms,this.M300_operation_mode,this.horsefly_operation_mode]))};s.messages.cubepilot_raw_rc=function(r){this.format="<32s",this.id=s.MAVLINK_MSG_ID_CUBEPILOT_RAW_RC,this.order_map=[0],this.crc_extra=246,this.name="CUBEPILOT_RAW_RC",this.fieldnames=["rc_raw"],this.set(arguments)};s.messages.cubepilot_raw_rc.prototype=new s.message;s.messages.cubepilot_raw_rc.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.rc_raw]))};s.messages.herelink_video_stream_information=function(r,t,e,i,n,a,o,c){this.format="<fIHHHBB230s",this.id=s.MAVLINK_MSG_ID_HERELINK_VIDEO_STREAM_INFORMATION,this.order_map=[5,6,0,2,3,1,4,7],this.crc_extra=181,this.name="HERELINK_VIDEO_STREAM_INFORMATION",this.fieldnames=["camera_id","status","framerate","resolution_h","resolution_v","bitrate","rotation","uri"],this.set(arguments)};s.messages.herelink_video_stream_information.prototype=new s.message;s.messages.herelink_video_stream_information.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.framerate,this.bitrate,this.resolution_h,this.resolution_v,this.rotation,this.camera_id,this.status,this.uri]))};s.messages.herelink_telem=function(r,t,e,i,n,a,o){this.format="<IIIhhhB",this.id=s.MAVLINK_MSG_ID_HERELINK_TELEM,this.order_map=[6,3,0,1,2,4,5],this.crc_extra=62,this.name="HERELINK_TELEM",this.fieldnames=["rssi","snr","rf_freq","link_bw","link_rate","cpu_temp","board_temp"],this.set(arguments)};s.messages.herelink_telem.prototype=new s.message;s.messages.herelink_telem.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.rf_freq,this.link_bw,this.link_rate,this.snr,this.cpu_temp,this.board_temp,this.rssi]))};s.messages.cubepilot_firmware_update_start=function(r,t,e,i){this.format="<IIBB",this.id=s.MAVLINK_MSG_ID_CUBEPILOT_FIRMWARE_UPDATE_START,this.order_map=[2,3,0,1],this.crc_extra=240,this.name="CUBEPILOT_FIRMWARE_UPDATE_START",this.fieldnames=["target_system","target_component","size","crc"],this.set(arguments)};s.messages.cubepilot_firmware_update_start.prototype=new s.message;s.messages.cubepilot_firmware_update_start.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.size,this.crc,this.target_system,this.target_component]))};s.messages.cubepilot_firmware_update_resp=function(r,t,e){this.format="<IBB",this.id=s.MAVLINK_MSG_ID_CUBEPILOT_FIRMWARE_UPDATE_RESP,this.order_map=[1,2,0],this.crc_extra=152,this.name="CUBEPILOT_FIRMWARE_UPDATE_RESP",this.fieldnames=["target_system","target_component","offset"],this.set(arguments)};s.messages.cubepilot_firmware_update_resp.prototype=new s.message;s.messages.cubepilot_firmware_update_resp.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.offset,this.target_system,this.target_component]))};s.messages.airlink_auth=function(r,t){this.format="<50s50s",this.id=s.MAVLINK_MSG_ID_AIRLINK_AUTH,this.order_map=[0,1],this.crc_extra=13,this.name="AIRLINK_AUTH",this.fieldnames=["login","password"],this.set(arguments)};s.messages.airlink_auth.prototype=new s.message;s.messages.airlink_auth.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.login,this.password]))};s.messages.airlink_auth_response=function(r){this.format="<B",this.id=s.MAVLINK_MSG_ID_AIRLINK_AUTH_RESPONSE,this.order_map=[0],this.crc_extra=239,this.name="AIRLINK_AUTH_RESPONSE",this.fieldnames=["resp_type"],this.set(arguments)};s.messages.airlink_auth_response.prototype=new s.message;s.messages.airlink_auth_response.prototype.pack=function(r){return s.message.prototype.pack.call(this,r,this.crc_extra,b.jspack.Pack(this.format,[this.resp_type]))};s.map={150:{format:"<fiiffffffhhh",type:s.messages.sensor_offsets,order_map:[9,10,11,0,1,2,3,4,5,6,7,8],crc_extra:134},151:{format:"<hhhBB",type:s.messages.set_mag_offsets,order_map:[3,4,0,1,2],crc_extra:219},152:{format:"<HHI",type:s.messages.meminfo,order_map:[0,1,2],crc_extra:208},153:{format:"<HHHHHH",type:s.messages.ap_adc,order_map:[0,1,2,3,4,5],crc_extra:188},154:{format:"<fHBBBBBBBBB",type:s.messages.digicam_configure,order_map:[2,3,4,1,5,6,7,8,9,10,0],crc_extra:84},155:{format:"<fBBBBbBBBB",type:s.messages.digicam_control,order_map:[1,2,3,4,5,6,7,8,9,0],crc_extra:22},156:{format:"<BBBBBB",type:s.messages.mount_configure,order_map:[0,1,2,3,4,5],crc_extra:19},157:{format:"<iiiBBB",type:s.messages.mount_control,order_map:[3,4,0,1,2,5],crc_extra:21},158:{format:"<iiiBBB",type:s.messages.mount_status,order_map:[3,4,0,1,2,5],crc_extra:134},160:{format:"<ffBBBB",type:s.messages.fence_point,order_map:[2,3,4,5,0,1],crc_extra:78},161:{format:"<BBB",type:s.messages.fence_fetch_point,order_map:[0,1,2],crc_extra:68},163:{format:"<fffffff",type:s.messages.ahrs,order_map:[0,1,2,3,4,5,6],crc_extra:127},164:{format:"<fffffffffii",type:s.messages.simstate,order_map:[0,1,2,3,4,5,6,7,8,9,10],crc_extra:154},165:{format:"<HB",type:s.messages.hwstatus,order_map:[0,1],crc_extra:21},166:{format:"<HHBBBBB",type:s.messages.radio,order_map:[2,3,4,5,6,0,1],crc_extra:21},167:{format:"<IIIIHBBBB",type:s.messages.limits_status,order_map:[5,0,1,2,3,4,6,7,8],crc_extra:144},168:{format:"<fff",type:s.messages.wind,order_map:[0,1,2],crc_extra:1},169:{format:"<BB16s",type:s.messages.data16,order_map:[0,1,2],crc_extra:234},170:{format:"<BB32s",type:s.messages.data32,order_map:[0,1,2],crc_extra:73},171:{format:"<BB64s",type:s.messages.data64,order_map:[0,1,2],crc_extra:181},172:{format:"<BB96s",type:s.messages.data96,order_map:[0,1,2],crc_extra:22},173:{format:"<ff",type:s.messages.rangefinder,order_map:[0,1],crc_extra:83},174:{format:"<ffffffffffff",type:s.messages.airspeed_autocal,order_map:[0,1,2,3,4,5,6,7,8,9,10,11],crc_extra:167},175:{format:"<iihhHBBBBB",type:s.messages.rally_point,order_map:[5,6,7,8,0,1,2,3,4,9],crc_extra:138},176:{format:"<BBB",type:s.messages.rally_fetch_point,order_map:[0,1,2],crc_extra:234},177:{format:"<ffffHH",type:s.messages.compassmot_status,order_map:[4,0,5,1,2,3],crc_extra:240},178:{format:"<ffffii",type:s.messages.ahrs2,order_map:[0,1,2,3,4,5],crc_extra:47},179:{format:"<QffffHBBB",type:s.messages.camera_status,order_map:[0,6,7,5,8,1,2,3,4],crc_extra:189},180:{format:"<QiiffffffHBBBH",type:s.messages.camera_feedback,order_map:[0,10,11,9,1,2,3,4,5,6,7,8,12,13],crc_extra:52},181:{format:"<Hh",type:s.messages.battery2,order_map:[0,1],crc_extra:174},182:{format:"<ffffiiffff",type:s.messages.ahrs3,order_map:[0,1,2,3,4,5,6,7,8,9],crc_extra:229},183:{format:"<BB",type:s.messages.autopilot_version_request,order_map:[0,1],crc_extra:85},184:{format:"<IBB200s",type:s.messages.remote_log_data_block,order_map:[1,2,0,3],crc_extra:159},185:{format:"<IBBB",type:s.messages.remote_log_block_status,order_map:[1,2,0,3],crc_extra:186},186:{format:"<BBBBB24s",type:s.messages.led_control,order_map:[0,1,2,3,4,5],crc_extra:72},191:{format:"<fffBBBBB10s",type:s.messages.mag_cal_progress,order_map:[3,4,5,6,7,8,0,1,2],crc_extra:92},193:{format:"<fffffHf",type:s.messages.ekf_status_report,order_map:[5,0,1,2,3,4,6],crc_extra:71},194:{format:"<ffffffBff",type:s.messages.pid_tuning,order_map:[6,0,1,2,3,4,5,7,8],crc_extra:98},195:{format:"<iiiiiifffB",type:s.messages.deepstall,order_map:[0,1,2,3,4,5,6,7,8,9],crc_extra:120},200:{format:"<ffffffffffBB",type:s.messages.gimbal_report,order_map:[10,11,0,1,2,3,4,5,6,7,8,9],crc_extra:134},201:{format:"<fffBB",type:s.messages.gimbal_control,order_map:[3,4,0,1,2],crc_extra:205},214:{format:"<hhhBB",type:s.messages.gimbal_torque_cmd_report,order_map:[3,4,0,1,2],crc_extra:69},215:{format:"<BBB",type:s.messages.gopro_heartbeat,order_map:[0,1,2],crc_extra:101},216:{format:"<BBB",type:s.messages.gopro_get_request,order_map:[0,1,2],crc_extra:50},217:{format:"<BB4s",type:s.messages.gopro_get_response,order_map:[0,1,2],crc_extra:202},218:{format:"<BBB4s",type:s.messages.gopro_set_request,order_map:[0,1,2,3],crc_extra:17},219:{format:"<BB",type:s.messages.gopro_set_response,order_map:[0,1],crc_extra:162},226:{format:"<ff",type:s.messages.rpm,order_map:[0,1],crc_extra:207},11e3:{format:"<IBBBBB40sBBB",type:s.messages.device_op_read,order_map:[1,2,0,3,4,5,6,7,8,9],crc_extra:134},11001:{format:"<IBBB128sB",type:s.messages.device_op_read_reply,order_map:[0,1,2,3,4,5],crc_extra:15},11002:{format:"<IBBBBB40sBB128sB",type:s.messages.device_op_write,order_map:[1,2,0,3,4,5,6,7,8,9,10],crc_extra:234},11003:{format:"<IB",type:s.messages.device_op_write_reply,order_map:[0,1],crc_extra:64},11004:{format:"<IIBBBB220s",type:s.messages.secure_command,order_map:[2,3,0,1,4,5,6],crc_extra:11},11005:{format:"<IIBB220s",type:s.messages.secure_command_reply,order_map:[0,1,2,3,4],crc_extra:93},11010:{format:"<ffffffffffffB",type:s.messages.adap_tuning,order_map:[12,0,1,2,3,4,5,6,7,8,9,10,11],crc_extra:46},11011:{format:"<QQ3f3ff",type:s.messages.vision_position_delta,order_map:[0,1,2,3,4],crc_extra:106},11020:{format:"<Qff",type:s.messages.aoa_ssa,order_map:[0,1,2],crc_extra:205},11030:{format:"<4H4H4H4H4H4s",type:s.messages.esc_telemetry_1_to_4,order_map:[5,0,1,2,3,4],crc_extra:144},11031:{format:"<4H4H4H4H4H4s",type:s.messages.esc_telemetry_5_to_8,order_map:[5,0,1,2,3,4],crc_extra:133},11032:{format:"<4H4H4H4H4H4s",type:s.messages.esc_telemetry_9_to_12,order_map:[5,0,1,2,3,4],crc_extra:85},11033:{format:"<IfffBBBB16sB",type:s.messages.osd_param_config,order_map:[4,5,0,6,7,8,9,1,2,3],crc_extra:195},11034:{format:"<IB",type:s.messages.osd_param_config_reply,order_map:[0,1],crc_extra:79},11035:{format:"<IBBBB",type:s.messages.osd_param_show_config,order_map:[1,2,0,3,4],crc_extra:128},11036:{format:"<IfffB16sB",type:s.messages.osd_param_show_config_reply,order_map:[0,4,5,6,1,2,3],crc_extra:177},11037:{format:"<IfffffHBB",type:s.messages.obstacle_distance_3d,order_map:[0,7,8,6,1,2,3,4,5],crc_extra:130},11038:{format:"<IiiffffffBB",type:s.messages.water_depth,order_map:[0,9,10,1,2,3,4,5,6,7,8],crc_extra:47},11039:{format:"<hHHHB",type:s.messages.mcu_status,order_map:[4,0,1,2,3],crc_extra:142},11040:{format:"<4H4H4H4H4H4s",type:s.messages.esc_telemetry_13_to_16,order_map:[5,0,1,2,3,4],crc_extra:132},11041:{format:"<4H4H4H4H4H4s",type:s.messages.esc_telemetry_17_to_20,order_map:[5,0,1,2,3,4],crc_extra:208},11042:{format:"<4H4H4H4H4H4s",type:s.messages.esc_telemetry_21_to_24,order_map:[5,0,1,2,3,4],crc_extra:201},11043:{format:"<4H4H4H4H4H4s",type:s.messages.esc_telemetry_25_to_28,order_map:[5,0,1,2,3,4],crc_extra:193},11044:{format:"<4H4H4H4H4H4s",type:s.messages.esc_telemetry_29_to_32,order_map:[5,0,1,2,3,4],crc_extra:189},223:{format:"<QIffffiifHBBBBB",type:s.messages.command_int_stamped,order_map:[1,0,10,11,12,9,13,14,2,3,4,5,6,7,8],crc_extra:119},224:{format:"<QIfffffffHBBB",type:s.messages.command_long_stamped,order_map:[1,0,10,11,9,12,2,3,4,5,6,7,8],crc_extra:102},8002:{format:"<ffff",type:s.messages.sens_power,order_map:[0,1,2,3],crc_extra:218},8003:{format:"<QffffffHHHBBB",type:s.messages.sens_mppt,order_map:[0,1,2,7,10,3,4,8,11,5,6,9,12],crc_extra:231},8004:{format:"<QffffffffffffffffffffffBB",type:s.messages.aslctrl_data,order_map:[0,23,1,2,3,4,5,6,7,8,9,10,11,12,24,13,14,15,16,17,18,19,20,21,22],crc_extra:172},8005:{format:"<IffffffffBB",type:s.messages.aslctrl_debug,order_map:[0,9,10,1,2,3,4,5,6,7,8],crc_extra:251},8006:{format:"<fBB8s",type:s.messages.asluav_status,order_map:[1,2,3,0],crc_extra:97},8007:{format:"<Qffffff",type:s.messages.ekf_ext,order_map:[0,1,2,3,4,5,6],crc_extra:64},8008:{format:"<QffffffB",type:s.messages.asl_obctrl,order_map:[0,1,2,3,4,5,6,7],crc_extra:234},8009:{format:"<Qff",type:s.messages.sens_atmos,order_map:[0,1,2],crc_extra:144},8010:{format:"<QfIIHhHHHHHHHHB",type:s.messages.sens_batmon,order_map:[0,1,4,5,14,6,7,2,3,8,9,10,11,12,13],crc_extra:155},8011:{format:"<QQfffffffffffffffffffffBB",type:s.messages.fw_soaring_data,order_map:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],crc_extra:20},8012:{format:"<QHBBBBBB",type:s.messages.sensorpod_status,order_map:[0,2,3,4,5,6,7,1],crc_extra:54},8013:{format:"<QfffffffffBB",type:s.messages.sens_power_board,order_map:[0,10,11,1,2,3,4,5,6,7,8,9],crc_extra:222},8014:{format:"<QBBBBBB",type:s.messages.gsm_link_status,order_map:[0,1,2,3,4,5,6],crc_extra:200},8015:{format:"<QQHHBBBB",type:s.messages.satcom_link_status,order_map:[0,1,2,3,4,5,6,7],crc_extra:23},8016:{format:"<QffBB",type:s.messages.sensor_airflow_angles,order_map:[0,1,3,2,4],crc_extra:149},1:{format:"<IIIHHhHHHHHHb",type:s.messages.sys_status,order_map:[0,1,2,3,4,5,12,6,7,8,9,10,11],crc_extra:124},2:{format:"<QI",type:s.messages.system_time,order_map:[0,1],crc_extra:137},4:{format:"<QIBB",type:s.messages.ping,order_map:[0,1,2,3],crc_extra:237},5:{format:"<BBB25s",type:s.messages.change_operator_control,order_map:[0,1,2,3],crc_extra:217},6:{format:"<BBB",type:s.messages.change_operator_control_ack,order_map:[0,1,2],crc_extra:104},7:{format:"<32s",type:s.messages.auth_key,order_map:[0],crc_extra:119},11:{format:"<IBB",type:s.messages.set_mode,order_map:[1,2,0],crc_extra:89},20:{format:"<hBB16s",type:s.messages.param_request_read,order_map:[1,2,3,0],crc_extra:214},21:{format:"<BB",type:s.messages.param_request_list,order_map:[0,1],crc_extra:159},22:{format:"<fHH16sB",type:s.messages.param_value,order_map:[3,0,4,1,2],crc_extra:220},23:{format:"<fBB16sB",type:s.messages.param_set,order_map:[1,2,3,0,4],crc_extra:168},24:{format:"<QiiiHHHHBBiIIIIH",type:s.messages.gps_raw_int,order_map:[0,8,1,2,3,4,5,6,7,9,10,11,12,13,14,15],crc_extra:24},25:{format:"<B20s20s20s20s20s",type:s.messages.gps_status,order_map:[0,1,2,3,4,5],crc_extra:23},26:{format:"<Ihhhhhhhhhh",type:s.messages.scaled_imu,order_map:[0,1,2,3,4,5,6,7,8,9,10],crc_extra:170},27:{format:"<QhhhhhhhhhBh",type:s.messages.raw_imu,order_map:[0,1,2,3,4,5,6,7,8,9,10,11],crc_extra:144},28:{format:"<Qhhhh",type:s.messages.raw_pressure,order_map:[0,1,2,3,4],crc_extra:67},29:{format:"<Iffhh",type:s.messages.scaled_pressure,order_map:[0,1,2,3,4],crc_extra:115},30:{format:"<Iffffff",type:s.messages.attitude,order_map:[0,1,2,3,4,5,6],crc_extra:39},31:{format:"<Ifffffff4f",type:s.messages.attitude_quaternion,order_map:[0,1,2,3,4,5,6,7,8],crc_extra:246},32:{format:"<Iffffff",type:s.messages.local_position_ned,order_map:[0,1,2,3,4,5,6],crc_extra:185},33:{format:"<IiiiihhhH",type:s.messages.global_position_int,order_map:[0,1,2,3,4,5,6,7,8],crc_extra:104},34:{format:"<IhhhhhhhhBB",type:s.messages.rc_channels_scaled,order_map:[0,9,1,2,3,4,5,6,7,8,10],crc_extra:237},35:{format:"<IHHHHHHHHBB",type:s.messages.rc_channels_raw,order_map:[0,9,1,2,3,4,5,6,7,8,10],crc_extra:244},36:{format:"<IHHHHHHHHBHHHHHHHH",type:s.messages.servo_output_raw,order_map:[0,9,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,17],crc_extra:222},37:{format:"<hhBBB",type:s.messages.mission_request_partial_list,order_map:[2,3,0,1,4],crc_extra:212},38:{format:"<hhBBB",type:s.messages.mission_write_partial_list,order_map:[2,3,0,1,4],crc_extra:9},39:{format:"<fffffffHHBBBBBB",type:s.messages.mission_item,order_map:[9,10,7,11,8,12,13,0,1,2,3,4,5,6,14],crc_extra:254},40:{format:"<HBBB",type:s.messages.mission_request,order_map:[1,2,0,3],crc_extra:230},41:{format:"<HBB",type:s.messages.mission_set_current,order_map:[1,2,0],crc_extra:28},42:{format:"<HHBB",type:s.messages.mission_current,order_map:[0,1,2,3],crc_extra:28},43:{format:"<BBB",type:s.messages.mission_request_list,order_map:[0,1,2],crc_extra:132},44:{format:"<HBBB",type:s.messages.mission_count,order_map:[1,2,0,3],crc_extra:221},45:{format:"<BBB",type:s.messages.mission_clear_all,order_map:[0,1,2],crc_extra:232},46:{format:"<H",type:s.messages.mission_item_reached,order_map:[0],crc_extra:11},47:{format:"<BBBB",type:s.messages.mission_ack,order_map:[0,1,2,3],crc_extra:153},48:{format:"<iiiBQ",type:s.messages.set_gps_global_origin,order_map:[3,0,1,2,4],crc_extra:41},49:{format:"<iiiQ",type:s.messages.gps_global_origin,order_map:[0,1,2,3],crc_extra:39},50:{format:"<ffffhBB16sB",type:s.messages.param_map_rc,order_map:[5,6,7,4,8,0,1,2,3],crc_extra:78},51:{format:"<HBBB",type:s.messages.mission_request_int,order_map:[1,2,0,3],crc_extra:196},54:{format:"<ffffffBBB",type:s.messages.safety_set_allowed_area,order_map:[6,7,8,0,1,2,3,4,5],crc_extra:15},55:{format:"<ffffffB",type:s.messages.safety_allowed_area,order_map:[6,0,1,2,3,4,5],crc_extra:3},61:{format:"<Q4ffff9f",type:s.messages.attitude_quaternion_cov,order_map:[0,1,2,3,4,5],crc_extra:167},62:{format:"<fffffhhH",type:s.messages.nav_controller_output,order_map:[0,1,5,6,7,2,3,4],crc_extra:183},63:{format:"<Qiiiifff36fB",type:s.messages.global_position_int_cov,order_map:[0,9,1,2,3,4,5,6,7,8],crc_extra:119},64:{format:"<Qfffffffff45fB",type:s.messages.local_position_ned_cov,order_map:[0,11,1,2,3,4,5,6,7,8,9,10],crc_extra:191},65:{format:"<IHHHHHHHHHHHHHHHHHHBB",type:s.messages.rc_channels,order_map:[0,19,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20],crc_extra:118},66:{format:"<HBBBB",type:s.messages.request_data_stream,order_map:[1,2,3,0,4],crc_extra:148},67:{format:"<HBB",type:s.messages.data_stream,order_map:[1,0,2],crc_extra:21},69:{format:"<hhhhHBHBhhhhhhhh",type:s.messages.manual_control,order_map:[5,0,1,2,3,4,6,7,8,9,10,11,12,13,14,15],crc_extra:243},70:{format:"<HHHHHHHHBBHHHHHHHHHH",type:s.messages.rc_channels_override,order_map:[8,9,0,1,2,3,4,5,6,7,10,11,12,13,14,15,16,17,18,19],crc_extra:124},73:{format:"<ffffiifHHBBBBBB",type:s.messages.mission_item_int,order_map:[9,10,7,11,8,12,13,0,1,2,3,4,5,6,14],crc_extra:38},74:{format:"<ffffhH",type:s.messages.vfr_hud,order_map:[0,1,4,5,2,3],crc_extra:20},75:{format:"<ffffiifHBBBBB",type:s.messages.command_int,order_map:[8,9,10,7,11,12,0,1,2,3,4,5,6],crc_extra:158},76:{format:"<fffffffHBBB",type:s.messages.command_long,order_map:[8,9,7,10,0,1,2,3,4,5,6],crc_extra:152},77:{format:"<HBBiBB",type:s.messages.command_ack,order_map:[0,1,2,3,4,5],crc_extra:143},81:{format:"<IffffBB",type:s.messages.manual_setpoint,order_map:[0,1,2,3,4,5,6],crc_extra:106},82:{format:"<I4fffffBBB",type:s.messages.set_attitude_target,order_map:[0,6,7,8,1,2,3,4,5],crc_extra:49},83:{format:"<I4fffffB",type:s.messages.attitude_target,order_map:[0,6,1,2,3,4,5],crc_extra:22},84:{format:"<IfffffffffffHBBB",type:s.messages.set_position_target_local_ned,order_map:[0,13,14,15,12,1,2,3,4,5,6,7,8,9,10,11],crc_extra:143},85:{format:"<IfffffffffffHB",type:s.messages.position_target_local_ned,order_map:[0,13,12,1,2,3,4,5,6,7,8,9,10,11],crc_extra:140},86:{format:"<IiifffffffffHBBB",type:s.messages.set_position_target_global_int,order_map:[0,13,14,15,12,1,2,3,4,5,6,7,8,9,10,11],crc_extra:5},87:{format:"<IiifffffffffHB",type:s.messages.position_target_global_int,order_map:[0,13,12,1,2,3,4,5,6,7,8,9,10,11],crc_extra:150},89:{format:"<Iffffff",type:s.messages.local_position_ned_system_global_offset,order_map:[0,1,2,3,4,5,6],crc_extra:231},90:{format:"<Qffffffiiihhhhhh",type:s.messages.hil_state,order_map:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],crc_extra:183},91:{format:"<QffffffffBB",type:s.messages.hil_controls,order_map:[0,1,2,3,4,5,6,7,8,9,10],crc_extra:63},92:{format:"<QHHHHHHHHHHHHB",type:s.messages.hil_rc_inputs_raw,order_map:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],crc_extra:54},93:{format:"<QQ16fB",type:s.messages.hil_actuator_controls,order_map:[0,2,3,1],crc_extra:47},100:{format:"<QfffhhBBff",type:s.messages.optical_flow,order_map:[0,6,4,5,1,2,7,3,8,9],crc_extra:175},101:{format:"<Qffffff21fB",type:s.messages.global_vision_position_estimate,order_map:[0,1,2,3,4,5,6,7,8],crc_extra:102},102:{format:"<Qffffff21fB",type:s.messages.vision_position_estimate,order_map:[0,1,2,3,4,5,6,7,8],crc_extra:158},103:{format:"<Qfff9fB",type:s.messages.vision_speed_estimate,order_map:[0,1,2,3,4,5],crc_extra:208},104:{format:"<Qffffff21f",type:s.messages.vicon_position_estimate,order_map:[0,1,2,3,4,5,6,7],crc_extra:56},105:{format:"<QfffffffffffffHB",type:s.messages.highres_imu,order_map:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],crc_extra:93},106:{format:"<QIfffffIfhBB",type:s.messages.optical_flow_rad,order_map:[0,10,1,2,3,4,5,6,9,11,7,8],crc_extra:138},107:{format:"<QfffffffffffffIB",type:s.messages.hil_sensor,order_map:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],crc_extra:108},108:{format:"<fffffffffffffffffffffii",type:s.messages.sim_state,order_map:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],crc_extra:32},109:{format:"<HHBBBBB",type:s.messages.radio_status,order_map:[2,3,4,5,6,0,1],crc_extra:185},110:{format:"<BBB251s",type:s.messages.file_transfer_protocol,order_map:[0,1,2,3],crc_extra:84},111:{format:"<qq",type:s.messages.timesync,order_map:[0,1],crc_extra:34},112:{format:"<QI",type:s.messages.camera_trigger,order_map:[0,1],crc_extra:174},113:{format:"<QiiiHHHhhhHBBBH",type:s.messages.hil_gps,order_map:[0,11,1,2,3,4,5,6,7,8,9,10,12,13,14],crc_extra:124},114:{format:"<QIfffffIfhBB",type:s.messages.hil_optical_flow,order_map:[0,10,1,2,3,4,5,6,9,11,7,8],crc_extra:237},115:{format:"<Q4ffffiiihhhHHhhh",type:s.messages.hil_state_quaternion,order_map:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],crc_extra:4},116:{format:"<Ihhhhhhhhhh",type:s.messages.scaled_imu2,order_map:[0,1,2,3,4,5,6,7,8,9,10],crc_extra:76},117:{format:"<HHBB",type:s.messages.log_request_list,order_map:[2,3,0,1],crc_extra:128},118:{format:"<IIHHH",type:s.messages.log_entry,order_map:[2,3,4,0,1],crc_extra:56},119:{format:"<IIHBB",type:s.messages.log_request_data,order_map:[3,4,2,0,1],crc_extra:116},120:{format:"<IHB90s",type:s.messages.log_data,order_map:[1,0,2,3],crc_extra:134},121:{format:"<BB",type:s.messages.log_erase,order_map:[0,1],crc_extra:237},122:{format:"<BB",type:s.messages.log_request_end,order_map:[0,1],crc_extra:203},123:{format:"<BBB110s",type:s.messages.gps_inject_data,order_map:[0,1,2,3],crc_extra:250},124:{format:"<QiiiIHHHHBBBHiIIII",type:s.messages.gps2_raw,order_map:[0,9,1,2,3,5,6,7,8,10,11,4,12,13,14,15,16,17],crc_extra:87},125:{format:"<HHH",type:s.messages.power_status,order_map:[0,1,2],crc_extra:203},126:{format:"<IHBBB70s",type:s.messages.serial_control,order_map:[2,3,1,0,4,5],crc_extra:220},127:{format:"<IIiiiIiHBBBBB",type:s.messages.gps_rtk,order_map:[0,8,7,1,9,10,11,12,2,3,4,5,6],crc_extra:25},128:{format:"<IIiiiIiHBBBBB",type:s.messages.gps2_rtk,order_map:[0,8,7,1,9,10,11,12,2,3,4,5,6],crc_extra:226},129:{format:"<Ihhhhhhhhhh",type:s.messages.scaled_imu3,order_map:[0,1,2,3,4,5,6,7,8,9,10],crc_extra:46},130:{format:"<IHHHBBB",type:s.messages.data_transmission_handshake,order_map:[4,0,1,2,3,5,6],crc_extra:29},131:{format:"<H253s",type:s.messages.encapsulated_data,order_map:[0,1],crc_extra:223},132:{format:"<IHHHBBBBff4fB",type:s.messages.distance_sensor,order_map:[0,1,2,3,4,5,6,7,8,9,10,11],crc_extra:85},133:{format:"<QiiH",type:s.messages.terrain_request,order_map:[1,2,3,0],crc_extra:6},134:{format:"<iiH16hB",type:s.messages.terrain_data,order_map:[0,1,2,4,3],crc_extra:229},135:{format:"<ii",type:s.messages.terrain_check,order_map:[0,1],crc_extra:203},136:{format:"<iiffHHH",type:s.messages.terrain_report,order_map:[0,1,4,2,3,5,6],crc_extra:1},137:{format:"<Iffhh",type:s.messages.scaled_pressure2,order_map:[0,1,2,3,4],crc_extra:195},138:{format:"<Q4ffff21f",type:s.messages.att_pos_mocap,order_map:[0,1,2,3,4,5],crc_extra:109},139:{format:"<Q8fBBB",type:s.messages.set_actuator_control_target,order_map:[0,2,3,4,1],crc_extra:168},140:{format:"<Q8fB",type:s.messages.actuator_control_target,order_map:[0,2,1],crc_extra:181},141:{format:"<Qffffff",type:s.messages.altitude,order_map:[0,1,2,3,4,5,6],crc_extra:47},142:{format:"<BB120sB120s",type:s.messages.resource_request,order_map:[0,1,2,3,4],crc_extra:72},143:{format:"<Iffhh",type:s.messages.scaled_pressure3,order_map:[0,1,2,3,4],crc_extra:131},144:{format:"<QQiif3f3f4f3f3fB",type:s.messages.follow_target,order_map:[0,10,2,3,4,5,6,7,8,9,1],crc_extra:127},146:{format:"<Qffffffffff3f3f4ffff",type:s.messages.control_system_state,order_map:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],crc_extra:103},147:{format:"<iih10HhBBBbiB4HBI",type:s.messages.battery_status,order_map:[5,6,7,2,3,4,0,1,8,9,10,11,12,13],crc_extra:154},148:{format:"<QQIIIIHH8s8s8s18s",type:s.messages.autopilot_version,order_map:[0,2,3,4,5,8,9,10,6,7,1,11],crc_extra:178},149:{format:"<QfffffBBfff4fBB",type:s.messages.landing_target,order_map:[0,6,7,1,2,3,4,5,8,9,10,11,12,13],crc_extra:200},162:{format:"<IHBBB",type:s.messages.fence_status,order_map:[2,1,3,0,4],crc_extra:189},192:{format:"<ffffffffffBBBBfBBf",type:s.messages.mag_cal_report,order_map:[10,11,12,13,0,1,2,3,4,5,6,7,8,9,14,15,16,17],crc_extra:36},225:{format:"<ffffffffffffffffBff",type:s.messages.efi_status,order_map:[16,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18],crc_extra:208},230:{format:"<QffffffffH",type:s.messages.estimator_status,order_map:[0,9,1,2,3,4,5,6,7,8],crc_extra:163},231:{format:"<Qffffffff",type:s.messages.wind_cov,order_map:[0,1,2,3,4,5,6,7,8],crc_extra:105},232:{format:"<QIiifffffffffHHBBBH",type:s.messages.gps_input,order_map:[0,15,13,1,14,16,2,3,4,5,6,7,8,9,10,11,12,17,18],crc_extra:151},233:{format:"<BB180s",type:s.messages.gps_rtcm_data,order_map:[0,1,2],crc_extra:35},234:{format:"<IiihhHhhhHBBbBBBbBBBbbBB",type:s.messages.high_latency,order_map:[10,0,11,3,4,5,12,6,1,2,7,8,13,14,15,16,17,18,19,20,21,22,23,9],crc_extra:150},235:{format:"<IiiHhhHHHBBBBBBBBBBBBbbbbbb",type:s.messages.high_latency2,order_map:[0,9,10,3,1,2,4,5,11,12,6,13,14,15,16,17,18,19,20,21,22,23,7,8,24,25,26],crc_extra:179},241:{format:"<QfffIII",type:s.messages.vibration,order_map:[0,1,2,3,4,5,6],crc_extra:90},242:{format:"<iiifff4ffffQ",type:s.messages.home_position,order_map:[0,1,2,3,4,5,6,7,8,9,10],crc_extra:104},243:{format:"<iiifff4ffffBQ",type:s.messages.set_home_position,order_map:[10,0,1,2,3,4,5,6,7,8,9,11],crc_extra:85},244:{format:"<iH",type:s.messages.message_interval,order_map:[1,0],crc_extra:95},245:{format:"<BB",type:s.messages.extended_sys_state,order_map:[0,1],crc_extra:130},246:{format:"<IiiiHHhHHB9sBB",type:s.messages.adsb_vehicle,order_map:[0,1,2,9,3,4,5,6,10,11,12,7,8],crc_extra:184},247:{format:"<IfffBBB",type:s.messages.collision,order_map:[4,0,5,6,1,2,3],crc_extra:81},248:{format:"<HBBB249s",type:s.messages.v2_extension,order_map:[1,2,3,0,4],crc_extra:8},249:{format:"<HBB32s",type:s.messages.memory_vect,order_map:[0,1,2,3],crc_extra:204},250:{format:"<Qfff10s",type:s.messages.debug_vect,order_map:[4,0,1,2,3],crc_extra:49},251:{format:"<If10s",type:s.messages.named_value_float,order_map:[0,2,1],crc_extra:170},252:{format:"<Ii10s",type:s.messages.named_value_int,order_map:[0,2,1],crc_extra:44},253:{format:"<B50sHB",type:s.messages.statustext,order_map:[0,1,2,3],crc_extra:83},254:{format:"<IfB",type:s.messages.debug,order_map:[0,2,1],crc_extra:46},256:{format:"<QBB32s",type:s.messages.setup_signing,order_map:[1,2,3,0],crc_extra:71},257:{format:"<IIB",type:s.messages.button_change,order_map:[0,1,2],crc_extra:131},258:{format:"<BB30s200s",type:s.messages.play_tune,order_map:[0,1,2,3],crc_extra:187},259:{format:"<IIfffIHHH32s32sB140sB",type:s.messages.camera_information,order_map:[0,9,10,1,2,3,4,6,7,11,5,8,12,13],crc_extra:92},260:{format:"<IBff",type:s.messages.camera_settings,order_map:[0,1,2,3],crc_extra:146},261:{format:"<IfffffBBBB32s",type:s.messages.storage_information,order_map:[0,6,7,8,1,2,3,4,5,9,10],crc_extra:179},262:{format:"<IfIfBBi",type:s.messages.camera_capture_status,order_map:[0,4,5,1,2,3,6],crc_extra:12},263:{format:"<QIiiii4fiBb205s",type:s.messages.camera_image_captured,order_map:[1,0,8,2,3,4,5,6,7,9,10],crc_extra:133},264:{format:"<QQQI",type:s.messages.flight_information,order_map:[3,0,1,2],crc_extra:49},265:{format:"<Iffff",type:s.messages.mount_orientation,order_map:[0,1,2,3,4],crc_extra:26},266:{format:"<HBBBB249s",type:s.messages.logging_data,order_map:[1,2,0,3,4,5],crc_extra:193},267:{format:"<HBBBB249s",type:s.messages.logging_data_acked,order_map:[1,2,0,3,4,5],crc_extra:35},268:{format:"<HBB",type:s.messages.logging_ack,order_map:[1,2,0],crc_extra:14},269:{format:"<fIHHHHHBBB32s160s",type:s.messages.video_stream_information,order_map:[7,8,9,2,0,3,4,1,5,6,10,11],crc_extra:109},270:{format:"<fIHHHHHB",type:s.messages.video_stream_status,order_map:[7,2,0,3,4,1,5,6],crc_extra:59},271:{format:"<Iiiiiii4fff",type:s.messages.camera_fov_status,order_map:[0,1,2,3,4,5,6,7,8,9],crc_extra:22},275:{format:"<fffffffBBB",type:s.messages.camera_tracking_image_status,order_map:[7,8,9,0,1,2,3,4,5,6],crc_extra:126},276:{format:"<iiffffffffffB",type:s.messages.camera_tracking_geo_status,order_map:[12,0,1,2,3,4,5,6,7,8,9,10,11],crc_extra:18},280:{format:"<IIffffffB",type:s.messages.gimbal_manager_information,order_map:[0,1,8,2,3,4,5,6,7],crc_extra:70},281:{format:"<IIBBBBB",type:s.messages.gimbal_manager_status,order_map:[0,1,2,3,4,5,6],crc_extra:48},282:{format:"<I4ffffBBB",type:s.messages.gimbal_manager_set_attitude,order_map:[5,6,0,7,1,2,3,4],crc_extra:123},283:{format:"<QIIIffffffHH32s32s32sB",type:s.messages.gimbal_device_information,order_map:[1,12,13,14,2,3,0,10,11,4,5,6,7,8,9,15],crc_extra:74},284:{format:"<4ffffHBB",type:s.messages.gimbal_device_set_attitude,order_map:[5,6,4,0,1,2,3],crc_extra:99},285:{format:"<I4ffffIHBBffB",type:s.messages.gimbal_device_attitude_status,order_map:[7,8,0,6,1,2,3,4,5,9,10,11],crc_extra:137},286:{format:"<Q4fIfffIfHBBBf",type:s.messages.autopilot_state_for_gimbal_device,order_map:[9,10,0,1,2,3,4,5,6,7,8,11,12],crc_extra:210},287:{format:"<IffffBBB",type:s.messages.gimbal_manager_set_pitchyaw,order_map:[5,6,0,7,1,2,3,4],crc_extra:1},288:{format:"<IffffBBB",type:s.messages.gimbal_manager_set_manual_control,order_map:[5,6,0,7,1,2,3,4],crc_extra:20},299:{format:"<32s64s",type:s.messages.wifi_config_ap,order_map:[0,1],crc_extra:19},301:{format:"<IiiHHHHHHHbBBBB7s20s",type:s.messages.ais_vessel,order_map:[0,1,2,3,4,5,10,11,12,6,7,13,14,15,16,8,9],crc_extra:243},310:{format:"<QIHBBB",type:s.messages.uavcan_node_status,order_map:[0,1,3,4,5,2],crc_extra:28},311:{format:"<QII80sBB16sBB",type:s.messages.uavcan_node_info,order_map:[0,1,3,4,5,6,7,8,2],crc_extra:95},320:{format:"<hBB16s",type:s.messages.param_ext_request_read,order_map:[1,2,3,0],crc_extra:243},321:{format:"<BB",type:s.messages.param_ext_request_list,order_map:[0,1],crc_extra:88},322:{format:"<HH16s128sB",type:s.messages.param_ext_value,order_map:[2,3,4,0,1],crc_extra:243},323:{format:"<BB16s128sB",type:s.messages.param_ext_set,order_map:[0,1,2,3,4],crc_extra:78},324:{format:"<16s128sBB",type:s.messages.param_ext_ack,order_map:[0,1,2,3],crc_extra:132},330:{format:"<Q72HHHBBffB",type:s.messages.obstacle_distance,order_map:[0,4,1,5,2,3,6,7,8],crc_extra:23},331:{format:"<Qfff4fffffff21f21fBBBBb",type:s.messages.odometry,order_map:[0,13,14,1,2,3,4,5,6,7,8,9,10,11,12,15,16,17],crc_extra:91},335:{format:"<QQHHBBBB",type:s.messages.isbd_link_status,order_map:[0,1,2,3,4,5,6,7],crc_extra:225},339:{format:"<fB",type:s.messages.raw_rpm,order_map:[1,0],crc_extra:199},340:{format:"<QiiiiiiihhhHHHH18sBB",type:s.messages.utm_global_position,order_map:[0,15,1,2,3,4,8,9,10,11,12,13,5,6,7,14,16,17],crc_extra:99},350:{format:"<QH10s58f",type:s.messages.debug_float_array,order_map:[0,2,1,3],crc_extra:232},370:{format:"<iiHHHHHBBB16s50sHBII11s",type:s.messages.smart_battery_info,order_map:[7,8,9,0,1,2,10,11,3,4,5,6,12,13,14,15,16],crc_extra:75},373:{format:"<QfffffIiHhh",type:s.messages.generator_status,order_map:[0,8,1,2,3,4,9,5,10,6,7],crc_extra:117},375:{format:"<QI32f",type:s.messages.actuator_output_status,order_map:[0,1,2],crc_extra:251},376:{format:"<IHH",type:s.messages.relay_status,order_map:[0,1,2],crc_extra:199},385:{format:"<HBBB128s",type:s.messages.tunnel,order_map:[1,2,0,3,4],crc_extra:147},386:{format:"<IBBBB8s",type:s.messages.can_frame,order_map:[1,2,3,4,0,5],crc_extra:132},387:{format:"<IBBBB64s",type:s.messages.canfd_frame,order_map:[1,2,3,4,0,5],crc_extra:4},388:{format:"<16HBBBBB",type:s.messages.can_filter_modify,order_map:[1,2,3,4,5,0],crc_extra:8},9e3:{format:"<Q16dB",type:s.messages.wheel_distance,order_map:[0,2,1],crc_extra:113},9005:{format:"<QfffffIh",type:s.messages.winch_status,order_map:[0,1,2,3,4,5,7,6],crc_extra:117},12900:{format:"<BB20sBB20s",type:s.messages.open_drone_id_basic_id,order_map:[0,1,2,3,4,5],crc_extra:114},12901:{format:"<iiffffHHhBB20sBBBBBBB",type:s.messages.open_drone_id_location,order_map:[9,10,11,12,6,7,8,0,1,2,3,13,4,14,15,16,17,5,18],crc_extra:254},12902:{format:"<IBB20sBBBB23s",type:s.messages.open_drone_id_authentication,order_map:[1,2,3,4,5,6,7,0,8],crc_extra:140},12903:{format:"<BB20sB23s",type:s.messages.open_drone_id_self_id,order_map:[0,1,2,3,4],crc_extra:249},12904:{format:"<iifffIHHBB20sBBBB",type:s.messages.open_drone_id_system,order_map:[8,9,10,11,12,0,1,6,7,2,3,13,14,4,5],crc_extra:77},12905:{format:"<BB20sB20s",type:s.messages.open_drone_id_operator_id,order_map:[0,1,2,3,4],crc_extra:49},12918:{format:"<B50s",type:s.messages.open_drone_id_arm_status,order_map:[0,1],crc_extra:139},12915:{format:"<BB20sBB225s",type:s.messages.open_drone_id_message_pack,order_map:[0,1,2,3,4,5],crc_extra:94},12919:{format:"<iifIBB",type:s.messages.open_drone_id_system_update,order_map:[4,5,0,1,2,3],crc_extra:7},12920:{format:"<hHB",type:s.messages.hygrometer_sensor,order_map:[2,0,1],crc_extra:20},53:{format:"<IB",type:s.messages.mission_checksum,order_map:[1,0],crc_extra:3},295:{format:"<ffhBB",type:s.messages.airspeed,order_map:[3,0,2,1,4],crc_extra:234},420:{format:"<IHBBB32h",type:s.messages.radio_rc_channels,order_map:[2,3,0,1,4,5],crc_extra:20},42e3:{format:"<B",type:s.messages.icarous_heartbeat,order_map:[0],crc_extra:227},42001:{format:"<ffffffffffbBBBBB",type:s.messages.icarous_kinematic_bands,order_map:[10,11,0,1,12,2,3,13,4,5,14,6,7,15,8,9],crc_extra:239},0:{format:"<IBBBBB",type:s.messages.heartbeat,order_map:[1,2,3,0,4,5],crc_extra:50},17150:{format:"<4I4HB4s4s",type:s.messages.array_test_0,order_map:[2,3,4,1,0],crc_extra:26},17151:{format:"<4I",type:s.messages.array_test_1,order_map:[0],crc_extra:72},17153:{format:"<4IB",type:s.messages.array_test_3,order_map:[1,0],crc_extra:19},17154:{format:"<4IB",type:s.messages.array_test_4,order_map:[0,1],crc_extra:89},17155:{format:"<5s5s",type:s.messages.array_test_5,order_map:[0,1],crc_extra:27},17156:{format:"<2dI2I2i2fH2H2hB2s2s32s",type:s.messages.array_test_6,order_map:[8,5,1,2,3,6,7,9,10,11,0,4],crc_extra:14},17157:{format:"<2d2f2I2i2H2h2s2s32s",type:s.messages.array_test_7,order_map:[0,1,2,3,4,5,6,7,8],crc_extra:187},17158:{format:"<2dI2H",type:s.messages.array_test_8,order_map:[1,0,2],crc_extra:106},17e3:{format:"<Qqd3Q3q3dIif3I3i3fHh3H3hc10sBb3s3s",type:s.messages.test_types,order_map:[16,17,18,12,6,0,19,13,7,1,8,2,20,14,9,3,21,15,10,4,11,5],crc_extra:103},220:{format:"<Qffffff",type:s.messages.nav_filter_bias,order_map:[0,1,2,3,4,5,6],crc_extra:34},221:{format:"<3H3H3H2H5H5H",type:s.messages.radio_calibration,order_map:[0,1,2,3,4,5],crc_extra:71},222:{format:"<BBB",type:s.messages.ualberta_sys_status,order_map:[0,1,2],crc_extra:15},10001:{format:"<IH9sBBBBB",type:s.messages.uavionix_adsb_out_cfg,order_map:[0,2,3,4,5,6,1,7],crc_extra:209},10002:{format:"<IiiiiIHHhhhHHBBB",type:s.messages.uavionix_adsb_out_dynamic,order_map:[0,1,2,3,13,14,4,5,6,7,8,9,10,15,11,12],crc_extra:186},10003:{format:"<B",type:s.messages.uavionix_adsb_transceiver_health_report,order_map:[0],crc_extra:4},10004:{format:"<9s",type:s.messages.uavionix_adsb_out_cfg_registration,order_map:[0],crc_extra:133},10005:{format:"<9s",type:s.messages.uavionix_adsb_out_cfg_flightid,order_map:[0],crc_extra:103},10006:{format:"<I",type:s.messages.uavionix_adsb_get,order_map:[0],crc_extra:193},10007:{format:"<iHBB8sB",type:s.messages.uavionix_adsb_out_control,order_map:[2,0,1,3,4,5],crc_extra:71},10008:{format:"<HBBBB8s",type:s.messages.uavionix_adsb_out_status,order_map:[1,0,2,3,4,5],crc_extra:240},10151:{format:"<ffffffIiffffffffffffHHB",type:s.messages.loweheiser_gov_efi,order_map:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,22,20,21],crc_extra:195},60001:{format:"<I4fffffHHBB",type:s.messages.storm32_gimbal_device_status,order_map:[8,9,0,6,1,2,3,4,5,7],crc_extra:186},60002:{format:"<4ffffHBB",type:s.messages.storm32_gimbal_device_control,order_map:[5,6,4,0,1,2,3],crc_extra:69},60010:{format:"<IIffffffB",type:s.messages.storm32_gimbal_manager_information,order_map:[8,0,1,2,3,4,5,6,7],crc_extra:208},60011:{format:"<HHBBB",type:s.messages.storm32_gimbal_manager_status,order_map:[2,3,0,1,4],crc_extra:183},60012:{format:"<4ffffHHBBBB",type:s.messages.storm32_gimbal_manager_control,order_map:[6,7,8,9,4,5,0,1,2,3],crc_extra:99},60013:{format:"<ffffHHBBBB",type:s.messages.storm32_gimbal_manager_control_pitchyaw,order_map:[6,7,8,9,4,5,0,1,2,3],crc_extra:129},60014:{format:"<fBBBB",type:s.messages.storm32_gimbal_manager_correct_roll,order_map:[1,2,3,4,0],crc_extra:134},60015:{format:"<BBBB8sBB8s",type:s.messages.storm32_gimbal_manager_profile,order_map:[0,1,2,3,4,5,6,7],crc_extra:78},60020:{format:"<HH",type:s.messages.qshot_status,order_map:[0,1],crc_extra:202},60025:{format:"<IIBB",type:s.messages.component_prearm_status,order_map:[2,3,0,1],crc_extra:20},60050:{format:"<IIIBB",type:s.messages.avss_prs_sys_status,order_map:[0,1,2,3,4],crc_extra:220},60051:{format:"<Iiiiff",type:s.messages.avss_drone_position,order_map:[0,1,2,3,4,5],crc_extra:245},60052:{format:"<Iffffffffff",type:s.messages.avss_drone_imu,order_map:[0,1,2,3,4,5,6,7,8,9,10],crc_extra:101},60053:{format:"<IBB",type:s.messages.avss_drone_operation_mode,order_map:[0,1,2],crc_extra:45},50001:{format:"<32s",type:s.messages.cubepilot_raw_rc,order_map:[0],crc_extra:246},50002:{format:"<fIHHHBB230s",type:s.messages.herelink_video_stream_information,order_map:[5,6,0,2,3,1,4,7],crc_extra:181},50003:{format:"<IIIhhhB",type:s.messages.herelink_telem,order_map:[6,3,0,1,2,4,5],crc_extra:62},50004:{format:"<IIBB",type:s.messages.cubepilot_firmware_update_start,order_map:[2,3,0,1],crc_extra:240},50005:{format:"<IBB",type:s.messages.cubepilot_firmware_update_resp,order_map:[1,2,0],crc_extra:152},52e3:{format:"<50s50s",type:s.messages.airlink_auth,order_map:[0,1],crc_extra:13},52001:{format:"<B",type:s.messages.airlink_auth_response,order_map:[0],crc_extra:239}};s.messages.bad_data=function(r,t){this.id=s.MAVLINK_MSG_ID_BAD_DATA,this.data=r,this.reason=t,this.msgbuf=r};var Ws=function(r,t,e){this.logger=r,this.seq=0,this.buf=new Uint8Array([]),this.bufInError=new Uint8Array([]),this.srcSystem=typeof t>"u"?0:t,this.srcComponent=typeof e>"u"?0:e,this.have_prefix_error=!1,this.protocol_marker=253,this.expected_length=s.HEADER_LEN,this.little_endian=!0,this.crc_extra=!0,this.sort_fields=!0,this.total_packets_sent=0,this.total_bytes_sent=0,this.total_packets_received=0,this.total_bytes_received=0,this.total_receive_errors=0,this.startup_time=Date.now()};Ws.prototype.log=function(r){this.logger&&this.logger.info(r)};Ws.prototype.log=function(r,t){this.logger&&this.logger.log(r,t)};Ws.prototype.send=function(r){const t=r.pack(this);this.file.write(t),this.seq=(this.seq+1)%256,this.total_packets_sent+=1,this.total_bytes_sent+=t.length};Ws.prototype.bytes_needed=function(){const r=this.expected_length-this.buf.length;return r<=0?1:r};Ws.prototype.pushBuffer=function(r){if(r){const t=new Uint8Array(this.buf.length+r.length);t.set(this.buf),t.set(r),this.buf=t,this.total_bytes_received+=r.length}};Ws.prototype.parsePrefix=function(){if(this.buf.length>=1&&this.buf[0]!==this.protocol_marker){const r=this.buf[0];throw this.bufInError=this.buf.slice(0,1),this.buf=this.buf.slice(1),this.expected_length=s.HEADER_LEN,new Error("Bad prefix ("+r+")")}};Ws.prototype.parseLength=function(){if(this.buf.length>=2){const r=b.jspack.Unpack("BB",this.buf.slice(0,2));this.expected_length=r[1]+s.HEADER_LEN+2}};Ws.prototype.parseChar=function(r){let t=null;try{this.pushBuffer(r),this.parsePrefix(),this.parseLength(),t=this.parsePayload()}catch(e){this.log("error",e.message),this.total_receive_errors+=1,t=new s.messages.bad_data(this.bufInError,e.message),this.bufInError=new Uint8Array([])}return t};Ws.prototype.parsePayload=function(){let r=null;if(this.expected_length>=8&&this.buf.length>=this.expected_length){var t=this.buf.slice(0,this.expected_length);this.buf=this.buf.slice(this.expected_length),this.expected_length=6;try{r=this.decode(t),this.total_packets_received+=1}catch(e){throw this.bufInError=t,e}}return r};Ws.prototype.parseBuffer=function(r){let t=this.parseChar(r);if(t===null)return null;let e=[t];for(;;){if(t=this.parseChar(),t===null)return e;e.push(t)}};Ws.prototype.decode=function(r){let t,e,i,n,a,o,c,_,l;try{_=b.jspack.Unpack("cBBBBBBHB",r.slice(0,10)),t=_[0],n=_[1],e=_[2],i=_[3],a=_[4],o=_[5],c=_[6];const x=(_[7]&255)<<8|_[7]>>8&255,I=_[8];l=x|I<<16}catch(x){throw new Error("Unable to unpack MAVLink header: "+x.message)}if(t.charCodeAt(0)!==this.protocol_marker)throw new Error("Invalid MAVLink prefix ("+t.charCodeAt(0)+")");if(n!==r.length-(s.HEADER_LEN+2))throw new Error("Invalid MAVLink message length.  Got "+(r.length-(s.HEADER_LEN+2))+" expected "+n+", msgId="+l);if(Cn.has(s.map,l)===!1)throw new Error("Unknown MAVLink message ID ("+l+")");let u=s.map[l];try{var p=b.jspack.Unpack("<H",r.slice(r.length-2))}catch(x){throw new Error("Unable to unpack MAVLink CRC: "+x.message)}let f=s.x25Crc(r.slice(1,r.length-2));if(f=s.x25Crc([u.crc_extra],f),p[0]!==f)throw new Error("invalid MAVLink CRC in msgID "+l+", got "+p+" checksum, calculated payload checksum as "+f);let d=b.jspack.CalcLength(u.format),A=r.slice(s.HEADER_LEN,r.length-2);if(d>A.length){let x=new Uint8Array(d-A.length),I=new Uint8Array(A.length+x.length);I.set(A),I.set(x,A.length),A=I}try{var E=b.jspack.Unpack(u.format,A)}catch(x){throw new Error("Unable to unpack MAVLink payload type="+u.type+" format="+u.format+" payloadLength="+A+": "+x.message)}let S={};const y=u.order_map.length,M=JSON.parse(JSON.stringify(E)).length;if(y===M)Cn.each(E,function(x,I,w){S[I]=E[u.order_map[I]]});else{let x=1,I=0,w=0,D={};for(let m=0,U=u.format.length-1;m<=U;++m){let q=u.format[x];if(isNaN(parseInt(q)))D[I]=E[w],w++;else{let Y="",F=[];for(;!isNaN(u.format[x]);)Y=Y+u.format[x],x++;for(let it=0,G=parseInt(Y);it<G;++it)F.push(E[it+I]),w++;Y=Y+u.format[x],q=Y,D[I]=F}I++,x++}Cn.each(E,function(m,U,q){S[U]=D[u.order_map[U]]})}try{const x=new u.type(S);return x.set.call(x,S),x.msgbuf=r,x.payload=A,x.crc=p,x.header=new s.header(l,n,a,o,c,e,i),this.log(x),x}catch(x){throw new Error("Unable to instantiate MAVLink message of type "+u.type+" : "+x.message)}};const vr=Math.PI/180,Ps=111319.9,Sa=new C(1,0,0),Ir=new C(0,1,0),Ic=new C(0,0,1),Kc=149.1652374,qc=-35.3632621,Im=0;function ip(r,t,e,i=1900,n=1100){return(e-n)/(i-n)*(r-t)+t}function xc(){return{X:0,Y:0,Alt:0}}const ki=r=>Ps*Math.cos(r*Math.PI/180);class Js{#t=0;#e=0;#c=0;#s=0;#i=0;#n=0;#r=void 0;#_=void 0;#a=!1;#l=!1;#h=!1;#o=!1;m_relativePosition=new C;#u=0;#f=0;#p=0;constructor(t,e,i=45,n=""){this.v_q1=new Se,this.v_q2=new Se,this.v_q3=new Se,this.m_helperThree=null,this.m_cameraThree=null,this.m_ownerObject=t,this.m_camera_tag=n,this.#d(e,i)}fn_scaleRelativePosition(t,e,i){this.#e*=t,this.#c*=e,this.#t*=i,this.#o&&(this.m_relativePosition.x*=t,this.m_relativePosition.y*=e,this.m_relativePosition.z*=i)}fn_setRotationIndependence(t,e,i,n,a){if(this.#a=t,t&&(i||e)){console.warn("WARNING: If p_all is true, other values are ignored.");return}this.#l=e,this.#h=i,this.#r=n,this.#_=a}#d(t,e){const i=new Ke(e,1,.1,1e3);i.userData.m_ownerObject=this,this.m_cameraThree=i,t&&(this.m_helperThree=new zS(i))}fn_setCameraHelperEnabled(t){this.m_helperThree&&(this.m_helperThree.visible=t)}fn_setCameraRelativePosition(t,e,i,n,a,o){this.#t=e,this.#e=t,this.#c=i,this.m_relativePosition.set(t,i,-e),this.fn_setCameraOrientation(n,a,o)}fn_setCameraDeltaOrientation(t,e,i){this.#o?(this.#p+=t,this.#f+=e,this.#u-=i):(this.#s+=t,this.#i+=e,this.#n+=i)}fn_setCameraOrientation(t,e,i){this.#o?(this.#p=t,this.#f=e,this.#u=i):(this.#s=t,this.#i=e,this.#n=i)}fn_setOrbitMode(t){this.#o=t}fn_applyCameraIMU(t,e){const i=this.m_cameraThree;if(!i||i.userData&&i.userData.manualControl===!0)return;let n=e;if(this.#a&&(n=new Se),this.#o){const a=this.m_relativePosition.clone(),o=new Se().setFromAxisAngle(Sa,this.#f),c=new Se().setFromAxisAngle(Ir,this.#u);a.applyQuaternion(o).applyQuaternion(c),a.applyQuaternion(n),i.position.copy(t).add(a),i.lookAt(t),i.rotateZ(this.#p)}else{i.setRotationFromQuaternion(n),i.position.set(t.x,t.y,t.z),i.translateOnAxis(Sa,this.#e),i.translateOnAxis(Ir,this.#c),i.translateOnAxis(Ic,-this.#t);let a=new Se;if(this.#a)a.identity();else if(this.#l||this.#h){const _=new kn(0,0,0,"YXZ");_.setFromQuaternion(n,"YXZ");const l=_.y;a.setFromAxisAngle(Ir,l)}else a.copy(n);let o=0,c=0;this.#a||(this.#r!=null&&(o-=ip(90*vr,-45*vr,this.m_ownerObject.m_servoValues[this.#r],1900,1100)),this.#_!=null&&(c+=ip(90*vr,-45*vr,this.m_ownerObject.m_servoValues[this.#_],1900,1100))),this.v_q1.setFromAxisAngle(Ir,this.#n),this.v_q2.setFromAxisAngle(Ic,this.#s+c),this.v_q3.setFromAxisAngle(Sa,this.#i+o),a.multiply(this.v_q1).multiply(this.v_q3).multiply(this.v_q2),i.setRotationFromQuaternion(a)}}}class tR{constructor(t,e={}){this.vehicle=t;const{offset:i,velocity:n,radius:a=.2,color:o=16733491}=e;this.offset=new C(i?.x||0,i?.y||0,i?.z||0),this.velocity=new C(n?.x||0,n?.y||0,n?.z||0),this.radius=a,this.color=o}throw(t){if(!this.vehicle||!t)return;const{x:e,y:i,z:n}=this.vehicle.fn_translateXYZ(),a=new C(e,i,n),o=new C(0,1,0),c=new C(0,0,1),_=new C(1,0,0),l=new Se().setFromAxisAngle(o,this.vehicle.m_yaw),u=new Se().setFromAxisAngle(c,this.vehicle.m_pitch),p=new Se().setFromAxisAngle(_,this.vehicle.m_roll),f=new Se().multiplyQuaternions(l,u).multiply(p),d=this.offset.clone().applyQuaternion(f),A=a.clone().add(d),E=t.v_droneVel?.[this.vehicle.sid]||{x:0,y:0,z:0},S=this.velocity.clone().applyQuaternion(f),y={vx:E.x+S.x,vy:E.y+S.y,vz:E.z+S.z};Rd.create(t,{x:A.x,y:A.y,z:A.z},this.radius,this.color,y)}}class eR{constructor(){this.vehicle=null,this.thrower=null}attach(t){return this.vehicle=t,this}setThrower(t){this.vehicle&&(this.thrower=new tR(this.vehicle,t||{}))}fn_trigger(t){this.thrower&&t&&this.thrower.throw(t)}}function sR(r,t,e,i,n){return(e-n)/(i-n)*(r-t)+t}class vh{m_cameras=[];m_children=[];m_positionZero_X=0;m_positionZero_Y=0;m_positionZero_Z=0;m_position_X=0;m_position_Y=0;m_position_Z=0;m_roll=0;m_pitch=0;m_yaw=0;m_servoValues=[0,0,0,0,0,0];m_startServoIndex=0;m_rcChannelsValues=[0,0,0,0,0,0];m_startRCChannelIndex=0;m_scale=new C(1,1,1);m_Mesh=null;m_type=Im;m_animateFunction=null;m_trigger=new eR;m_label_object=null;m_label_enabled=!0;constructor(t){this.m_name=t,this.v_q1=new Se,this.v_q2=new Se,this.v_q3=new Se,this.v_qt=new Se;const e=xc();this.fn_setZeroPosition(e.X,e.Y,e.Alt),this.m_trigger&&this.m_trigger.attach&&this.m_trigger.attach(this)}fn_addLabel(t){}fn_toggleLabel(){this.m_label_object&&(this.m_label_object.visible=!this.m_label_object.visible)}fn_changeScaleByDelta(t,e,i){const n=this.m_scale.clone();this.m_scale.x+=t,this.m_scale.y+=e,this.m_scale.z+=i,n.x===0&&(n.x=1),n.y===0&&(n.y=1),n.z===0&&(n.z=1),this.m_scale.x=Math.max(.1,this.m_scale.x),this.m_scale.y=Math.max(.1,this.m_scale.y),this.m_scale.z=Math.max(.1,this.m_scale.z),this.m_scale.x=Math.min(100,this.m_scale.x),this.m_scale.y=Math.min(100,this.m_scale.y),this.m_scale.z=Math.min(100,this.m_scale.z);const a=this.m_scale.x/n.x,o=this.m_scale.y/n.y,c=this.m_scale.z/n.z;for(let _=0;_<this.m_cameras.length;++_)this.m_cameras[_].fn_scaleRelativePosition(a,o,c)}fn_setZeroPosition(t,e,i){this.m_positionZero_X=t,this.m_positionZero_Y=e,this.m_positionZero_Z=i}fn_setPosition(t,e,i){this.m_Mesh!=null&&(this.m_position_X=t-this.m_positionZero_X,this.m_position_Y=i-this.m_positionZero_Z,this.m_position_Z=e-this.m_positionZero_Y)}fn_getPosition(){return[this.m_position_X,this.m_position_Y,this.m_position_Z]}fn_setRotation(t,e,i){this.m_roll=t,this.m_pitch=e,this.m_yaw=i}fn_setServosOutputs(t,e){this.m_startServoIndex=t,this.m_servoValues=e}fn_setRCChannels(t,e){this.m_startRCChannelIndex=t,this.m_rcChannelsValues=e}fn_castShadow(t){this.m_Mesh.castShadow=t}fn_getMesh(){return this.m_Mesh}fn_getCamera(){return this.m_cameras}fn_rotateAboutPoint(t,e,i,n,a){a=a===void 0?!1:a,a&&t.parent.localToWorld(t.position),t.position.sub(e),t.position.applyAxisAngle(i,n),t.position.add(e),a&&t.parent.worldToLocal(t.position),t.rotateOnAxis(i,n)}fn_attachedCamera(t,e,i){var n=new c_Camera(this,!0);n.fn_setRotationIndependence(t,e,i);var a=new c_Camera(this,!1,!0);a.fn_setRotationIndependence(!0),a.fn_setCameraRelativePosition(-1.5,0,1.5,0,-.5,0),this.m_cameras.push(n),this.m_cameras.push(a)}fn_addMesh(t){this.m_Mesh=t}fn_createCustom(t,e){this.m_Mesh=new ei,this.m_Mesh.add(t),this.fn_addLabel(),e?.(this.m_Mesh)}fn_apply_attached_units(t,e){const i=this.m_children.length;if(i!==0)for(let n=0;n<i;++n){let a=this.m_children[n];const o=a.motor;a.offset;const c=a.channel,_=sR(90*vr,0*vr,parseInt(this.m_servoValues[parseInt(c)]),1100,800);this.v_q1.setFromAxisAngle(Ir,0),this.v_q2.setFromAxisAngle(Ic,0),this.v_q3.setFromAxisAngle(Sa,_),this.v_qt.multiplyQuaternions(this.v_q1,this.v_q2).multiply(this.v_q3),o.setRotationFromQuaternion(this.v_qt)}}fn_translateXYZ(){return{x:this.m_position_X,y:this.m_position_Y,z:this.m_position_Z}}fn_applyIMU(){if(this.m_Mesh==null)return;this.v_q1.setFromAxisAngle(Ir,this.m_yaw),this.v_q2.setFromAxisAngle(Ic,this.m_pitch),this.v_q3.setFromAxisAngle(Sa,this.m_roll),this.v_qt.multiplyQuaternions(this.v_q1,this.v_q2).multiply(this.v_q3),this.m_Mesh.setRotationFromQuaternion(this.v_qt);const{x:t,y:e,z:i}=this.fn_translateXYZ();this.m_Mesh.position.set(t,e,i),this.m_Mesh.scale.x=this.m_scale.x,this.m_Mesh.scale.y=this.m_scale.y,this.m_Mesh.scale.z=this.m_scale.z;const n=this.m_cameras.length;for(let a=0;a<n;++a)this.m_cameras[a].fn_applyCameraIMU(this.m_Mesh.position,this.v_qt.clone());this.m_children.length>0&&this.fn_apply_attached_units(this.m_Mesh.position,this.v_qt.clone())}fn_setAnimate(t){this.m_animateFunction=t}fn_updateSimulationStep(){this.fn_applyIMU(),this.m_animateFunction!=null&&this.m_animateFunction()}}let iR=class extends vh{constructor(t){super(t),this.type=Im}};const nR=Object.freeze({EVENTS:Object.freeze(["EVT_VEHICLE_ADDED","EVT_VEHICLE_POS_CHANGED","EVT_VEHICLE_HOME_CHANGED"].reduce((r,t,e)=>(r[t]=`EVT_${e+1}`,r),{}))}),Rc=nR.EVENTS;class xr{constructor(){this.m_v_events=new Map}static getInstance(){return xr.instance||(xr.instance=new xr),xr.instance}fn_dispatch(t,e){const i=this.m_v_events.get(t);if(i)for(const[n,a]of i.entries())try{a(n,e)}catch(o){console.error(`Error in event handler for ${t}:`,o)}}fn_getIndex(t,e){const i=this.m_v_events.get(t);return i?Array.from(i.keys()).indexOf(e):-1}fn_subscribe(t,e,i){if(i==null){console.log("Cannot subscribe with a null callback.");return}this.m_v_events.has(t)||this.m_v_events.set(t,new Map);const n=this.m_v_events.get(t);n.has(e)||n.set(e,i)}fn_removeEvent(t){this.m_v_events.delete(t)}fn_unsubscribe(t,e){const i=this.m_v_events.get(t);i&&(i.delete(e),i.size===0&&this.m_v_events.delete(t))}fn_clear(){this.m_v_events.clear()}}const Oc=xr.getInstance(),np=0,ol=1,rp=2,rR=998,aR=999;class oR extends iR{constructor(t){super(t),this.sid=0;const e=new URLSearchParams(window.location.search);this.m_vtol=e.get("vtol")!=null,this.mGpsLocation={lat:0,lng:0,alt:0},this.m_homeLat=0,this.m_homeLng=0,this.m_homeAlt=0,this.m_zero_set=!1,this.world=null}fn_setBallThrower(t){this.m_trigger&&this.m_trigger.setThrower&&this.m_trigger.setThrower(t||{})}fn_addLabel(t){if(!this.m_Mesh){console.warn("Cannot add SID label: Mesh not initialized");return}const e=document.createElement("div");e.className="drone-sid-label",e.textContent=t,e.style.background="rgba(0, 0, 0, 0.59)",e.style.color="white",e.style.padding="2px 5px",e.style.borderRadius="3px",e.style.fontSize="10px",e.style.pointerEvents="none",this.m_label_object=new Od(e),this.m_label_object.position.set(0,.5,0),this.m_Mesh.add(this.m_label_object)}fn_updateLabel(t){this.m_label_object&&(this.m_label_object.element.textContent=t)}fn_setLatLngAlt(t,e,i,n){this.m_homeLat===0&&this.m_homeLng===0&&this.fn_setHomeLatLngAlt(t,e,i-n),this.mGpsLocation.lat=t/1e7,this.mGpsLocation.lng=e/1e7,this.mGpsLocation.alt=n/1e3,this.mGpsLocation.alt_abs=i/1e3}fn_setHomeLatLngAlt(t,e,i){this.m_homeLat=t/1e7,this.m_homeLng=e/1e7,this.m_homeAlt=i/1e3,Oc.fn_dispatch(Rc.EVT_VEHICLE_HOME_CHANGED,{lat:t,lng:e,alt:i,vehicle:this})}fn_getLocalPositionFromLatLng(){if(this.m_homeLat===0&&this.m_homeLng===0)return{x:0,y:0,z:0};let t=this.m_homeLat,e=this.m_homeLng,i=this.m_homeAlt;this.world&&this.world.m_scene_env.refLat!==null&&(t=this.world.m_scene_env.refLat,e=this.world.m_scene_env.refLng,i=this.world.m_scene_env.refAlt);const n=this.mGpsLocation.lat-t,a=this.mGpsLocation.lng-e,o=(this.mGpsLocation.lat+t)/2,c=n*Ps,_=a*ki(o),l=this.mGpsLocation.alt_abs-i/1e3;return{x:c,y:l,z:_}}fn_createVehicle(t,e,i,n,a){switch(this.m_label_text="droneX",t){case rp:this.m_type=rp,this.#t(e,n,a);break;case np:this.m_type=np,this.#e(e,n,a);break;case ol:this.m_type=ol,this.m_vtol!==!0?this.#s(e,n,a):this.#i(e,n,a);break;case ol:this.m_type=rR,this.fn_createCustom(i,n);break;default:this.m_type=aR,this.#n(e,n);break}}#t(t,e){const i=new Nn;let n=this;i.load("/models/vehicles/quadX.json",function(a){if(t===!0){let o=new Js(n,!0,90);o.fn_setRotationIndependence(!1,!0,!0),o.fn_setCameraRelativePosition(0,0,0,-1.5708,-1.5708,0);let c=new Js(n,!0,90);c.fn_setRotationIndependence(!1,!0,!0),c.fn_setCameraRelativePosition(.3,0,0,0,0,-1.5708);let _=new Js(n,!1,45,"followme");_.fn_setRotationIndependence(!0),_.fn_setOrbitMode(!0),_.fn_setCameraRelativePosition(-1.5,0,1.5,0,-.5,0),n.m_cameras.push(o),n.m_cameras.push(c),n.m_cameras.push(_)}n.fn_setBallThrower({offset:{x:0,y:0,z:0},velocity:{x:0,y:0,z:0},radius:.2,color:16733491}),n.fn_createCustom(a,function(o){e(o)})})}#e(t,e){const i=new Nn;let n=this;i.load("./models/vehicles/quadplus.json",function(a){if(t===!0){let o=new Js(n,!0);o.fn_setRotationIndependence(!0,!0),o.fn_setCameraRelativePosition(0,0,0,1.57,-1.57,-1.57);let c=new Js(n,!1,45,"followme");c.fn_setRotationIndependence(!0),c.fn_setOrbitMode(!0),c.fn_setCameraRelativePosition(-1.5,0,1.5,0,-.5,0),n.m_cameras.push(o),n.m_cameras.push(c)}n.fn_createCustom(a,e)})}#c(t,e){const i=new Nn;let n=this;i.load("./models/vehicles/drone4/drone-4.json",function(a){if(t===!0){let o=new Js(n,!0,90);o.fn_setRotationIndependence(!0,!0),o.fn_setCameraRelativePosition(-.1,-.3,.8,1.57,-1.57,-1.57);let c=new Js(n,!1,45,"followme");c.fn_setRotationIndependence(!0),c.fn_setOrbitMode(!0),c.fn_setCameraRelativePosition(-1.5,0,1.5,0,-.5,0),n.m_cameras.push(o),n.m_cameras.push(c)}n.fn_createCustom(a,function(o){e(o)})})}fn_translateXYZ(){return this.fn_getLocalPositionFromLatLng()}#s(t,e){const i=new Nn;let n=this;i.load("./models/vehicles/plane_model1.json",function(a){if(t===!0){let o=new Js(n,!0);o.fn_setRotationIndependence(!1,!0,!1,null,null),o.fn_setCameraRelativePosition(.4,0,0,0,0,0);let c=new Js(n,!1,45,"followme");c.fn_setRotationIndependence(!0),c.fn_setOrbitMode(!0),c.fn_setCameraRelativePosition(-1.5,0,1.5,0,-.5,0),n.m_cameras.push(o),n.m_cameras.push(c)}n.fn_setBallThrower({offset:{x:0,y:0,z:0},velocity:{x:0,y:0,z:0},radius:.2,color:5583871}),n.fn_createCustom(a,e)})}#i(t,e,i){const n=new Nn;let a=this;n.load("./models/vehicles/vtol3Motor/model.json",function(o){const c=[10,11,12],_=[1,2,3];for(let l=0;l<_.length;++l){let u="M"+(l+1).toString(),p=o.getObjectByName(u);if(p!=null){let f=new ei;f.add(p),i(f),o.add(f);let d=new C;p.geometry.computeBoundingBox();let A=p.geometry.boundingBox.getCenter(d).clone();p.geometry.center(),p.parent.translateX(A.x*p.scale.x),p.parent.translateY(A.y*p.scale.y),p.parent.translateZ(A.z*p.scale.z),p.angle_old=0,a.m_children.push({index:l,motor:p,channel:c[l]-9,offset:p.geometry.boundingSphere.center.clone()})}}if(t===!0){let l=new Js(a,!0);l.fn_setCameraRelativePosition(1,0,0,0,0,0);let u=new Js(a,!1,45,"followme");u.fn_setRotationIndependence(!0),u.fn_setOrbitMode(!0),u.fn_setCameraRelativePosition(-1.5,0,1.5,0,-.5,0),a.m_cameras.push(l),a.m_cameras.push(u)}a.fn_createCustom(o,function(l){e(o)})})}#n(t,e){var i=function(){ei.apply(this,arguments);let n=fn_drawDronePropeller(16252936,0,0,0,.3);n.m_tag=this,this.add(n)};i.prototype=Object.create(ei.prototype),i.prototype.constructor=i,this.m_Mesh=new i,e?.(this.m_Mesh)}fn_applyRCChannels(){}fn_applyServos(){}fn_updateSimulationStep(){this.fn_applyRCChannels(),this.fn_applyServos(),super.fn_updateSimulationStep()}}class cR{constructor(t){this.m_WebSocket=null,this.m_isConnected=!1,this.m_targetURL=t||"ws://127.0.0.1:8811",this.fn_onWebSocketOpened=()=>{},this.fn_onWebSocketError=()=>{},this.fn_onError=()=>{},this.fn_onPacketReceived=()=>{}}fn_init(t){this.m_WebSocket&&this.m_WebSocket.readyState!==WebSocket.CLOSED&&this.m_WebSocket.close(),this.m_WebSocket=new WebSocket(this.m_targetURL),this.m_WebSocket.binaryType="arraybuffer",this.m_WebSocket.onopen=e=>{this.m_isConnected=!0,t(),this.fn_onWebSocketOpened(e)},this.m_WebSocket.onmessage=e=>{this.fn_onPacketReceived(e.data)},this.m_WebSocket.onclose=e=>{console.log("Connection is closed..."),this.m_isConnected=!1,this.fn_onWebSocketError(e)},this.m_WebSocket.onerror=e=>{console.error("WebSocket Error:",e),this.m_isConnected=!1,this.fn_onWebSocketError(e)}}fn_send(t,e){try{this.m_WebSocket&&this.m_WebSocket.readyState===WebSocket.OPEN?this.m_WebSocket.send(t,{binary:e}):this.fn_onError(new Error("WebSocket is not open."))}catch(i){this.fn_onError(i)}}}class _R extends cR{constructor(t){super(t),this.mavlinkProcessor=new Ws(null,0,0)}fn_initWebsocket(t){const e=new Set,i=t;this.fn_onWebSocketOpened=()=>{console.log("Socket Connected")},this.fn_init(()=>{console.log("WebSocket connection established.")}),this.fn_onPacketReceived=n=>{if(!i||!(n instanceof ArrayBuffer))return;const a=this.mavlinkProcessor.parseBuffer(new Int8Array(n));for(const o of a){if(o.id===-1){console.log("BAD MAVLINK");continue}const c=o.header.srcSystem,_=i.v_drone[c];switch(o.header.msgId){case s.MAVLINK_MSG_ID_HEARTBEAT:if(_||e.has(c))return;this.handleHeartbeat(c,e,i,o);break;case s.MAVLINK_MSG_ID_RC_CHANNELS:_&&this.handleRCChannels(_,o);break;case s.MAVLINK_MSG_ID_SERVO_OUTPUT_RAW:_&&this.handleServosOutputs(_,o);break;case s.MAVLINK_MSG_ID_GLOBAL_POSITION_INT:_&&this.handleGlobalPosition(_,i,o);break;case s.MAVLINK_MSG_ID_ATTITUDE:_&&this.handleAttitude(_,o);break;case s.MAVLINK_MSG_ID_HOME_POSITION:_&&this.handleHomePosition(_,o);break}}}}handleHeartbeat(t,e,i,n){e.add(t);const a=new oR;a.sid=t,i.m_scene_env.m_default_vehicle_sid||(i.m_scene_env.m_default_vehicle_sid=t),a.world=i,a.fn_createVehicle(n.type,!0,null,()=>{a.fn_addLabel(`Drone:${t}`),a.fn_setPosition(0,0,0),a.fn_castShadow(!1),i.v_scene.add(a.fn_getMesh()),i.v_drone[t]=a,i.fn_registerCamerasOfObject(a),e.delete(t),a.fn_switchTriggerOn=()=>{a.m_trigger.fn_trigger(null,(o,c)=>{i.v_physicsWorld&&c&&(i.v_physicsWorld.addRigidBody(c),i.v_rigidBodies.push(o)),i.v_scene.add(o)})}},o=>{i.v_scene.add(o)})}handleRCChannels(t,e){const i=[e.chan9_raw,e.chan10_raw,e.chan11_raw,e.chan12_raw,e.chan13_raw,e.chan14_raw,e.chan15_raw,e.chan16_raw];t.fn_setRCChannels(9,i)}handleServosOutputs(t,e){const i=[e.servo9_raw,e.servo10_raw,e.servo11_raw,e.servo12_raw,e.servo13_raw,e.servo14_raw,e.servo15_raw,e.servo16_raw];t.fn_setServosOutputs(9,i)}handleGlobalPosition(t,e,i){t.fn_setLatLngAlt(i.lat,i.lon,i.alt,i.relative_alt),Oc.fn_dispatch(Rc.EVT_VEHICLE_POS_CHANGED,t)}handleAttitude(t,e){t.fn_setRotation(e.roll,e.pitch,-e.yaw)}handleHomePosition(t,e){t.fn_setHomeLatLngAlt(e.latitude,e.longitude,e.altitude)}}var qo,lR=new Uint8Array(16);function hR(){if(!qo&&(qo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!qo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qo(lR)}const uR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fR(r){return typeof r=="string"&&uR.test(r)}var os=[];for(var cl=0;cl<256;++cl)os.push((cl+256).toString(16).substr(1));function pR(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(os[r[t+0]]+os[r[t+1]]+os[r[t+2]]+os[r[t+3]]+"-"+os[r[t+4]]+os[r[t+5]]+"-"+os[r[t+6]]+os[r[t+7]]+"-"+os[r[t+8]]+os[r[t+9]]+"-"+os[r[t+10]]+os[r[t+11]]+os[r[t+12]]+os[r[t+13]]+os[r[t+14]]+os[r[t+15]]).toLowerCase();if(!fR(e))throw TypeError("Stringified UUID is invalid");return e}function ap(r,t,e){r=r||{};var i=r.random||(r.rng||hR)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,pR(i)}class Va{static load({url:t,position:e={},rotationZ:i=0,size:n={}}={}){const{x:a=0,y:o=0,z:c=0}=e,{length:_=4.5,width:l=1.8,height:u=1.4}=n;return new Promise((p,f)=>{new Nn().load(t,A=>{try{A.position.set(a,o,c),i&&A.rotateZ(i);const E=new Bs().setFromObject(A),S=new C;E.getSize(S);const y=S.x>0?_/S.x:1,M=S.y>0?u/S.y:1,x=S.z>0?l/S.z:1;A.scale.multiply(new C(y,M,x)),p(A)}catch(E){f(E)}},void 0,A=>f(A))})}static create_car(t,e,i){return Va.load({url:"../../models/vehicles/car1.json",position:{x:t,y:e,z:i},rotationZ:0,size:{length:4.5,width:1.8,height:1.4}})}static create_plane(t,e,i){return Va.load({url:"../../models/vehicles/plane_model1.json",position:{x:t,y:e,z:i},rotationZ:0,size:{length:4.5,width:1.8,height:1.4}})}}class dR{static create(t,{url:e,position:i={},width:n=null,height:a=null,depth:o=null,rotationY:c=0,tag:_=null,onLoaded:l=null}={}){const{x:u=0,y:p=0,z:f=0}=i;new Nn().load(e,A=>{if(A.position.set(u,p,f),c&&A.rotateY(c),n!=null||a!=null||o!=null){const E=new Bs().setFromObject(A),S=new C;E.getSize(S);const y=n!=null&&S.x>0?n/S.x:1,M=a!=null&&S.y>0?a/S.y:1;let x;o!=null?x=S.z>0?o/S.z:1:x=n!=null?y:1,A.scale.multiply(new C(y,M,x))}A.userData||(A.userData={}),_!=null&&(A.userData.m_buildingTag=_),t?.v_scene?.add(A),typeof l=="function"&&l(A)})}}const mR=Math.PI/2;class Ih{constructor(t,{homeLat:e=qc,homeLng:i=Kc,tileRange:n=2}={}){this.world=t,this.tileRange=n,this.tiles=new Map,this.droneId=null,this.textureLoader=new od,this._objectsByTag=new Map,this.homeLat=e,this.homeLng=i;const a=xc();this.displacementX=a.X,this.displacementY=a.Y,this.m_default_vehicle_sid=null,this.refLat=null,this.refLng=null,this.refAlt=null,Oc.fn_subscribe(Rc.EVT_VEHICLE_POS_CHANGED,this,(o,c)=>{if(c.sid!=o.m_default_vehicle_sid)return;const{x:_,y:l,z:u}=c.fn_translateXYZ();typeof o.updateTiles=="function"&&o.updateTiles(_,-u)}),Oc.fn_subscribe(Rc.EVT_VEHICLE_HOME_CHANGED,this,async(o,{lat:c,lng:_,alt:l})=>{o.refLat===null&&(o.refLat=c*1e-7,o.refLng=_*1e-7,o.refAlt=l,typeof o.loadMapFromHome=="function"&&await o.loadMapFromHome(c,_))})}init(t,e){this.droneId="car"+ap(),this._addCar(this.droneId,t,e,7),this._addBuildings(t,e),this._addLights(),typeof this.updateTiles=="function"&&this.updateTiles(t,e)}async loadMapFromHome(t,e,i=0,n=0){this.homeLat=t*1e-7,this.homeLng=e*1e-7;const a=xc();this.displacementX=a.X,this.displacementY=a.Y,await this._clearTiles(),this._removeExistingVehicle(),typeof this.onBeforeReload=="function"&&this.onBeforeReload(),this.droneId="car"+ap(),this._addCar(this.droneId,i,n,7),this._addLights(),typeof this.updateTiles=="function"&&this.updateTiles(i,-n),typeof this._adjustCameras=="function"&&this._adjustCameras(i,n)}_removeExistingVehicle(){if(this.droneId&&this.world.fn_getRobot(this.droneId)){const t=this.world.fn_getRobot(this.droneId);this.world.v_scene.remove(t.fn_getMesh()),this.world.fn_deleteRobot(this.droneId),this.droneId=null}}async _clearTiles(){for(const t of this.tiles.values())this._disposeNode(t),this.world?.v_scene?.remove(t);this.tiles.clear()}_disposeNode(t){t&&(t.userData?.m_physicsBody&&this.world?.v_physicsWorld&&this.world.v_physicsWorld.removeRigidBody(t.userData.m_physicsBody),t.traverse?t.traverse(e=>{e instanceof ke&&(e.material?.map&&e.material.map.dispose(),e.material?.dispose&&e.material.dispose(),e.geometry?.dispose&&e.geometry.dispose())}):t instanceof ke&&(t.material?.map&&t.material.map.dispose(),t.material?.dispose?.(),t.geometry?.dispose?.()))}_addCar(t,e,i,n){Va.create_car(e,0,i).then(a=>{const o=new vh(t,this.homeLat,this.homeLng);o.fn_createCustom(a),o.fn_setPosition(e,i,0),o.fn_castShadow(!1);let c=Math.random()*Math.PI;o.fn_setAnimate(()=>{const _=n*Math.cos(c)+e,l=n*Math.sin(c)+i;o.fn_setPosition(_,l,0),c=(c+.01)%(2*Math.PI),o.fn_setRotation(0,0,-c-mR)}),this.world.fn_registerCamerasOfObject(o),o.fn_setRotation(0,0,0),this.world.fn_addRobot(t,o),this.world.v_scene.add(o.fn_getMesh())}).catch(a=>console.error("Car load failed",a))}_addBuildings(t,e){const i=`${t},${e}`,n=[[-160,-80],[-106,-120],[-160,-160],[160,200],[160,240],[160,280]];for(const a of n)dR.create(this.world,{url:"./models/building1.json",position:{x:t+a[0],y:.01,z:e+a[1]},width:8,height:12,depth:null,rotationY:0,tag:i,onLoaded:o=>this._registerObjects(o,i)})}_addLights(){const t=new Hc(16777215,.9);this.world.v_scene.add(t)}fn_onNewTileCreated(t,e){this._addBuildings}fn_onTileRemoved(t,e){this._removeObjectsByTag(`${t},${e}`)}_registerObjects(t,e){if(!e||!t)return;const i=this._objectsByTag.get(e)||[];i.push(t),this._objectsByTag.set(e,i)}_removeObjectsByTag(t){const e=this._objectsByTag.get(t);if(!(!e||e.length===0)){for(const i of e)this._disposeNode(i),this.world?.v_scene?.remove(i);this._objectsByTag.delete(t)}}}const op=Math.PI/2;class cp extends Ih{constructor(t,e=qc,i=Kc){super(t,{homeLat:e,homeLng:i,tileRange:2}),this.m_env_name="forest",this.m_max_titles_lat=2,this.m_max_titles_lng=2,this.zoomLevel=16}updateTiles(t,e){const i=t-this.displacementX,n=-e-this.displacementY,a=this.homeLat+i/Ps,o=ki(a),c=this.homeLng+n/o,_=Math.pow(2,this.zoomLevel),l=Math.floor((c+180)/360*_),u=Math.floor((1-Math.log(Math.tan(a*Math.PI/180)+1/Math.cos(a*Math.PI/180))/Math.PI)/2*_),p=new Set,f=this.tileRange+1;for(let A=l-f;A<=l+f;A++)for(let E=u-f;E<=u+f;E++)p.add(`${A},${E}`);const d=this.tileRange+2;for(const A of this.tiles.keys()){const[E,S]=A.split(",").map(Number);if(Math.abs(E-l)>d||Math.abs(S-u)>d){const y=this.tiles.get(A),M=y?.position?.x??0,x=y?.position?.z??0;this.world.v_scene.remove(y),y.material?.map&&y.material.map.dispose(),y.material?.dispose?.(),y.geometry?.dispose?.(),this.tiles.delete(A),typeof this.fn_onTileRemoved=="function"&&this.fn_onTileRemoved(M,x)}}for(const A of p)if(!this.tiles.has(A)){const[E,S]=A.split(",").map(Number),y=(E+.5)/_*360-180,M=Math.atan(.5*(Math.exp(Math.PI-2*Math.PI*(S+.5)/_)-Math.exp(-(Math.PI-2*Math.PI*(S+.5)/_)))),x=180/Math.PI*M,I=(x-this.homeLat)*Ps-this.displacementX,w=(y-this.homeLng)*ki(x)-this.displacementY;this._addMapboxTile(I,w,E,S)}}_adjustCameras(t,e){for(let i=0;i<this.world.m_objects_attached_cameras.length;++i){const n=this.world.m_objects_attached_cameras[i];n instanceof Ke&&(n.position.set(t+5,5,e),n.lookAt(new C(t,0,e)),n.m_controls&&(n.m_controls.target.set(t,0,e),n.m_controls.update()))}}_addMapboxTile(t,e,i,n){const a=t+this.displacementX,o=e+this.displacementY,c=this.homeLat+a/Ps,_=ki(c);this.homeLng+o/_;const l=Math.pow(2,this.zoomLevel),u=i/l*360-180,f=(i+1)/l*360-180-u,d=180/Math.PI*Math.atan(.5*(Math.exp(Math.PI-2*Math.PI*n/l)-Math.exp(-(Math.PI-2*Math.PI*n/l)))),A=180/Math.PI*Math.atan(.5*(Math.exp(Math.PI-2*Math.PI*(n+1)/l)-Math.exp(-(Math.PI-2*Math.PI*(n+1)/l)))),E=d-A,S=f*_,y=E*Ps,M=i%this.m_max_titles_lng,x=n%this.m_max_titles_lat,I=`../../models/images/${this.m_env_name}/${this.m_env_name}_${M}_${x}.png?${this.zoomLevel}`,w=new fn(S,y);this.textureLoader.load(I,D=>{const m=new Gr({map:D,side:ln}),U=new ke(w,m);U.position.set(t,-.01,e),U.rotation.x=-op,U.rotation.z=-op;const q=`${i},${n}`;this.tiles.set(q,U),this.world.v_scene.add(U),typeof this.fn_onNewTileCreated=="function"&&this.fn_onNewTileCreated(t,e)},void 0,D=>{console.error("Failed to load green scene tile texture",I,D)})}}class ti{static#t=null;#e=null;#c=1e4;#s=null;#i=null;#n=null;#r=!0;constructor(){if(ti.#t)return ti.#t;ti.#t=this,this.#n=this.#_(),this.#i=this.#a()}static getInstance(){return ti.#t||(ti.#t=new ti),ti.#t}setEnabled(t){this.#r=!!t}isEnabled(){return this.#r}async#_(){if(this.#s)return;const t=document.createElement("canvas");t.width=256,t.height=256;const e=t.getContext("2d");e.fillStyle="rgba(128, 128, 128, 0.5)",e.fillRect(0,0,256,256);const i=new Image;return new Promise(n=>{i.onload=()=>{this.#s=i,n()},i.onerror=()=>{console.error("Failed to create placeholder image from canvas"),n()},i.src=t.toDataURL("image/png")})}async#a(){return this.#e?this.#e:new Promise((t,e)=>{const i=indexedDB.open("MapboxTileCache",2);i.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains("tiles")&&a.deleteObjectStore("tiles"),a.objectStoreNames.contains("metadata")&&a.deleteObjectStore("metadata"),a.createObjectStore("tiles",{keyPath:"key"}),a.createObjectStore("metadata")},i.onsuccess=n=>{this.#e=n.target.result,t(this.#e)},i.onerror=n=>{console.error("IndexedDB initialization failed:",n.target.error),e(n.target.error)}})}async#l(){await this.#i,await this.#n}async clearDatabase(){return this.#e&&(this.#e.close(),this.#e=null),new Promise((t,e)=>{const i=indexedDB.deleteDatabase("MapboxTileCache");i.onsuccess=()=>{this.#i=this.#a(),t()},i.onerror=n=>{console.error("Error deleting database:",n.target.error),e(n.target.error)},i.onblocked=()=>{console.warn("Database deletion blocked. Please close other connections."),e(new Error("Database deletion blocked."))}})}async#h(t,e=1){for(let i=0;i<=e;i++)try{const n=new Image;return n.crossOrigin="anonymous",await new Promise((a,o)=>{n.onload=a,n.onerror=()=>o(new Error(`Failed to load image: ${t}`)),n.src=t}),n}catch{if(i<e){await new Promise(a=>setTimeout(a,1e3));continue}return console.error(`Image load failed after ${e} retries: ${t}`),this.#s}}async#o(t){const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),new Promise(n=>e.toBlob(n,"image/png"))}async getImage(t,e,i,n){if(!this.#r)return await this.#h(t);await this.#l();const o=`${t.includes("terrain-rgb")?"terrain-rgb":"satellite-v9"}_${e}_${i}_${n}`,c=await this.#u(o);if(c)return c;const _=await this.#h(t);return _!==this.#s&&await this.#f(o,_),_}async#u(t){return new Promise(e=>{const a=this.#e.transaction(["tiles"],"readonly").objectStore("tiles").get(t);a.onsuccess=()=>{const o=a.result;if(!o||!o.blob){e(null);return}const c=new Image,_=URL.createObjectURL(o.blob);c.onload=()=>{URL.revokeObjectURL(_);try{const u=this.#e.transaction(["metadata"],"readwrite").objectStore("metadata"),p=u.get("lru");p.onsuccess=()=>{let f=Array.isArray(p.result)?p.result:[];f=[t,...f.filter(d=>d!==t)],u.put(f,"lru")}}catch(l){console.warn("LRU update skipped due to transaction error:",l)}e(c)},c.onerror=()=>{console.error(`Failed to load image from cached blob for key ${t}`),URL.revokeObjectURL(_),e(null)},c.src=_},a.onerror=o=>{console.error("Get from cache read failed:",o.target.error),e(null)}})}async#f(t,e){const i=await this.#o(e);return new Promise((n,a)=>{const o=this.#e.transaction(["tiles","metadata"],"readwrite"),c=o.objectStore("tiles"),_=o.objectStore("metadata");c.put({key:t,blob:i});const l=_.get("lru");l.onsuccess=()=>{let u=Array.isArray(l.result)?l.result:[];for(u=[t,...u.filter(p=>p!==t)];u.length>this.#c;){const p=u.pop();p&&c.delete(p)}_.put(u,"lru")},o.oncomplete=()=>n(),o.onerror=u=>{console.error("Add to cache transaction failed:",u.target.error),a(u.target.error)}})}async clearTiles(t){return await this.#l(),new Promise((e,i)=>{const n=this.#e.transaction(["tiles","metadata"],"readwrite"),a=n.objectStore("tiles"),o=n.objectStore("metadata"),c=a.getAllKeys();c.onsuccess=()=>{const _=c.result;for(const u of _)t.has(u)||a.delete(u);const l=o.get("lru");l.onsuccess=()=>{let u=Array.isArray(l.result)?l.result:[];u=u.filter(p=>t.has(p)),o.put(u,"lru")}},n.oncomplete=()=>e(),n.onerror=_=>{console.error("Clear tiles transaction failed:",_.target.error),i(_.target.error)}})}}const _l=Math.PI/2;class gR extends Ih{constructor(t,e=qc,i=Kc){super(t,{homeLat:e,homeLng:i,tileRange:2}),this.mapboxAccessToken="pk.eyJ1IjoibWhlZm55IiwiYSI6ImNrZW84Nm9rYTA2ZWgycm9mdmNscmFxYzcifQ.c-zxDjXCthXmRsErPzKhbQ",this.zoomLevel=14,this.baseHeight=0,this.heightScale=1,this.terrainResolution=255}setHeightScale(t){this.heightScale=t,console.warn("Height scale changed. Reload tiles to apply.")}setTerrainResolution(t){this.terrainResolution=t,console.warn("Terrain resolution changed. Reload tiles to apply.")}async loadMapFromHome(t,e,i=0,n=0){this.homeLat=t*1e-7,this.homeLng=e*1e-7,this.baseHeight=await this._getTerrainHeight(this.homeLat,this.homeLng);const a=xc();this.displacementX=a.X,this.displacementY=a.Y;for(const o of this.tiles.values())this.world.v_scene.remove(o),o.userData.m_physicsBody&&this.world.v_physicsWorld.removeRigidBody(o.userData.m_physicsBody),o.traverse(c=>{c instanceof ke&&(c.material.map&&c.material.map.dispose(),c.material.dispose(),c.geometry.dispose())});this.tiles.clear(),this.world.v_scene.children=this.world.v_scene.children.filter(o=>!o.userData?.isTile&&!(o instanceof Hc||o instanceof eh)),this._addLights(),this.updateTiles(i,-n),this._adjustCameras(i,n)}init(t,e){this._addLights(),this.updateTiles(t+10,e)}async updateTiles(t,e){const i=t-this.displacementX,n=-e-this.displacementY,a=this.homeLat+i/Ps,o=ki(a),c=this.homeLng+n/o,_=Math.pow(2,this.zoomLevel),l=Math.floor((c+180)/360*_),u=Math.sin(a*Math.PI/180),p=Math.floor((1-Math.log((1+u)/(1-u))/(2*Math.PI))/2*_),f=new Set,d=[];for(let A=-this.tileRange;A<=this.tileRange;A++)for(let E=-this.tileRange;E<=this.tileRange;E++){const S=l+A,y=p+E,M=`${S},${y}`;f.add(M),this.tiles.has(M)||d.push(this._add3DTerrainTile(S,y))}await Promise.all(d);for(const[A,E]of this.tiles)if(!f.has(A)){const S=E?.position?.x??0,y=E?.position?.z??0;this.world.v_scene.remove(E),E.userData.m_physicsBody&&this.world.v_physicsWorld.removeRigidBody(E.userData.m_physicsBody),E.traverse(M=>{M instanceof ke&&(M.material.map&&M.material.map.dispose(),M.material.dispose(),M.geometry.dispose())}),this.tiles.delete(A),typeof this.fn_onTileRemoved=="function"&&this.fn_onTileRemoved(S,y)}}_loadImage(t){return new Promise((e,i)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>e(n),n.onerror=i,n.src=t})}async _getTerrainHeight(t,e){const i=this.zoomLevel,n=Math.pow(2,i),a=Math.floor((e+180)/360*n),o=Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*n),c=a/n*360-180,_=(a+1)/n*360-180,l=t*Math.PI/180,u=Math.log(Math.tan(Math.PI/4+l/2)),p=Math.PI-o/n*2*Math.PI,f=Math.PI-(o+1)/n*2*Math.PI,d=(e-c)/(_-c),A=(p-u)/(p-f),E=Math.floor(d*256),S=Math.floor(A*256),y=`https://api.mapbox.com/v4/mapbox.terrain-rgb/${i}/${a}/${o}.png?access_token=${this.mapboxAccessToken}`,M=await ti.getInstance().getImage(y,this.zoomLevel,a,o),x=document.createElement("canvas");x.width=256,x.height=256;const I=x.getContext("2d");I.drawImage(M,0,0);const w=I.getImageData(E,S,1,1).data,D=w[0],m=w[1],U=w[2];return-1e4+(D*65536+m*256+U)*.1}async _add3DTerrainTile(t,e){const i=Math.pow(2,this.zoomLevel),n=t/i*360-180,a=(t+1)/i*360-180,o=a-n,c=180/Math.PI*Math.atan(.5*(Math.exp(Math.PI-2*Math.PI*e/i)-Math.exp(-(Math.PI-2*Math.PI*e/i)))),_=180/Math.PI*Math.atan(.5*(Math.exp(Math.PI-2*Math.PI*(e+1)/i)-Math.exp(-(Math.PI-2*Math.PI*(e+1)/i)))),l=c-_,u=(c+_)/2,p=ki(u),f=o*p,d=l*Ps,A=(u-this.homeLat)*Ps,E=((n+a)/2-this.homeLng)*p,S=`https://api.mapbox.com/v4/mapbox.terrain-rgb/${this.zoomLevel}/${t}/${e}.png?access_token=${this.mapboxAccessToken}`,y=`https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/256/${this.zoomLevel}/${t}/${e}?access_token=${this.mapboxAccessToken}`;try{const M=await ti.getInstance().getImage(S,this.zoomLevel,t,e),x=document.createElement("canvas");x.width=256,x.height=256;const I=x.getContext("2d");I.drawImage(M,0,0);const D=I.getImageData(0,0,256,256).data,m=this.terrainResolution,U=new fn(f,d,m,m),q=U.attributes.position.array;for(let X=0;X<=m;X++)for(let z=0;z<=m;z++){const J=Math.floor(z/m*255),gt=(Math.floor(X/m*255)*256+J)*4,bt=D[gt],vt=D[gt+1],Et=D[gt+2];let pt=-1e4+(bt*65536+vt*256+Et)*.1;pt=(pt-this.baseHeight)*this.heightScale;const St=(X*(m+1)+z)*3;q[St+2]=pt}U.attributes.position.needsUpdate=!0,U.computeVertexNormals();const Y=this.textureLoader.load(y,()=>{typeof this.fn_onNewTileCreated=="function"&&this.fn_onNewTileCreated(A,E)},void 0,X=>{console.error("Failed to load satellite texture",y,X)}),F=new Jl({map:Y}),it=new ke(U,F);it.rotation.x=-_l,it.rotation.z=-_l;const G=new ei;G.add(it),G.position.set(A,0,E),G.userData.isTile=!0,this.world.v_scene.add(G);const K=`${t},${e}`;this.tiles.set(K,G)}catch(M){console.error(`Failed to load terrain tile ${t},${e}:`,M)}}_adjustCameras(t,e){for(var i=0;i<this.world.v_views.length;++i)if(this.world.v_views[i].m_objects_attached_cameras){for(var n=0;n<this.world.v_views[i].m_objects_attached_cameras.length;++n)if(this.world.v_views[i].m_objects_attached_cameras[n]instanceof Ke){const a=this.world.v_views[i].m_objects_attached_cameras[n];a.position.set(t+5,50,e+5),a.lookAt(new C(t,0,e)),a.m_controls&&(a.m_controls.target.set(t,0,e),a.m_controls.update())}}}_addCar(t,e,i,n){Va.create_car(e,0,i).then(a=>{const o=new vh(t,this.homeLat,this.homeLng);o.fn_createCustom(a),o.fn_setPosition(e,i,0),o.fn_castShadow(!1);let c=Math.random()*Math.PI;o.fn_setAnimate(()=>{const _=n*Math.cos(c)+e,l=n*Math.sin(c)+i;o.fn_setPosition(_,l,0),c=(c+.01)%(2*Math.PI),o.fn_setRotation(0,0,-c-_l)}),this.world.fn_registerCamerasOfObject(o),o.fn_setRotation(0,0,0),this.world.fn_addRobot(t,o),this.world.v_scene.add(o.fn_getMesh())}).catch(a=>console.error("Car load failed",a))}}const _p=Math.PI/2;class AR extends Ih{constructor(t,e=qc,i=Kc){super(t,{homeLat:e,homeLng:i,tileRange:2}),this.pendingTiles=new Set,this.mapboxAccessToken="pk.eyJ1IjoibWhlZm55IiwiYSI6ImNrZW84Nm9rYTA2ZWgycm9mdmNscmFxYzcifQ.c-zxDjXCthXmRsErPzKhbQ",this.zoomLevel=16}updateTiles(t,e){const i=t-this.displacementX,n=-e-this.displacementY,a=this.homeLat+i/Ps,o=ki(a),c=this.homeLng+n/o,_=Math.pow(2,this.zoomLevel),l=Math.floor((c+180)/360*_),u=Math.floor((1-Math.log(Math.tan(a*Math.PI/180)+1/Math.cos(a*Math.PI/180))/Math.PI)/2*_),p=new Set,f=this.tileRange+1;for(let A=l-f;A<=l+f;A++)for(let E=u-f;E<=u+f;E++)p.add(`${A},${E}`);const d=this.tileRange+2;for(const A of this.tiles.keys()){const[E,S]=A.split(",").map(Number);if(Math.abs(E-l)>d||Math.abs(S-u)>d){const y=this.tiles.get(A),M=y?.position?.x??0,x=y?.position?.z??0;this.world.v_scene.remove(y),y.material?.map&&y.material.map.dispose(),y.material?.dispose?.(),y.geometry?.dispose?.(),this.tiles.delete(A),typeof this.fn_onTileRemoved=="function"&&this.fn_onTileRemoved(M,x)}}for(const A of p)if(!this.tiles.has(A)&&!this.pendingTiles.has(A)){const[E,S]=A.split(",").map(Number),y=(E+.5)/_*360-180,M=Math.atan(.5*(Math.exp(Math.PI-2*Math.PI*(S+.5)/_)-Math.exp(-(Math.PI-2*Math.PI*(S+.5)/_)))),x=180/Math.PI*M,I=(x-this.homeLat)*Ps-this.displacementX,w=(y-this.homeLng)*ki(x)-this.displacementY;this.pendingTiles.add(A),this._addMapboxTile(I,w,E,S).catch(D=>console.error("Tile load failed",A,D)).finally(()=>this.pendingTiles.delete(A))}}_adjustCameras(t,e){if(!(!this.world||!Array.isArray(this.world.v_views)))for(let i=0;i<this.world.v_views.length;++i){const n=this.world.v_views[i],a=n?.m_objects_attached_cameras||n?.v_localCameras||[];for(let o=0;o<a.length;++o){const c=a[o]&&(a[o].m_cameraThree instanceof Ke?a[o].m_cameraThree:a[o]);c instanceof Ke&&(c.position.set(t+5,5,e),c.lookAt(new C(t,0,e)),c.m_controls&&(c.m_controls.target.set(t,0,e),c.m_controls.update()))}}}async _addMapboxTile(t,e,i,n){const a=t+this.displacementX,o=e+this.displacementY,c=this.homeLat+a/Ps,_=ki(c);this.homeLng+o/_;const l=Math.pow(2,this.zoomLevel),u=i/l*360-180,f=(i+1)/l*360-180-u,d=180/Math.PI*Math.atan(.5*(Math.exp(Math.PI-2*Math.PI*n/l)-Math.exp(-(Math.PI-2*Math.PI*n/l)))),A=180/Math.PI*Math.atan(.5*(Math.exp(Math.PI-2*Math.PI*(n+1)/l)-Math.exp(-(Math.PI-2*Math.PI*(n+1)/l)))),E=d-A,S=f*_,y=E*Ps,M=`https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/256/${this.zoomLevel}/${i}/${n}?access_token=${this.mapboxAccessToken}`,x=await ti.getInstance().getImage(M,this.zoomLevel,i,n);if(!x){console.error(`Failed to load tile image for ${i},${n}`);return}const I=new Yp(x);I.flipY=!0,I.generateMipmaps=!0,I.minFilter=Pr,I.magFilter=Rs,I.wrapS=fs,I.wrapT=fs,I.encoding=yn;const w=new fn(S,y),D=new Gr({map:I,side:ln,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1}),m=new ke(w,D);m.position.set(t,-.01,e),m.rotation.x=-_p,m.rotation.z=-_p;const U=`${i},${n}`,q=this.tiles.get(U);q&&(this.world.v_scene.remove(q),q.material?.map&&q.material.map.dispose(),q.material?.dispose?.(),q.geometry?.dispose?.(),this.tiles.delete(U)),this.tiles.set(U,m),this.world.v_scene.add(m),typeof this.fn_onNewTileCreated=="function"&&this.fn_onNewTileCreated(t,e)}}async function yR(){const r=window.sceneType,t=new Ex(0,0);t.fn_initTHREE(document.documentElement.clientWidth/2.1,document.documentElement.clientHeight/2.1),["map3D_1","map3D_2","map3D_3","map3D_4"].forEach((i,n)=>{const a=document.getElementById(i);let o=a.parentNode;o.classList.contains("map3D_container")||(o=document.createElement("div"),o.className="map3D_container",o.id=`container${n+1}`,a.parentNode.insertBefore(o,a),o.appendChild(a)),t.fn_addCanvas(a,i==="map3D_4")});let e;return r==="realmap"?e=new gR(t):r==="greengrass"?e=new cp(t):r==="map_box"?e=new AR(t):(console.warn(`Unknown scene type: ${r}. Defaulting to CGrassScene.`),e=new cp(t)),await t.fn_initPhysics(),t.m_scene_env=e,t.m_scene_env.init(0,0),t}function ER(r){r.fn_animate(),new _R().fn_initWebsocket(r)}async function MR(){var r=cg("canvas")[0];r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight;const t=await yR();ER(t)}document.addEventListener("DOMContentLoaded",MR);
